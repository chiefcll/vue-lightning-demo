{"version":3,"mappings":"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","names":["createWebGLContext","canvas","contextSpy","config","gl","target","prop","value","assertTruthy","condition","message","isProductionEnvironment","mergeColorProgress","rgba1","rgba2","p","r1","g1","b1","a1","r2","g2","b2","a2","r","g","b","a","mergeColorAlpha","rgba","alpha","premultiplyRGB","setPremultiplyMode","mode","mergeColorAlphaPremultiplied","flipEndianess","newAlpha","rgbAlpha","hasOwn","obj","define_import_meta_env_default","TextureUsageTracker","releaseCallback","__publicField","ManualCountTextureUsageTracker","options","now","thresholdMs","textureRefInfo","texture","textureId","_a","FinalizationRegistryTextureUsageTracker","_b","EventEmitter","event","listener","listeners","index","onceListener","data","stylePropertyMap","v","x","y","w","h","convertColorToRgba","color","domPropertyMap","Inspector","settings","rect","top","left","node","properties","div","key","driver","property","receiver","props","anim","parentId","parent","mappedStyleResponse","keyValue","duration","delay","width","height","rotation","scale","animate","CoreShader","createShader","glw","type","source","shader","createProgram","vertexShader","fragmentShader","program","isWebGl2","WebGlCoreShader","renderer","webGl2","requiredExtensions","glVersion","extensionName","shaderSources","textureUnits","vertexSource","fragmentSource","vao","attributeName","location","buffer","uniform","attribute","loc","propsA","propsB","renderOp","dimensions","name","resolvedBuffer","resolvedInfo","textures","ShaderEffect","ref","uniformInfo","passParameters","declaredUniforms","uniforms","unif","uniType","uniformName","define","res","u","uni","Texture","txManager","owner","renderable","state","args","loadedArgs","failedArgs","trPropSetterDefaults","TextRenderer","stage","propSetters","setter","status","error","eventName","getNormalizedRgbaComponents","getRgbaComponents","getNormalizedAlphaComponent","getRgbaString","createBound","x1","y1","x2","y2","out","intersectBound","intersection","boundsOverlap","convertBoundToRect","bound","intersectRect","copyRect","compareRect","boundInsideBound","bound1","bound2","isBoundPositive","TrFontFace","fontFamily","descriptors","WebTrFontFace","fontUrl","fontUrlWithoutParentheses","determinedDescriptors","cssDescriptors","fontFace","MAX_TEXTURE_DIMENSION","calcHeight","textBaseline","fontSize","lineHeight","numLines","offsetY","baselineOffset","LightningTextTextureRenderer","context","ff","ffs","i","n","fontSetting","err","renderInfo","precision","paddingLeft","paddingRight","wordWrapWidth","cutSx","cutEx","cutSy","cutEy","letterSpacing","textIndent","innerWidth","suffix","linesInfo","lines","usedLines","otherLines","al","j","m","maxLineWidth","lineWidths","lineWidth","linesOverride","linePositionX","linePositionY","drawLines","hlHeight","offset","hlPaddingLeft","hlPaddingRight","drawLine","prevShadowSettings","textSplit","word","suffixWidth","wordLen","wordWidth","cutoffIndex","truncWordWidth","text","indent","allLines","realNewlines","resultLines","result","spaceLeft","words","wordWidthWithSpace","space","acc","char","resolvedGlobal","globalFontSet","getFontCssString","fontStyle","fontWeight","fontStretch","tmpElementBounds","CanvasTextRenderer","cssString","maxLines","containedMaxLines","calcMaxLines","scrollY","contain","visibleWindow","renderWindow","canvasPages","elementBounds","visibleWindowHeight","maxLinesPerCanvasPage","renderWindowScreenX1","renderWindowScreenY1","renderWindowScreenX2","renderWindowScreenY2","pageHeight","page1Block","page1LineStart","page0LineStart","page2LineStart","scrollYNearestPage","pageInfo","transform","clippingRect","textW","textH","elementRect","pageSize","zIndex","combinedAlpha","quadColor","_d","_c","_f","_e","_h","_g","_j","_i","_l","_k","_ColorTexture","pixelData32","pixelData8","ColorTexture","CoreContextTexture","memManager","textureSource","CoreRenderer","CoreRenderOp","WebGlCoreRenderOp","buffers","shaderProps","bufferIdx","maxTextures","existingIdx","t","newIdx","shManager","quadIdx","pixelRatio","canvasHeight","clipX","clipWidth","clipHeight","clipY","getWebGlParameters","params","getWebGlExtensions","extensions","createIndexBuffer","size","maxQuads","indices","isHTMLImageElement","memize","fn","head","tail","memoized","len","searchCache","isPowerOfTwo","getTimingBezier","c","d","xc","xb","xa","yc","yb","ya","time","cbx","cbxd","dx","it","minT","maxT","getTimingFunction","memo","str","s","parts","TRANSPARENT_TEXTURE_DATA","WebGlCoreCtxTexture","textureData","mipmaps","glInternalFormat","view","nativeTexture","_SubTexture","parentTx","SubTexture","WebGlCoreCtxSubTexture","DefaultShader","DefaultShaderBatched","samplers","idx","effectCache","getResolvedEffect","effects","effectContructors","effect","_DynamicShader","regEffects","results","eff","fxClass","uniInfo","fxProp","propInfo","propsEffectsLen","effectA","effectB","effectNameCount","methods","declareUniforms","uFx","baseClass","nr","effectMethods","fx","fxProps","remap","cm","fxMethod","onShaderMask","onColorize","onEffectMask","reg","methodParameters","pm","sharedMethods","currentMask","drawEffects","current","currentClass","next","effectMethod","methodCollection","increment","DynamicShader","RoundedRectangle","IDENTITY_MATRIX_3x3","_SdfShader","resolvedProps","components","SdfShader","RadiusEffect","BorderEffect","_LinearGradientEffect","colors","stops","colorsL","tmp","rgbas","val","amount","loop","LinearGradientEffect","GrayscaleEffect","BorderRightEffect","BorderTopEffect","BorderBottomEffect","BorderLeftEffect","GlitchEffect","FadeOutEffect","_RadialGradientEffect","RadialGradientEffect","RadialProgressEffect","HolePunchEffect","ROUNDED_RECTANGLE_SHADER_TYPE","UnsupportedShader","shType","CoreShaderManager","shClass","effectType","effectClass","ShaderClass","cacheKey","BufferCollection","item","WebGlContextWrapper","maxTextureUnits","_","scissorBox","textureUnit","activeTextureUnit","texture2dUnits","pname","param","texture2dParams","activeTexture","textureParams","level","internalFormat","widthOrFormat","heightOrType","borderOrSource","format","pixels","internalformat","border","red","green","blue","enable","scissorEnabled","scissorX","scissorY","scissorWidth","scissorHeight","blend","blendEnabled","src","dst","blendSrcRgb","blendDstRgb","blendSrcAlpha","blendDstAlpha","usage","boundArrayBuffer","boundElementArrayBuffer","normalized","stride","curProgram","programUniforms","uniformArgs","compareArrays","count","vertexArray","WORDS_PER_QUAD","WebGlCoreRenderer","clearColor","bufferMemory","quadBuffer","fQuadBuffer","uiQuadBuffer","colorTl","colorTr","colorBl","colorBr","textureOptions","tx","ty","ta","tb","tc","td","curRenderOp","targetDims","targetShader","flipX","flipY","texCoordX1","texCoordY1","texCoordX2","texCoordY2","tw","th","parentW","parentH","ctxTexture","textureIdx","rightCornerX","rightCornerY","recursive","surface","arr","isCompressedTextureContainer","url","loadCompressedTexture","arrayBuffer","loadKTXData","loadPVRData","littleEndian","imageSize","header","dataOffset","pvrtcData","_ImageTexture","mimeType","premultiplyAlpha","blob","hasAlphaChannel","img","resolve","reject","e","ImageTexture","SpecialCodepoints","FontShaper","SdfFontShaper","glyphMap","kernings","kerning","second","firsts","codepoints","codepointResult","lastGlyphId","codepoint","glyph","SdfTrFontFace","atlasUrl","atlasDataUrl","response","maxCharHeight","charHeight","glyphId","FLOATS_PER_GLYPH","getStartConditions","sdfFontSize","sdfLineHeight","verticalAlign","fontSizeRatio","lineCache","startLineIndex","sdfStartX","sdfVerticalAlignYOffset","sdfStartY","PeekableIterator","iterator","indexBase","nextResult","getUnicodeCodepoints","start","codePoint","measureText","shaperProps","shaper","glyphs","layoutText","curLineIndex","startX","startY","textAlign","vertexBuffer","rwSdf","trFontFace","forceFullLayoutCalc","scrollable","overflowSuffix","vertexLineHeight","vertexW","vertexLSpacing","startingLineCacheEntry","startingCodepointIndex","startingMaxX","startingMaxY","maxX","maxY","curX","curY","bufferOffset","lastWord","glyphResult","curLineBufferStart","bufferLineInfos","vertexTruncateHeight","overflowSuffVertexWidth","moreLines","nextLineWillFit","lineVertexW","xStartLastWordBoundary","lineIsBelowWindowTop","lineIsAboveWindowBottom","lineIsWithinWindow","charEndX","quadX","quadY","atlasEntry","uvWidth","uvHeight","vertexTextW","line","xOffset","roundUpToMultiple","multiple","roundDownToMultiple","setRenderWindow","outRenderWindow","bufferMargin","screen","sdf","y1Base","weightConversions","fontWeightToNumber","weight","rawResolveFontToUse","familyMapsByPriority","family","weightIn","style","stretch","fontFamiles","fontFaces","weightMap","fontFamilyWeight","msg","resolveFontToUse","TrFontManager","textRenderers","font","trId","tr","tmpRect","SdfTextRenderer","familyName","faceSet","debugData","neededLength","rwScreen","out2","debug","distanceRange","bufferUploaded","webGlBuffers","webGlBuffer","CoreExtension","classExtendsCoreExtension","Class","loadCoreExtension","coreExtensionModule","module","__vitePreload","ExtensionClass","coreExtension","santizeCustomDataMap","validTypes","keys","valueType","RendererMain","resolvedSettings","appWidth","appHeight","deviceLogicalPixelRatio","devicePhysicalPixelRatio","enableInspector","useFinalizationRegistryTracker","deviceLogicalWidth","deviceLogicalHeight","targetEl","fpsData","frameTickData","textureType","id","desc","shaderType","CoreAnimation","propName","startValue","endValue","dt","easing","stopMethod","propValue","easingProgressValue","easingColorValue","CoreAnimationController","manager","animation","promise","m0","m1","m2","m3","m4","m5","m6","m7","m8","Matrix3d","entries","tempMatrix","e0","e1","e2","e3","e4","e5","e6","e7","e8","sx","sy","angle","cos","sin","transpose","other","rx1","rx2","rx3","rx4","ry1","ry2","ry3","ry4","RenderCoords","x3","y3","x4","y4","CoreNodeRenderState","CoreNodeRenderStateMap","UpdateType","CoreNode","pivotTranslateX","pivotTranslateY","mountTranslateX","mountTranslateY","delta","parentClippingRect","childUpdateType","child","rectW","rectH","renderM","renderState","previous","newIsRenderable","isRenderable","minX","minY","renderCoords","gt","clipping","isRotated","z","premultipliedColorTl","premultipliedColorTr","premultipliedColorBl","premultipliedColorBr","worldAlpha","newParent","oldParent","nextId","getNewId","MainOnlyNode","rendererMain","coreNode","payload","imageUrl","startLoop","isIdle","runLoop","getTimeStamp","AnimationManager","ImageWorkerManager","numImageWorkers","worker","numWorkers","workerCode","blobURL","workers","absoluteSrcUrl","_NoiseTexture","NoiseTexture","CoreTextureManager","textureClass","TextureClass","descId","textureDescId","textureIdCache","textureRefCountMap","refCountObj","ContextSpy","TextureMemoryManager","byteThreshold","byteSize","WHITE","parseColor","abgr","formatRgba","CanvasCoreTexture","mult","image","tintedImage","ctx","getRadius","quad","CanvasCoreRenderer","frame","hasTransform","hasClipping","hasGradient","radius","path","endX","endY","endColor","gradient","Stage","rootId","boundsMargin","enableContextSpy","txMemByteThreshold","renderMode","bm","debugInfo","rendererOptions","rootNode","animationManager","renderRequested","fpsUpdateInterval","fps","trProps","textRendererOverride","rendererId","overrideFallback","possibleRenderer","resolvedTextRenderer","CoreTextNode","setWidth","setHeight","calcWidth","textRendererState","MainOnlyTextNode","MainCoreDriver","rendererSettings","startLightningRenderer","Children","beforeNode","nodeIndexToRemove","isDevEnv","isDev","hasDebug","isObject","log","isFunc","isArray","isString","isNumber","keyExists","flattenStyles","States","callback","initialState","__super","_key","stateIndexToRemove","calculateFlex","children","hasOrder","numChildren","isRow","dimension","crossDimension","marginOne","marginTwo","crossProp","containerSize","containerCrossSize","gap","justify","align","itemSize","prev","crossAlignChild","calculatedSize","toPad","makeMap","expectsLowerCase","set","EMPTY_OBJ","EMPTY_ARR","NOOP","NO","isOn","isModelListener","extend","remove","el","hasOwnProperty","isMap","toTypeString","isSet","isFunction","isSymbol","isPromise","objectToString","toRawType","isPlainObject","isIntegerKey","isReservedProp","cacheStringFunction","cache","camelizeRE","camelize","hyphenateRE","hyphenate","capitalize","toHandlerKey","hasChanged","oldValue","invokeArrayFns","fns","arg","def","writable","looseToNumber","_globalThis","getGlobalThis","normalizeStyle","parseStringStyle","listDelimiterRE","propertyDelimiterRE","styleCommentRE","cssText","ret","normalizeClass","toDisplayString","replacer","val2","stringifySymbol","activeEffectScope","EffectScope","detached","currentEffectScope","fromParent","l","last","recordEffectScope","scope","getCurrentScope","activeEffect","ReactiveEffect","trigger","scheduler","pauseTracking","dep","triggerComputed","resetTracking","lastShouldTrack","shouldTrack","lastEffect","preCleanupEffect","postCleanupEffect","computed","effect2","cleanupDepEffect","trackId","pauseScheduleStack","trackStack","pauseScheduling","resetScheduling","queueEffectSchedulers","trackEffect","debuggerEventExtraInfo","oldDep","triggerEffects","dirtyLevel","tracking","createDep","cleanup","targetMap","ITERATE_KEY","MAP_KEY_ITERATE_KEY","track","depsMap","newValue","oldTarget","deps","newLength","key2","isNonTrackableKeys","builtInSymbols","arrayInstrumentations","createArrayInstrumentations","instrumentations","toRaw","BaseReactiveHandler","_isReadonly","_isShallow","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","targetIsArray","isRef","readonly","reactive","MutableReactiveHandler","isOldValueReadonly","isReadonly","isShallow","hadKey","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","shallowReactiveHandlers","toShallow","getProto","get","rawTarget","rawKey","has2","wrap","toReadonly","toReactive","has","add","get2","deleteEntry","clear","hadItems","createForEach","thisArg","observed","createIterableMethod","method","targetIsMap","isPair","isKeyOnly","innerIterator","done","createReadonlyMethod","createInstrumentations","mutableInstrumentations2","shallowInstrumentations2","readonlyInstrumentations2","shallowReadonlyInstrumentations2","mutableInstrumentations","readonlyInstrumentations","shallowInstrumentations","shallowReadonlyInstrumentations","createInstrumentationGetter","shallow","mutableCollectionHandlers","shallowCollectionHandlers","readonlyCollectionHandlers","targetTypeMap","rawType","getTargetType","createReactiveObject","shallowReactive","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","proxy","isReactive","isProxy","raw","markRaw","ComputedRefImpl","getter","_setter","isSSR","triggerRefValue","self","trackRefValue","getterOrOptions","debugOptions","onlyGetter","ref2","newVal","createRef","rawValue","RefImpl","__v_isShallow","useDirectValue","unref","shallowUnwrapHandlers","proxyRefs","objectWithRefs","activeElement","setActiveElement","defaultAnimationSettings","layoutQueue","queueLayout","convertEffectsToShader","styleEffects","borderAccessor","direction","LightningRendererNumberProps","LightningRendererNonAnimatingProps","ElementNode","animationSettings","focusedIndex","_node","loadedPayload","events","values","found","states","changedLayout","stylesToUndo","styleKey","newStyles","styles","handler","inode","callWithErrorHandling","instance","handleError","callWithAsyncErrorHandling","throwInDev","contextVNode","cur","exposedInstance","errorInfo","errorCapturedHooks","appErrorHandler","logError","isFlushing","isFlushPending","queue","flushIndex","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","resolvedPromise","currentFlushPromise","nextTick","findInsertionIndex","end","middle","middleJob","middleJobId","getId","queueJob","job","queueFlush","flushJobs","invalidateJob","queuePostFlushCb","cb","flushPreFlushCbs","seen","flushPostFlushCbs","deduped","comparator","diff","emit","rawArgs","modelArg","modifiersKey","number","trim","handlerName","onceHandler","normalizeEmitsOptions","comp","appContext","asMixin","cached","hasExtends","extendEmits","raw2","normalizedFromExtend","isEmitListener","currentRenderingInstance","currentScopeId","setCurrentRenderingInstance","withCtx","isNonScopedSlot","renderFnWithContext","setBlockTracking","prevInstance","renderComponentRoot","Component","vnode","withProxy","propsOptions","slots","attrs","render","renderCache","setupState","inheritAttrs","fallthroughAttrs","proxyToUse","thisProxy","normalizeVNode","render2","getFunctionalFallthrough","blockStack","createVNode","Comment","root","shapeFlag","filterModelListeners","cloneVNode","shouldUpdateComponent","prevVNode","nextVNode","optimized","prevProps","prevChildren","component","nextProps","nextChildren","patchFlag","emits","hasPropsChanged","dynamicProps","emitsOptions","nextKeys","updateHOCHostEl","NULL_DYNAMIC_COMPONENT","isSuspense","queueEffectWithSuspense","suspense","ssrContextKey","useSSRContext","inject","INITIAL_WATCHER_VALUE","watch","doWatch","immediate","deep","flush","once","onTrack","onTrigger","_cb","unwatch","currentInstance","reactiveGetter","source2","traverse","forceTrigger","isMultiSource","onCleanup","baseGetter","ssrCleanup","isInSSRComponentSetup","queuePostRenderEffect","instanceWatch","publicThis","createPathGetter","reset","setCurrentInstance","segments","depth","invokeDirectiveHook","bindings","oldBindings","binding","hook","isAsyncWrapper","isKeepAlive","onActivated","registerKeepAliveHook","onDeactivated","wrappedHook","injectHook","injectToKeepAliveRoot","keepAliveRoot","injected","onUnmounted","prepend","hooks","createHook","lifecycle","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onServerPrefetch","onRenderTriggered","onRenderTracked","onErrorCaptured","renderList","renderItem","getPublicInstance","isStatefulComponent","getExposeProxy","publicPropertiesMap","resolveMergedOptions","hasSetupBinding","PublicInstanceProxyHandlers","accessCache","normalizedProps","shouldCacheAccess","publicGetter","cssModule","globalProperties","descriptor","normalizePropsOrEmits","applyOptions","callHook","dataOptions","computedOptions","watchOptions","provideOptions","injectOptions","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","serverPrefetch","expose","directives","filters","resolveInjections","methodHandler","opt","createWatcher","provides","provide","registerLifecycleHook","register","_hook","exposed","checkDuplicateProperties","normalizeInject","base","mixins","extendsOptions","globalMixins","optionMergeStrategies","resolved","mergeOptions","to","from","strats","strat","internalOptionMergeStrats","mergeDataFn","mergeEmitsOrPropsOptions","mergeObjectOptions","mergeAsArray","mergeWatchOptions","mergeInject","merged","createAppContext","uid$1","createAppAPI","hydrate","rootComponent","rootProps","installedPlugins","isMounted","app","version","plugin","mixin","directive","rootContainer","isHydrate","namespace","lastApp","currentApp","parentProvides","defaultValue","treatDefaultAsFactory","internalObjectProto","createInternalObject","isInternalObject","initProps","rawProps","isStateful","setFullProps","updateProps","rawPrevProps","rawCurrentProps","hasAttrsChanged","propsToUpdate","camelizedKey","resolvePropValue","kebabKey","needCastKeys","rawCastValues","camelKey","castValues","isAbsent","hasDefault","propsDefaults","normalizePropsOptions","extendProps","normalizedKey","validatePropName","booleanIndex","getTypeIndex","stringIndex","getType","ctor","isSameType","expectedTypes","isInternalKey","normalizeSlotValue","normalizeSlot","rawSlot","normalizeObjectSlots","rawSlots","normalizeVNodeSlots","initSlots","updateSlots","needDeletionCheck","deletionComparisonTarget","setRef","rawRef","oldRawRef","parentSuspense","isUnmount","refValue","oldRef","refs","_isString","_isRef","doSet","existing","createRenderer","baseCreateRenderer","createHydrationFns","hostInsert","hostRemove","hostPatchProp","hostCreateElement","hostCreateText","hostCreateComment","hostSetText","hostSetElementText","hostParentNode","hostNextSibling","hostSetScopeId","hostInsertStaticContent","patch","n1","n2","container","anchor","parentComponent","slotScopeIds","isSameVNodeType","getNextHostNode","unmount","Text","processText","processCommentNode","Static","mountStaticNode","Fragment","processFragment","processElement","processComponent","internals","moveStaticNode","nextSibling","removeStaticNode","mountElement","patchElement","vnodeHook","transition","dirs","mountChildren","resolveChildrenNamespace","setScopeId","unmountChildren","invokeVNodeHook","needCallTransitionHooks","needTransition","scopeId","subTree","parentVNode","cloneIfMounted","dynamicChildren","oldProps","newProps","toggleRecurse","patchBlockChildren","patchChildren","patchProps","oldChildren","newChildren","fallbackContainer","oldVNode","newVNode","fragmentStartAnchor","fragmentEndAnchor","fragmentSlotScopeIds","traverseStaticChildren","mountComponent","updateComponent","initialVNode","createComponentInstance","setupComponent","setupRenderEffect","placeholder","updateComponentPreRender","componentUpdateFn","bu","nonHydratedAsyncRoot","locateNonHydratedAsyncRoot","originNext","nextTree","prevTree","isAsyncWrapperVNode","hydrateNode","hydrateSubTree","scopedInitialVNode","update","c1","prevShapeFlag","c2","patchKeyedChildren","patchUnkeyedChildren","oldLength","commonLength","nextChild","parentAnchor","l2","nextPos","s1","s2","keyToNewIndexMap","patched","toBePatched","moved","maxNewIndexSoFar","newIndexToOldIndexMap","prevChild","newIndex","increasingNewIndexSequence","getSequence","nextIndex","move","moveType","leave","delayLeave","afterLeave","remove2","performLeave","doRemove","shouldInvokeDirs","shouldInvokeVnodeHook","unmountComponent","removeFragment","performRemove","bum","um","currentNamespace","allowed","ch1","ch2","arrI","subComponent","isTeleport","currentBlock","openBlock","disableTracking","closeBlock","isBlockTreeEnabled","setupBlock","createElementBlock","createBaseVNode","isVNode","normalizeKey","normalizeRef","ref_key","ref_for","ref3","isBlockNode","needFullChildrenNormalization","normalizeChildren","_createVNode","cloned","isClassComponent","guardReactiveProps","klass","extraProps","mergeRef","cloneTransition","mergedProps","mergeProps","createTextVNode","flag","slot","slotFlag","toMerge","incoming","emptyAppContext","uid","internalSetCurrentInstance","setInSSRSetupState","registerGlobalSetter","setters","unsetCurrentInstance","setupResult","setupStatefulComponent","setup","setupContext","createSetupContext","resolvedResult","handleSetupResult","finishComponentSetup","compile","skipOptions","template","isCustomElement","compilerOptions","delimiters","componentCompilerOptions","finalCompilerOptions","attrsProxyHandlers","computed$1","nodeOps","textNode","prevValue","query","patchProp","createApp","code","Config","baseCreateApp","API_KEY_V4","API_BASE","tmdbConfig","baseImageUrl","basePosterSize","defaultFetchParams","getImageUrl","posterSize","_get","loadConfig","api","truncateString","maxLength","chunkArray","array","convertItemsToTiles","items","leftoverTiles","browseProvider","filter","pageIndex","trending","tiles","chunks","blockWidth","ContentBlockStyle","HeadlineStyles","DescriptionStyles","keyMapEntries","focusPath","setFocusPath","useFocusManager","userKeyMap","prevFocusPath","currentFocusedElm","prevFocusedElm","fp","elm","keyDownHandler","mappedKeyEvent","finalFocusElm","onKeyHandler","handleNavigation","lastSelected","active","num","DuneDescription","rows","column","bgStyles","handleRight","handleLeft","handleUp","handleDown","Thumbnail","App"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104],"sources":["../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/TextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/ManualCountTextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/common/EventEmitter.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/main-api/Inspector.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/ShaderUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/WebGlUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/ShaderEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/textures/Texture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/TextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/TrFontFace.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/WebTrFontFace.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/LightningTextTextureRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/CanvasTextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/textures/ColorTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreContextTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderOp.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderOp.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/RendererUtils.js","../../node_modules/.pnpm/memize@2.1.0/node_modules/memize/dist/index.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/textures/SubTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxSubTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShaderBatched.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DynamicShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/RoundedRectangle.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/SdfShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadiusEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/LinearGradientEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GrayscaleEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderRightEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderTopEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderBottomEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderLeftEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GlitchEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/FadeOutEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialGradientEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialProgressEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/HolePunchEffect.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/shaders/UnsupportedShader.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/CoreShaderManager.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/BufferCollection.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/WebGlContextWrapper.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/textureCompression.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/textures/ImageTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/SpecialCodepoints.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/FontShaper.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/SdfFontShaper.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/SdfTrFontFace.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/constants.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getStartConditions.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/PeekableGenerator.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getUnicodeCodepoints.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/measureText.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/layoutText.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/util.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/setRenderWindow.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/TrFontManager.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/SdfTextRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/CoreExtension.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/render-drivers/utils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/main-api/RendererMain.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimation.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimationController.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/Matrix3d.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/RenderCoords.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/CoreNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/platform.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/animations/AnimationManager.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/ImageWorker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/textures/NoiseTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/CoreTextureManager.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/lib/ContextSpy.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/TextureMemoryManager.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/internal/ColorUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/CanvasCoreTexture.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/internal/C2DShaderUtils.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/renderers/canvas/CanvasCoreRenderer.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/Stage.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/core/CoreTextNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyTextNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.8.3/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainCoreDriver.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/lightningInit.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/node/children.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/config.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/utils.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/node/states.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/flex.js","../../node_modules/.pnpm/@vue+shared@3.4.26/node_modules/@vue/shared/dist/shared.esm-bundler.js","../../node_modules/.pnpm/@vue+reactivity@3.4.26/node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/vue/activeElement.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/core/node/elementNode.js","../../node_modules/.pnpm/@vue+runtime-core@3.4.26/node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/vue/vueOps.js","../../node_modules/.pnpm/lightning-vue@0.0.1_@lightningjs+renderer@0.8.3_@vue+reactivity@3.4.26_@vue+runtime-core@3.4._3fx2id4ydjxyf3e6tf635fjosy/node_modules/lightning-vue/dist/vue/render.js","../../src/api/key.ts","../../src/api/index.ts","../../src/api/formatters/ItemFormatter.ts","../../src/api/providers/browse.ts","../../src/components/ContentBlock.vue","../../src/keyhandling.ts","../../src/handleNavigation.ts","../../src/App.vue","../../src/main.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function createWebGLContext(canvas, contextSpy) {\n    const config = {\n        alpha: true,\n        antialias: false,\n        depth: false,\n        stencil: true,\n        desynchronized: false,\n        // Disabled because it prevents Visual Regression Tests from working\n        // failIfMajorPerformanceCaveat: true,\n        powerPreference: 'high-performance',\n        premultipliedAlpha: true,\n        preserveDrawingBuffer: false,\n    };\n    const gl = \n    // TODO: Remove this assertion once this issue is fixed in TypeScript\n    // https://github.com/microsoft/TypeScript/issues/53614\n    (canvas.getContext('webgl', config) ||\n        canvas.getContext('experimental-webgl', config));\n    if (!gl) {\n        throw new Error('Unable to create WebGL context');\n    }\n    if (contextSpy) {\n        // Proxy the GL context to log all GL calls\n        return new Proxy(gl, {\n            get(target, prop) {\n                const value = target[prop];\n                if (typeof value === 'function') {\n                    contextSpy.increment(String(prop));\n                    return value.bind(target);\n                }\n                return value;\n            },\n        });\n    }\n    return gl;\n}\n/**\n * Asserts a condition is truthy, otherwise throws an error\n *\n * @remarks\n * Useful at the top of functions to ensure certain conditions, arguments and\n * properties are set/met before continuing. When using this function,\n * TypeScript will narrow away falsy types from the condition.\n *\n * @param condition\n * @param message\n * @returns\n */\nexport function assertTruthy(condition, message) {\n    if (isProductionEnvironment())\n        return;\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n/**\n * Merges two colors based on a given progress value.\n *\n * This function takes two colors (c1 and c2) represented as 32-bit integers\n * in RGBA format and blends them based on the provided progress value (p).\n * The result is a new color that is a weighted combination of the input colors,\n * where the weight is determined by the progress value.\n *\n * @param {number} c1 - The first color in RGBA format (32-bit integer).\n * @param {number} c2 - The second color in RGBA format (32-bit integer).\n * @param {number} p - The progress value between 0 and 1.\n * @returns {number} The merged color as a 32-bit integer in RGBA format.\n */\nexport function mergeColorProgress(rgba1, rgba2, p) {\n    const r1 = Math.trunc(rgba1 >>> 24);\n    const g1 = Math.trunc((rgba1 >>> 16) & 0xff);\n    const b1 = Math.trunc((rgba1 >>> 8) & 0xff);\n    const a1 = Math.trunc(rgba1 & 0xff);\n    const r2 = Math.trunc(rgba2 >>> 24);\n    const g2 = Math.trunc((rgba2 >>> 16) & 0xff);\n    const b2 = Math.trunc((rgba2 >>> 8) & 0xff);\n    const a2 = Math.trunc(rgba2 & 0xff);\n    const r = Math.round(r2 * p + r1 * (1 - p));\n    const g = Math.round(g2 * p + g1 * (1 - p));\n    const b = Math.round(b2 * p + b1 * (1 - p));\n    const a = Math.round(a2 * p + a1 * (1 - p));\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter.\n *\n * @internalRemarks\n * This method does NOT premultiply the alpha into the color channels. If that\n * is required (for internal use only) use {@link mergeColorAlphaPremultiplied}\n * instead.\n *\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @returns\n */\nexport function mergeColorAlpha(rgba, alpha) {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = Math.trunc((rgba & 0xff) * alpha);\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\nlet premultiplyRGB = true;\n/**\n * RGB components should not be premultiplied when using Canvas renderer\n * @param mode  Renderer mode\n */\nexport function setPremultiplyMode(mode) {\n    premultiplyRGB = mode === 'webgl';\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter.\n *\n * For the webGl renderer, each color channel is premultiplied by the final alpha value.\n *\n * @remarks\n * If `flipEndianess` is set to true, the function will returned an ABGR encoded number\n * which is useful when the color value needs to be passed into a shader attribute.\n *\n * NOTE: Depending on the mode set by {@link setPremultiplyMode}, this method returns\n * a PREMULTIPLIED alpha color which is generally only useful in the context of the\n * internal rendering process. Use {@link mergeColorAlpha} if you need to blend an alpha\n * value into a color in the context of the Renderer's main API.\n *\n * @internalRemarks\n * Do not expose this method in the main API because Renderer users should instead use\n * {@link mergeColorAlpha} to manipulate the alpha value of a color.\n *\n * @internal\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @param flipEndianess Flip the endianess. RGBA becomes encoded as ABGR (for inserting colors into shader attributes)\n * @returns\n */\nexport function mergeColorAlphaPremultiplied(rgba, alpha, flipEndianess = false) {\n    const newAlpha = ((rgba & 0xff) / 255) * alpha;\n    const rgbAlpha = premultiplyRGB ? newAlpha : 1;\n    const r = Math.trunc((rgba >>> 24) * rgbAlpha);\n    const g = Math.trunc(((rgba >>> 16) & 0xff) * rgbAlpha);\n    const b = Math.trunc(((rgba >>> 8) & 0xff) * rgbAlpha);\n    const a = Math.trunc(newAlpha * 255);\n    if (flipEndianess) {\n        return ((a << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    }\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Returns true if the given object has the given \"own\" property.\n *\n * @param obj\n * @param prop\n * @returns\n */\nexport function hasOwn(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n/**\n * Converts degrees to radians\n *\n * @param degrees\n * @returns\n */\nexport function deg2Rad(degrees) {\n    return (degrees * Math.PI) / 180;\n}\n/**\n * Returns image aspect ratio\n *\n * @param width\n * @param height\n * @returns\n */\nexport function getImageAspectRatio(width, height) {\n    return width / height;\n}\n/**\n * Checks import.meta if env is production\n *\n * @returns\n */\nexport function isProductionEnvironment() {\n    return import.meta.env && import.meta.env.PROD;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Texture Usage Tracker for Usage Based Texture Garbage Collection\n */\nexport class TextureUsageTracker {\n    releaseCallback;\n    constructor(releaseCallback) {\n        this.releaseCallback = releaseCallback;\n    }\n}\n//# sourceMappingURL=TextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\n/**\n * Usage-based Texture Garbage Collection Registry\n */\nexport class ManualCountTextureUsageTracker extends TextureUsageTracker {\n    textureMap = new Map();\n    zeroReferenceTextureSet = new Set();\n    options;\n    constructor(releaseCallback, options) {\n        super(releaseCallback);\n        this.options = {\n            textureCleanupIntervalMs: options.textureCleanupIntervalMs ?? 10000,\n            textureCleanupAgeThreadholdMs: options.textureCleanupAgeThreadholdMs ?? 60000,\n        };\n        // Periodically check for textures that are no longer referenced by any\n        // Nodes and notify RendererMain to release them.\n        setInterval(() => {\n            const now = Date.now();\n            const thresholdMs = this.options.textureCleanupAgeThreadholdMs;\n            for (const textureRefInfo of this.zeroReferenceTextureSet) {\n                if (now - textureRefInfo.lastUpdate > thresholdMs) {\n                    this.releaseCallback(textureRefInfo.id);\n                    this.textureMap.delete(textureRefInfo.id);\n                    this.zeroReferenceTextureSet.delete(textureRefInfo);\n                }\n            }\n        }, this.options.textureCleanupIntervalMs);\n    }\n    registerTexture(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        if (!this.textureMap.has(textureId)) {\n            const textureRefInfo = {\n                id: textureId,\n                nodeRefCount: 0,\n                lastUpdate: Date.now(),\n            };\n            this.textureMap.set(textureId, textureRefInfo);\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n    }\n    incrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        let textureRefInfo = this.textureMap.get(textureId);\n        if (!textureRefInfo) {\n            // Texture has not been registered yet, so register it now.\n            // This may happen if the TextureRef was cleaned up from the registry\n            // but was still alive in memory and eventually re-used.\n            this.registerTexture(texture);\n            textureRefInfo = this.textureMap.get(textureId);\n        }\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then increment the reference count of the\n            // parent texture as well.\n            this.incrementTextureRefCount(texture.props.texture);\n        }\n        textureRefInfo.nodeRefCount++;\n        textureRefInfo.lastUpdate = Date.now();\n        if (this.zeroReferenceTextureSet.has(textureRefInfo)) {\n            this.zeroReferenceTextureSet.delete(textureRefInfo);\n        }\n    }\n    decrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        const textureRefInfo = this.textureMap.get(textureId);\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        textureRefInfo.nodeRefCount--;\n        textureRefInfo.lastUpdate = Date.now();\n        if (textureRefInfo.nodeRefCount === 0) {\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then decrement the reference count of the\n            // parent texture as well.\n            this.decrementTextureRefCount(texture.props.texture);\n        }\n    }\n}\n//# sourceMappingURL=ManualCountTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\nexport class FinalizationRegistryTextureUsageTracker extends TextureUsageTracker {\n    registry;\n    constructor(releaseCallback) {\n        super(releaseCallback);\n        this.registry = new FinalizationRegistry(releaseCallback);\n    }\n    registerTexture(texture) {\n        assertTruthy(texture.options?.id, 'Texture must have an ID to be registered');\n        this.registry.register(texture, texture.options?.id);\n    }\n    incrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n    decrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n}\n//# sourceMappingURL=FinalizationRegistryTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * EventEmitter base class\n */\nexport class EventEmitter {\n    eventListeners = {};\n    on(event, listener) {\n        let listeners = this.eventListeners[event];\n        if (!listeners) {\n            listeners = [];\n        }\n        listeners.push(listener);\n        this.eventListeners[event] = listeners;\n    }\n    off(event, listener) {\n        const listeners = this.eventListeners[event];\n        if (!listeners) {\n            return;\n        }\n        if (!listener) {\n            delete this.eventListeners[event];\n            return;\n        }\n        const index = listeners.indexOf(listener);\n        if (index >= 0) {\n            listeners.splice(index, 1);\n        }\n    }\n    once(event, listener) {\n        const onceListener = (target, data) => {\n            this.off(event, onceListener);\n            listener(target, data);\n        };\n        this.on(event, onceListener);\n    }\n    emit(event, data) {\n        const listeners = this.eventListeners[event];\n        if (!listeners) {\n            return;\n        }\n        [...listeners].forEach((listener) => {\n            listener(this, data);\n        });\n    }\n    removeAllListeners() {\n        this.eventListeners = {};\n    }\n}\n//# sourceMappingURL=EventEmitter.js.map","import {} from './RendererMain.js';\nimport { isProductionEnvironment } from '../utils.js';\nconst stylePropertyMap = {\n    alpha: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'opacity', value: `${v}` };\n    },\n    x: (x) => {\n        return { prop: 'left', value: `${x}px` };\n    },\n    y: (y) => {\n        return { prop: 'top', value: `${y}px` };\n    },\n    width: (w) => {\n        if (w === 0) {\n            return null;\n        }\n        return { prop: 'width', value: `${w}px` };\n    },\n    height: (h) => {\n        if (h === 0) {\n            return null;\n        }\n        return { prop: 'height', value: `${h}px` };\n    },\n    zIndex: () => 'zIndex',\n    fontFamily: () => 'font-family',\n    fontSize: () => 'font-size',\n    fontStyle: () => 'font-style',\n    fontWeight: () => 'font-weight',\n    fontStretch: () => 'font-stretch',\n    lineHeight: () => 'line-height',\n    letterSpacing: () => 'letter-spacing',\n    textAlign: () => 'text-align',\n    overflowSuffix: () => 'overflow-suffix',\n    maxLines: () => 'max-lines',\n    contain: () => 'contain',\n    verticalAlign: () => 'vertical-align',\n    clipping: (v) => {\n        if (v === false) {\n            return null;\n        }\n        return { prop: 'overflow', value: v ? 'hidden' : 'visible' };\n    },\n    rotation: (v) => {\n        if (v === 0) {\n            return null;\n        }\n        return { prop: 'transform', value: `rotate(${v}rad)` };\n    },\n    scale: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scale(${v})` };\n    },\n    scaleX: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scaleX(${v})` };\n    },\n    scaleY: (v) => {\n        if (v === 1) {\n            return null;\n        }\n        return { prop: 'transform', value: `scaleY(${v})` };\n    },\n    color: (v) => {\n        if (v === 0) {\n            return null;\n        }\n        return { prop: 'color', value: convertColorToRgba(v) };\n    },\n};\nconst convertColorToRgba = (color) => {\n    const a = (color & 0xff) / 255;\n    const b = (color >> 8) & 0xff;\n    const g = (color >> 16) & 0xff;\n    const r = (color >> 24) & 0xff;\n    return `rgba(${r},${g},${b},${a})`;\n};\nconst domPropertyMap = {\n    id: 'id',\n};\nconst gradientColorPropertyMap = [\n    'colorTop',\n    'colorBottom',\n    'colorLeft',\n    'colorRight',\n    'colorTl',\n    'colorTr',\n    'colorBl',\n    'colorBr',\n];\nexport class Inspector {\n    root = null;\n    canvas = null;\n    height = 1080;\n    width = 1920;\n    scaleX = 1;\n    scaleY = 1;\n    constructor(canvas, settings) {\n        if (isProductionEnvironment())\n            return;\n        if (!settings) {\n            throw new Error('settings is required');\n        }\n        // calc dimensions based on the devicePixelRatio\n        this.height = Math.ceil(settings.appHeight ?? 1080 / (settings.deviceLogicalPixelRatio ?? 1));\n        this.width = Math.ceil(settings.appWidth ?? 1900 / (settings.deviceLogicalPixelRatio ?? 1));\n        this.scaleX = settings.deviceLogicalPixelRatio ?? 1;\n        this.scaleY = settings.deviceLogicalPixelRatio ?? 1;\n        this.canvas = canvas;\n        this.root = document.createElement('div');\n        this.setRootPosition();\n        document.body.appendChild(this.root);\n        //listen for changes on canvas\n        const mutationObserver = new MutationObserver(this.setRootPosition.bind(this));\n        mutationObserver.observe(canvas, {\n            attributes: true,\n            childList: false,\n            subtree: false,\n        });\n        // Create a ResizeObserver to watch for changes in the element's size\n        const resizeObserver = new ResizeObserver(this.setRootPosition.bind(this));\n        resizeObserver.observe(canvas);\n        //listen for changes on window\n        window.addEventListener('resize', this.setRootPosition.bind(this));\n        console.warn('Inspector is enabled, this will impact performance');\n    }\n    setRootPosition() {\n        if (this.root === null || this.canvas === null) {\n            return;\n        }\n        // get the world position of the canvas object, so we can match the inspector to it\n        const rect = this.canvas.getBoundingClientRect();\n        const top = document.documentElement.scrollTop + rect.top;\n        const left = document.documentElement.scrollLeft + rect.left;\n        this.root.id = 'root';\n        this.root.style.left = `${left}px`;\n        this.root.style.top = `${top}px`;\n        this.root.style.width = `${this.width}px`;\n        this.root.style.height = `${this.height}px`;\n        this.root.style.position = 'absolute';\n        this.root.style.transformOrigin = '0 0 0';\n        this.root.style.transform = `scale(${this.scaleX}, ${this.scaleY})`;\n        this.root.style.overflow = 'hidden';\n        this.root.style.zIndex = '65534';\n    }\n    createDiv(node, properties) {\n        const div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.id = node.id.toString();\n        // set initial properties\n        for (const key in properties) {\n            this.updateNodeProperty(div, \n            // really typescript? really?\n            key, properties[key]);\n        }\n        return div;\n    }\n    createNode(driver, properties) {\n        const node = driver.createNode(properties);\n        const div = this.createDiv(node, properties);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n        div.node = node;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n        node.div = div;\n        return this.createProxy(node, div);\n    }\n    createTextNode(driver, properties) {\n        const node = driver.createTextNode(properties);\n        const div = this.createDiv(node, properties);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n        div.node = node;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n        node.div = div;\n        return this.createProxy(node, div);\n    }\n    createProxy(node, div) {\n        return new Proxy(node, {\n            set: (target, property, value) => {\n                this.updateNodeProperty(div, property, value);\n                return Reflect.set(target, property, value);\n            },\n            get: (target, property, receiver) => {\n                if (property === 'destroy') {\n                    this.destroyNode(target);\n                }\n                if (property === 'animate') {\n                    return (props, settings) => {\n                        const anim = target.animate(props, settings);\n                        // Trap the animate start function so we can update the inspector accordingly\n                        return new Proxy(anim, {\n                            get: (target, property, receiver) => {\n                                if (property === 'start') {\n                                    this.animateNode(div, node, props, settings);\n                                }\n                                return Reflect.get(target, property, receiver);\n                            },\n                        });\n                    };\n                }\n                return Reflect.get(target, property, receiver);\n            },\n        });\n    }\n    destroyNode(node) {\n        const div = document.getElementById(node.id.toString());\n        div?.remove();\n    }\n    updateNodeProperty(div, property, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value) {\n        if (this.root === null || value === undefined || value === null) {\n            return;\n        }\n        /**\n         * Special case for parent property\n         */\n        if (property === 'parent') {\n            const parentId = value.id;\n            // only way to detect if the parent is the root node\n            // if you are reading this and have a better way, please let me know\n            if (parentId === 1) {\n                this.root.appendChild(div);\n                return;\n            }\n            const parent = document.getElementById(parentId.toString());\n            parent?.appendChild(div);\n            return;\n        }\n        // special case for text\n        if (property === 'text') {\n            div.innerHTML = String(value);\n            // hide text because we can't render SDF fonts\n            // it would look weird and obstruct the WebGL rendering\n            div.style.visibility = 'hidden';\n            return;\n        }\n        // special case for images\n        // we're not setting any CSS properties to avoid images getting loaded twice\n        // as the renderer will handle the loading of the image. Setting it to `data-src`\n        if (property === 'src' && value) {\n            div.setAttribute(`data-src`, String(value));\n            return;\n        }\n        // special case for color gradients (normal colors are handled by the stylePropertyMap)\n        // FIXME the renderer seems to return the same number for all colors\n        // if (gradientColorPropertyMap.includes(property as string)) {\n        //   const color = convertColorToRgba(value as number);\n        //   div.setAttribute(`data-${property}`, color);\n        //   return;\n        // }\n        // CSS mappable attribute\n        if (stylePropertyMap[property]) {\n            const mappedStyleResponse = stylePropertyMap[property]?.(value);\n            if (mappedStyleResponse === null) {\n                return;\n            }\n            if (typeof mappedStyleResponse === 'string') {\n                div.style.setProperty(mappedStyleResponse, String(value));\n                return;\n            }\n            if (typeof mappedStyleResponse === 'object') {\n                div.style.setProperty(mappedStyleResponse.prop, mappedStyleResponse.value);\n            }\n            return;\n        }\n        // DOM properties\n        if (domPropertyMap[property]) {\n            div.setAttribute(String(stylePropertyMap[property]), String(value));\n            return;\n        }\n        // custom data properties\n        if (property === 'data') {\n            for (const key in value) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                const keyValue = value[key];\n                if (keyValue === undefined) {\n                    div.removeAttribute(`data-${key}`);\n                }\n                else {\n                    div.setAttribute(`data-${key}`, String(keyValue));\n                }\n            }\n            return;\n        }\n    }\n    // simple animation handler\n    animateNode(div, node, props, settings) {\n        const { duration = 1000, delay = 0,\n        // easing = 'linear',\n        // repeat = 0,\n        // loop = false,\n        // stopMethod = false,\n         } = settings;\n        const { x, y, width, height, alpha = 1, rotation = 0, scale = 1, color, } = props;\n        // ignoring loops and repeats for now, as that might be a bit too much for the inspector\n        function animate() {\n            setTimeout(() => {\n                div.style.top = `${y}px`;\n                div.style.left = `${x}px`;\n                div.style.width = `${width}px`;\n                div.style.height = `${height}px`;\n                div.style.opacity = `${alpha}`;\n                div.style.rotate = `${rotation}rad`;\n                div.style.scale = `${scale}`;\n                div.style.color = convertColorToRgba(color);\n            }, duration);\n        }\n        setTimeout(animate, delay);\n    }\n}\n//# sourceMappingURL=Inspector.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreShader {\n    // abstract draw(): void;\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n}\n//# sourceMappingURL=CoreShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n//#endregion Types\nexport function createShader(glw, type, source) {\n    const shader = glw.createShader(type);\n    if (!shader) {\n        throw new Error();\n    }\n    glw.shaderSource(shader, source);\n    glw.compileShader(shader);\n    const success = glw.getShaderParameter(shader, glw.COMPILE_STATUS);\n    if (success) {\n        return shader;\n    }\n    console.log(glw.getShaderInfoLog(shader));\n    glw.deleteShader(shader);\n}\nexport function createProgram(glw, vertexShader, fragmentShader) {\n    const program = glw.createProgram();\n    if (!program) {\n        throw new Error();\n    }\n    glw.attachShader(program, vertexShader);\n    glw.attachShader(program, fragmentShader);\n    glw.linkProgram(program);\n    const success = glw.getProgramParameter(program, glw.LINK_STATUS);\n    if (success) {\n        return program;\n    }\n    console.log(glw.getProgramInfoLog(program));\n    glw.deleteProgram(program);\n    return undefined;\n}\n//# sourceMappingURL=ShaderUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Generic WebGL Utility Functions\n *\n * @remarks\n * Nothing here should be coupled to Renderer logic / types.\n *\n * @param gl\n * @returns\n */\nexport function isWebGl2(gl) {\n    return (self.WebGL2RenderingContext && gl instanceof self.WebGL2RenderingContext);\n}\n//# sourceMappingURL=WebGlUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, hasOwn } from '../../../utils.js';\nimport { CoreShader } from '../CoreShader.js';\nimport { createProgram, createShader, } from './internal/ShaderUtils.js';\nimport { isWebGl2 } from './internal/WebGlUtils.js';\nexport class WebGlCoreShader extends CoreShader {\n    boundBufferCollection = null;\n    buffersBound = false;\n    program;\n    /**\n     * Vertex Array Object\n     *\n     * @remarks\n     * Used by WebGL2 Only\n     */\n    vao;\n    renderer;\n    glw;\n    attributeBuffers;\n    attributeLocations;\n    attributeNames;\n    uniformLocations;\n    uniformTypes;\n    supportsIndexedTextures;\n    constructor(options) {\n        super();\n        const renderer = (this.renderer = options.renderer);\n        const glw = (this.glw = this.renderer.glw);\n        this.supportsIndexedTextures = options.supportsIndexedTextures || false;\n        // Check that extensions are supported\n        const webGl2 = glw.isWebGl2();\n        const requiredExtensions = (webGl2 && options.webgl2Extensions) ||\n            (!webGl2 && options.webgl1Extensions) ||\n            [];\n        const glVersion = webGl2 ? '2.0' : '1.0';\n        requiredExtensions.forEach((extensionName) => {\n            if (!glw.getExtension(extensionName)) {\n                throw new Error(`Shader \"${this.constructor.name}\" requires extension \"${extensionName}\" for WebGL ${glVersion} but wasn't found`);\n            }\n        });\n        // Gather shader sources\n        // - If WebGL 2 and special WebGL 2 sources are provided, we copy those sources and delete\n        // the extra copy of them to save memory.\n        // TODO: This could be further made optimal by just caching the compiled shaders and completely deleting\n        // the source code\n        const shaderSources = options.shaderSources ||\n            this.constructor.shaderSources;\n        if (!shaderSources) {\n            throw new Error(`Shader \"${this.constructor.name}\" is missing shaderSources.`);\n        }\n        else if (webGl2 && shaderSources?.webGl2) {\n            shaderSources.fragment = shaderSources.webGl2.fragment;\n            shaderSources.vertex = shaderSources.webGl2.vertex;\n            delete shaderSources.webGl2;\n        }\n        const textureUnits = renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        const vertexSource = shaderSources.vertex instanceof Function\n            ? shaderSources.vertex(textureUnits)\n            : shaderSources.vertex;\n        const fragmentSource = shaderSources.fragment instanceof Function\n            ? shaderSources.fragment(textureUnits)\n            : shaderSources.fragment;\n        const vertexShader = createShader(glw, glw.VERTEX_SHADER, vertexSource);\n        const fragmentShader = createShader(glw, glw.FRAGMENT_SHADER, fragmentSource);\n        if (!vertexShader || !fragmentShader) {\n            throw new Error();\n        }\n        const program = createProgram(glw, vertexShader, fragmentShader);\n        if (!program) {\n            throw new Error();\n        }\n        this.program = program;\n        if (webGl2) {\n            const vao = glw.createVertexArray();\n            if (!vao) {\n                throw new Error();\n            }\n            this.vao = vao;\n            glw.bindVertexArray(this.vao);\n        }\n        this.attributeLocations = {};\n        this.attributeBuffers = {};\n        this.attributeNames = [];\n        [...options.attributes].forEach((attributeName) => {\n            const location = glw.getAttribLocation(this.program, attributeName);\n            if (location < 0) {\n                throw new Error(`${this.constructor.name}: Vertex shader must have an attribute \"${attributeName}\"!`);\n            }\n            const buffer = glw.createBuffer();\n            if (!buffer) {\n                throw new Error(`${this.constructor.name}: Could not create buffer for attribute \"${attributeName}\"`);\n            }\n            this.attributeLocations[attributeName] = location;\n            this.attributeBuffers[attributeName] = buffer;\n            this.attributeNames.push(attributeName);\n        });\n        this.uniformLocations = {};\n        this.uniformTypes = {};\n        options.uniforms.forEach((uniform) => {\n            const location = glw.getUniformLocation(this.program, uniform.name);\n            this.uniformTypes[uniform.name] = uniform.uniform;\n            if (!location) {\n                console.warn(`Shader \"${this.constructor.name}\" could not get uniform location for \"${uniform.name}\"`);\n                return;\n            }\n            this.uniformLocations[uniform.name] = location;\n        });\n    }\n    bindBufferAttribute(location, buffer, attribute) {\n        const { glw } = this;\n        glw.enableVertexAttribArray(location);\n        glw.vertexAttribPointer(buffer, location, attribute.size, attribute.type, attribute.normalized, attribute.stride, attribute.offset);\n    }\n    disableAttribute(location) {\n        this.glw.disableVertexAttribArray(location);\n    }\n    disableAttributes() {\n        for (const loc in this.attributeLocations) {\n            this.disableAttribute(this.attributeLocations[loc]);\n        }\n        this.boundBufferCollection = null;\n    }\n    /**\n     * Given two sets of Shader props destined for this Shader, determine if they can be batched together\n     * to reduce the number of draw calls.\n     *\n     * @remarks\n     * This is used by the {@link WebGlCoreRenderer} to determine if it can batch multiple consecutive draw\n     * calls into a single draw call.\n     *\n     * By default, this returns false (meaning no batching is allowed), but can be\n     * overridden by child classes to provide more efficient batching.\n     *\n     * @param propsA\n     * @param propsB\n     * @returns\n     */\n    canBatchShaderProps(propsA, propsB) {\n        return false;\n    }\n    bindRenderOp(renderOp, props) {\n        this.bindBufferCollection(renderOp.buffers);\n        if (renderOp.textures.length > 0) {\n            this.bindTextures(renderOp.textures);\n        }\n        const { glw } = renderOp;\n        // Bind standard automatic uniforms\n        this.setUniform('u_resolution', [glw.canvas.width, glw.canvas.height]);\n        this.setUniform('u_pixelRatio', renderOp.options.pixelRatio);\n        if (props) {\n            // Bind optional automatic uniforms\n            // These are only bound if their keys are present in the props.\n            if (hasOwn(props, '$dimensions')) {\n                let dimensions = props.$dimensions;\n                if (!dimensions) {\n                    dimensions = renderOp.dimensions;\n                }\n                this.setUniform('u_dimensions', [dimensions.width, dimensions.height]);\n            }\n            if (hasOwn(props, '$alpha')) {\n                let alpha = props.$alpha;\n                if (!alpha) {\n                    alpha = renderOp.alpha;\n                }\n                this.setUniform('u_alpha', alpha);\n            }\n            this.bindProps(props);\n        }\n    }\n    setUniform(name, ...value) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-unsafe-argument\n        this.glw.setUniform(this.uniformTypes[name], this.uniformLocations[name], ...value);\n    }\n    bindBufferCollection(buffer) {\n        if (this.boundBufferCollection === buffer) {\n            return;\n        }\n        for (const attributeName in this.attributeLocations) {\n            const resolvedBuffer = buffer.getBuffer(attributeName);\n            const resolvedInfo = buffer.getAttributeInfo(attributeName);\n            assertTruthy(resolvedBuffer, `Buffer for \"${attributeName}\" not found`);\n            assertTruthy(resolvedInfo);\n            this.bindBufferAttribute(this.attributeLocations[attributeName], resolvedBuffer, resolvedInfo);\n        }\n        this.boundBufferCollection = buffer;\n    }\n    bindProps(props) {\n        // Implement in child class\n    }\n    bindTextures(textures) {\n        // no defaults\n    }\n    attach() {\n        this.glw.useProgram(this.program);\n        this.glw.useProgram(this.program);\n        if (this.glw.isWebGl2() && this.vao) {\n            this.glw.bindVertexArray(this.vao);\n        }\n    }\n    detach() {\n        this.disableAttributes();\n    }\n    static shaderSources;\n}\n//# sourceMappingURL=WebGlCoreShader.js.map","export class ShaderEffect {\n    priority = 1;\n    name = '';\n    ref;\n    target;\n    passParameters = '';\n    declaredUniforms = '';\n    uniformInfo = {};\n    static uniforms = {};\n    static methods;\n    static onShaderMask;\n    static onColorize;\n    static onEffectMask;\n    static getEffectKey(props) {\n        return '';\n    }\n    static getMethodParameters(uniforms, props) {\n        const res = [];\n        for (const u in uniforms) {\n            const uni = uniforms[u];\n            let define = '';\n            if (uni.size) {\n                define = `[${uni.size(props)}]`;\n            }\n            res.push(`${uni.type} ${u}${define}`);\n        }\n        return res.join(',');\n    }\n    constructor(options) {\n        const { ref, target, props = {} } = options;\n        this.ref = ref;\n        this.target = target;\n        const uniformInfo = {};\n        const passParameters = [];\n        let declaredUniforms = '';\n        const uniforms = this.constructor.uniforms || {};\n        for (const u in uniforms) {\n            const unif = uniforms[u];\n            const uniType = unif.type;\n            //make unique uniform name\n            const uniformName = `${ref}_${u}`;\n            let define = '';\n            if (unif.size) {\n                define = `[${unif.size(props)}]`;\n            }\n            passParameters.push(uniformName);\n            declaredUniforms += `uniform ${uniType} ${uniformName}${define};`;\n            uniformInfo[u] = { name: uniformName, uniform: uniforms[u].method };\n        }\n        this.passParameters = passParameters.join(',');\n        this.declaredUniforms = declaredUniforms;\n        this.uniformInfo = uniformInfo;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n    static makeEffectKey(props) {\n        return false;\n    }\n}\n//# sourceMappingURL=ShaderEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../common/EventEmitter.js';\n/**\n * Represents a source of texture data for a CoreContextTexture.\n *\n * @remarks\n * Texture sources are used to populate a CoreContextTexture when that texture\n * is loaded. Texture data retrieved by the CoreContextTexture by the\n * `getTextureData` method. It's the responsibility of the concerete `Texture`\n * subclass to implement this method appropriately.\n */\nexport class Texture extends EventEmitter {\n    txManager;\n    /**\n     * The dimensions of the texture\n     *\n     * @remarks\n     * Until the texture data is loaded for the first time the value will be\n     * `null`.\n     */\n    dimensions = null;\n    error = null;\n    state = 'freed';\n    renderableOwners = new Set();\n    constructor(txManager) {\n        super();\n        this.txManager = txManager;\n    }\n    /**\n     * Add/remove an owner to/from the Texture based on its renderability.\n     *\n     * @remarks\n     * Any object can own a texture, be it a CoreNode or even the state object\n     * from a Text Renderer.\n     *\n     * When the reference to the texture that an owner object holds is replaced\n     * or cleared it must call this with `renderable=false` to release the owner\n     * association.\n     *\n     * @param owner\n     * @param renderable\n     */\n    setRenderableOwner(owner, renderable) {\n        if (renderable) {\n            this.renderableOwners.add(owner);\n        }\n        else {\n            this.renderableOwners.delete(owner);\n        }\n    }\n    /**\n     * Returns true if the texture is assigned to any Nodes that are renderable.\n     */\n    get renderable() {\n        return this.renderableOwners.size > 0;\n    }\n    /**\n     * Set the state of the texture\n     *\n     * @remark\n     * Intended for internal-use only but declared public so that it can be set\n     * by it's associated {@link CoreContextTexture}\n     *\n     * @param state\n     * @param args\n     */\n    setState(state, ...args) {\n        if (this.state !== state) {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.state = state;\n            if (state === 'loaded') {\n                const loadedArgs = args;\n                this.dimensions = loadedArgs[0];\n            }\n            else if (state === 'failed') {\n                const failedArgs = args;\n                this.error = failedArgs[0];\n            }\n            this.emit(state, ...args);\n        }\n    }\n    /**\n     * Make a cache key for this texture.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide an\n     * appropriate cache key for the texture type including the texture's\n     * properties that uniquely identify a copy of the texture. If the texture\n     * type does not support caching, then this method should return `false`.\n     *\n     * @param props\n     * @returns\n     * A cache key for this texture or `false` if the texture type does not\n     * support caching.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    /**\n     * Resolve the default values for the texture's properties.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide\n     * default values for the texture's optional properties.\n     *\n     * @param props\n     * @returns\n     * The default values for the texture's properties.\n     */\n    static resolveDefaults(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    props) {\n        return {};\n    }\n}\n//# sourceMappingURL=Texture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst trPropSetterDefaults = {\n    x: (state, value) => {\n        state.props.x = value;\n    },\n    y: (state, value) => {\n        state.props.y = value;\n    },\n    width: (state, value) => {\n        state.props.width = value;\n    },\n    height: (state, value) => {\n        state.props.height = value;\n    },\n    color: (state, value) => {\n        state.props.color = value;\n    },\n    zIndex: (state, value) => {\n        state.props.zIndex = value;\n    },\n    fontFamily: (state, value) => {\n        state.props.fontFamily = value;\n    },\n    fontWeight: (state, value) => {\n        state.props.fontWeight = value;\n    },\n    fontStyle: (state, value) => {\n        state.props.fontStyle = value;\n    },\n    fontStretch: (state, value) => {\n        state.props.fontStretch = value;\n    },\n    fontSize: (state, value) => {\n        state.props.fontSize = value;\n    },\n    text: (state, value) => {\n        state.props.text = value;\n    },\n    textAlign: (state, value) => {\n        state.props.textAlign = value;\n    },\n    contain: (state, value) => {\n        state.props.contain = value;\n    },\n    offsetY: (state, value) => {\n        state.props.offsetY = value;\n    },\n    scrollable: (state, value) => {\n        state.props.scrollable = value;\n    },\n    scrollY: (state, value) => {\n        state.props.scrollY = value;\n    },\n    letterSpacing: (state, value) => {\n        state.props.letterSpacing = value;\n    },\n    lineHeight: (state, value) => {\n        state.props.lineHeight = value;\n    },\n    maxLines: (state, value) => {\n        state.props.maxLines = value;\n    },\n    textBaseline: (state, value) => {\n        state.props.textBaseline = value;\n    },\n    verticalAlign: (state, value) => {\n        state.props.verticalAlign = value;\n    },\n    overflowSuffix: (state, value) => {\n        state.props.overflowSuffix = value;\n    },\n    debug: (state, value) => {\n        state.props.debug = value;\n    },\n};\nexport class TextRenderer {\n    stage;\n    set;\n    constructor(stage) {\n        this.stage = stage;\n        const propSetters = {\n            ...trPropSetterDefaults,\n            ...this.getPropertySetters(),\n        };\n        // For each prop setter add a wrapper method that checks if the prop is\n        // different before calling the setter\n        this.set = Object.freeze(Object.fromEntries(Object.entries(propSetters).map(([key, setter]) => {\n            return [\n                key,\n                (state, value) => {\n                    if (state.props[key] !== value) {\n                        setter(state, value);\n                        // Assume any prop change will require a render\n                        // This is required because otherwise a paused RAF will result\n                        // in renders when text props are changed.\n                        this.stage.requestRender();\n                    }\n                },\n            ];\n        })));\n    }\n    setStatus(state, status, error) {\n        // Don't emit the same status twice\n        if (state.status === status) {\n            return;\n        }\n        state.status = status;\n        state.emitter.emit(status, error);\n    }\n    /**\n     * Allows the CoreTextNode to communicate changes to the isRenderable state of\n     * the itself.\n     *\n     * @param state\n     * @param renderable\n     */\n    setIsRenderable(state, renderable) {\n        state.isRenderable = renderable;\n    }\n    /**\n     * Destroy/Clean up the state object\n     *\n     * @remarks\n     * Opposite of createState(). Frees any event listeners / resources held by\n     * the state that may not reliably get garbage collected.\n     *\n     * @param state\n     */\n    destroyState(state) {\n        const stateEvents = ['loading', 'loaded', 'failed'];\n        // Remove the old event listeners from previous state obj there was one\n        stateEvents.forEach((eventName) => {\n            state.emitter.off(eventName);\n        });\n    }\n    /**\n     * Schedule a state update via queueMicrotask\n     *\n     * @remarks\n     * This method is used to schedule a state update via queueMicrotask. This\n     * method should be called whenever a state update is needed, and it will\n     * ensure that the state is only updated once per microtask.\n     * @param state\n     * @returns\n     */\n    scheduleUpdateState(state) {\n        if (state.updateScheduled) {\n            return;\n        }\n        state.updateScheduled = true;\n        queueMicrotask(() => {\n            state.updateScheduled = false;\n            this.updateState(state);\n        });\n    }\n}\n//# sourceMappingURL=TextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const getNormalizedRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r / 255, g / 255, b / 255, a / 255];\n};\nexport const getRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r, g, b, a];\n};\nexport const norm = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    const rgbaArr = [r / 255, g / 255, b / 255, a / 255];\n    rgbaArr[0] = Math.max(0, Math.min(255, rgbaArr[0]));\n    rgbaArr[1] = Math.max(0, Math.min(255, rgbaArr[1]));\n    rgbaArr[2] = Math.max(0, Math.min(255, rgbaArr[2]));\n    rgbaArr[3] = Math.max(0, Math.min(255, rgbaArr[3]));\n    let v = ((rgbaArr[3] | 0) << 24) +\n        ((rgbaArr[0] | 0) << 16) +\n        ((rgbaArr[1] | 0) << 8) +\n        (rgbaArr[2] | 0);\n    if (v < 0) {\n        v = 0xffffffff + v + 1;\n    }\n    return v;\n};\nexport function getNormalizedAlphaComponent(rgba) {\n    return (rgba & 0xff) / 255.0;\n}\n/**\n * Get a CSS color string from a RGBA color\n *\n * @param color\n * @returns\n */\nexport function getRgbaString(color) {\n    const r = Math.floor(color[0] * 255.0);\n    const g = Math.floor(color[1] * 255.0);\n    const b = Math.floor(color[2] * 255.0);\n    const a = Math.floor(color[3] * 255.0);\n    return `rgba(${r},${g},${b},${a.toFixed(4)})`;\n}\nexport function createBound(x1, y1, x2, y2, out) {\n    if (out) {\n        out.x1 = x1;\n        out.y1 = y1;\n        out.x2 = x2;\n        out.y2 = y2;\n        return out;\n    }\n    return {\n        x1,\n        y1,\n        x2,\n        y2,\n    };\n}\nexport function intersectBound(a, b, out) {\n    const intersection = createBound(Math.max(a.x1, b.x1), Math.max(a.y1, b.y1), Math.min(a.x2, b.x2), Math.min(a.y2, b.y2), out);\n    if (intersection.x1 < intersection.x2 && intersection.y1 < intersection.y2) {\n        return intersection;\n    }\n    return createBound(0, 0, 0, 0, intersection);\n}\nexport function boundsOverlap(a, b) {\n    return a.x1 < b.x2 && a.x2 > b.x1 && a.y1 < b.y2 && a.y2 > b.y1;\n}\nexport function convertBoundToRect(bound, out) {\n    if (out) {\n        out.x = bound.x1;\n        out.y = bound.y1;\n        out.width = bound.x2 - bound.x1;\n        out.height = bound.y2 - bound.y1;\n        return out;\n    }\n    return {\n        x: bound.x1,\n        y: bound.y1,\n        width: bound.x2 - bound.x1,\n        height: bound.y2 - bound.y1,\n    };\n}\nexport function intersectRect(a, b, out) {\n    const x = Math.max(a.x, b.x);\n    const y = Math.max(a.y, b.y);\n    const width = Math.min(a.x + a.width, b.x + b.width) - x;\n    const height = Math.min(a.y + a.height, b.y + b.height) - y;\n    if (width > 0 && height > 0) {\n        if (out) {\n            out.x = x;\n            out.y = y;\n            out.width = width;\n            out.height = height;\n            return out;\n        }\n        return {\n            x,\n            y,\n            width,\n            height,\n        };\n    }\n    if (out) {\n        out.x = 0;\n        out.y = 0;\n        out.width = 0;\n        out.height = 0;\n        return out;\n    }\n    return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n    };\n}\nexport function copyRect(a, out) {\n    if (out) {\n        out.x = a.x;\n        out.y = a.y;\n        out.width = a.width;\n        out.height = a.height;\n        return out;\n    }\n    return {\n        x: a.x,\n        y: a.y,\n        width: a.width,\n        height: a.height,\n    };\n}\nexport function compareRect(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a === null || b === null) {\n        return false;\n    }\n    return (a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height);\n}\nexport function boundInsideBound(bound1, bound2) {\n    return (bound1.x1 <= bound2.x2 &&\n        bound1.y1 <= bound2.y2 &&\n        bound1.x2 >= bound2.x1 &&\n        bound1.y2 >= bound2.y1);\n}\nexport function isBoundPositive(bound) {\n    return bound.x1 < bound.x2 && bound.y1 < bound.y2;\n}\nexport function isRectPositive(rect) {\n    return rect.width > 0 && rect.height > 0;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../../common/EventEmitter.js';\nexport class TrFontFace extends EventEmitter {\n    fontFamily;\n    descriptors;\n    loaded = false;\n    constructor(fontFamily, descriptors) {\n        super();\n        this.fontFamily = fontFamily;\n        this.descriptors = {\n            style: 'normal',\n            weight: 'normal',\n            stretch: 'normal',\n            ...descriptors,\n        };\n    }\n    /**\n     * Convert a TrFontFaceDescriptors to a FontFaceDescriptors which differ slightly\n     *\n     * @param descriptors\n     * @returns\n     */\n    static convertToCssFontFaceDescriptors(descriptors) {\n        return {\n            style: descriptors.style,\n            weight: typeof descriptors.weight === 'number'\n                ? `${descriptors.weight}`\n                : descriptors.weight,\n            stretch: descriptors.stretch,\n            unicodeRange: descriptors.unicodeRange,\n            variant: descriptors.variant,\n            featureSettings: descriptors.featureSettings,\n            display: descriptors.display,\n        };\n    }\n}\n//# sourceMappingURL=TrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TrFontFace } from './TrFontFace.js';\nexport class WebTrFontFace extends TrFontFace {\n    fontFace;\n    fontUrl;\n    constructor(fontFamily, descriptors, fontUrl) {\n        super(fontFamily, descriptors);\n        // Filter out parentheses from fontUrl\n        const fontUrlWithoutParentheses = fontUrl.replace(/\\(|\\)/g, '');\n        // Defaults for descriptors resolved in the super constructor\n        const determinedDescriptors = this.descriptors;\n        // Convert TrFontFaceDescriptors to CSS FontFaceDescriptors\n        const cssDescriptors = {\n            style: determinedDescriptors.style,\n            weight: typeof determinedDescriptors.weight === 'number'\n                ? `${determinedDescriptors.weight}`\n                : determinedDescriptors.weight,\n            stretch: determinedDescriptors.stretch,\n            unicodeRange: determinedDescriptors.unicodeRange,\n            variant: determinedDescriptors.variant,\n            featureSettings: determinedDescriptors.featureSettings,\n            display: determinedDescriptors.display,\n        };\n        const fontFace = new FontFace(fontFamily, `url(${fontUrlWithoutParentheses})`, cssDescriptors);\n        fontFace\n            .load()\n            .then(() => {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.loaded = true;\n            this.emit('loaded');\n        })\n            .catch(console.error);\n        this.fontFace = fontFace;\n        this.fontUrl = fontUrl;\n    }\n}\n//# sourceMappingURL=WebTrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { getRgbaString } from '../../lib/utils.js';\nconst MAX_TEXTURE_DIMENSION = 2048;\n/**\n * Calculate height for the canvas\n *\n * @param textBaseline\n * @param fontSize\n * @param lineHeight\n * @param numLines\n * @param offsetY\n * @returns\n */\nfunction calcHeight(textBaseline, fontSize, lineHeight, numLines, offsetY) {\n    const baselineOffset = textBaseline !== 'bottom' ? 0.5 * fontSize : 0;\n    return (lineHeight * (numLines - 1) +\n        baselineOffset +\n        Math.max(lineHeight, fontSize) +\n        (offsetY || 0));\n}\nexport class LightningTextTextureRenderer {\n    _canvas;\n    _context;\n    _settings;\n    renderInfo;\n    constructor(canvas, context) {\n        this._canvas = canvas;\n        this._context = context;\n        this._settings = this.mergeDefaults({});\n    }\n    set settings(v) {\n        this._settings = this.mergeDefaults(v);\n    }\n    get settings() {\n        return this._settings;\n    }\n    getPrecision() {\n        return this._settings.precision;\n    }\n    setFontProperties() {\n        this._context.font = this._getFontSetting();\n        this._context.textBaseline = this._settings.textBaseline;\n    }\n    _getFontSetting() {\n        const ff = [this._settings.fontFace];\n        const ffs = [];\n        for (let i = 0, n = ff.length; i < n; i++) {\n            if (ff[i] === 'serif' || ff[i] === 'sans-serif') {\n                ffs.push(ff[i]);\n            }\n            else {\n                ffs.push(`\"${ff[i]}\"`);\n            }\n        }\n        return `${this._settings.fontStyle} ${this._settings.fontSize * this.getPrecision()}px ${ffs.join(',')}`;\n    }\n    _load() {\n        if (true && document.fonts) {\n            const fontSetting = this._getFontSetting();\n            try {\n                if (!document.fonts.check(fontSetting, this._settings.text)) {\n                    // Use a promise that waits for loading.\n                    return document.fonts\n                        .load(fontSetting, this._settings.text)\n                        .catch((err) => {\n                        // Just load the fallback font.\n                        console.warn('[Lightning] Font load error', err, fontSetting);\n                    })\n                        .then(() => {\n                        if (!document.fonts.check(fontSetting, this._settings.text)) {\n                            console.warn('[Lightning] Font not found', fontSetting);\n                        }\n                    });\n                }\n            }\n            catch (e) {\n                console.warn(\"[Lightning] Can't check font loading for \" + fontSetting);\n            }\n        }\n    }\n    calculateRenderInfo() {\n        const renderInfo = {};\n        const precision = this.getPrecision();\n        const paddingLeft = this._settings.paddingLeft * precision;\n        const paddingRight = this._settings.paddingRight * precision;\n        const fontSize = this._settings.fontSize * precision;\n        let offsetY = this._settings.offsetY === null\n            ? null\n            : this._settings.offsetY * precision;\n        let lineHeight = (this._settings.lineHeight || fontSize) * precision;\n        const w = this._settings.w * precision;\n        const h = this._settings.h * precision;\n        let wordWrapWidth = this._settings.wordWrapWidth * precision;\n        const cutSx = this._settings.cutSx * precision;\n        const cutEx = this._settings.cutEx * precision;\n        const cutSy = this._settings.cutSy * precision;\n        const cutEy = this._settings.cutEy * precision;\n        const letterSpacing = (this._settings.letterSpacing || 0) * precision;\n        const textIndent = this._settings.textIndent * precision;\n        // Set font properties.\n        this.setFontProperties();\n        // Total width.\n        let width = w || 2048 / this.getPrecision();\n        // Inner width.\n        let innerWidth = width - paddingLeft;\n        if (innerWidth < 10) {\n            width += 10 - innerWidth;\n            innerWidth = 10;\n        }\n        if (!wordWrapWidth) {\n            wordWrapWidth = innerWidth;\n        }\n        // Text overflow\n        if (this._settings.textOverflow && !this._settings.wordWrap) {\n            let suffix;\n            switch (this._settings.textOverflow) {\n                case 'clip':\n                    suffix = '';\n                    break;\n                case 'ellipsis':\n                    suffix = this._settings.overflowSuffix;\n                    break;\n                default:\n                    suffix = this._settings.textOverflow;\n            }\n            this._settings.text = this.wrapWord(this._settings.text, wordWrapWidth - textIndent, suffix);\n        }\n        // word wrap\n        // preserve original text\n        let linesInfo;\n        if (this._settings.wordWrap) {\n            linesInfo = this.wrapText(this._settings.text, wordWrapWidth, letterSpacing, textIndent);\n        }\n        else {\n            linesInfo = { l: this._settings.text.split(/(?:\\r\\n|\\r|\\n)/), n: [] };\n            const n = linesInfo.l.length;\n            for (let i = 0; i < n - 1; i++) {\n                linesInfo.n.push(i);\n            }\n        }\n        let lines = linesInfo.l;\n        if (this._settings.maxLines && lines.length > this._settings.maxLines) {\n            const usedLines = lines.slice(0, this._settings.maxLines);\n            let otherLines = null;\n            if (this._settings.overflowSuffix) {\n                // Wrap again with max lines suffix enabled.\n                const w = this._settings.overflowSuffix\n                    ? this.measureText(this._settings.overflowSuffix)\n                    : 0;\n                const al = this.wrapText(usedLines[usedLines.length - 1], wordWrapWidth - w, letterSpacing, textIndent);\n                usedLines[usedLines.length - 1] = `${al.l[0]}${this._settings.overflowSuffix}`;\n                otherLines = [al.l.length > 1 ? al.l[1] : ''];\n            }\n            else {\n                otherLines = [''];\n            }\n            // Re-assemble the remaining text.\n            let i;\n            const n = lines.length;\n            let j = 0;\n            const m = linesInfo.n.length;\n            for (i = this._settings.maxLines; i < n; i++) {\n                otherLines[j] += `${otherLines[j] ? ' ' : ''}${lines[i]}`;\n                if (i + 1 < m && linesInfo.n[i + 1]) {\n                    j++;\n                }\n            }\n            renderInfo.remainingText = otherLines.join('\\n');\n            renderInfo.moreTextLines = true;\n            lines = usedLines;\n        }\n        else {\n            renderInfo.moreTextLines = false;\n            renderInfo.remainingText = '';\n        }\n        // calculate text width\n        let maxLineWidth = 0;\n        const lineWidths = [];\n        for (let i = 0; i < lines.length; i++) {\n            const lineWidth = this.measureText(lines[i], letterSpacing) + (i === 0 ? textIndent : 0);\n            lineWidths.push(lineWidth);\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n        renderInfo.lineWidths = lineWidths;\n        if (!w) {\n            // Auto-set width to max text length.\n            width = maxLineWidth + paddingLeft + paddingRight;\n            innerWidth = maxLineWidth;\n        }\n        // calculate text height\n        lineHeight = lineHeight || fontSize;\n        let height;\n        if (h) {\n            height = h;\n        }\n        else {\n            height = calcHeight(this._settings.textBaseline, fontSize, lineHeight, lines.length, offsetY);\n        }\n        if (offsetY === null) {\n            offsetY = fontSize;\n        }\n        renderInfo.w = width;\n        renderInfo.h = height;\n        renderInfo.lines = lines;\n        renderInfo.precision = precision;\n        if (!width) {\n            // To prevent canvas errors.\n            width = 1;\n        }\n        if (!height) {\n            // To prevent canvas errors.\n            height = 1;\n        }\n        if (cutSx || cutEx) {\n            width = Math.min(width, cutEx - cutSx);\n        }\n        if (cutSy || cutEy) {\n            height = Math.min(height, cutEy - cutSy);\n        }\n        renderInfo.width = width;\n        renderInfo.innerWidth = innerWidth;\n        renderInfo.height = height;\n        renderInfo.fontSize = fontSize;\n        renderInfo.cutSx = cutSx;\n        renderInfo.cutSy = cutSy;\n        renderInfo.cutEx = cutEx;\n        renderInfo.cutEy = cutEy;\n        renderInfo.lineHeight = lineHeight;\n        renderInfo.lineWidths = lineWidths;\n        renderInfo.offsetY = offsetY;\n        renderInfo.paddingLeft = paddingLeft;\n        renderInfo.paddingRight = paddingRight;\n        renderInfo.letterSpacing = letterSpacing;\n        renderInfo.textIndent = textIndent;\n        return renderInfo;\n    }\n    draw(renderInfo, linesOverride) {\n        const precision = this.getPrecision();\n        // Allow lines to be overriden for partial rendering.\n        const lines = linesOverride?.lines || renderInfo.lines;\n        const lineWidths = linesOverride?.lineWidths || renderInfo.lineWidths;\n        const height = linesOverride\n            ? calcHeight(this._settings.textBaseline, renderInfo.fontSize, renderInfo.lineHeight, linesOverride.lines.length, this._settings.offsetY === null\n                ? null\n                : this._settings.offsetY * precision)\n            : renderInfo.height;\n        // Add extra margin to prevent issue with clipped text when scaling.\n        this._canvas.width = Math.min(Math.ceil(renderInfo.width + this._settings.textRenderIssueMargin), MAX_TEXTURE_DIMENSION);\n        this._canvas.height = Math.min(Math.ceil(height), MAX_TEXTURE_DIMENSION);\n        // Canvas context has been reset.\n        this.setFontProperties();\n        if (renderInfo.fontSize >= 128) {\n            // WpeWebKit bug: must force compositing because cairo-traps-compositor will not work with text first.\n            this._context.globalAlpha = 0.01;\n            this._context.fillRect(0, 0, 0.01, 0.01);\n            this._context.globalAlpha = 1.0;\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(-renderInfo.cutSx, -renderInfo.cutSy);\n        }\n        let linePositionX;\n        let linePositionY;\n        const drawLines = [];\n        // Draw lines line by line.\n        for (let i = 0, n = lines.length; i < n; i++) {\n            linePositionX = i === 0 ? renderInfo.textIndent : 0;\n            // By default, text is aligned to top\n            linePositionY = i * renderInfo.lineHeight + renderInfo.offsetY;\n            if (this._settings.verticalAlign == 'middle') {\n                linePositionY += (renderInfo.lineHeight - renderInfo.fontSize) / 2;\n            }\n            else if (this._settings.verticalAlign == 'bottom') {\n                linePositionY += renderInfo.lineHeight - renderInfo.fontSize;\n            }\n            if (this._settings.textAlign === 'right') {\n                linePositionX += renderInfo.innerWidth - lineWidths[i];\n            }\n            else if (this._settings.textAlign === 'center') {\n                linePositionX += (renderInfo.innerWidth - lineWidths[i]) / 2;\n            }\n            linePositionX += renderInfo.paddingLeft;\n            drawLines.push({\n                text: lines[i],\n                x: linePositionX,\n                y: linePositionY,\n                w: lineWidths[i],\n            });\n        }\n        // Highlight.\n        if (this._settings.highlight) {\n            const color = this._settings.highlightColor;\n            const hlHeight = this._settings.highlightHeight * precision || renderInfo.fontSize * 1.5;\n            const offset = this._settings.highlightOffset * precision;\n            const hlPaddingLeft = this._settings.highlightPaddingLeft !== null\n                ? this._settings.highlightPaddingLeft * precision\n                : renderInfo.paddingLeft;\n            const hlPaddingRight = this._settings.highlightPaddingRight !== null\n                ? this._settings.highlightPaddingRight * precision\n                : renderInfo.paddingRight;\n            this._context.fillStyle = getRgbaString(color);\n            for (let i = 0; i < drawLines.length; i++) {\n                const drawLine = drawLines[i];\n                this._context.fillRect(drawLine.x - hlPaddingLeft, drawLine.y - renderInfo.offsetY + offset, drawLine.w + hlPaddingRight + hlPaddingLeft, hlHeight);\n            }\n        }\n        // Text shadow.\n        let prevShadowSettings = null;\n        if (this._settings.shadow) {\n            prevShadowSettings = [\n                this._context.shadowColor,\n                this._context.shadowOffsetX,\n                this._context.shadowOffsetY,\n                this._context.shadowBlur,\n            ];\n            this._context.shadowColor = getRgbaString(this._settings.shadowColor);\n            this._context.shadowOffsetX = this._settings.shadowOffsetX * precision;\n            this._context.shadowOffsetY = this._settings.shadowOffsetY * precision;\n            this._context.shadowBlur = this._settings.shadowBlur * precision;\n        }\n        this._context.fillStyle = getRgbaString(this._settings.textColor);\n        for (let i = 0, n = drawLines.length; i < n; i++) {\n            const drawLine = drawLines[i];\n            if (renderInfo.letterSpacing === 0) {\n                this._context.fillText(drawLine.text, drawLine.x, drawLine.y);\n            }\n            else {\n                const textSplit = drawLine.text.split('');\n                let x = drawLine.x;\n                for (let i = 0, j = textSplit.length; i < j; i++) {\n                    this._context.fillText(textSplit[i], x, drawLine.y);\n                    x += this.measureText(textSplit[i], renderInfo.letterSpacing);\n                }\n            }\n        }\n        if (prevShadowSettings) {\n            this._context.shadowColor = prevShadowSettings[0];\n            this._context.shadowOffsetX = prevShadowSettings[1];\n            this._context.shadowOffsetY = prevShadowSettings[2];\n            this._context.shadowBlur = prevShadowSettings[3];\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(renderInfo.cutSx, renderInfo.cutSy);\n        }\n        this.renderInfo = renderInfo;\n    }\n    wrapWord(word, wordWrapWidth, suffix) {\n        const suffixWidth = this._context.measureText(suffix).width;\n        const wordLen = word.length;\n        const wordWidth = this._context.measureText(word).width;\n        /* If word fits wrapWidth, do nothing */\n        if (wordWidth <= wordWrapWidth) {\n            return word;\n        }\n        /* Make initial guess for text cuttoff */\n        let cutoffIndex = Math.floor((wordWrapWidth * wordLen) / wordWidth);\n        let truncWordWidth = this._context.measureText(word.substring(0, cutoffIndex)).width +\n            suffixWidth;\n        /* In case guess was overestimated, shrink it letter by letter. */\n        if (truncWordWidth > wordWrapWidth) {\n            while (cutoffIndex > 0) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth > wordWrapWidth) {\n                    cutoffIndex -= 1;\n                }\n                else {\n                    break;\n                }\n            }\n            /* In case guess was underestimated, extend it letter by letter. */\n        }\n        else {\n            while (cutoffIndex < wordLen) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth < wordWrapWidth) {\n                    cutoffIndex += 1;\n                }\n                else {\n                    // Finally, when bound is crossed, retract last letter.\n                    cutoffIndex -= 1;\n                    break;\n                }\n            }\n        }\n        /* If wrapWidth is too short to even contain suffix alone, return empty string */\n        return (word.substring(0, cutoffIndex) +\n            (wordWrapWidth >= suffixWidth ? suffix : ''));\n    }\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     */\n    wrapText(text, wordWrapWidth, letterSpacing, indent = 0) {\n        // Greedy wrapping algorithm that will wrap words as the line grows longer.\n        // than its horizontal bounds.\n        const lines = text.split(/\\r?\\n/g);\n        let allLines = [];\n        const realNewlines = [];\n        for (let i = 0; i < lines.length; i++) {\n            const resultLines = [];\n            let result = '';\n            let spaceLeft = wordWrapWidth - indent;\n            const words = lines[i].split(' ');\n            for (let j = 0; j < words.length; j++) {\n                const wordWidth = this.measureText(words[j], letterSpacing);\n                const wordWidthWithSpace = wordWidth + this.measureText(' ', letterSpacing);\n                if (j === 0 || wordWidthWithSpace > spaceLeft) {\n                    // Skip printing the newline if it's the first word of the line that is.\n                    // greater than the word wrap width.\n                    if (j > 0) {\n                        resultLines.push(result);\n                        result = '';\n                    }\n                    result += words[j];\n                    spaceLeft = wordWrapWidth - wordWidth - (j === 0 ? indent : 0);\n                }\n                else {\n                    spaceLeft -= wordWidthWithSpace;\n                    result += ` ${words[j]}`;\n                }\n            }\n            resultLines.push(result);\n            result = '';\n            allLines = allLines.concat(resultLines);\n            if (i < lines.length - 1) {\n                realNewlines.push(allLines.length);\n            }\n        }\n        return { l: allLines, n: realNewlines };\n    }\n    measureText(word, space = 0) {\n        if (!space) {\n            return this._context.measureText(word).width;\n        }\n        return word.split('').reduce((acc, char) => {\n            return acc + this._context.measureText(char).width + space;\n        }, 0);\n    }\n    mergeDefaults(settings) {\n        return {\n            text: '',\n            w: 0,\n            h: 0,\n            fontStyle: 'normal',\n            fontSize: 40,\n            fontFace: null,\n            wordWrap: true,\n            wordWrapWidth: 0,\n            wordBreak: false,\n            textOverflow: '',\n            lineHeight: null,\n            textBaseline: 'alphabetic',\n            textAlign: 'left',\n            verticalAlign: 'top',\n            offsetY: null,\n            maxLines: 0,\n            overflowSuffix: '...',\n            textColor: [1.0, 1.0, 1.0, 1.0],\n            paddingLeft: 0,\n            paddingRight: 0,\n            shadow: false,\n            shadowColor: [0.0, 0.0, 0.0, 1.0],\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowBlur: 5,\n            highlight: false,\n            highlightHeight: 0,\n            highlightColor: [0.0, 0.0, 0.0, 1.0],\n            highlightOffset: 0,\n            highlightPaddingLeft: 0,\n            highlightPaddingRight: 0,\n            letterSpacing: 0,\n            textIndent: 0,\n            cutSx: 0,\n            cutEx: 0,\n            cutSy: 0,\n            cutEy: 0,\n            advancedRenderer: false,\n            fontBaselineRatio: 0,\n            precision: 1,\n            textRenderIssueMargin: 0,\n            ...settings,\n        };\n    }\n}\n//# sourceMappingURL=LightningTextTextureRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../../common/EventEmitter.js';\nimport { assertTruthy, mergeColorAlphaPremultiplied } from '../../../utils.js';\nimport { intersectRect, intersectBound, getNormalizedRgbaComponents, getNormalizedAlphaComponent, createBound, } from '../../lib/utils.js';\nimport { WebTrFontFace } from '../font-face-types/WebTrFontFace.js';\nimport { LightningTextTextureRenderer, } from './LightningTextTextureRenderer.js';\nimport { TextRenderer, } from './TextRenderer.js';\nconst resolvedGlobal = typeof self === 'undefined' ? globalThis : self;\n/**\n * Global font set regardless of if run in the main thread or a web worker\n */\nconst globalFontSet = (resolvedGlobal.document?.fonts ||\n    resolvedGlobal.fonts);\nfunction getFontCssString(props) {\n    const { fontFamily, fontStyle, fontWeight, fontStretch, fontSize } = props;\n    return [fontStyle, fontWeight, fontStretch, `${fontSize}px`, fontFamily].join(' ');\n}\n/**\n * Ephemeral bounds object used for intersection calculations\n *\n * @remarks\n * Used to avoid creating a new object every time we need to intersect\n * element bounds.\n */\nconst tmpElementBounds = createBound(0, 0, 0, 0);\nexport class CanvasTextRenderer extends TextRenderer {\n    canvas;\n    context;\n    rendererBounds;\n    constructor(stage) {\n        super(stage);\n        if (typeof OffscreenCanvas !== 'undefined') {\n            this.canvas = new OffscreenCanvas(0, 0);\n        }\n        else {\n            this.canvas = document.createElement('canvas');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        let context = this.canvas.getContext('2d');\n        if (!context) {\n            // A browser may appear to support OffscreenCanvas but not actually support the Canvas '2d' context\n            // Here we try getting the context again after falling back to an HTMLCanvasElement.\n            // See: https://github.com/lightning-js/renderer/issues/26#issuecomment-1750438486\n            this.canvas = document.createElement('canvas');\n            context = this.canvas.getContext('2d');\n        }\n        assertTruthy(context);\n        this.context = context;\n        this.rendererBounds = {\n            x1: 0,\n            y1: 0,\n            x2: this.stage.options.appWidth,\n            y2: this.stage.options.appHeight,\n        };\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n                this.invalidateLayoutCache(state);\n            },\n            x: (state, value) => {\n                state.props.x = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            y: (state, value) => {\n                state.props.y = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                // Only invalidate layout cache if we're containing in the horizontal direction\n                if (state.props.contain !== 'none') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                // Only invalidate layout cache if we're containing in the vertical direction\n                if (state.props.contain === 'both') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            lineHeight: (state, value) => {\n                state.props.lineHeight = value;\n                this.invalidateLayoutCache(state);\n            },\n            maxLines: (state, value) => {\n                state.props.maxLines = value;\n                this.invalidateLayoutCache(state);\n            },\n            textBaseline: (state, value) => {\n                state.props.textBaseline = value;\n                this.invalidateLayoutCache(state);\n            },\n            verticalAlign: (state, value) => {\n                state.props.verticalAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            overflowSuffix: (state, value) => {\n                state.props.overflowSuffix = value;\n                this.invalidateLayoutCache(state);\n            },\n            // debug: (state, value) => {\n            //   state.props.debug = value;\n            // },\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    canRenderFont(props) {\n        // The canvas renderer can render any font because it automatically\n        // falls back to system fonts. The CanvasTextRenderer should be\n        // checked last if other renderers are preferred.\n        return true;\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof WebTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an Canvas font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof WebTrFontFace);\n        // We simply add the font face to the document\n        // @ts-expect-error `add()` method should be available from a FontFaceSet\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        globalFontSet.add(fontFace.fontFace);\n    }\n    createState(props) {\n        return {\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            canvasPages: undefined,\n            lightning2TextRenderer: new LightningTextTextureRenderer(this.canvas, this.context),\n            renderWindow: undefined,\n            visibleWindow: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n                valid: false,\n            },\n            renderInfo: undefined,\n            forceFullLayoutCalc: false,\n            textW: 0,\n            textH: 0,\n            fontInfo: undefined,\n            fontFaceLoadedHandler: undefined,\n            isRenderable: false,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                drawCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n        }\n        // If fontInfo is invalid, we need to establish it\n        if (!state.fontInfo) {\n            const cssString = getFontCssString(state.props);\n            state.fontInfo = {\n                cssString: cssString,\n                // TODO: For efficiency we would use this here but it's not reliable on WPE -> document.fonts.check(cssString),\n                loaded: false,\n            };\n            // If font is not loaded, set up a handler to update the font info when the font loads\n            if (!state.fontInfo.loaded) {\n                globalFontSet\n                    .load(cssString)\n                    .then(this.onFontLoaded.bind(this, state, cssString))\n                    .catch(this.onFontLoadError.bind(this, state, cssString));\n                return;\n            }\n        }\n        // If we're waiting for a font face to load, don't render anything\n        if (!state.fontInfo.loaded) {\n            return;\n        }\n        if (!state.renderInfo) {\n            const maxLines = state.props.maxLines;\n            const containedMaxLines = state.props.contain === 'both'\n                ? Math.floor((state.props.height - state.props.offsetY) /\n                    state.props.lineHeight)\n                : 0;\n            const calcMaxLines = containedMaxLines > 0 && maxLines > 0\n                ? Math.min(containedMaxLines, maxLines)\n                : Math.max(containedMaxLines, maxLines);\n            state.lightning2TextRenderer.settings = {\n                text: state.props.text,\n                textAlign: state.props.textAlign,\n                fontFace: state.props.fontFamily,\n                fontSize: state.props.fontSize,\n                fontStyle: [\n                    state.props.fontStretch,\n                    state.props.fontStyle,\n                    state.props.fontWeight,\n                ].join(' '),\n                textColor: getNormalizedRgbaComponents(state.props.color),\n                offsetY: state.props.fontSize + state.props.offsetY,\n                wordWrap: state.props.contain !== 'none',\n                wordWrapWidth: state.props.contain === 'none' ? undefined : state.props.width,\n                letterSpacing: state.props.letterSpacing,\n                lineHeight: state.props.lineHeight,\n                maxLines: calcMaxLines,\n                textBaseline: state.props.textBaseline,\n                verticalAlign: state.props.verticalAlign,\n                overflowSuffix: state.props.overflowSuffix,\n            };\n            // const renderInfoCalculateTime = performance.now();\n            state.renderInfo = state.lightning2TextRenderer.calculateRenderInfo();\n            // console.log(\n            //   'Render info calculated in',\n            //   performance.now() - renderInfoCalculateTime,\n            //   'ms',\n            // );\n            state.textH = state.renderInfo.lineHeight * state.renderInfo.lines.length;\n            state.textW = state.renderInfo.width;\n            // Invalidate renderWindow because the renderInfo changed\n            state.renderWindow = undefined;\n        }\n        const { x, y, width, height, scrollY, contain } = state.props;\n        const { visibleWindow } = state;\n        let { renderWindow, canvasPages } = state;\n        if (!visibleWindow.valid) {\n            // Figure out whats actually in the bounds of the renderer/canvas (visibleWindow)\n            const elementBounds = createBound(x, y, contain !== 'none' ? x + width : Infinity, contain === 'both' ? y + height : Infinity, tmpElementBounds);\n            /**\n             * Area that is visible on the screen.\n             */\n            intersectBound(this.rendererBounds, elementBounds, visibleWindow);\n            visibleWindow.valid = true;\n        }\n        const visibleWindowHeight = visibleWindow.y2 - visibleWindow.y1;\n        const maxLinesPerCanvasPage = Math.ceil(visibleWindowHeight / state.renderInfo.lineHeight);\n        if (visibleWindowHeight === 0) {\n            // Nothing to render. Clear any canvasPages and existing renderWindow\n            // Return early.\n            canvasPages = undefined;\n            renderWindow = undefined;\n            this.setStatus(state, 'loaded');\n            return;\n        }\n        else if (renderWindow && canvasPages) {\n            // Return early if we're still viewing inside the established render window\n            // No need to re-render what we've already rendered\n            const renderWindowScreenX1 = x + renderWindow.x1;\n            const renderWindowScreenY1 = y - scrollY + renderWindow.y1;\n            const renderWindowScreenX2 = x + renderWindow.x2;\n            const renderWindowScreenY2 = y - scrollY + renderWindow.y2;\n            if (renderWindowScreenX1 <= visibleWindow.x1 &&\n                renderWindowScreenX2 >= visibleWindow.x2 &&\n                renderWindowScreenY1 <= visibleWindow.y1 &&\n                renderWindowScreenY2 >= visibleWindow.y2) {\n                this.setStatus(state, 'loaded');\n                return;\n            }\n            if (renderWindowScreenY2 < visibleWindow.y2) {\n                // We've scrolled up, so we need to render the next page\n                renderWindow.y1 += maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                renderWindow.y2 += maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                canvasPages.push(canvasPages.shift());\n                canvasPages[2].lineNumStart =\n                    canvasPages[1].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[2].lineNumEnd =\n                    canvasPages[2].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[2].valid = false;\n            }\n            else if (renderWindowScreenY1 > visibleWindow.y1) {\n                // We've scrolled down, so we need to render the previous page\n                renderWindow.y1 -= maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                renderWindow.y2 -= maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                canvasPages.unshift(canvasPages.pop());\n                canvasPages[0].lineNumStart =\n                    canvasPages[1].lineNumStart - maxLinesPerCanvasPage;\n                canvasPages[0].lineNumEnd =\n                    canvasPages[0].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[0].valid = false;\n            }\n        }\n        else {\n            const pageHeight = state.renderInfo.lineHeight * maxLinesPerCanvasPage;\n            const page1Block = Math.ceil(scrollY / pageHeight);\n            const page1LineStart = page1Block * maxLinesPerCanvasPage;\n            const page0LineStart = page1LineStart - maxLinesPerCanvasPage;\n            const page2LineStart = page1LineStart + maxLinesPerCanvasPage;\n            // We haven't rendered anything yet, so we need to render the first page\n            // If canvasPages already exist, let's re-use the textures\n            canvasPages = [\n                {\n                    texture: canvasPages?.[0].texture,\n                    lineNumStart: page0LineStart,\n                    lineNumEnd: page0LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n                {\n                    texture: canvasPages?.[1].texture,\n                    lineNumStart: page1LineStart,\n                    lineNumEnd: page1LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n                {\n                    texture: canvasPages?.[2].texture,\n                    lineNumStart: page2LineStart,\n                    lineNumEnd: page2LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n            ];\n            state.canvasPages = canvasPages;\n            const scrollYNearestPage = page1Block * pageHeight;\n            renderWindow = {\n                x1: 0,\n                y1: scrollYNearestPage - pageHeight,\n                x2: width,\n                y2: scrollYNearestPage + pageHeight * 2,\n            };\n        }\n        state.renderWindow = renderWindow;\n        const pageDrawTime = performance.now();\n        for (const pageInfo of canvasPages) {\n            if (pageInfo.valid)\n                continue;\n            if (pageInfo.lineNumStart < 0) {\n                pageInfo.texture?.setRenderableOwner(state, false);\n                pageInfo.texture = this.stage.txManager.loadTexture('ImageTexture', {\n                    src: '',\n                });\n                pageInfo.texture.setRenderableOwner(state, state.isRenderable);\n                pageInfo.valid = true;\n                continue;\n            }\n            state.lightning2TextRenderer.draw(state.renderInfo, {\n                lines: state.renderInfo.lines.slice(pageInfo.lineNumStart, pageInfo.lineNumEnd),\n                lineWidths: state.renderInfo.lineWidths.slice(pageInfo.lineNumStart, pageInfo.lineNumEnd),\n            });\n            if (!(this.canvas.width === 0 || this.canvas.height === 0)) {\n                pageInfo.texture?.setRenderableOwner(state, false);\n                pageInfo.texture = this.stage.txManager.loadTexture('ImageTexture', {\n                    src: this.context.getImageData(0, 0, this.canvas.width, this.canvas.height),\n                }, {\n                    preload: true,\n                });\n                pageInfo.texture.setRenderableOwner(state, state.isRenderable);\n            }\n            pageInfo.valid = true;\n        }\n        // console.log('pageDrawTime', performance.now() - pageDrawTime, 'ms');\n        // Report final status\n        this.setStatus(state, 'loaded');\n    }\n    renderQuads(state, transform, clippingRect, alpha) {\n        const { stage } = this;\n        const { canvasPages, textW = 0, textH = 0, renderWindow } = state;\n        if (!canvasPages || !renderWindow)\n            return;\n        const { x, y, scrollY, contain, width, height /*, debug*/ } = state.props;\n        const elementRect = {\n            x: x,\n            y: y,\n            width: contain !== 'none' ? width : textW,\n            height: contain === 'both' ? height : textH,\n        };\n        const visibleRect = intersectRect({\n            x: 0,\n            y: 0,\n            width: stage.options.appWidth,\n            height: stage.options.appHeight,\n        }, elementRect);\n        // if (!debug.disableScissor) {\n        //   renderer.enableScissor(\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        assertTruthy(canvasPages, 'canvasPages is not defined');\n        assertTruthy(renderWindow, 'renderWindow is not defined');\n        const renderWindowHeight = renderWindow.y2 - renderWindow.y1;\n        const pageSize = renderWindowHeight / 3.0;\n        const { zIndex, color } = state.props;\n        // Color alpha of text is not properly rendered to the Canvas texture, so we\n        // need to apply it here.\n        const combinedAlpha = alpha * getNormalizedAlphaComponent(color);\n        const quadColor = mergeColorAlphaPremultiplied(0xffffffff, combinedAlpha);\n        if (canvasPages[0].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[0].texture?.dimensions?.width || 0,\n                height: canvasPages[0].texture?.dimensions?.height || 0,\n                texture: canvasPages[0].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        if (canvasPages[1].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[1].texture?.dimensions?.width || 0,\n                height: canvasPages[1].texture?.dimensions?.height || 0,\n                texture: canvasPages[1].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1 + pageSize,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        if (canvasPages[2].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[2].texture?.dimensions?.width || 0,\n                height: canvasPages[2].texture?.dimensions?.height || 0,\n                texture: canvasPages[2].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1 + pageSize + pageSize,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        // renderer.disableScissor();\n        // if (debug.showElementRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Blue,\n        //     elementRect.x,\n        //     elementRect.y,\n        //     elementRect.w,\n        //     elementRect.h,\n        //   );\n        // }\n        // if (debug.showVisibleRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Green,\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // if (debug.showRenderWindow && renderWindow) {\n        //   this.renderer.drawBorder(\n        //     Colors.Red,\n        //     x + renderWindow.x1,\n        //     y + renderWindow.y1 - scrollY,\n        //     x + renderWindow.x2 - (x + renderWindow.x1),\n        //     y + renderWindow.y2 - scrollY - (y + renderWindow.y1 - scrollY),\n        //   );\n        // }\n    }\n    setIsRenderable(state, renderable) {\n        super.setIsRenderable(state, renderable);\n        // Set state object owner from any canvas page textures\n        state.canvasPages?.forEach((pageInfo) => {\n            pageInfo.texture?.setRenderableOwner(state, renderable);\n        });\n    }\n    destroyState(state) {\n        // Remove state object owner from any canvas page textures\n        state.canvasPages?.forEach((pageInfo) => {\n            pageInfo.texture?.setRenderableOwner(state, false);\n        });\n    }\n    //#endregion Overrides\n    /**\n     * Invalidate the visible window stored in the state. This will cause a new\n     * visible window to be calculated on the next update.\n     *\n     * @param state\n     */\n    invalidateVisibleWindowCache(state) {\n        state.visibleWindow.valid = false;\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-layed out on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.renderInfo = undefined;\n        state.visibleWindow.valid = false;\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    onFontLoaded(state, cssString) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        state.fontInfo.loaded = true;\n        this.scheduleUpdateState(state);\n    }\n    onFontLoadError(state, cssString, error) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        // Font didn't actually load, but we'll log the error and mark it as loaded\n        // because the browser can still render with a fallback font.\n        state.fontInfo.loaded = true;\n        console.error(`CanvasTextRenderer: Error loading font '${state.fontInfo.cssString}'`, error);\n        this.scheduleUpdateState(state);\n    }\n}\n//# sourceMappingURL=CanvasTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\n/**\n * Texture consisting of only a 1x1 color pixel\n *\n * @remarks\n * The pixel color is set with the {@link ColorTextureProps.color} prop.\n *\n * This is the default texture used for a Node if it's\n * {@link INodeWritableProps.texture} prop is set to `null` (the default)\n *\n * Generally the 1x1 color pixel is stretched to whatever the set dimensions of\n * a Node are.\n */\nexport class ColorTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ColorTexture.resolveDefaults(props || {});\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(color) {\n        this.props.color = color;\n    }\n    async getTextureData() {\n        const pixelData32 = new Uint32Array([this.color]);\n        const pixelData8 = new Uint8ClampedArray(pixelData32.buffer);\n        return {\n            data: new ImageData(pixelData8, 1, 1),\n            premultiplyAlpha: true,\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = ColorTexture.resolveDefaults(props);\n        return `ColorTexture,${resolvedProps.color}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            color: props.color || 0xffffffff,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ColorTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreContextTexture {\n    memManager;\n    textureSource;\n    constructor(memManager, textureSource) {\n        this.memManager = memManager;\n        this.textureSource = textureSource;\n    }\n}\n//# sourceMappingURL=CoreContextTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ColorTexture } from '../textures/ColorTexture.js';\nimport { CoreContextTexture } from './CoreContextTexture.js';\nexport class CoreRenderer {\n    options;\n    mode;\n    stage;\n    //// Core Managers\n    txManager;\n    txMemManager;\n    shManager;\n    constructor(options) {\n        this.options = options;\n        this.stage = options.stage;\n        this.txManager = options.txManager;\n        this.txMemManager = options.txMemManager;\n        this.shManager = options.shManager;\n    }\n}\n//# sourceMappingURL=CoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreRenderOp {\n}\n//# sourceMappingURL=CoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreRenderOp } from '../CoreRenderOp.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\nconst MAX_TEXTURES = 8; // TODO: get from gl\n/**\n * Can render multiple quads with multiple textures (up to vertex shader texture limit)\n *\n */\nexport class WebGlCoreRenderOp extends CoreRenderOp {\n    glw;\n    options;\n    buffers;\n    shader;\n    shaderProps;\n    alpha;\n    clippingRect;\n    dimensions;\n    bufferIdx;\n    zIndex;\n    length = 0;\n    numQuads = 0;\n    textures = [];\n    maxTextures;\n    constructor(glw, options, buffers, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, zIndex) {\n        super();\n        this.glw = glw;\n        this.options = options;\n        this.buffers = buffers;\n        this.shader = shader;\n        this.shaderProps = shaderProps;\n        this.alpha = alpha;\n        this.clippingRect = clippingRect;\n        this.dimensions = dimensions;\n        this.bufferIdx = bufferIdx;\n        this.zIndex = zIndex;\n        this.maxTextures = shader.supportsIndexedTextures\n            ? glw.getParameter(glw.MAX_VERTEX_TEXTURE_IMAGE_UNITS)\n            : 1;\n    }\n    addTexture(texture) {\n        const { textures, maxTextures } = this;\n        const existingIdx = textures.findIndex((t) => t === texture);\n        if (existingIdx !== -1) {\n            return existingIdx;\n        }\n        const newIdx = textures.length;\n        if (newIdx >= maxTextures) {\n            return 0xffffffff;\n        }\n        this.textures.push(texture);\n        return newIdx;\n    }\n    draw() {\n        const { glw, shader, shaderProps, options } = this;\n        // shaderOp.draw(this);\n        const { shManager } = options;\n        shManager.useShader(shader);\n        shader.bindRenderOp(this, shaderProps);\n        // TODO: Reduce calculations required\n        const quadIdx = (this.bufferIdx / 24) * 6 * 2;\n        // Clipping\n        if (this.clippingRect.valid) {\n            const { x, y, width, height } = this.clippingRect;\n            const pixelRatio = options.pixelRatio;\n            const canvasHeight = options.canvas.height;\n            const clipX = Math.round(x * pixelRatio);\n            const clipWidth = Math.round(width * pixelRatio);\n            const clipHeight = Math.round(height * pixelRatio);\n            const clipY = Math.round(canvasHeight - clipHeight - y * pixelRatio);\n            glw.setScissorTest(true);\n            glw.scissor(clipX, clipY, clipWidth, clipHeight);\n        }\n        else {\n            glw.setScissorTest(false);\n        }\n        glw.drawElements(glw.TRIANGLES, 6 * this.numQuads, glw.UNSIGNED_SHORT, quadIdx);\n    }\n}\n//# sourceMappingURL=WebGlCoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Get device specific webgl parameters\n * @param glw\n */\nexport function getWebGlParameters(glw) {\n    const params = {\n        MAX_RENDERBUFFER_SIZE: 0,\n        MAX_TEXTURE_SIZE: 0,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-explicit-any\n        MAX_VIEWPORT_DIMS: 0,\n        MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,\n        MAX_VERTEX_ATTRIBS: 0,\n        MAX_VARYING_VECTORS: 0,\n        MAX_VERTEX_UNIFORM_VECTORS: 0,\n        MAX_FRAGMENT_UNIFORM_VECTORS: 0,\n    };\n    // Map over all parameters and get them\n    const keys = Object.keys(params);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        params[key] = glw.getParameter(glw[key]);\n    });\n    return params;\n}\n/**\n * Get device webgl extensions\n * @param glw\n */\nexport function getWebGlExtensions(glw) {\n    const extensions = {\n        ANGLE_instanced_arrays: null,\n        WEBGL_compressed_texture_s3tc: null,\n        WEBGL_compressed_texture_astc: null,\n        WEBGL_compressed_texture_etc: null,\n        WEBGL_compressed_texture_etc1: null,\n        WEBGL_compressed_texture_pvrtc: null,\n        WEBKIT_WEBGL_compressed_texture_pvrtc: null,\n        WEBGL_compressed_texture_s3tc_srgb: null,\n        OES_vertex_array_object: null,\n    };\n    // Map over all extensions and get them\n    const keys = Object.keys(extensions);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        extensions[key] = glw.getExtension(key);\n    });\n    return extensions;\n}\n/**\n * Allocate big memory chunk that we\n * can re-use to draw quads\n *\n * @param glw\n * @param size\n */\nexport function createIndexBuffer(glw, size) {\n    const maxQuads = ~~(size / 80);\n    const indices = new Uint16Array(maxQuads * 6);\n    for (let i = 0, j = 0; i < maxQuads; i += 6, j += 4) {\n        indices[i] = j;\n        indices[i + 1] = j + 1;\n        indices[i + 2] = j + 2;\n        indices[i + 3] = j + 2;\n        indices[i + 4] = j + 1;\n        indices[i + 5] = j + 3;\n    }\n    const buffer = glw.createBuffer();\n    glw.elementArrayBufferData(buffer, indices, glw.STATIC_DRAW);\n}\n/**\n * Checks if an object is of type HTMLImageElement.\n * This is used because we cant check for HTMLImageElement directly when the\n * renderer is running in a seperate web worker context.\n *\n * @param obj\n * @returns\n */\nexport function isHTMLImageElement(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        obj.constructor &&\n        obj.constructor.name === 'HTMLImageElement');\n}\n//# sourceMappingURL=RendererUtils.js.map","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {(...args: any[]) => any} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {((...args: Parameters<F>) => ReturnType<F>) & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize(fn, options) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized(/* ...args */) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs,\n\t\t\ti;\n\n\t\tsearchCache: while (node) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif (node.args.length !== arguments.length) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (node.args[i] !== arguments[i]) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== head) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif (node === tail) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ (head).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply(null, args),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (head) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif (size === /** @type {MemizeOptions} */ (options).maxSize) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ (tail).prev;\n\t\t\t/** @type {MemizeCacheNode} */ (tail).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function () {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nexport { memize as default };\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Core Utility Functions\n *\n * @module\n */\nimport memo from 'memize';\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport const RANDOM = Math.random;\nexport const ANGLE_ORDER = 'zyx';\nconst degree = Math.PI / 180;\nexport const setMatrixArrayType = (type) => {\n    ARRAY_TYPE = type;\n};\nexport const toRadian = (a) => {\n    return a * degree;\n};\nexport const equals = (a, b) => {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n};\nexport const rand = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\nexport const isPowerOfTwo = (value) => {\n    return value && !(value & (value - 1));\n};\nconst getTimingBezier = (a, b, c, d) => {\n    const xc = 3.0 * a;\n    const xb = 3.0 * (c - a) - xc;\n    const xa = 1.0 - xc - xb;\n    const yc = 3.0 * b;\n    const yb = 3.0 * (d - b) - yc;\n    const ya = 1.0 - yc - yb;\n    return function (time) {\n        if (time >= 1.0) {\n            return 1;\n        }\n        if (time <= 0) {\n            return 0;\n        }\n        let t = 0.5, cbx, cbxd, dx;\n        for (let it = 0; it < 20; it++) {\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                return t * (t * (t * ya + yb) + yc);\n            }\n            // Cubic bezier derivative.\n            cbxd = t * (t * (3 * xa) + 2 * xb) + xc;\n            if (cbxd > 1e-10 && cbxd < 1e-10) {\n                // Problematic. Fall back to binary search method.\n                break;\n            }\n            t += dx / cbxd;\n        }\n        // Fallback: binary search method. This is more reliable when there are near-0 slopes.\n        let minT = 0;\n        let maxT = 1;\n        for (let it = 0; it < 20; it++) {\n            t = 0.5 * (minT + maxT);\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                // Solution found!\n                return t * (t * (t * ya + yb) + yc);\n            }\n            if (dx < 0) {\n                maxT = t;\n            }\n            else {\n                minT = t;\n            }\n        }\n    };\n};\nexport const getTimingFunction = memo((str) => {\n    switch (str) {\n        case 'linear':\n            return function (time) {\n                return time;\n            };\n        case 'ease':\n            return getTimingBezier(0.25, 0.1, 0.25, 1.0);\n        case 'ease-in':\n            return getTimingBezier(0.42, 0, 1.0, 1.0);\n        case 'ease-out':\n            return getTimingBezier(0, 0, 0.58, 1.0);\n        case 'ease-in-out':\n            return getTimingBezier(0.42, 0, 0.58, 1.0);\n        case 'ease-in-sine':\n            return getTimingBezier(0.12, 0, 0.39, 0);\n        case 'ease-out-sine':\n            return getTimingBezier(0.12, 0, 0.39, 0);\n        case 'ease-in-out-sine':\n            return getTimingBezier(0.37, 0, 0.63, 1);\n        case 'ease-in-cubic':\n            return getTimingBezier(0.32, 0, 0.67, 0);\n        case 'ease-out-cubic':\n            return getTimingBezier(0.33, 1, 0.68, 1);\n        case 'ease-in-out-cubic':\n            return getTimingBezier(0.65, 0, 0.35, 1);\n        case 'ease-in-circ':\n            return getTimingBezier(0.55, 0, 1, 0.45);\n        case 'ease-out-circ':\n            return getTimingBezier(0, 0.55, 0.45, 1);\n        case 'ease-in-out-circ':\n            return getTimingBezier(0.85, 0, 0.15, 1);\n        case 'ease-in-back':\n            return getTimingBezier(0.36, 0, 0.66, -0.56);\n        case 'ease-out-back':\n            return getTimingBezier(0.34, 1.56, 0.64, 1);\n        case 'ease-in-out-back':\n            return getTimingBezier(0.68, -0.6, 0.32, 1.6);\n        case 'step-start':\n            return function () {\n                return 1;\n            };\n        case 'step-end':\n            return function (time) {\n                return time === 1 ? 1 : 0;\n            };\n        default:\n            // eslint-disable-next-line no-case-declarations\n            const s = 'cubic-bezier(';\n            if (str && str.indexOf(s) === 0) {\n                const parts = str\n                    .substr(s.length, str.length - s.length - 1)\n                    .split(',');\n                if (parts.length !== 4) {\n                    console.warn('Unknown timing function: ' + str);\n                    // Fallback: use linear.\n                    return function (time) {\n                        return time;\n                    };\n                }\n                const a = parseFloat(parts[0] || '0.42');\n                const b = parseFloat(parts[1] || '0');\n                const c = parseFloat(parts[2] || '1');\n                const d = parseFloat(parts[3] || '1');\n                if (isNaN(a) || isNaN(b) || isNaN(c) || isNaN(d)) {\n                    console.warn(' Unknown timing function: ' + str);\n                    // Fallback: use linear.\n                    return function (time) {\n                        return time;\n                    };\n                }\n                return getTimingBezier(a, b, c, d);\n            }\n            else {\n                console.warn('Unknown timing function: ' + str);\n                // Fallback: use linear.\n                return function (time) {\n                    return time;\n                };\n            }\n    }\n});\nif (!Math.hypot)\n    Math.hypot = (...args) => {\n        let y = 0, i = args.length;\n        while (i--) {\n            y += args[i] * args[i];\n        }\n        return Math.sqrt(y);\n    };\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../utils.js';\nimport { isPowerOfTwo } from '../../utils.js';\nimport { CoreContextTexture } from '../CoreContextTexture.js';\nimport { isHTMLImageElement } from './internal/RendererUtils.js';\nconst TRANSPARENT_TEXTURE_DATA = new Uint8Array([0, 0, 0, 0]);\n/**\n * A wrapper around a WebGLTexture that handles loading the texture data\n * from a Texture source and uploading it to the GPU as well as freeing\n * the uploaded texture.\n *\n * @remarks\n * When accessing the ctxTexture property, the texture will be loaded if\n * it hasn't been already. ctxTexture will always return a valid WebGLTexture\n * and trigger the loading/uploading of the texture's data if it hasn't been\n * loaded yet.\n */\nexport class WebGlCoreCtxTexture extends CoreContextTexture {\n    glw;\n    _nativeCtxTexture = null;\n    _state = 'freed';\n    _w = 0;\n    _h = 0;\n    constructor(glw, memManager, textureSource) {\n        super(memManager, textureSource);\n        this.glw = glw;\n    }\n    get ctxTexture() {\n        if (this._state === 'freed') {\n            this.load();\n        }\n        assertTruthy(this._nativeCtxTexture);\n        return this._nativeCtxTexture;\n    }\n    get renderable() {\n        return this.textureSource.renderable;\n    }\n    get w() {\n        return this._w;\n    }\n    get h() {\n        return this._h;\n    }\n    /**\n     * Load the texture data from the Texture source and upload it to the GPU\n     *\n     * @remarks\n     * This method is called automatically when accessing the ctxTexture property\n     * if the texture hasn't been loaded yet. But it can also be called manually\n     * to force the texture to be pre-loaded prior to accessing the ctxTexture\n     * property.\n     */\n    load() {\n        // If the texture is already loading or loaded, don't load it again.\n        if (this._state === 'loading' || this._state === 'loaded') {\n            return;\n        }\n        this._state = 'loading';\n        this.textureSource.setState('loading');\n        this._nativeCtxTexture = this.createNativeCtxTexture();\n        this.onLoadRequest()\n            .then(({ width, height }) => {\n            if (this._state === 'freed') {\n                return;\n            }\n            this._state = 'loaded';\n            this._w = width;\n            this._h = height;\n            // Update the texture source's width and height so that it can be used\n            // for rendering.\n            this.textureSource.setState('loaded', { width, height });\n        })\n            .catch((err) => {\n            this._state = 'failed';\n            this.textureSource.setState('failed', err);\n            console.error(err);\n        });\n    }\n    /**\n     * Called when the texture data needs to be loaded and uploaded to a texture\n     */\n    async onLoadRequest() {\n        const { glw, memManager } = this;\n        // On initial load request, create a 1x1 transparent texture to use until\n        // the texture data is finally loaded.\n        glw.activeTexture(0);\n        glw.bindTexture(this._nativeCtxTexture);\n        // linear texture filtering\n        glw.texParameteri(glw.TEXTURE_MAG_FILTER, glw.LINEAR);\n        glw.texParameteri(glw.TEXTURE_MIN_FILTER, glw.LINEAR);\n        // texture wrapping method\n        glw.texParameteri(glw.TEXTURE_WRAP_S, glw.CLAMP_TO_EDGE);\n        glw.texParameteri(glw.TEXTURE_WRAP_T, glw.CLAMP_TO_EDGE);\n        glw.texImage2D(0, glw.RGBA, 1, 1, 0, glw.RGBA, glw.UNSIGNED_BYTE, TRANSPARENT_TEXTURE_DATA);\n        memManager.setTextureMemUse(this, TRANSPARENT_TEXTURE_DATA.byteLength);\n        const textureData = await this.textureSource?.getTextureData();\n        // If the texture has been freed while loading, return early.\n        if (!this._nativeCtxTexture) {\n            assertTruthy(this._state === 'freed');\n            return { width: 0, height: 0 };\n        }\n        let width = 0;\n        let height = 0;\n        assertTruthy(this._nativeCtxTexture);\n        glw.activeTexture(0);\n        // If textureData is null, the texture is empty (0, 0) and we don't need to\n        // upload any data to the GPU.\n        if (textureData.data instanceof ImageBitmap ||\n            textureData.data instanceof ImageData ||\n            // not using typeof HTMLImageElement due to web worker\n            isHTMLImageElement(textureData.data)) {\n            const data = textureData.data;\n            width = data.width;\n            height = data.height;\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.pixelStorei(glw.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!textureData.premultiplyAlpha);\n            glw.texImage2D(0, glw.RGBA, glw.RGBA, glw.UNSIGNED_BYTE, data);\n            memManager.setTextureMemUse(this, width * height * 4);\n            // generate mipmaps for power-of-2 textures or in WebGL2RenderingContext\n            if (glw.isWebGl2() || (isPowerOfTwo(width) && isPowerOfTwo(height))) {\n                glw.generateMipmap();\n            }\n        }\n        else if (textureData.data === null) {\n            width = 0;\n            height = 0;\n            // Reset to a 1x1 transparent texture\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.texImage2D(0, glw.RGBA, 1, 1, 0, glw.RGBA, glw.UNSIGNED_BYTE, TRANSPARENT_TEXTURE_DATA);\n            memManager.setTextureMemUse(this, TRANSPARENT_TEXTURE_DATA.byteLength);\n        }\n        else if ('mipmaps' in textureData.data && textureData.data.mipmaps) {\n            const { mipmaps, width = 0, height = 0, type, glInternalFormat, } = textureData.data;\n            const view = type === 'ktx'\n                ? new DataView(mipmaps[0] ?? new ArrayBuffer(0))\n                : mipmaps[0];\n            glw.bindTexture(this._nativeCtxTexture);\n            glw.compressedTexImage2D(0, glInternalFormat, width, height, 0, view);\n            glw.texParameteri(glw.TEXTURE_WRAP_S, glw.CLAMP_TO_EDGE);\n            glw.texParameteri(glw.TEXTURE_WRAP_T, glw.CLAMP_TO_EDGE);\n            glw.texParameteri(glw.TEXTURE_MAG_FILTER, glw.LINEAR);\n            glw.texParameteri(glw.TEXTURE_MIN_FILTER, glw.LINEAR);\n            memManager.setTextureMemUse(this, view.byteLength);\n        }\n        else {\n            console.error(`WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned`, textureData);\n        }\n        return {\n            width,\n            height,\n        };\n    }\n    /**\n     * Free the WebGLTexture from the GPU\n     *\n     * @returns\n     */\n    free() {\n        if (this._state === 'freed') {\n            return;\n        }\n        this._state = 'freed';\n        this.textureSource.setState('freed');\n        this._w = 0;\n        this._h = 0;\n        if (!this._nativeCtxTexture) {\n            return;\n        }\n        const { glw, memManager } = this;\n        glw.deleteTexture(this._nativeCtxTexture);\n        memManager.setTextureMemUse(this, 0);\n        this._nativeCtxTexture = null;\n    }\n    createNativeCtxTexture() {\n        const { glw } = this;\n        const nativeTexture = glw.createTexture();\n        if (!nativeTexture) {\n            throw new Error('Could not create WebGL Texture');\n        }\n        return nativeTexture;\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, } from './Texture.js';\n/**\n * A Texture that is a sub-region of another Texture.\n *\n * @remarks\n * The parent texture can be a Sprite Sheet/Texture Atlas and set using the\n * {@link SubTextureProps.texture} prop. The sub-region relative to the parent\n * texture is defined with the {@link SubTextureProps.x},\n * {@link SubTextureProps.y}, {@link SubTextureProps.width}, and\n * {@link SubTextureProps.height} pixel values.\n */\nexport class SubTexture extends Texture {\n    props;\n    parentTexture;\n    constructor(txManager, props) {\n        super(txManager);\n        this.parentTexture = this.txManager.loadTexture(props.texture.txType, props.texture.props, props.texture.options);\n        this.props = SubTexture.resolveDefaults(props || {});\n        // If parent texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            const parentTx = this.parentTexture;\n            if (parentTx.state === 'loaded') {\n                this.onParentTxLoaded(parentTx, parentTx.dimensions);\n            }\n            else if (parentTx.state === 'failed') {\n                this.onParentTxFailed(parentTx, parentTx.error);\n            }\n            parentTx.on('loaded', this.onParentTxLoaded);\n            parentTx.on('failed', this.onParentTxFailed);\n        });\n    }\n    onParentTxLoaded = () => {\n        // We ignore the parent's passed dimensions, and simply use the SubTexture's\n        // configured dimensions (because that's all that matters here)\n        this.setState('loaded', {\n            width: this.props.width,\n            height: this.props.height,\n        });\n    };\n    onParentTxFailed = (target, error) => {\n        this.setState('failed', error);\n    };\n    async getTextureData() {\n        return {\n            data: this.props,\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {\n            texture: props.texture,\n            x: props.x || 0,\n            y: props.y || 0,\n            width: props.width || 0,\n            height: props.height || 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=SubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nexport class WebGlCoreCtxSubTexture extends WebGlCoreCtxTexture {\n    constructor(glw, memManager, textureSource) {\n        super(glw, memManager, textureSource);\n    }\n    async onLoadRequest() {\n        const props = await this.textureSource.getTextureData();\n        return {\n            width: props.data?.width || 0,\n            height: props.data?.height || 0,\n        };\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxSubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nexport class DefaultShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n            ],\n        });\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\n// import type { Texture } from '../textures/Texture';\nexport class DefaultShaderBatched extends WebGlCoreShader {\n    supportsIndexedTextures = true;\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: [\n                'a_position',\n                'a_textureCoordinate',\n                'a_color',\n                'a_textureIndex',\n            ],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_textures[0]', uniform: 'uniform1iv' },\n            ],\n        });\n    }\n    bindTextures(texture) {\n        const { renderer, glw } = this;\n        if (texture.length > renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS) {\n            throw new Error(`DefaultShaderBatched: Cannot bind more than ${renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);\n        }\n        texture.forEach((t, i) => {\n            glw.activeTexture(i);\n            glw.bindTexture(t.ctxTexture);\n        });\n        const samplers = Array.from(Array(texture.length).keys());\n        this.setUniform('u_textures[0]', samplers);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: (textureUnits) => `\n      #define txUnits ${textureUnits}\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${textureUnits}], int idx, vec2 uv) {\n        ${Array.from(Array(textureUnits).keys())\n            .map((idx) => `\n          ${idx !== 0 ? 'else ' : ''}if (idx == ${idx}) {\n            return texture2D(textures[${idx}], uv);\n          }\n        `)\n            .join('')}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShaderBatched.js.map","import { WebGlCoreShader, } from '../WebGlCoreShader.js';\nimport { ShaderEffect } from './effects/ShaderEffect.js';\nimport memize from 'memize';\nconst effectCache = new Map();\nconst getResolvedEffect = (effects, effectContructors) => {\n    const key = JSON.stringify(effects);\n    if (effectCache.has(key)) {\n        return effectCache.get(key);\n    }\n    const value = (effects ?? []).map((effect) => ({\n        type: effect.type,\n        props: effectContructors[effect.type].resolveDefaults((effect.props || {})),\n    }));\n    effectCache.set(key, value);\n    return value;\n};\nexport class DynamicShader extends WebGlCoreShader {\n    effects = [];\n    constructor(renderer, props, effectContructors) {\n        const shader = DynamicShader.createShader(props, effectContructors);\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_alpha', uniform: 'uniform1f' },\n                ...shader.uniforms,\n            ],\n            shaderSources: {\n                vertex: shader.vertex,\n                fragment: shader.fragment,\n            },\n        });\n        this.effects = shader.effects;\n        this.calculateProps = memize(this.calculateProps.bind(this));\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    calculateProps(effects) {\n        const regEffects = this.renderer.shManager.getRegisteredEffects();\n        const results = [];\n        effects?.forEach((eff, index) => {\n            const effect = this.effects[index];\n            const fxClass = regEffects[effect.name];\n            const props = eff.props ?? {};\n            const uniInfo = effect.uniformInfo;\n            Object.keys(props).forEach((p) => {\n                const fxProp = fxClass.uniforms[p];\n                const propInfo = uniInfo[p];\n                let value = fxProp.validator\n                    ? fxProp.validator(props[p], props)\n                    : props[p];\n                if (Array.isArray(value)) {\n                    value = new Float32Array(value);\n                }\n                results.push({ name: propInfo.name, value });\n            });\n        });\n        return results;\n    }\n    bindProps(props) {\n        const results = this.calculateProps(props.effects);\n        results.forEach((r) => {\n            this.setUniform(r.name, r.value);\n        });\n    }\n    canBatchShaderProps(propsA, propsB) {\n        if (propsA.$dimensions.width !== propsB.$dimensions.width ||\n            propsA.$dimensions.height !== propsB.$dimensions.height ||\n            propsA.effects.length !== propsB.effects.length) {\n            return false;\n        }\n        const propsEffectsLen = propsA.effects.length;\n        let i = 0;\n        for (; i < propsEffectsLen; i++) {\n            const effectA = propsA.effects[i];\n            const effectB = propsB.effects[i];\n            if (effectA.type !== effectB.type) {\n                return false;\n            }\n            for (const key in effectA.props) {\n                if ((effectB.props && !effectB.props[key]) ||\n                    effectA.props[key] !== effectB.props[key]) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    static createShader(props, effectContructors) {\n        //counts duplicate effects\n        const effectNameCount = {};\n        const methods = {};\n        let declareUniforms = '';\n        const uniforms = [];\n        const uFx = [];\n        const effects = props.effects.map((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            effectNameCount[key] = effectNameCount[key] ? ++effectNameCount[key] : 1;\n            const nr = effectNameCount[key];\n            if (nr === 1) {\n                uFx.push({ key, type: effect.type, props: effect.props });\n            }\n            //initialize new effect class;\n            const fxClass = new baseClass({\n                ref: `${key}${nr === 1 ? '' : nr}`,\n                target: key,\n                props: effect.props,\n            });\n            declareUniforms += fxClass.declaredUniforms;\n            uniforms.push(...Object.values(fxClass.uniformInfo));\n            return fxClass;\n        });\n        //build source\n        let effectMethods = '';\n        uFx?.forEach((fx) => {\n            const fxClass = effectContructors[fx.type];\n            const fxProps = fxClass.resolveDefaults((fx.props ?? {}));\n            const remap = [];\n            for (const m in fxClass.methods) {\n                let cm = m;\n                const fxMethod = fxClass.methods[m];\n                if (methods[m] && methods[m] !== fxMethod) {\n                    cm = DynamicShader.resolveMethodDuplicate(m, fxMethod, methods);\n                }\n                methods[cm] = fxMethod.replace('function', cm);\n                remap.push({ m, cm });\n            }\n            let onShaderMask = fxClass.onShaderMask instanceof Function\n                ? fxClass.onShaderMask(fxProps)\n                : fxClass.onShaderMask;\n            let onColorize = fxClass.onColorize instanceof Function\n                ? fxClass.onColorize(fxProps)\n                : fxClass.onColorize;\n            let onEffectMask = fxClass.onEffectMask instanceof Function\n                ? fxClass.onEffectMask(fxProps)\n                : fxClass.onEffectMask;\n            remap.forEach((r) => {\n                const { m, cm } = r;\n                const reg = new RegExp(`\\\\$${m}`, 'g');\n                if (onShaderMask) {\n                    onShaderMask = onShaderMask.replace(reg, cm);\n                }\n                if (onColorize) {\n                    onColorize = onColorize.replace(reg, cm);\n                }\n                if (onEffectMask) {\n                    onEffectMask = onEffectMask.replace(reg, cm);\n                }\n            });\n            const methodParameters = fxClass.getMethodParameters(fxClass.uniforms, fxProps);\n            const pm = methodParameters.length > 0 ? `, ${methodParameters}` : '';\n            if (onShaderMask) {\n                effectMethods += `\n        float fx_${fx.key}_onShaderMask(float shaderMask ${pm}) {\n          ${onShaderMask}\n        }\n        `;\n            }\n            if (onColorize) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onColorize}\n          }\n        `;\n            }\n            if (onEffectMask) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onEffectMask}\n          }\n        `;\n            }\n        });\n        let sharedMethods = '';\n        for (const m in methods) {\n            sharedMethods += methods[m];\n        }\n        //fill main functions\n        let currentMask = `mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))`;\n        let drawEffects = `\n\n    `;\n        for (let i = 0; i < effects.length; i++) {\n            const current = effects[i];\n            const pm = current.passParameters.length > 0 ? `, ${current.passParameters}` : '';\n            const currentClass = effectContructors[current.name];\n            if (currentClass.onShaderMask) {\n                drawEffects += `\n        shaderMask = fx_${current.target}_onShaderMask(shaderMask ${pm});\n        `;\n            }\n            if (currentClass.onColorize) {\n                drawEffects += `\n        maskColor = fx_${current.target}_onColorize(shaderMask, maskColor, shaderColor${pm});\n        `;\n            }\n            if (currentClass.onEffectMask) {\n                currentMask = `fx_${current.target}_onEffectMask(shaderMask, maskColor, shaderColor${pm})`;\n            }\n            const next = effects[i + 1];\n            if (next === undefined ||\n                effectContructors[next.name].onEffectMask) {\n                drawEffects += `\n          shaderColor = ${currentMask};\n        `;\n            }\n        }\n        return {\n            effects,\n            uniforms,\n            fragment: DynamicShader.fragment(declareUniforms, sharedMethods, effectMethods, drawEffects),\n            vertex: DynamicShader.vertex(),\n        };\n    }\n    static resolveMethodDuplicate(key, effectMethod, methodCollection, increment = 0) {\n        const m = key + (increment > 0 ? increment : '');\n        if (methodCollection[m] && methodCollection[m] !== effectMethod) {\n            return this.resolveMethodDuplicate(key, effectMethod, methodCollection, ++increment);\n        }\n        return m;\n    }\n    static resolveDefaults(props, effectContructors) {\n        return {\n            effects: getResolvedEffect(props.effects, effectContructors),\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n            $alpha: 0,\n        };\n    }\n    static makeCacheKey(props, effectContructors) {\n        let fx = '';\n        props.effects?.forEach((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            fx += `,${key}`;\n        });\n        return `DynamicShader${fx}`;\n    }\n    static z$__type__Props;\n    static vertex = () => `\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  `;\n    static fragment = (uniforms, methods, effectMethods, drawEffects) => `\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${uniforms}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${methods}\n\n    ${effectMethods}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${drawEffects}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `;\n}\n//# sourceMappingURL=DynamicShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader, } from '../WebGlCoreShader.js';\n/**\n * Similar to the {@link DefaultShader} but cuts out 4 rounded rectangle corners\n * as defined by the specified corner {@link RoundedRectangleProps.radius}\n */\nexport class RoundedRectangle extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_radius', uniform: 'uniform1f' },\n            ],\n        });\n    }\n    static z$__type__Props;\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius || 10,\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n        };\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        this.setUniform('u_radius', props.radius);\n    }\n    canBatchShaderProps(propsA, propsB) {\n        return (propsA.radius === propsB.radius &&\n            propsA.$dimensions.width === propsB.$dimensions.width &&\n            propsA.$dimensions.height === propsB.$dimensions.height);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    `,\n    };\n}\n//# sourceMappingURL=RoundedRectangle.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../lib/utils.js';\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nconst IDENTITY_MATRIX_3x3 = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n/**\n * SdfShader supports multi-channel and single-channel signed distance field textures.\n *\n * @remarks\n * This Shader is used by the {@link SdfTextRenderer}. Do not use thie Shader\n * directly. Instead create a Text Node and assign a SDF font family to it.\n *\n * @internalRemarks\n * The only thing this shader does to support multi-channel SDFs is to\n * add a median function to the fragment shader. If this one function call\n * ends up being a performance bottleneck we can always look at ways to\n * remove it.\n */\nexport class SdfShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_transform', uniform: 'uniformMatrix3fv' },\n                { name: 'u_scrollY', uniform: 'uniform1f' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_color', uniform: 'uniform4fv' },\n                { name: 'u_size', uniform: 'uniform1f' },\n                { name: 'u_distanceRange', uniform: 'uniform1f' },\n                { name: 'u_debug', uniform: 'uniform1i' },\n            ],\n        });\n    }\n    bindTextures(textures) {\n        const { glw } = this;\n        glw.activeTexture(0);\n        glw.bindTexture(textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        const resolvedProps = SdfShader.resolveDefaults(props);\n        for (const key in resolvedProps) {\n            if (key === 'transform') {\n                this.setUniform('u_transform', false, resolvedProps[key]);\n            }\n            else if (key === 'scrollY') {\n                this.setUniform('u_scrollY', resolvedProps[key]);\n            }\n            else if (key === 'color') {\n                const components = getNormalizedRgbaComponents(resolvedProps.color);\n                this.setUniform('u_color', components);\n            }\n            else if (key === 'size') {\n                this.setUniform('u_size', resolvedProps[key]);\n            }\n            else if (key === 'distanceRange') {\n                this.setUniform('u_distanceRange', resolvedProps[key]);\n            }\n            else if (key === 'debug') {\n                this.setUniform('u_debug', resolvedProps[key] ? 1.0 : 0.0);\n            }\n        }\n    }\n    static resolveDefaults(props = {}) {\n        return {\n            transform: props.transform ?? IDENTITY_MATRIX_3x3,\n            scrollY: props.scrollY ?? 0,\n            color: props.color ?? 0xffffffff,\n            size: props.size ?? 16,\n            distanceRange: props.distanceRange ?? 1.0,\n            debug: props.debug ?? false,\n        };\n    }\n    static shaderSources = {\n        vertex: `\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    `,\n        fragment: `\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=SdfShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Masks the current maskcolor with rounded corners similar to {@link RoundedRectangle}\n */\nexport class RadiusEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radius';\n    static getEffectKey() {\n        return `radius`;\n    }\n    static uniforms = {\n        radius: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: (value) => {\n                let r = value;\n                if (Array.isArray(r)) {\n                    if (r.length === 2) {\n                        r = [r[0], r[1], r[0], r[1]];\n                    }\n                    else if (r.length === 3) {\n                        r = [r[0], r[1], r[2], r[0]];\n                    }\n                    else if (r.length !== 4) {\n                        r = [r[0], r[0], r[0], r[0]];\n                    }\n                }\n                else if (typeof r === 'number') {\n                    r = [r, r, r, r];\n                }\n                return r;\n            },\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        boxDist: `\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    `,\n    };\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius ?? 10,\n        };\n    }\n    static onShaderMask = `\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  `;\n    static onEffectMask = `\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  `;\n}\n//# sourceMappingURL=RadiusEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderEffect renders a border along all edges of an element\n */\nexport class BorderEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'border';\n    static getEffectKey() {\n        return `border`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static onEffectMask = `\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Linear Gradient effect over a effect mask\n */\nexport class LinearGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'linearGradient';\n    static getEffectKey(props) {\n        return `linearGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops || [];\n        if (stops.length === 0 || stops.length !== colors.length) {\n            const colorsL = colors.length;\n            let i = 0;\n            const tmp = stops;\n            for (; i < colorsL; i++) {\n                if (stops[i]) {\n                    tmp[i] = stops[i];\n                    if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                        tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                    }\n                }\n                else {\n                    tmp[i] = i * (1 / (colors.length - 1));\n                }\n            }\n            stops = tmp;\n        }\n        return {\n            colors,\n            stops,\n            angle: props.angle ?? 0,\n        };\n    }\n    static uniforms = {\n        angle: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                const cols = rgbas.map((rgbas) => getNormalizedRgbaComponents(rgbas));\n                return cols.reduce((acc, val) => acc.concat(val), []);\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static methods = {\n        fromLinear: `\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        toLinear: `\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        calcPoint: `\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    `,\n    };\n    static ColorLoop = (amount) => {\n        let loop = '';\n        for (let i = 2; i < amount; i++) {\n            loop += `colorOut = mix(colorOut, colors[${i}], clamp((dist - stops[${i - 1}]) / (stops[${i}] - stops[${i - 1}]), 0.0, 1.0));`;\n        }\n        return loop;\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${this.ColorLoop(colors)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=LinearGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Grayscale effect grayscales the color values of the current mask color\n */\nexport class GrayscaleEffect extends ShaderEffect {\n    name = 'grayscale';\n    static getEffectKey() {\n        return `grayscale`;\n    }\n    static resolveDefaults(props) {\n        return {\n            amount: props.amount ?? 1,\n        };\n    }\n    static uniforms = {\n        amount: {\n            value: 1,\n            method: 'uniform1f',\n            type: 'float',\n        },\n    };\n    static onColorize = `\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  `;\n}\n//# sourceMappingURL=GrayscaleEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the right side of an element\n */\nexport class BorderRightEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderRight';\n    static getEffectKey() {\n        return `borderRight`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderRightEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the top side of an element\n */\nexport class BorderTopEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderTop';\n    static getEffectKey() {\n        return `borderTop`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderTopEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the bottom side of an element\n */\nexport class BorderBottomEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderBottom';\n    static getEffectKey() {\n        return `borderBottom`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderBottomEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the left of an element\n */\nexport class BorderLeftEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderLeft';\n    static getEffectKey() {\n        return `borderLeft`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderLeftEffect.js.map","import { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Renders a Glitch effect using the incoming texture\n */\nexport class GlitchEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'glitch';\n    static getEffectKey(props) {\n        return `glitch`;\n    }\n    static resolveDefaults(props) {\n        return {\n            amplitude: props.amplitude ?? 0.2,\n            narrowness: props.narrowness ?? 4.0,\n            blockiness: props.blockiness ?? 2.0,\n            minimizer: props.minimizer ?? 8.0,\n            time: props.time ?? Date.now(),\n        };\n    }\n    static uniforms = {\n        amplitude: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        narrowness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        blockiness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        minimizer: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        time: {\n            value: 0,\n            method: 'uniform1f',\n            validator: (value) => {\n                return (Date.now() - value) % 1000;\n            },\n            type: 'float',\n        },\n    };\n    static methods = {\n        rand: `\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    `,\n        noise: `\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    `,\n        fbm: `\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    `,\n    };\n    static onColorize = `\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  `;\n}\n//# sourceMappingURL=GlitchEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class FadeOutEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'fadeOut';\n    static getEffectKey() {\n        return `fadeOut`;\n    }\n    static uniforms = {\n        fade: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: (value) => {\n                let r = value;\n                if (Array.isArray(r)) {\n                    if (r.length === 2) {\n                        r = [r[0], r[1], r[0], r[1]];\n                    }\n                    else if (r.length === 3) {\n                        r = [r[0], r[1], r[2], r[0]];\n                    }\n                    else if (r.length !== 4) {\n                        r = [r[0], r[0], r[0], r[0]];\n                    }\n                }\n                else if (typeof r === 'number') {\n                    r = [r, r, r, r];\n                }\n                return r;\n            },\n        },\n    };\n    static resolveDefaults(props) {\n        return {\n            fade: props.fade ?? 10,\n        };\n    }\n    static onColorize = `\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  `;\n}\n//# sourceMappingURL=FadeOutEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class RadialGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialGradient';\n    static getEffectKey(props) {\n        return `radialGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops || [];\n        if (stops.length === 0 || stops.length !== colors.length) {\n            const colorsL = colors.length;\n            let i = 0;\n            const tmp = stops;\n            for (; i < colorsL; i++) {\n                if (stops[i]) {\n                    tmp[i] = stops[i];\n                    if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                        tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                    }\n                }\n                else {\n                    tmp[i] = i * (1 / (colors.length - 1));\n                }\n            }\n            stops = tmp;\n        }\n        return {\n            colors,\n            stops,\n            width: props.width ?? 0,\n            height: props.height ?? props.width ?? 0,\n            pivot: props.pivot ?? [0.5, 0.5],\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        height: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        pivot: {\n            value: [0.5, 0.5],\n            method: 'uniform2fv',\n            type: 'vec2',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                const cols = rgbas.map((rgbas) => getNormalizedRgbaComponents(rgbas));\n                return cols.reduce((acc, val) => acc.concat(val), []);\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static ColorLoop = (amount) => {\n        let loop = '';\n        for (let i = 2; i < amount; i++) {\n            loop += `colorOut = mix(colorOut, colors[${i}], clamp((dist - stops[${i - 1}]) / (stops[${i}] - stops[${i - 1}]), 0.0, 1.0));`;\n        }\n        return loop;\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${this.ColorLoop(colors)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=RadialGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The RadialProgressEffect renders a border along all edges of an element\n */\nexport class RadialProgressEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialProgress';\n    static getEffectKey() {\n        return `radialProgress`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            progress: props.progress ?? 0.5,\n            offset: props.offset ?? 0,\n            range: props.range ?? Math.PI * 2,\n            rounded: props.rounded ?? false,\n            radius: props.radius ?? 1,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        progress: {\n            value: 0.5,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        offset: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        range: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        rounded: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n            validator: (value) => {\n                return value ? 1 : 0;\n            },\n        },\n        radius: {\n            value: 1,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        rotateUV: `\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    `,\n        drawDot: `\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    `,\n    };\n    static onEffectMask = `\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=RadialProgressEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Masks the current maskcolor a holepunch effect with rounded corners similar to {@link RoundedRectangle}\n */\nexport class HolePunchEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'holePunch';\n    static getEffectKey() {\n        return `holePunch`;\n    }\n    static uniforms = {\n        x: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        y: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        height: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        radius: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: (value) => {\n                let r = value;\n                if (Array.isArray(r)) {\n                    if (r.length === 2) {\n                        r = [r[0], r[1], r[0], r[1]];\n                    }\n                    else if (r.length === 3) {\n                        r = [r[0], r[1], r[2], r[0]];\n                    }\n                    else if (r.length !== 4) {\n                        r = [r[0], r[0], r[0], r[0]];\n                    }\n                }\n                else if (typeof r === 'number') {\n                    r = [r, r, r, r];\n                }\n                return r;\n            },\n        },\n    };\n    static resolveDefaults(props) {\n        return {\n            x: props.x || 0,\n            y: props.y || 0,\n            width: props.width || 50,\n            height: props.height || 50,\n            radius: props.radius ?? 0,\n        };\n    }\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        boxDist: `\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    `,\n    };\n    static onShaderMask = `\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  `;\n    static onEffectMask = `\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  `;\n}\n//# sourceMappingURL=HolePunchEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreShader } from \"../../CoreShader.js\";\nexport const ROUNDED_RECTANGLE_SHADER_TYPE = \"RoundedRectangle\";\nexport class UnsupportedShader extends CoreShader {\n    shType;\n    constructor(shType) {\n        super();\n        this.shType = shType;\n        if (shType !== ROUNDED_RECTANGLE_SHADER_TYPE) {\n            console.warn('Unsupported shader:', shType);\n        }\n    }\n    bindRenderOp() {\n        // noop\n    }\n    bindProps() {\n        // noop\n    }\n    attach() {\n        // noop\n    }\n    detach() {\n        // noop\n    }\n}\n//# sourceMappingURL=UnsupportedShader.js.map","import { DefaultShader } from './renderers/webgl/shaders/DefaultShader.js';\nimport { DefaultShaderBatched } from './renderers/webgl/shaders/DefaultShaderBatched.js';\nimport { DynamicShader, } from './renderers/webgl/shaders/DynamicShader.js';\nimport { RoundedRectangle } from './renderers/webgl/shaders/RoundedRectangle.js';\nimport { SdfShader } from './renderers/webgl/shaders/SdfShader.js';\nimport { RadiusEffect } from './renderers/webgl/shaders/effects/RadiusEffect.js';\nimport { BorderEffect } from './renderers/webgl/shaders/effects/BorderEffect.js';\nimport { LinearGradientEffect, } from './renderers/webgl/shaders/effects/LinearGradientEffect.js';\nimport { GrayscaleEffect, } from './renderers/webgl/shaders/effects/GrayscaleEffect.js';\nimport { BorderRightEffect } from './renderers/webgl/shaders/effects/BorderRightEffect.js';\nimport { BorderTopEffect } from './renderers/webgl/shaders/effects/BorderTopEffect.js';\nimport { BorderBottomEffect } from './renderers/webgl/shaders/effects/BorderBottomEffect.js';\nimport { BorderLeftEffect } from './renderers/webgl/shaders/effects/BorderLeftEffect.js';\nimport { GlitchEffect, } from './renderers/webgl/shaders/effects/GlitchEffect.js';\nimport { FadeOutEffect, } from './renderers/webgl/shaders/effects/FadeOutEffect.js';\nimport { RadialGradientEffect, } from './renderers/webgl/shaders/effects/RadialGradientEffect.js';\nimport { RadialProgressEffect, } from './renderers/webgl/shaders/effects/RadialProgressEffect.js';\nimport { HolePunchEffect } from './renderers/webgl/shaders/effects/HolePunchEffect.js';\nimport { WebGlCoreShader } from './renderers/webgl/WebGlCoreShader.js';\nimport { UnsupportedShader } from './renderers/canvas/shaders/UnsupportedShader.js';\nexport class CoreShaderManager {\n    shCache = new Map();\n    shConstructors = {};\n    attachedShader = null;\n    effectConstructors = {};\n    renderer;\n    constructor() {\n        this.registerShaderType('DefaultShader', DefaultShader);\n        this.registerShaderType('DefaultShaderBatched', DefaultShaderBatched);\n        this.registerShaderType('RoundedRectangle', RoundedRectangle);\n        this.registerShaderType('DynamicShader', DynamicShader);\n        this.registerShaderType('SdfShader', SdfShader);\n        this.registerEffectType('border', BorderEffect);\n        this.registerEffectType('borderBottom', BorderBottomEffect);\n        this.registerEffectType('borderLeft', BorderLeftEffect);\n        this.registerEffectType('borderRight', BorderRightEffect);\n        this.registerEffectType('borderTop', BorderTopEffect);\n        this.registerEffectType('fadeOut', FadeOutEffect);\n        this.registerEffectType('linearGradient', LinearGradientEffect);\n        this.registerEffectType('radialGradient', RadialGradientEffect);\n        this.registerEffectType('grayscale', GrayscaleEffect);\n        this.registerEffectType('glitch', GlitchEffect);\n        this.registerEffectType('radius', RadiusEffect);\n        this.registerEffectType('radialProgress', RadialProgressEffect);\n        this.registerEffectType('holePunch', HolePunchEffect);\n    }\n    registerShaderType(shType, shClass) {\n        this.shConstructors[shType] = shClass;\n    }\n    registerEffectType(effectType, effectClass) {\n        this.effectConstructors[effectType] = effectClass;\n    }\n    getRegisteredEffects() {\n        return this.effectConstructors;\n    }\n    getRegisteredShaders() {\n        return this.shConstructors;\n    }\n    loadShader(shType, props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const ShaderClass = this.shConstructors[shType];\n        if (!ShaderClass) {\n            throw new Error(`Shader type \"${shType}\" is not registered`);\n        }\n        if (this.renderer.mode === 'canvas' && ShaderClass.prototype instanceof WebGlCoreShader) {\n            return {\n                shader: new UnsupportedShader(shType),\n                props: props\n            };\n        }\n        if (shType === 'DynamicShader') {\n            return this.loadDynamicShader(props);\n        }\n        const resolvedProps = ShaderClass.resolveDefaults(props);\n        const cacheKey = ShaderClass.makeCacheKey(resolvedProps) || ShaderClass.name;\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return {\n                shader: this.shCache.get(cacheKey),\n                props: resolvedProps,\n            };\n        }\n        // @ts-expect-error ShaderClass WILL accept a Renderer\n        const shader = new ShaderClass(this.renderer, props);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return {\n            shader,\n            props: resolvedProps,\n        };\n    }\n    loadDynamicShader(props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const resolvedProps = DynamicShader.resolveDefaults(props, this.effectConstructors);\n        const cacheKey = DynamicShader.makeCacheKey(resolvedProps, this.effectConstructors);\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return {\n                shader: this.shCache.get(cacheKey),\n                props: resolvedProps,\n            };\n        }\n        const shader = new DynamicShader(this.renderer, props, this.effectConstructors);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return {\n            shader: shader,\n            props: resolvedProps,\n        };\n    }\n    useShader(shader) {\n        if (this.attachedShader === shader) {\n            return;\n        }\n        if (this.attachedShader) {\n            this.attachedShader.detach();\n        }\n        shader.attach();\n        this.attachedShader = shader;\n    }\n}\n//# sourceMappingURL=CoreShaderManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Represents a collection of WebGL Buffers along with their associated\n * vertex attribute formats.\n */\nexport class BufferCollection {\n    config;\n    constructor(config) {\n        this.config = config;\n    }\n    /**\n     * Get the WebGLBuffer associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getBuffer(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])?.buffer;\n    }\n    /**\n     * Get the AttributeInfo associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getAttributeInfo(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])\n            ?.attributes[attributeName];\n    }\n}\n//# sourceMappingURL=BufferCollection.js.map","/* eslint-disable @typescript-eslint/no-unsafe-return */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unsafe-argument */\nimport { assertTruthy } from '../../utils.js';\nimport { isWebGl2 } from '../renderers/webgl/internal/WebGlUtils.js';\n/**\n * Optimized WebGL Context Wrapper\n *\n * @remarks\n * This class contains the subset of the WebGLRenderingContext & WebGL2RenderingContext\n * API that is used by the renderer. Select high volume WebGL methods include\n * caching optimizations to avoid making WebGL calls if the state is already set\n * to the desired value.\n *\n * While most methods contained are direct passthroughs to the WebGL context,\n * some methods combine multiple WebGL calls into one for convenience, modify\n * arguments to be more convenient, or are replaced by more specific methods.\n *\n * Not all methods are optimized. Only methods that are called frequently\n * and/or have a high cost are optimized.\n *\n * A subset of GLenum constants are also exposed as properties on this class\n * for convenience.\n */\nexport class WebGlContextWrapper {\n    gl;\n    //#region Cached WebGL State\n    activeTextureUnit = 0;\n    texture2dUnits;\n    texture2dParams = new WeakMap();\n    scissorEnabled;\n    scissorX;\n    scissorY;\n    scissorWidth;\n    scissorHeight;\n    blendEnabled;\n    blendSrcRgb;\n    blendDstRgb;\n    blendSrcAlpha;\n    blendDstAlpha;\n    boundArrayBuffer;\n    boundElementArrayBuffer;\n    curProgram;\n    programUniforms = new WeakMap();\n    //#endregion Cached WebGL State\n    //#region Canvas\n    canvas;\n    //#endregion Canvas\n    //#region WebGL Enums\n    MAX_RENDERBUFFER_SIZE;\n    MAX_TEXTURE_SIZE;\n    MAX_VIEWPORT_DIMS;\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n    MAX_TEXTURE_IMAGE_UNITS;\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS;\n    MAX_VERTEX_ATTRIBS;\n    MAX_VARYING_VECTORS;\n    MAX_VERTEX_UNIFORM_VECTORS;\n    MAX_FRAGMENT_UNIFORM_VECTORS;\n    TEXTURE_MAG_FILTER;\n    TEXTURE_MIN_FILTER;\n    TEXTURE_WRAP_S;\n    TEXTURE_WRAP_T;\n    LINEAR;\n    CLAMP_TO_EDGE;\n    RGBA;\n    UNSIGNED_BYTE;\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL;\n    FLOAT;\n    TRIANGLES;\n    UNSIGNED_SHORT;\n    ONE;\n    ONE_MINUS_SRC_ALPHA;\n    VERTEX_SHADER;\n    FRAGMENT_SHADER;\n    STATIC_DRAW;\n    COMPILE_STATUS;\n    LINK_STATUS;\n    DYNAMIC_DRAW;\n    //#endregion WebGL Enums\n    constructor(gl) {\n        this.gl = gl;\n        // The following code extracts the current state of the WebGL context\n        // to our local JavaScript cached version of it. This is so we can\n        // avoid making WebGL calls if we don't need to.\n        // We could assume that the WebGL context is in a default state, but\n        // in the future we may want to support restoring a broken WebGL context\n        // and this will help with that.\n        this.activeTextureUnit =\n            gl.getParameter(gl.ACTIVE_TEXTURE) - gl.TEXTURE0;\n        const maxTextureUnits = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        // save current texture units\n        this.texture2dUnits = new Array(maxTextureUnits)\n            .fill(undefined)\n            .map((_, i) => {\n            this.activeTexture(i);\n            return gl.getParameter(gl.TEXTURE_BINDING_2D);\n        });\n        // restore active texture unit\n        this.activeTexture(this.activeTextureUnit);\n        this.scissorEnabled = gl.isEnabled(gl.SCISSOR_TEST);\n        const scissorBox = gl.getParameter(gl.SCISSOR_BOX);\n        this.scissorX = scissorBox[0];\n        this.scissorY = scissorBox[1];\n        this.scissorWidth = scissorBox[2];\n        this.scissorHeight = scissorBox[3];\n        this.blendEnabled = gl.isEnabled(gl.BLEND);\n        this.blendSrcRgb = gl.getParameter(gl.BLEND_SRC_RGB);\n        this.blendDstRgb = gl.getParameter(gl.BLEND_DST_RGB);\n        this.blendSrcAlpha = gl.getParameter(gl.BLEND_SRC_ALPHA);\n        this.blendDstAlpha = gl.getParameter(gl.BLEND_DST_ALPHA);\n        this.boundArrayBuffer = gl.getParameter(gl.ARRAY_BUFFER_BINDING);\n        this.boundElementArrayBuffer = gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);\n        this.curProgram = gl.getParameter(gl.CURRENT_PROGRAM);\n        this.canvas = gl.canvas;\n        // Extract GLenums\n        this.MAX_RENDERBUFFER_SIZE = gl.MAX_RENDERBUFFER_SIZE;\n        this.MAX_TEXTURE_SIZE = gl.MAX_TEXTURE_SIZE;\n        this.MAX_VIEWPORT_DIMS = gl.MAX_VIEWPORT_DIMS;\n        this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        this.MAX_TEXTURE_IMAGE_UNITS = gl.MAX_TEXTURE_IMAGE_UNITS;\n        this.MAX_COMBINED_TEXTURE_IMAGE_UNITS = gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS;\n        this.MAX_VERTEX_ATTRIBS = gl.MAX_VERTEX_ATTRIBS;\n        this.MAX_VARYING_VECTORS = gl.MAX_VARYING_VECTORS;\n        this.MAX_VERTEX_UNIFORM_VECTORS = gl.MAX_VERTEX_UNIFORM_VECTORS;\n        this.MAX_FRAGMENT_UNIFORM_VECTORS = gl.MAX_FRAGMENT_UNIFORM_VECTORS;\n        this.TEXTURE_MAG_FILTER = gl.TEXTURE_MAG_FILTER;\n        this.TEXTURE_MIN_FILTER = gl.TEXTURE_MIN_FILTER;\n        this.TEXTURE_WRAP_S = gl.TEXTURE_WRAP_S;\n        this.TEXTURE_WRAP_T = gl.TEXTURE_WRAP_T;\n        this.LINEAR = gl.LINEAR;\n        this.CLAMP_TO_EDGE = gl.CLAMP_TO_EDGE;\n        this.RGBA = gl.RGBA;\n        this.UNSIGNED_BYTE = gl.UNSIGNED_BYTE;\n        this.UNPACK_PREMULTIPLY_ALPHA_WEBGL = gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL;\n        this.FLOAT = gl.FLOAT;\n        this.TRIANGLES = gl.TRIANGLES;\n        this.UNSIGNED_SHORT = gl.UNSIGNED_SHORT;\n        this.ONE = gl.ONE;\n        this.ONE_MINUS_SRC_ALPHA = gl.ONE_MINUS_SRC_ALPHA;\n        this.MAX_VERTEX_TEXTURE_IMAGE_UNITS = gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        this.TRIANGLES = gl.TRIANGLES;\n        this.UNSIGNED_SHORT = gl.UNSIGNED_SHORT;\n        this.VERTEX_SHADER = gl.VERTEX_SHADER;\n        this.FRAGMENT_SHADER = gl.FRAGMENT_SHADER;\n        this.STATIC_DRAW = gl.STATIC_DRAW;\n        this.COMPILE_STATUS = gl.COMPILE_STATUS;\n        this.LINK_STATUS = gl.LINK_STATUS;\n        this.DYNAMIC_DRAW = gl.DYNAMIC_DRAW;\n    }\n    /**\n     * Returns true if the WebGL context is WebGL2\n     *\n     * @returns\n     */\n    isWebGl2() {\n        return isWebGl2(this.gl);\n    }\n    /**\n     * ```\n     * gl.activeTexture(textureUnit + gl.TEXTURE0);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: `textureUnit` is based from 0, not `gl.TEXTURE0`.\n     *\n     * @param textureUnit\n     */\n    activeTexture(textureUnit) {\n        const { gl } = this;\n        if (this.activeTextureUnit !== textureUnit) {\n            gl.activeTexture(textureUnit + gl.TEXTURE0);\n            this.activeTextureUnit = textureUnit;\n        }\n    }\n    /**\n     * ```\n     * gl.bindTexture(gl.TEXTURE_2D, texture);\n     * ```\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     *\n     * @param texture\n     */\n    bindTexture(texture) {\n        const { gl, activeTextureUnit, texture2dUnits } = this;\n        if (texture2dUnits[activeTextureUnit] === texture) {\n            return;\n        }\n        texture2dUnits[activeTextureUnit] = texture;\n        gl.bindTexture(this.gl.TEXTURE_2D, texture);\n    }\n    _getActiveTexture() {\n        const { activeTextureUnit, texture2dUnits } = this;\n        return texture2dUnits[activeTextureUnit];\n    }\n    /**\n     * ```\n     * gl.texParameteri(gl.TEXTURE_2D, pname, param);\n     * ```\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     *\n     * @param pname\n     * @param param\n     * @returns\n     */\n    texParameteri(pname, param) {\n        const { gl, texture2dParams } = this;\n        const activeTexture = this._getActiveTexture();\n        if (!activeTexture) {\n            throw new Error('No active texture');\n        }\n        let textureParams = texture2dParams.get(activeTexture);\n        if (!textureParams) {\n            textureParams = {};\n            texture2dParams.set(activeTexture, textureParams);\n        }\n        if (textureParams[pname] === param) {\n            return;\n        }\n        textureParams[pname] = param;\n        gl.texParameteri(gl.TEXTURE_2D, pname, param);\n    }\n    texImage2D(level, internalFormat, widthOrFormat, heightOrType, borderOrSource, format, type, pixels) {\n        const { gl } = this;\n        if (format) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, widthOrFormat, heightOrType, borderOrSource, format, type, pixels);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, widthOrFormat, heightOrType, borderOrSource);\n        }\n    }\n    /**\n     * ```\n     * gl.compressedTexImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, data);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     */\n    compressedTexImage2D(level, internalformat, width, height, border, data) {\n        const { gl } = this;\n        gl.compressedTexImage2D(gl.TEXTURE_2D, level, internalformat, width, height, border, data);\n    }\n    /**\n     * ```\n     * gl.pixelStorei(pname, param);\n     * ```\n     *\n     * @param pname\n     * @param param\n     */\n    pixelStorei(pname, param) {\n        const { gl } = this;\n        gl.pixelStorei(pname, param);\n    }\n    /**\n     * ```\n     * gl.generateMipmap(gl.TEXTURE_2D);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Bind target is always `gl.TEXTURE_2D`\n     */\n    generateMipmap() {\n        const { gl } = this;\n        gl.generateMipmap(gl.TEXTURE_2D);\n    }\n    /**\n     * ```\n     * gl.createTexture();\n     * ```\n     *\n     * @returns\n     */\n    createTexture() {\n        const { gl } = this;\n        return gl.createTexture();\n    }\n    /**\n     * ```\n     * gl.deleteTexture(texture);\n     * ```\n     *\n     * @param texture\n     */\n    deleteTexture(texture) {\n        const { gl } = this;\n        if (texture) {\n            this.texture2dParams.delete(texture);\n        }\n        gl.deleteTexture(texture);\n    }\n    /**\n     * ```\n     * gl.viewport(x, y, width, height);\n     * ```\n     */\n    viewport(x, y, width, height) {\n        const { gl } = this;\n        gl.viewport(x, y, width, height);\n    }\n    /**\n     * ```\n     * gl.clearColor(red, green, blue, alpha);\n     * ```\n     *\n     * @param red\n     * @param green\n     * @param blue\n     * @param alpha\n     */\n    clearColor(red, green, blue, alpha) {\n        const { gl } = this;\n        gl.clearColor(red, green, blue, alpha);\n    }\n    /**\n     * ```\n     * gl[\"enable\"|\"disable\"](gl.SCISSOR_TEST);\n     * ```\n     * @param enable\n     */\n    setScissorTest(enable) {\n        const { gl, scissorEnabled } = this;\n        if (enable === scissorEnabled) {\n            return;\n        }\n        if (enable) {\n            gl.enable(gl.SCISSOR_TEST);\n        }\n        else {\n            gl.disable(gl.SCISSOR_TEST);\n        }\n        this.scissorEnabled = enable;\n    }\n    /**\n     * ```\n     * gl.scissor(x, y, width, height);\n     * ```\n     *\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    scissor(x, y, width, height) {\n        const { gl, scissorX, scissorY, scissorWidth, scissorHeight } = this;\n        if (x !== scissorX ||\n            y !== scissorY ||\n            width !== scissorWidth ||\n            height !== scissorHeight) {\n            gl.scissor(x, y, width, height);\n            this.scissorX = x;\n            this.scissorY = y;\n            this.scissorWidth = width;\n            this.scissorHeight = height;\n        }\n    }\n    /**\n     * ```\n     * gl[\"enable\"|\"disable\"](gl.BLEND);\n     * ```\n     *\n     * @param blend\n     * @returns\n     */\n    setBlend(blend) {\n        const { gl, blendEnabled } = this;\n        if (blend === blendEnabled) {\n            return;\n        }\n        if (blend) {\n            gl.enable(gl.BLEND);\n        }\n        else {\n            gl.disable(gl.BLEND);\n        }\n        this.blendEnabled = blend;\n    }\n    /**\n     * ```\n     * gl.blendFunc(src, dst);\n     * ```\n     *\n     * @param src\n     * @param dst\n     */\n    blendFunc(src, dst) {\n        const { gl, blendSrcRgb, blendDstRgb, blendSrcAlpha, blendDstAlpha } = this;\n        if (src !== blendSrcRgb ||\n            dst !== blendDstRgb ||\n            src !== blendSrcAlpha ||\n            dst !== blendDstAlpha) {\n            gl.blendFunc(src, dst);\n            this.blendSrcRgb = src;\n            this.blendDstRgb = dst;\n            this.blendSrcAlpha = src;\n            this.blendDstAlpha = dst;\n        }\n    }\n    /**\n     * ```\n     * createBuffer();\n     * ```\n     *\n     * @returns\n     */\n    createBuffer() {\n        const { gl } = this;\n        return gl.createBuffer();\n    }\n    /**\n     * ```\n     * gl.clear(gl.COLOR_BUFFER_BIT);\n     * ```\n     *\n     * @remarks\n     * **WebGL Difference**: Clear mask is always `gl.COLOR_BUFFER_BIT`\n     */\n    clear() {\n        const { gl } = this;\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n     * gl.bufferData(gl.ARRAY_BUFFER, data, usage);\n     * ```\n     *\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.bufferData` are combined into one function.\n     *\n     * @param buffer\n     * @param data\n     * @param usage\n     */\n    arrayBufferData(buffer, data, usage) {\n        const { gl, boundArrayBuffer } = this;\n        if (boundArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            this.boundArrayBuffer = buffer;\n        }\n        gl.bufferData(gl.ARRAY_BUFFER, data, usage);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n     * gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, usage);\n     * ```\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.bufferData` are combined into one function.\n     *\n     * @param buffer\n     * @param data\n     * @param usage\n     */\n    elementArrayBufferData(buffer, data, usage) {\n        const { gl, boundElementArrayBuffer } = this;\n        if (boundElementArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n            this.boundElementArrayBuffer = buffer;\n        }\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, usage);\n    }\n    /**\n     * ```\n     * gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n     * gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n     * ```\n     *\n     * @remarks\n     * **WebGL Combo**: `gl.bindBuffer` and `gl.vertexAttribPointer` are combined into one function.\n     *\n     * @param buffer\n     * @param index\n     * @param size\n     * @param type\n     * @param normalized\n     * @param stride\n     * @param offset\n     */\n    vertexAttribPointer(buffer, index, size, type, normalized, stride, offset) {\n        const { gl, boundArrayBuffer } = this;\n        if (boundArrayBuffer !== buffer) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            this.boundArrayBuffer = buffer;\n        }\n        gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n    }\n    /**\n     * ```\n     * gl.useProgram(program);\n     * ```\n     *\n     * @param program\n     * @returns\n     */\n    useProgram(program) {\n        const { gl, curProgram } = this;\n        if (curProgram === program) {\n            return;\n        }\n        gl.useProgram(program);\n        this.curProgram = program;\n    }\n    setUniform(type, location, ...args) {\n        const { gl, programUniforms } = this;\n        let uniforms = programUniforms.get(this.curProgram);\n        if (!uniforms) {\n            uniforms = new Map();\n            programUniforms.set(this.curProgram, uniforms);\n        }\n        const uniformArgs = uniforms.get(location);\n        if (!uniformArgs || !compareArrays(uniformArgs, args)) {\n            uniforms.set(location, args);\n            gl[type](location, ...args);\n        }\n    }\n    /**\n     * ```\n     * gl.getParameter(pname);\n     * ```\n     *\n     * @param pname\n     * @returns\n     */\n    getParameter(pname) {\n        const { gl } = this;\n        return gl.getParameter(pname);\n    }\n    /**\n     * ```\n     * gl.drawElements(mode, count, type, offset);\n     * ```\n     *\n     * @param mode\n     * @param count\n     * @param type\n     * @param offset\n     */\n    drawElements(mode, count, type, offset) {\n        const { gl } = this;\n        gl.drawElements(mode, count, type, offset);\n    }\n    /**\n     * ```\n     * gl.drawArrays(mode, first, count);\n     * ```\n     *\n     * @param name\n     * @returns\n     */\n    getExtension(name) {\n        const { gl } = this;\n        return gl.getExtension(name);\n    }\n    /**\n     * ```\n     * gl.createVertexArray();\n     * ```\n     *\n     * @returns\n     */\n    createVertexArray() {\n        const { gl } = this;\n        assertTruthy(gl instanceof WebGL2RenderingContext);\n        return gl.createVertexArray();\n    }\n    /**\n     * ```\n     * gl.bindVertexArray(vertexArray);\n     * ```\n     *\n     * @param vertexArray\n     */\n    bindVertexArray(vertexArray) {\n        const { gl } = this;\n        assertTruthy(gl instanceof WebGL2RenderingContext);\n        gl.bindVertexArray(vertexArray);\n    }\n    /**\n     * ```\n     * gl.getAttribLocation(program, name);\n     * ```\n     *\n     * @param program\n     * @param name\n     * @returns\n     */\n    getAttribLocation(program, name) {\n        const { gl } = this;\n        return gl.getAttribLocation(program, name);\n    }\n    /**\n     * ```\n     * gl.getUniformLocation(program, name);\n     * ```\n     *\n     * @param program\n     * @param name\n     * @returns\n     */\n    getUniformLocation(program, name) {\n        const { gl } = this;\n        return gl.getUniformLocation(program, name);\n    }\n    /**\n     * ```\n     * gl.enableVertexAttribArray(index);\n     * ```\n     *\n     * @param index\n     */\n    enableVertexAttribArray(index) {\n        const { gl } = this;\n        gl.enableVertexAttribArray(index);\n    }\n    /**\n     * ```\n     * gl.disableVertexAttribArray(index);\n     * ```\n     *\n     * @param index\n     */\n    disableVertexAttribArray(index) {\n        const { gl } = this;\n        gl.disableVertexAttribArray(index);\n    }\n    /**\n     * ```\n     * gl.createShader(type);\n     * ```\n     *\n     * @param type\n     * @returns\n     */\n    createShader(type) {\n        const { gl } = this;\n        return gl.createShader(type);\n    }\n    /**\n     * ```\n     * gl.compileShader(shader);\n     * ```\n     *\n     * @param shader\n     * @returns\n     */\n    compileShader(shader) {\n        const { gl } = this;\n        gl.compileShader(shader);\n    }\n    /**\n     * ```\n     * gl.attachShader(program, shader);\n     * ```\n     *\n     * @param program\n     * @param shader\n     */\n    attachShader(program, shader) {\n        const { gl } = this;\n        gl.attachShader(program, shader);\n    }\n    /**\n     * ```\n     * gl.linkProgram(program);\n     * ```\n     *\n     * @param program\n     */\n    linkProgram(program) {\n        const { gl } = this;\n        gl.linkProgram(program);\n    }\n    /**\n     * ```\n     * gl.deleteProgram(shader);\n     * ```\n     *\n     * @param shader\n     */\n    deleteProgram(shader) {\n        const { gl } = this;\n        gl.deleteProgram(shader);\n    }\n    /**\n     * ```\n     * gl.getShaderParameter(shader, pname);\n     * ```\n     *\n     * @param shader\n     * @param pname\n     */\n    getShaderParameter(shader, pname) {\n        const { gl } = this;\n        return gl.getShaderParameter(shader, pname);\n    }\n    /**\n     * ```\n     * gl.getShaderInfoLog(shader);\n     * ```\n     *\n     * @param shader\n     */\n    getShaderInfoLog(shader) {\n        const { gl } = this;\n        return gl.getShaderInfoLog(shader);\n    }\n    /**\n     * ```\n     * gl.createProgram();\n     * ```\n     *\n     * @returns\n     */\n    createProgram() {\n        const { gl } = this;\n        return gl.createProgram();\n    }\n    /**\n     * ```\n     * gl.getProgramParameter(program, pname);\n     * ```\n     *\n     * @param program\n     * @param pname\n     * @returns\n     */\n    getProgramParameter(program, pname) {\n        const { gl } = this;\n        return gl.getProgramParameter(program, pname);\n    }\n    /**\n     * ```\n     * gl.getProgramInfoLog(program);\n     * ```\n     *\n     * @param program\n     * @returns\n     */\n    getProgramInfoLog(program) {\n        const { gl } = this;\n        return gl.getProgramInfoLog(program);\n    }\n    /**\n     * ```\n     * gl.shaderSource(shader, source);\n     * ```\n     *\n     * @param shader\n     * @param source\n     */\n    shaderSource(shader, source) {\n        const { gl } = this;\n        gl.shaderSource(shader, source);\n    }\n    /**\n     * ```\n     * gl.deleteShader(shader);\n     * ```\n     *\n     * @param shader\n     */\n    deleteShader(shader) {\n        const { gl } = this;\n        gl.deleteShader(shader);\n    }\n}\n/**\n * Compare two arrays for equality.\n *\n * @remarks\n * This function will not try to compare nested arrays or Float32Arrays and\n * instead will always return false when they are encountered.\n *\n * @param a\n * @param b\n * @returns\n */\nexport function compareArrays(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    return a.every((v, i) => {\n        // Don't bother to compare nested arrays or Float32Arrays\n        if (Array.isArray(v) || v instanceof Float32Array) {\n            return false;\n        }\n        else {\n            return v === b[i];\n        }\n    });\n}\n//# sourceMappingURL=WebGlContextWrapper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, createWebGLContext, hasOwn, } from '../../../utils.js';\nimport { CoreRenderer } from '../CoreRenderer.js';\nimport { WebGlCoreRenderOp } from './WebGlCoreRenderOp.js';\nimport { createIndexBuffer, getWebGlParameters, getWebGlExtensions, } from './internal/RendererUtils.js';\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { ColorTexture } from '../../textures/ColorTexture.js';\nimport { SubTexture } from '../../textures/SubTexture.js';\nimport { WebGlCoreCtxSubTexture } from './WebGlCoreCtxSubTexture.js';\nimport { CoreShaderManager } from '../../CoreShaderManager.js';\nimport { BufferCollection } from './internal/BufferCollection.js';\nimport { compareRect, getNormalizedRgbaComponents, } from '../../lib/utils.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\nimport { WebGlContextWrapper } from '../../lib/WebGlContextWrapper.js';\nconst WORDS_PER_QUAD = 24;\nexport class WebGlCoreRenderer extends CoreRenderer {\n    //// WebGL Native Context and Data\n    glw;\n    system;\n    //// Persistent data\n    quadBuffer = new ArrayBuffer(1024 * 1024 * 4);\n    fQuadBuffer = new Float32Array(this.quadBuffer);\n    uiQuadBuffer = new Uint32Array(this.quadBuffer);\n    renderOps = [];\n    //// Render Op / Buffer Filling State\n    curBufferIdx = 0;\n    curRenderOp = null;\n    renderables = [];\n    //// Default Shader\n    defaultShader;\n    quadBufferCollection;\n    /**\n     * White pixel texture used by default when no texture is specified.\n     */\n    defaultTexture;\n    constructor(options) {\n        super(options);\n        this.mode = 'webgl';\n        const { canvas, clearColor, bufferMemory } = options;\n        this.defaultTexture = new ColorTexture(this.txManager);\n        // When the default texture is loaded, request a render in case the\n        // RAF is paused. Fixes: https://github.com/lightning-js/renderer/issues/123\n        this.defaultTexture.once('loaded', () => {\n            this.stage.requestRender();\n        });\n        const gl = createWebGLContext(canvas, options.contextSpy);\n        const glw = (this.glw = new WebGlContextWrapper(gl));\n        const color = getNormalizedRgbaComponents(clearColor);\n        glw.viewport(0, 0, canvas.width, canvas.height);\n        glw.clearColor(color[0], color[1], color[2], color[3]);\n        glw.setBlend(true);\n        glw.blendFunc(glw.ONE, glw.ONE_MINUS_SRC_ALPHA);\n        createIndexBuffer(glw, bufferMemory);\n        this.system = {\n            parameters: getWebGlParameters(this.glw),\n            extensions: getWebGlExtensions(this.glw),\n        };\n        this.shManager.renderer = this;\n        this.defaultShader = this.shManager.loadShader('DefaultShader').shader;\n        const quadBuffer = glw.createBuffer();\n        assertTruthy(quadBuffer);\n        const stride = 6 * Float32Array.BYTES_PER_ELEMENT;\n        this.quadBufferCollection = new BufferCollection([\n            {\n                buffer: quadBuffer,\n                attributes: {\n                    a_position: {\n                        name: 'a_position',\n                        size: 2,\n                        type: glw.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 0, // start at the beginning of the buffer\n                    },\n                    a_textureCoordinate: {\n                        name: 'a_textureCoordinate',\n                        size: 2,\n                        type: glw.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_color: {\n                        name: 'a_color',\n                        size: 4,\n                        type: glw.UNSIGNED_BYTE,\n                        normalized: true,\n                        stride,\n                        offset: 4 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_textureIndex: {\n                        name: 'a_textureIndex',\n                        size: 1,\n                        type: glw.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 5 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                },\n            },\n        ]);\n    }\n    reset() {\n        const { glw } = this;\n        this.curBufferIdx = 0;\n        this.curRenderOp = null;\n        this.renderOps.length = 0;\n        glw.setScissorTest(false);\n        glw.clear();\n    }\n    getShaderManager() {\n        return this.shManager;\n    }\n    createCtxTexture(textureSource) {\n        if (textureSource instanceof SubTexture) {\n            return new WebGlCoreCtxSubTexture(this.glw, this.txMemManager, textureSource);\n        }\n        return new WebGlCoreCtxTexture(this.glw, this.txMemManager, textureSource);\n    }\n    /**\n     * This function adds a quad (a rectangle composed of two triangles) to the WebGL rendering pipeline.\n     *\n     * It takes a set of options that define the quad's properties, such as its dimensions, colors, texture, shader, and transformation matrix.\n     * The function first updates the shader properties with the current dimensions if necessary, then sets the default texture if none is provided.\n     * It then checks if a new render operation is needed, based on the current shader and clipping rectangle.\n     * If a new render operation is needed, it creates one and updates the current render operation.\n     * The function then adjusts the texture coordinates based on the texture options and adds the texture to the texture manager.\n     *\n     * Finally, it calculates the vertices for the quad, taking into account any transformations, and adds them to the quad buffer.\n     * The function updates the length and number of quads in the current render operation, and updates the current buffer index.\n     */\n    addQuad(params) {\n        const { fQuadBuffer, uiQuadBuffer } = this;\n        const { width, height, colorTl, colorTr, colorBl, colorBr, textureOptions, shader, shaderProps, alpha, clippingRect, tx, ty, ta, tb, tc, td, } = params;\n        let { texture } = params;\n        /**\n         * If the shader props contain any automatic properties, update it with the\n         * current dimensions that will be used to render the quad.\n         */\n        if (shaderProps && hasOwn(shaderProps, '$dimensions')) {\n            const dimensions = shaderProps.$dimensions;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            dimensions.width = width;\n            dimensions.height = height;\n        }\n        texture = texture ?? this.defaultTexture;\n        assertTruthy(texture instanceof Texture, 'Invalid texture type');\n        let { curBufferIdx: bufferIdx, curRenderOp } = this;\n        const targetDims = {\n            width,\n            height,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        };\n        const targetShader = shader || this.defaultShader;\n        assertTruthy(targetShader instanceof WebGlCoreShader);\n        if (curRenderOp) {\n            // If the current render op is not the same shader, create a new one\n            // If the current render op's shader props are not compatible with the\n            // the new shader props, create a new one render op.\n            if (curRenderOp.shader !== targetShader ||\n                !compareRect(curRenderOp.clippingRect, clippingRect) ||\n                (curRenderOp.shader !== this.defaultShader &&\n                    (!shaderProps ||\n                        !curRenderOp.shader.canBatchShaderProps(curRenderOp.shaderProps, shaderProps)))) {\n                curRenderOp = null;\n            }\n        }\n        assertTruthy(targetShader instanceof WebGlCoreShader);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n        if (!curRenderOp) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this.newRenderOp(targetShader, shaderProps, alpha, targetDims, clippingRect, bufferIdx);\n            curRenderOp = this.curRenderOp;\n            assertTruthy(curRenderOp);\n        }\n        const flipX = textureOptions?.flipX ?? false;\n        const flipY = textureOptions?.flipY ?? false;\n        let texCoordX1 = 0;\n        let texCoordY1 = 0;\n        let texCoordX2 = 1;\n        let texCoordY2 = 1;\n        if (texture instanceof SubTexture) {\n            const { x: tx, y: ty, width: tw, height: th } = texture.props;\n            const { width: parentW = 0, height: parentH = 0 } = texture.parentTexture\n                .dimensions || { width: 0, height: 0 };\n            texCoordX1 = tx / parentW;\n            texCoordX2 = texCoordX1 + tw / parentW;\n            texCoordY1 = ty / parentH;\n            texCoordY2 = texCoordY1 + th / parentH;\n            texture = texture.parentTexture;\n        }\n        // Flip texture coordinates if dictated by texture options\n        if (flipX) {\n            [texCoordX1, texCoordX2] = [texCoordX2, texCoordX1];\n        }\n        if (flipY) {\n            [texCoordY1, texCoordY2] = [texCoordY2, texCoordY1];\n        }\n        const { txManager } = this.stage;\n        const ctxTexture = txManager.getCtxTexture(texture);\n        assertTruthy(ctxTexture instanceof WebGlCoreCtxTexture);\n        const textureIdx = this.addTexture(ctxTexture, bufferIdx);\n        curRenderOp = this.curRenderOp;\n        assertTruthy(curRenderOp);\n        // render quad advanced\n        if (tb !== 0 || tc !== 0) {\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = tx; // vertexX\n            fQuadBuffer[bufferIdx++] = ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = tx + width * ta;\n            fQuadBuffer[bufferIdx++] = ty + width * tc;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = tx + height * tb;\n            fQuadBuffer[bufferIdx++] = ty + height * td;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = tx + width * ta + height * tb;\n            fQuadBuffer[bufferIdx++] = ty + width * tc + height * td;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        else {\n            // Calculate the right corner of the quad\n            // multiplied by the scale\n            const rightCornerX = tx + width * ta;\n            const rightCornerY = ty + height * td;\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = tx; // vertexX\n            fQuadBuffer[bufferIdx++] = ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = ty;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = tx;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        // Update the length of the current render op\n        curRenderOp.length += WORDS_PER_QUAD;\n        curRenderOp.numQuads++;\n        this.curBufferIdx = bufferIdx;\n    }\n    /**\n     * Replace the existing RenderOp with a new one that uses the specified Shader\n     * and starts at the specified buffer index.\n     *\n     * @param shader\n     * @param bufferIdx\n     */\n    newRenderOp(shader, shaderProps, alpha, dimensions, clippingRect, bufferIdx) {\n        const curRenderOp = new WebGlCoreRenderOp(this.glw, this.options, this.quadBufferCollection, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, 0);\n        this.curRenderOp = curRenderOp;\n        this.renderOps.push(curRenderOp);\n    }\n    /**\n     * Add a texture to the current RenderOp. If the texture cannot be added to the\n     * current RenderOp, a new RenderOp will be created and the texture will be added\n     * to that one.\n     *\n     * If the texture cannot be added to the new RenderOp, an error will be thrown.\n     *\n     * @param texture\n     * @param bufferIdx\n     * @param recursive\n     * @returns Assigned Texture Index of the texture in the render op\n     */\n    addTexture(texture, bufferIdx, recursive) {\n        const { curRenderOp } = this;\n        assertTruthy(curRenderOp);\n        const textureIdx = curRenderOp.addTexture(texture);\n        // TODO: Refactor to be more DRY\n        if (textureIdx === 0xffffffff) {\n            if (recursive) {\n                throw new Error('Unable to add texture to render op');\n            }\n            const { shader, shaderProps, dimensions, clippingRect, alpha } = curRenderOp;\n            this.newRenderOp(shader, shaderProps, alpha, dimensions, clippingRect, bufferIdx);\n            return this.addTexture(texture, bufferIdx, true);\n        }\n        return textureIdx;\n    }\n    /**\n     * add RenderOp to the render pipeline\n     */\n    addRenderOp(renderable) {\n        this.renderOps.push(renderable);\n        this.curRenderOp = null;\n    }\n    /**\n     * Render the current set of RenderOps to render to the specified surface.\n     *\n     * TODO: 'screen' is the only supported surface at the moment.\n     *\n     * @param surface\n     */\n    render(surface = 'screen') {\n        const { glw, quadBuffer } = this;\n        const arr = new Float32Array(quadBuffer, 0, this.curBufferIdx);\n        const buffer = this.quadBufferCollection.getBuffer('a_position') ?? null;\n        glw.arrayBufferData(buffer, arr, glw.STATIC_DRAW);\n        const doLog = false; // idx++ % 100 === 0;\n        if (doLog) {\n            console.log('renderOps', this.renderOps.length);\n        }\n        this.renderOps.forEach((renderOp, i) => {\n            if (doLog) {\n                console.log('renderOp', i, renderOp.numQuads);\n            }\n            renderOp.draw();\n        });\n        // clean up\n        this.renderables = [];\n    }\n}\nconst idx = 0;\n//# sourceMappingURL=WebGlCoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {} from '../textures/Texture.js';\n/**\n * Tests if the given location is a compressed texture container\n * @param url\n * @remarks\n * This function is used to determine if the given image url is a compressed\n * and only supports the following extensions: .ktx and .pvr\n * @returns\n */\nexport function isCompressedTextureContainer(url) {\n    return /\\.(ktx|pvr)$/.test(url);\n}\n/**\n * Loads a compressed texture container\n * @param url\n * @returns\n */\nexport const loadCompressedTexture = async (url) => {\n    const response = await fetch(url);\n    const arrayBuffer = await response.arrayBuffer();\n    if (url.indexOf('.ktx') !== -1) {\n        return loadKTXData(arrayBuffer);\n    }\n    return loadPVRData(arrayBuffer);\n};\n/**\n * Loads a KTX texture container and returns the texture data\n * @param buffer\n * @returns\n */\nconst loadKTXData = async (buffer) => {\n    const view = new DataView(buffer);\n    const littleEndian = view.getUint32(12) === 16909060 ? true : false;\n    const mipmaps = [];\n    const data = {\n        glInternalFormat: view.getUint32(28, littleEndian),\n        pixelWidth: view.getUint32(36, littleEndian),\n        pixelHeight: view.getUint32(40, littleEndian),\n        numberOfMipmapLevels: view.getUint32(56, littleEndian),\n        bytesOfKeyValueData: view.getUint32(60, littleEndian),\n    };\n    let offset = 64;\n    // Key Value Pairs of data start at byte offset 64\n    // But the only known kvp is the API version, so skipping parsing.\n    offset += data.bytesOfKeyValueData;\n    for (let i = 0; i < data.numberOfMipmapLevels; i++) {\n        const imageSize = view.getUint32(offset);\n        offset += 4;\n        mipmaps.push(view.buffer.slice(offset, imageSize));\n        offset += imageSize;\n    }\n    return {\n        data: {\n            glInternalFormat: data.glInternalFormat,\n            mipmaps,\n            width: data.pixelWidth || 0,\n            height: data.pixelHeight || 0,\n            type: 'ktx',\n        },\n        premultiplyAlpha: false,\n    };\n};\n/**\n * Loads a PVR texture container and returns the texture data\n * @param buffer\n * @returns\n */\nconst loadPVRData = async (buffer) => {\n    // pvr header length in 32 bits\n    const pvrHeaderLength = 13;\n    // for now only we only support: COMPRESSED_RGB_ETC1_WEBGL\n    const pvrFormatEtc1 = 0x8d64;\n    const pvrWidth = 7;\n    const pvrHeight = 6;\n    const pvrMipmapCount = 11;\n    const pvrMetadata = 12;\n    const arrayBuffer = buffer;\n    const header = new Int32Array(arrayBuffer, 0, pvrHeaderLength);\n    // @ts-expect-error Object possibly undefined\n    // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n    const dataOffset = header[pvrMetadata] + 52;\n    const pvrtcData = new Uint8Array(arrayBuffer, dataOffset);\n    const mipmaps = [];\n    const data = {\n        pixelWidth: header[pvrWidth],\n        pixelHeight: header[pvrHeight],\n        numberOfMipmapLevels: header[pvrMipmapCount] || 0,\n    };\n    let offset = 0;\n    let width = data.pixelWidth || 0;\n    let height = data.pixelHeight || 0;\n    for (let i = 0; i < data.numberOfMipmapLevels; i++) {\n        const level = ((width + 3) >> 2) * ((height + 3) >> 2) * 8;\n        const view = new Uint8Array(arrayBuffer, pvrtcData.byteOffset + offset, level);\n        mipmaps.push(view);\n        offset += level;\n        width = width >> 1;\n        height = height >> 1;\n    }\n    return {\n        data: {\n            glInternalFormat: pvrFormatEtc1,\n            mipmaps: mipmaps,\n            width: data.pixelWidth || 0,\n            height: data.pixelHeight || 0,\n            type: 'pvr',\n        },\n        premultiplyAlpha: false,\n    };\n};\n//# sourceMappingURL=textureCompression.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\nimport { isCompressedTextureContainer, loadCompressedTexture, } from '../lib/textureCompression.js';\n/**\n * Texture consisting of an image loaded from a URL\n *\n * @remarks\n * The ImageTexture's {@link ImageTextureProps.src} prop defines the image URL\n * to be downloaded.\n *\n * By default, the texture's alpha values will be premultiplied into its color\n * values which is generally the desired setting before they are sent to the\n * texture's associated {@link Shader}. However, in special cases you may want\n * the Shader to receive straight (non-premultiplied) values. In that case you\n * can disable the default behavior by setting the\n * {@link ImageTextureProps.premultiplyAlpha} prop to `false`.\n */\nexport class ImageTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ImageTexture.resolveDefaults(props);\n    }\n    hasAlphaChannel(mimeType) {\n        return mimeType.indexOf('image/png') !== -1;\n    }\n    async getTextureData() {\n        const { src, premultiplyAlpha } = this.props;\n        if (!src) {\n            return {\n                data: null,\n            };\n        }\n        if (src instanceof ImageData) {\n            return {\n                data: src,\n                premultiplyAlpha,\n            };\n        }\n        // Handle compressed textures\n        if (isCompressedTextureContainer(src)) {\n            return loadCompressedTexture(src);\n        }\n        if (this.txManager.imageWorkerManager) {\n            return await this.txManager.imageWorkerManager.getImage(src, premultiplyAlpha);\n        }\n        else if (this.txManager.hasCreateImageBitmap) {\n            const response = await fetch(src);\n            const blob = await response.blob();\n            const hasAlphaChannel = premultiplyAlpha ?? this.hasAlphaChannel(blob.type);\n            return {\n                data: await createImageBitmap(blob, {\n                    premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                    colorSpaceConversion: 'none',\n                    imageOrientation: 'none',\n                }),\n                premultiplyAlpha: hasAlphaChannel,\n            };\n        }\n        else {\n            const img = new Image();\n            if (!(src.substr(0, 5) === 'data:')) {\n                img.crossOrigin = 'Anonymous';\n            }\n            img.src = src;\n            await new Promise((resolve, reject) => {\n                img.onload = () => resolve();\n                img.onerror = () => reject(new Error(`Failed to load image`));\n            }).catch((e) => {\n                console.error(e);\n            });\n            return {\n                data: img,\n                premultiplyAlpha: premultiplyAlpha ?? true,\n            };\n        }\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = ImageTexture.resolveDefaults(props);\n        // ImageTextures sourced by ImageData are non-cacheable\n        if (resolvedProps.src instanceof ImageData) {\n            return false;\n        }\n        return `ImageTexture,${resolvedProps.src},${resolvedProps.premultiplyAlpha}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            src: props.src ?? '',\n            premultiplyAlpha: props.premultiplyAlpha ?? true, // null,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ImageTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const SpecialCodepoints = {\n    LINE_FEED: 0x0a,\n    CARRIAGE_RETURN: 0x0d,\n    SPACE: 0x20,\n    TAB: 0x09,\n    ZERO_WIDTH_SPACE: 0x200b,\n    ZERO_WIDTH_NON_JOINER: 0x200c,\n    ZERO_WIDTH_JOINER: 0x200d,\n    LEFT_TO_RIGHT_MARK: 0x200e,\n    RIGHT_TO_LEFT_MARK: 0x200f,\n    LEFT_TO_RIGHT_EMBEDDING: 0x202a,\n    RIGHT_TO_LEFT_EMBEDDING: 0x202b,\n    POP_DIRECTIONAL_FORMATTING: 0x202c,\n    LEFT_TO_RIGHT_OVERRIDE: 0x202d,\n    RIGHT_TO_LEFT_OVERRIDE: 0x202e,\n    LINE_SEPARATOR: 0x2028,\n    PARAGRAPH_SEPARATOR: 0x2029,\n    OBJECT_REPLACEMENT_CHARACTER: 0xfffc,\n    REPLACEMENT_CHARACTER: 0xfffd,\n    ZERO_WIDTH_NO_BREAK_SPACE: 0xfeff,\n    LEFT_TO_RIGHT_ISOLATE: 0x2066,\n    RIGHT_TO_LEFT_ISOLATE: 0x2067,\n    FIRST_STRONG_ISOLATE: 0x2068,\n    POP_DIRECTIONAL_ISOLATE: 0x2069,\n    INHIBIT_SYMMETRIC_SWAPPING: 0x206a,\n    ACTIVATE_SYMMETRIC_SWAPPING: 0x206b,\n    INHIBIT_ARABIC_FORM_SHAPING: 0x206c,\n    ACTIVATE_ARABIC_FORM_SHAPING: 0x206d,\n    NATIONAL_DIGIT_SHAPES: 0x206e,\n    NOMINAL_DIGIT_SHAPES: 0x206f,\n    LEFT_TO_RIGHT_BOUNDARY: 0x200e,\n    RIGHT_TO_LEFT_BOUNDARY: 0x200f,\n};\n//# sourceMappingURL=SpecialCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class FontShaper {\n}\n//# sourceMappingURL=FontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SpecialCodepoints } from '../../../renderers/SdfTextRenderer/internal/SpecialCodepoints.js';\nimport { FontShaper, } from './FontShaper.js';\nexport class SdfFontShaper extends FontShaper {\n    data;\n    glyphMap;\n    kernings;\n    constructor(data, glyphMap) {\n        super();\n        this.data = data;\n        this.glyphMap = glyphMap;\n        const kernings = (this.kernings = {});\n        data.kernings.forEach((kerning) => {\n            const second = kerning.second;\n            const firsts = (kernings[second] = kernings[second] || {});\n            firsts[kerning.first] = kerning.amount;\n        });\n        this.kernings = kernings;\n    }\n    *shapeText(props, codepoints) {\n        let codepointResult;\n        let lastGlyphId = undefined;\n        while ((codepointResult = codepoints.peek()) && !codepointResult.done) {\n            const codepoint = codepointResult.value;\n            const glyph = this.glyphMap.get(codepoint);\n            codepoints.next();\n            if (glyph !== undefined) {\n                // We found a glyph for this codepoint\n                // Yield the mapped glyph info\n                /**\n                 * Kerning includes any possible additional letter spacing\n                 */\n                const kerning = lastGlyphId !== undefined\n                    ? (this.kernings[glyph.id]?.[lastGlyphId] || 0) +\n                        props.letterSpacing\n                    : 0;\n                lastGlyphId = glyph.id;\n                yield {\n                    mapped: true,\n                    glyphId: glyph.id,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                    xAdvance: glyph.xadvance + kerning,\n                    yAdvance: 0,\n                    xOffset: glyph.xoffset + kerning,\n                    yOffset: glyph.yoffset,\n                    xBearing: 0,\n                    yBearing: 0,\n                    width: glyph.width,\n                    height: glyph.height,\n                };\n            }\n            else {\n                // We didn't find a glyph for this codepoint\n                // Yield the unmapped codepoint info\n                // If this codepoint is a linebreak, we should reset the last glyph id\n                // so that the next glyph will not be kerned with the last glyph of the\n                // previous line.\n                if (codepoint === SpecialCodepoints.LINE_FEED) {\n                    lastGlyphId = undefined;\n                }\n                yield {\n                    mapped: false,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                };\n            }\n        }\n    }\n}\n//# sourceMappingURL=SdfFontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// import type { Renderer } from '../../../Renderer';\nimport { assertTruthy } from '../../../../utils.js';\nimport { WebGlCoreRenderer } from '../../../renderers/webgl/WebGlCoreRenderer.js';\nimport { ImageTexture } from '../../../textures/ImageTexture.js';\nimport { TrFontFace } from '../TrFontFace.js';\nimport { SdfFontShaper } from './internal/SdfFontShaper.js';\nexport class SdfTrFontFace extends TrFontFace {\n    type;\n    texture;\n    /**\n     * Height of the tallest character in the font including the whitespace above it\n     */\n    maxCharHeight = 0;\n    data;\n    shaper;\n    glyphMap = new Map();\n    constructor(fontFamily, descriptors, type, stage, atlasUrl, atlasDataUrl) {\n        super(fontFamily, descriptors);\n        this.type = type;\n        const renderer = stage.renderer;\n        assertTruthy(renderer instanceof WebGlCoreRenderer, 'SDF Font Faces can only be used with the WebGL Renderer');\n        this.texture = stage.txManager.loadTexture('ImageTexture', {\n            src: atlasUrl,\n            // IMPORTANT: The SDF shader requires the alpha channel to NOT be\n            // premultiplied on the atlas texture. If it is premultiplied, the\n            // rendering of SDF glyphs (especially single-channel SDF fonts) will\n            // be very jagged.\n            premultiplyAlpha: false,\n        }, {\n            preload: true,\n        });\n        this.texture.on('loaded', () => {\n            this.checkLoaded();\n        });\n        // Set this.data to the fetched data from dataUrl\n        fetch(atlasDataUrl)\n            .then(async (response) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            this.data = await response.json();\n            // Add all the glyphs to the glyph map\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            let maxCharHeight = 0;\n            this.data.chars.forEach((glyph) => {\n                this.glyphMap.set(glyph.id, glyph);\n                const charHeight = glyph.yoffset + glyph.height;\n                if (charHeight > maxCharHeight) {\n                    maxCharHeight = charHeight;\n                }\n            });\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.maxCharHeight = maxCharHeight;\n            // We know `data` is defined here, because we just set it\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.shaper = new SdfFontShaper(this.data, this.glyphMap);\n            this.checkLoaded();\n        })\n            .catch(console.error);\n    }\n    getAtlasEntry(glyphId) {\n        const glyph = this.glyphMap.get(glyphId);\n        if (glyph === undefined) {\n            throw new Error(`Glyph ${glyphId} not found in font ${this.fontFamily}`);\n        }\n        return {\n            x: glyph.x,\n            y: glyph.y,\n            width: glyph.width,\n            height: glyph.height,\n        };\n    }\n    checkLoaded() {\n        if (this.loaded)\n            return;\n        if (this.texture.state === 'loaded' && this.data) {\n            this.loaded = true;\n            this.emit('loaded');\n        }\n    }\n}\n//# sourceMappingURL=SdfTrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Number of floating point numbers that represent a single glyph in the SDF vertex buffer.\n *\n * @remarks\n * The vertex buffer contains:\n *  - 6 vertex positions\n *  - 6 texture coordinates\n *  - = 12 positions/coordinates per glyph\n *\n * Each vertex position and texture coordinate consist of 2 floating point numbers (x/y).\n * So there are 12 * 2 = 24 floating point numbers that make up a single glyph.\n */\nexport const FLOATS_PER_GLYPH = 24;\n//# sourceMappingURL=constants.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Gets the start conditions for the layout loop.\n *\n * @remarks\n * Returns `undefined` if the layout loop should not be run.\n *\n * @param fontSize\n * @param fontSizeRatio\n * @param sdfLineHeight\n * @param renderWindow\n * @param lineCache\n * @param textH\n * @returns\n */\nexport function getStartConditions(sdfFontSize, sdfLineHeight, lineHeight, verticalAlign, offsetY, fontSizeRatio, renderWindow, lineCache, textH) {\n    // State variables\n    const startLineIndex = Math.min(Math.max(renderWindow.firstLineIdx, 0), lineCache.length);\n    // TODO: (fontSize / 6.4286 / fontSizeRatio) Adding this to the startY helps the text line up better with Canvas rendered text\n    const sdfStartX = 0;\n    let sdfVerticalAlignYOffset = 0;\n    if (verticalAlign === 'middle') {\n        sdfVerticalAlignYOffset = (sdfLineHeight - sdfFontSize) / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        sdfVerticalAlignYOffset = sdfLineHeight - sdfFontSize;\n    }\n    const sdfOffsetY = offsetY / fontSizeRatio;\n    const sdfStartY = sdfOffsetY + startLineIndex * sdfLineHeight + sdfVerticalAlignYOffset; // TODO: Figure out what determines the initial y offset of text.\n    // Don't attempt to render anything if we know we're starting past the established end of the text\n    if (textH && sdfStartY >= textH / fontSizeRatio) {\n        return;\n    }\n    return {\n        sdfX: sdfStartX,\n        sdfY: sdfStartY,\n        lineIndex: startLineIndex,\n    };\n}\n//# sourceMappingURL=getStartConditions.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A wrapper Generator class that makes a generator peekable.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class PeekableIterator {\n    iterator;\n    peekBuffer = [];\n    _lastIndex;\n    constructor(iterator, indexBase = 0) {\n        this.iterator = iterator;\n        this.iterator = iterator;\n        this._lastIndex = indexBase - 1;\n        this.peekBuffer = [];\n    }\n    next() {\n        const nextResult = this.peekBuffer.length > 0\n            ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                this.peekBuffer.pop()\n            : this.iterator.next();\n        if (nextResult.done) {\n            this._lastIndex = -1;\n        }\n        else {\n            this._lastIndex++;\n        }\n        return nextResult;\n    }\n    peek() {\n        if (this.peekBuffer.length > 0) {\n            // We know that the buffer is not empty, so we can safely use the\n            // non-null assertion operator\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return this.peekBuffer[0];\n        }\n        const result = this.iterator.next();\n        this.peekBuffer.push(result);\n        return result;\n    }\n    get lastIndex() {\n        return this._lastIndex;\n    }\n}\n//# sourceMappingURL=PeekableGenerator.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Reversible Generator Wrapper Class\n/**\n * Generator function that yields each Unicode code point in the given string.\n */\nexport function* getUnicodeCodepoints(text, start = 0) {\n    let i = start;\n    while (i < text.length) {\n        const codePoint = text.codePointAt(i);\n        if (codePoint === undefined) {\n            throw new Error('Invalid Unicode code point');\n        }\n        yield codePoint;\n        i += codePoint <= 0xffff ? 1 : 2;\n    }\n}\n//# sourceMappingURL=getUnicodeCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\n/**\n * Measures a single-line of text width ignoring any unmapped glyphs including line breaks\n *\n * @param text\n * @param shaperProps\n * @param shaper\n * @returns\n */\nexport function measureText(text, shaperProps, shaper) {\n    const glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, 0), 0));\n    let width = 0;\n    for (const glyph of glyphs) {\n        if (glyph.mapped) {\n            width += glyph.xAdvance;\n        }\n    }\n    return width;\n}\n//# sourceMappingURL=measureText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../../../utils.js';\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\nimport { measureText } from './measureText.js';\nexport function layoutText(curLineIndex, startX, startY, text, textAlign, width, height, fontSize, lineHeight, letterSpacing, \n/**\n * Mutated\n */\nvertexBuffer, contain, \n/**\n * Mutated\n */\nlineCache, rwSdf, trFontFace, forceFullLayoutCalc, scrollable, overflowSuffix, maxLines) {\n    assertTruthy(trFontFace, 'Font face must be loaded');\n    assertTruthy(trFontFace.loaded, 'Font face must be loaded');\n    assertTruthy(trFontFace.data, 'Font face must be loaded');\n    assertTruthy(trFontFace.shaper, 'Font face must be loaded');\n    // Regardless of fontSize (or other scaling properties), we layout the vertices of each glyph\n    // using the fixed coordinate space determined by font size used to produce the atlas.\n    // Scaling for display is handled by shader uniforms inexpensively.\n    // So we have:\n    //  - vertex space: the space in which the vertices of each glyph are laid out\n    //  - screen space: the screen pixel space\n    // Input properties such as x, y, w, fontSize, letterSpacing, etc. are all expressed in screen space.\n    // We convert these to the vertex space by dividing them the `fontSizeRatio` factor.\n    /**\n     * See above\n     */\n    const fontSizeRatio = fontSize / trFontFace.data.info.size;\n    /**\n     * `lineHeight` in vertex coordinates\n     */\n    const vertexLineHeight = lineHeight / fontSizeRatio;\n    /**\n     * `w` in vertex coordinates\n     */\n    const vertexW = width / fontSizeRatio;\n    /**\n     * `letterSpacing` in vertex coordinates\n     */\n    const vertexLSpacing = letterSpacing / fontSizeRatio;\n    const startingLineCacheEntry = lineCache[curLineIndex];\n    const startingCodepointIndex = startingLineCacheEntry?.codepointIndex || 0;\n    const startingMaxX = startingLineCacheEntry?.maxX || 0;\n    const startingMaxY = startingLineCacheEntry?.maxY || 0;\n    let maxX = startingMaxX;\n    let maxY = startingMaxY;\n    let curX = startX;\n    let curY = startY;\n    let bufferOffset = 0;\n    /**\n     * Buffer offset to last word boundry. This is -1 when we aren't in a word boundry.\n     */\n    const lastWord = {\n        codepointIndex: -1,\n        bufferOffset: -1,\n        xStart: -1,\n    };\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const shaper = trFontFace.shaper;\n    const shaperProps = {\n        letterSpacing: vertexLSpacing,\n    };\n    // Get glyphs\n    let glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, startingCodepointIndex), startingCodepointIndex));\n    let glyphResult;\n    let curLineBufferStart = -1;\n    const bufferLineInfos = [];\n    const vertexTruncateHeight = height / fontSizeRatio;\n    const overflowSuffVertexWidth = measureText(overflowSuffix, shaperProps, shaper);\n    // Line-by-line layout\n    let moreLines = true;\n    while (moreLines) {\n        const nextLineWillFit = (maxLines === 0 || curLineIndex + 1 < maxLines) &&\n            (contain !== 'both' ||\n                scrollable ||\n                curY + vertexLineHeight + trFontFace.maxCharHeight <=\n                    vertexTruncateHeight);\n        const lineVertexW = nextLineWillFit\n            ? vertexW\n            : vertexW - overflowSuffVertexWidth;\n        /**\n         * Vertex X position to the beginning of the last word boundary. This becomes -1 when we start traversing a word.\n         */\n        let xStartLastWordBoundary = 0;\n        const lineIsBelowWindowTop = curY + vertexLineHeight >= rwSdf.y1;\n        const lineIsAboveWindowBottom = curY <= rwSdf.y2;\n        const lineIsWithinWindow = lineIsBelowWindowTop && lineIsAboveWindowBottom;\n        // Layout glyphs in this line\n        // Any break statements in this while loop will trigger a line break\n        while ((glyphResult = glyphs.next()) && !glyphResult.done) {\n            const glyph = glyphResult.value;\n            if (curLineIndex === lineCache.length) {\n                lineCache.push({\n                    codepointIndex: glyph.cluster,\n                    maxY,\n                    maxX,\n                });\n            }\n            else if (curLineIndex > lineCache.length) {\n                throw new Error('Unexpected lineCache length');\n            }\n            // If we encounter a word boundary (white space or newline) we invalidate\n            // the lastWord and set the xStartLastWordBoundary if we haven't already.\n            if (glyph.codepoint === 32 || glyph.codepoint === 10) {\n                if (lastWord.codepointIndex !== -1) {\n                    lastWord.codepointIndex = -1;\n                    xStartLastWordBoundary = curX;\n                }\n            }\n            else if (lastWord.codepointIndex === -1) {\n                lastWord.codepointIndex = glyph.cluster;\n                lastWord.bufferOffset = bufferOffset;\n                lastWord.xStart = xStartLastWordBoundary;\n            }\n            if (glyph.mapped) {\n                // Mapped glyph\n                const charEndX = curX + glyph.xOffset + glyph.width;\n                // Word wrap check\n                if (\n                // We are containing the text\n                contain !== 'none' &&\n                    // The current glyph reaches outside the contained width\n                    charEndX >= lineVertexW &&\n                    // There is a last word that we can break to the next line\n                    lastWord.codepointIndex !== -1 &&\n                    // Prevents infinite loop when a single word is longer than the width\n                    lastWord.xStart > 0) {\n                    // The current word is about to go off the edge of the container width\n                    // Reinitialize the iterator starting at the last word\n                    // and proceeding to the next line\n                    if (nextLineWillFit) {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, lastWord.codepointIndex), lastWord.codepointIndex));\n                        bufferOffset = lastWord.bufferOffset;\n                        break;\n                    }\n                    else {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(overflowSuffix, 0), 0));\n                        curX = lastWord.xStart;\n                        bufferOffset = lastWord.bufferOffset;\n                        // HACK: For the rest of the line when inserting the overflow suffix,\n                        // set contain = 'none' to prevent an infinite loop.\n                        contain = 'none';\n                    }\n                }\n                else {\n                    // This glyph fits, so we can add it to the buffer\n                    const quadX = curX + glyph.xOffset;\n                    const quadY = curY + glyph.yOffset;\n                    // Only add to buffer for rendering if the line is within the render window\n                    if (lineIsWithinWindow) {\n                        if (curLineBufferStart === -1) {\n                            curLineBufferStart = bufferOffset;\n                        }\n                        const atlasEntry = trFontFace.getAtlasEntry(glyph.glyphId);\n                        // Add texture coordinates\n                        const u = atlasEntry.x / trFontFace.data.common.scaleW;\n                        const v = atlasEntry.y / trFontFace.data.common.scaleH;\n                        const uvWidth = atlasEntry.width / trFontFace.data.common.scaleW;\n                        const uvHeight = atlasEntry.height / trFontFace.data.common.scaleH;\n                        // TODO: (Performance) We can optimize this by using ELEMENT_ARRAY_BUFFER\n                        // eliminating the need to duplicate vertices\n                        // Top-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Top-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Bottom-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                        // Bottom-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                    }\n                    maxY = Math.max(maxY, quadY + glyph.height);\n                    maxX = Math.max(maxX, quadX + glyph.width);\n                    curX += glyph.xAdvance;\n                }\n            }\n            else {\n                // Unmapped character\n                // Handle newlines\n                if (glyph.codepoint === 10) {\n                    if (nextLineWillFit) {\n                        // The whole line fit, so we can break to the next line\n                        break;\n                    }\n                    else {\n                        // The whole line won't fit, so we need to add the overflow suffix\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(overflowSuffix, 0), 0));\n                        // HACK: For the rest of the line when inserting the overflow suffix,\n                        // set contain = 'none' to prevent an infinite loop.\n                        contain = 'none';\n                    }\n                }\n            }\n        }\n        // Prepare for the next line...\n        if (curLineBufferStart !== -1) {\n            bufferLineInfos.push({\n                bufferStart: curLineBufferStart,\n                bufferEnd: bufferOffset,\n            });\n            curLineBufferStart = -1;\n        }\n        curX = 0;\n        curY += vertexLineHeight;\n        curLineIndex++;\n        lastWord.codepointIndex = -1;\n        xStartLastWordBoundary = 0;\n        // Figure out if there are any more lines to render...\n        if (!forceFullLayoutCalc && contain === 'both' && curY > rwSdf.y2) {\n            // Stop layout calculation early (for performance purposes) if:\n            // - We're not forcing a full layout calculation (for width/height calculation)\n            // - ...and we're containing the text vertically+horizontally (contain === 'both')\n            // - ...and we have a render window\n            // - ...and the next line is below the bottom of the render window\n            moreLines = false;\n        }\n        else if (glyphResult && glyphResult.done) {\n            // If we've reached the end of the text, we know we're done\n            moreLines = false;\n        }\n        else if (!nextLineWillFit) {\n            // If we're contained vertically+horizontally (contain === 'both')\n            // but not scrollable and the next line won't fit, we're done.\n            moreLines = false;\n        }\n    }\n    // Use textAlign to determine if we need to adjust the x position of the text\n    // in the buffer line by line\n    if (textAlign === 'center') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            // - 4 = the x position of a rightmost vertex\n            const lineWidth = \n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = (vertexTextW - lineWidth) / 2;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    else if (textAlign === 'right') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            const lineWidth = line.bufferEnd === line.bufferStart\n                ? 0\n                : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = vertexTextW - lineWidth;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    assertTruthy(glyphResult);\n    return {\n        bufferNumFloats: bufferOffset,\n        bufferNumQuads: bufferOffset / 16,\n        layoutNumCharacters: glyphResult.done\n            ? text.length - startingCodepointIndex\n            : glyphResult.value.cluster - startingCodepointIndex + 1,\n        fullyProcessed: !!glyphResult.done,\n        maxX,\n        maxY,\n    };\n}\n//# sourceMappingURL=layoutText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Round up to the nearest multiple of the given number.\n *\n * @param value\n * @param multiple\n * @returns\n */\nexport function roundUpToMultiple(value, multiple) {\n    return Math.ceil(value / multiple) * multiple;\n}\n/**\n * Round down to the nearest multiple of the given number.\n *\n * @param value\n * @param multiple\n * @returns\n */\nexport function roundDownToMultiple(value, multiple) {\n    return Math.floor(value / multiple) * multiple;\n}\n//# sourceMappingURL=util.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isBoundPositive } from '../../../../lib/utils.js';\nimport { roundDownToMultiple, roundUpToMultiple } from './util.js';\n/**\n * Create a render window from the given parameters.\n *\n * @remarks\n * The render window is a rectangle that defines the area of the text that\n * should be rendered. It is used to skip rendering parts of the text that\n * are outside of the render window. The render window is relative to the\n * text's top left corner of the overrall text.\n *\n * @param x The x coordinate of the text element's top left corner relative to the screen.\n * @param y The y coordinate of the text element's top left corner relative to the screen.\n * @param scrollY The amount of pixels to scroll the text vertically.\n * @param lineHeight The number of extra lines to render above and below the visible window.\n * @param visibleWindow The visible window of the text element relative to the screen\n * @returns\n */\nexport function setRenderWindow(outRenderWindow, x, y, scrollY, lineHeight, bufferMargin, visibleWindow, fontSizeRatio) {\n    const { screen, sdf } = outRenderWindow;\n    if (!isBoundPositive(visibleWindow)) {\n        screen.x1 = 0;\n        screen.y1 = 0;\n        screen.x2 = 0;\n        screen.y2 = 0;\n        sdf.x1 = 0;\n        sdf.y1 = 0;\n        sdf.x2 = 0;\n        sdf.y2 = 0;\n        outRenderWindow.numLines = 0;\n        outRenderWindow.firstLineIdx = 0;\n    }\n    else {\n        const x1 = visibleWindow.x1 - x;\n        const x2 = x1 + (visibleWindow.x2 - visibleWindow.x1);\n        const y1Base = visibleWindow.y1 - y + scrollY;\n        const y1 = roundDownToMultiple(y1Base - bufferMargin, lineHeight || 1);\n        const y2 = roundUpToMultiple(y1Base + (visibleWindow.y2 - visibleWindow.y1) + bufferMargin, lineHeight || 1);\n        screen.x1 = x1;\n        screen.y1 = y1;\n        screen.x2 = x2;\n        screen.y2 = y2;\n        sdf.x1 = x1 / fontSizeRatio;\n        sdf.y1 = y1 / fontSizeRatio;\n        sdf.x2 = x2 / fontSizeRatio;\n        sdf.y2 = y2 / fontSizeRatio;\n        outRenderWindow.numLines = Math.ceil((y2 - y1) / lineHeight);\n        outRenderWindow.firstLineIdx = lineHeight ? Math.floor(y1 / lineHeight) : 0;\n    }\n    outRenderWindow.valid = true;\n}\n//# sourceMappingURL=setRenderWindow.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport memize from 'memize';\nconst weightConversions = {\n    normal: 400,\n    bold: 700,\n    bolder: 900,\n    lighter: 100,\n};\nconst fontWeightToNumber = (weight) => {\n    if (typeof weight === 'number') {\n        return weight;\n    }\n    return weightConversions[weight] || 400;\n};\nfunction rawResolveFontToUse(familyMapsByPriority, family, weightIn, style, stretch) {\n    let weight = fontWeightToNumber(weightIn);\n    for (const fontFamiles of familyMapsByPriority) {\n        const fontFaces = fontFamiles[family];\n        if (!fontFaces) {\n            continue;\n        }\n        if (fontFaces.size === 1) {\n            // No Exact match found, find nearest weight match\n            console.warn(`TrFontManager: Only one font face found for family: '${family}' - will be used for all weights and styles`);\n            return fontFaces.values().next().value;\n        }\n        const weightMap = new Map();\n        for (const fontFace of fontFaces) {\n            const fontFamilyWeight = fontWeightToNumber(fontFace.descriptors.weight);\n            if (fontFamilyWeight === weight &&\n                fontFace.descriptors.style === style &&\n                fontFace.descriptors.stretch === stretch) {\n                return fontFace;\n            }\n            weightMap.set(fontFamilyWeight, fontFace);\n        }\n        // No Exact match found, find nearest weight match\n        const msg = `TrFontManager: No exact match: '${family} Weight: ${weight} Style: ${style} Stretch: ${stretch}'`;\n        console.error(msg);\n        // Follow the CSS font-weight algorithm to find the nearest weight match\n        // https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#font-matching-algorithm\n        if (weight === 400 && weightMap.has(500)) {\n            return weightMap.get(500);\n        }\n        if (weight === 500 && weightMap.has(400)) {\n            return weightMap.get(400);\n        }\n        if (weight < 400) {\n            while (weight > 0) {\n                if (weightMap.has(weight)) {\n                    return weightMap.get(weight);\n                }\n                weight -= 100;\n            }\n            // reset back for the next loop\n            weight = 600;\n        }\n        while (weight < 1000) {\n            if (weightMap.has(weight)) {\n                return weightMap.get(weight);\n            }\n            weight += 100;\n        }\n        // finally check lower again\n        weight = 500;\n        while (weight > 0) {\n            if (weightMap.has(weight)) {\n                return weightMap.get(weight);\n            }\n            weight -= 100;\n        }\n    }\n    return;\n}\nconst resolveFontToUse = memize(rawResolveFontToUse);\nexport class TrFontManager {\n    textRenderers;\n    constructor(textRenderers) {\n        this.textRenderers = textRenderers;\n        // Intentionally left blank\n    }\n    addFontFace(font) {\n        // All the font face to all of the text renderers that support it\n        for (const trId in this.textRenderers) {\n            const tr = this.textRenderers[trId];\n            if (tr && tr.isFontFaceSupported(font)) {\n                tr.addFontFace(font);\n            }\n        }\n    }\n    /**\n     * Utility method to resolve a single font face from a list of prioritized family maps based on\n     * a set of font properties.\n     *\n     * @remarks\n     * These are to be used by a text renderer to resolve a font face if needed.\n     *\n     * @param familyMapsByPriority\n     * @param props\n     * @returns\n     */\n    static resolveFontFace(familyMapsByPriority, props) {\n        const { fontFamily, fontWeight, fontStyle, fontStretch } = props;\n        return resolveFontToUse(familyMapsByPriority, fontFamily, fontWeight, fontStyle, fontStretch);\n    }\n}\n//# sourceMappingURL=TrFontManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createBound, intersectRect, copyRect, boundsOverlap, convertBoundToRect, } from '../../../lib/utils.js';\nimport { TextRenderer, } from '../TextRenderer.js';\nimport { SdfTrFontFace } from '../../font-face-types/SdfTrFontFace/SdfTrFontFace.js';\nimport { FLOATS_PER_GLYPH } from './internal/constants.js';\nimport { getStartConditions } from './internal/getStartConditions.js';\nimport { layoutText } from './internal/layoutText.js';\nimport { setRenderWindow, } from './internal/setRenderWindow.js';\nimport { TrFontManager } from '../../TrFontManager.js';\nimport { assertTruthy, mergeColorAlpha } from '../../../../utils.js';\nimport { WebGlCoreRenderOp } from '../../../renderers/webgl/WebGlCoreRenderOp.js';\nimport { BufferCollection } from '../../../renderers/webgl/internal/BufferCollection.js';\nimport { EventEmitter } from '../../../../common/EventEmitter.js';\nimport { WebGlCoreRenderer } from '../../../renderers/webgl/WebGlCoreRenderer.js';\n/**\n * Ephemeral rect object used for calculations\n */\nconst tmpRect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n};\n/**\n * Singleton class for rendering text using signed distance fields.\n *\n * @remarks\n * SdfTextRenderer supports both single-channel and multi-channel signed distance fields.\n */\nexport class SdfTextRenderer extends TextRenderer {\n    /**\n     * Map of font family names to a set of font faces.\n     */\n    ssdfFontFamilies = {};\n    msdfFontFamilies = {};\n    fontFamilyArray = [\n        this.ssdfFontFamilies,\n        this.msdfFontFamilies,\n    ];\n    sdfShader;\n    rendererBounds;\n    constructor(stage) {\n        super(stage);\n        this.sdfShader = this.stage.shManager.loadShader('SdfShader').shader;\n        this.rendererBounds = {\n            x1: 0,\n            y1: 0,\n            x2: this.stage.options.appWidth,\n            y2: this.stage.options.appHeight,\n        };\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                this.releaseFontFace(state);\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n            },\n            x: (state, value) => {\n                state.props.x = value;\n                if (state.elementBounds.valid) {\n                    this.setElementBoundsX(state);\n                    // Only schedule an update if the text is not already rendered\n                    // (renderWindow is invalid) and the element possibly overlaps the screen\n                    // This is to avoid unnecessary updates when we know text is off-screen\n                    if (!state.renderWindow.valid &&\n                        boundsOverlap(state.elementBounds, this.rendererBounds)) {\n                        this.scheduleUpdateState(state);\n                    }\n                }\n            },\n            y: (state, value) => {\n                state.props.y = value;\n                if (state.elementBounds.valid) {\n                    this.setElementBoundsY(state);\n                    // See x() for explanation\n                    if (!state.renderWindow.valid &&\n                        boundsOverlap(state.elementBounds, this.rendererBounds)) {\n                        this.scheduleUpdateState(state);\n                    }\n                }\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                // Only invalidate layout cache if we're containing in the horizontal direction\n                if (state.props.contain !== 'none') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                // Only invalidate layout cache if we're containing in the vertical direction\n                if (state.props.contain === 'both') {\n                    this.invalidateLayoutCache(state);\n                }\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollable: (state, value) => {\n                state.props.scrollable = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n                // Scrolling doesn't need to invalidate any caches, but it does need to\n                // schedule an update\n                this.scheduleUpdateState(state);\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            lineHeight: (state, value) => {\n                state.props.lineHeight = value;\n                this.invalidateLayoutCache(state);\n            },\n            maxLines: (state, value) => {\n                state.props.maxLines = value;\n                this.invalidateLayoutCache(state);\n            },\n            textBaseline: (state, value) => {\n                state.props.textBaseline = value;\n                this.invalidateLayoutCache(state);\n            },\n            verticalAlign: (state, value) => {\n                state.props.verticalAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            overflowSuffix: (state, value) => {\n                state.props.overflowSuffix = value;\n                this.invalidateLayoutCache(state);\n            },\n            debug: (state, value) => {\n                state.props.debug = value;\n            },\n        };\n    }\n    canRenderFont(props) {\n        // TODO: Support matching on font stretch, weight and style (if/when needed)\n        // For now we just match on the font family name\n        // '$$SDF_FAILURE_TEST$$' is used to test the 'failure' event coming from text\n        const { fontFamily } = props;\n        return (fontFamily in this.ssdfFontFamilies ||\n            fontFamily in this.msdfFontFamilies ||\n            fontFamily === '$$SDF_FAILURE_TEST$$');\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof SdfTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an SDF font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof SdfTrFontFace);\n        const familyName = fontFace.fontFamily;\n        const fontFamiles = fontFace.type === 'ssdf'\n            ? this.ssdfFontFamilies\n            : fontFace.type === 'msdf'\n                ? this.msdfFontFamilies\n                : undefined;\n        if (!fontFamiles) {\n            console.warn(`Invalid font face type: ${fontFace.type}`);\n            return;\n        }\n        let faceSet = fontFamiles[familyName];\n        if (!faceSet) {\n            faceSet = new Set();\n            fontFamiles[familyName] = faceSet;\n        }\n        faceSet.add(fontFace);\n    }\n    createState(props) {\n        return {\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            lineCache: [],\n            forceFullLayoutCalc: false,\n            renderWindow: {\n                screen: {\n                    x1: 0,\n                    y1: 0,\n                    x2: 0,\n                    y2: 0,\n                },\n                sdf: {\n                    x1: 0,\n                    y1: 0,\n                    x2: 0,\n                    y2: 0,\n                },\n                firstLineIdx: 0,\n                numLines: 0,\n                valid: false,\n            },\n            elementBounds: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n                valid: false,\n            },\n            clippingRect: {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n                valid: false,\n            },\n            bufferNumFloats: 0,\n            bufferNumQuads: 0,\n            vertexBuffer: undefined,\n            webGlBuffers: null,\n            bufferUploaded: false,\n            textH: undefined,\n            textW: undefined,\n            distanceRange: 0,\n            trFontFace: undefined,\n            isRenderable: false,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                drawCount: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        let { trFontFace } = state;\n        const { textH, lineCache, debugData, forceFullLayoutCalc } = state;\n        debugData.updateCount++;\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n        }\n        // Resolve font face if we haven't yet\n        if (!trFontFace) {\n            trFontFace = this.resolveFontFace(state.props);\n            state.trFontFace = trFontFace;\n            if (!trFontFace) {\n                const msg = `SdfTextRenderer: Could not resolve font face for family: '${state.props.fontFamily}'`;\n                console.error(msg);\n                this.setStatus(state, 'failed', new Error(msg));\n                return;\n            }\n            trFontFace.texture.setRenderableOwner(state, state.isRenderable);\n        }\n        // If the font hasn't been loaded yet, stop here.\n        // Listen for the 'loaded' event and forward fontLoaded event\n        if (!trFontFace.loaded) {\n            trFontFace.once('loaded', () => {\n                this.scheduleUpdateState(state);\n            });\n            return;\n        }\n        // If the font is loaded then so should the data\n        assertTruthy(trFontFace.data, 'Font face data should be loaded');\n        const { text, fontSize, x, y, contain, width, height, lineHeight, verticalAlign, scrollable, overflowSuffix, maxLines, } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        const { renderWindow } = state;\n        /**\n         * The font size of the SDF font face (the basis for SDF space units)\n         */\n        const sdfFontSize = trFontFace.data.info.size;\n        /**\n         * Divide screen space units by this to get the SDF space units\n         * Mulitple SDF space units by this to get screen space units\n         */\n        const fontSizeRatio = fontSize / sdfFontSize;\n        // Needed in renderWindow calculation\n        const sdfLineHeight = lineHeight / fontSizeRatio;\n        state.distanceRange =\n            fontSizeRatio * trFontFace.data.distanceField.distanceRange;\n        // Allocate buffers if needed\n        const neededLength = text.length * FLOATS_PER_GLYPH;\n        let vertexBuffer = state.vertexBuffer;\n        if (!vertexBuffer || vertexBuffer.length < neededLength) {\n            vertexBuffer = new Float32Array(neededLength * 2);\n        }\n        const elementBounds = state.elementBounds;\n        if (!elementBounds.valid) {\n            this.setElementBoundsX(state);\n            this.setElementBoundsY(state);\n            elementBounds.valid = true;\n        }\n        // Return early if we're still viewing inside the established render window\n        // No need to re-render what we've already rendered\n        // (Only if there's an established renderWindow and we're not suppressing early exit)\n        if (!forceFullLayoutCalc && renderWindow.valid) {\n            const rwScreen = renderWindow.screen;\n            if (x + rwScreen.x1 <= elementBounds.x1 &&\n                x + rwScreen.x2 >= elementBounds.x2 &&\n                y - scrollY + rwScreen.y1 <= elementBounds.y1 &&\n                y - scrollY + rwScreen.y2 >= elementBounds.y2) {\n                this.setStatus(state, 'loaded');\n                return;\n            }\n            // Otherwise invalidate the renderWindow so it can be redone\n            renderWindow.valid = false;\n            this.setStatus(state, 'loading');\n        }\n        const { offsetY, textAlign } = state.props;\n        // Create a new renderWindow if needed\n        if (!renderWindow.valid) {\n            const isPossiblyOnScreen = boundsOverlap(elementBounds, this.rendererBounds);\n            if (!isPossiblyOnScreen) {\n                // If the element is not possibly on screen, we can skip the layout and rendering completely\n                return;\n            }\n            setRenderWindow(renderWindow, x, y, scrollY, lineHeight, contain === 'both' ? elementBounds.y2 - elementBounds.y1 : 0, elementBounds, fontSizeRatio);\n            // console.log('newRenderWindow', renderWindow);\n        }\n        const start = getStartConditions(sdfFontSize, sdfLineHeight, lineHeight, verticalAlign, offsetY, fontSizeRatio, renderWindow, lineCache, textH);\n        if (!start) {\n            // Nothing to render, return early, but still mark as loaded (since the text is just scrolled\n            // out of view)\n            this.setStatus(state, 'loaded');\n            return;\n        }\n        const { letterSpacing } = state.props;\n        const out2 = layoutText(start.lineIndex, start.sdfX, start.sdfY, text, textAlign, width, height, fontSize, lineHeight, letterSpacing, vertexBuffer, contain, lineCache, renderWindow.sdf, trFontFace, forceFullLayoutCalc, scrollable, overflowSuffix, maxLines);\n        state.bufferUploaded = false;\n        state.bufferNumFloats = out2.bufferNumFloats;\n        state.bufferNumQuads = out2.bufferNumQuads;\n        state.vertexBuffer = vertexBuffer;\n        state.renderWindow = renderWindow;\n        debugData.lastLayoutNumCharacters = out2.layoutNumCharacters;\n        debugData.bufferSize = vertexBuffer.byteLength;\n        // If we didn't exit early, we know we have completely computed w/h\n        if (out2.fullyProcessed) {\n            state.textW = out2.maxX * fontSizeRatio;\n            state.textH = out2.maxY * fontSizeRatio;\n        }\n        // if (state.props.debug.printLayoutTime) {\n        //   debugData.layoutSum += performance.now() - updateStartTime;\n        //   debugData.layoutCount++;\n        // }\n        this.setStatus(state, 'loaded');\n    }\n    renderQuads(state, transform, clippingRect, alpha) {\n        if (!state.vertexBuffer) {\n            // Nothing to draw\n            return;\n        }\n        const renderer = this.stage.renderer;\n        assertTruthy(renderer instanceof WebGlCoreRenderer);\n        const { fontSize, color, contain, scrollable, zIndex, debug } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        const { textW = 0, textH = 0, distanceRange, vertexBuffer, bufferUploaded, trFontFace, elementBounds, } = state;\n        let { webGlBuffers } = state;\n        if (!webGlBuffers) {\n            const glw = renderer.glw;\n            const stride = 4 * Float32Array.BYTES_PER_ELEMENT;\n            const webGlBuffer = glw.createBuffer();\n            assertTruthy(webGlBuffer);\n            state.webGlBuffers = new BufferCollection([\n                {\n                    buffer: webGlBuffer,\n                    attributes: {\n                        a_position: {\n                            name: 'a_position',\n                            size: 2,\n                            type: glw.FLOAT,\n                            normalized: false,\n                            stride,\n                            offset: 0, // start at the beginning of the buffer\n                        },\n                        a_textureCoordinate: {\n                            name: 'a_textureCoordinate',\n                            size: 2,\n                            type: glw.FLOAT,\n                            normalized: false,\n                            stride,\n                            offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                        },\n                    },\n                },\n            ]);\n            state.bufferUploaded = false;\n            assertTruthy(state.webGlBuffers);\n            webGlBuffers = state.webGlBuffers;\n        }\n        if (!bufferUploaded) {\n            const glw = renderer.glw;\n            const buffer = webGlBuffers?.getBuffer('a_textureCoordinate') ?? null;\n            glw.arrayBufferData(buffer, vertexBuffer, glw.STATIC_DRAW);\n            state.bufferUploaded = true;\n        }\n        assertTruthy(trFontFace);\n        if (scrollable && contain === 'both') {\n            assertTruthy(elementBounds.valid);\n            const elementRect = convertBoundToRect(elementBounds, tmpRect);\n            if (clippingRect.valid) {\n                state.clippingRect.valid = true;\n                clippingRect = intersectRect(clippingRect, elementRect, state.clippingRect);\n            }\n            else {\n                state.clippingRect.valid = true;\n                clippingRect = copyRect(elementRect, state.clippingRect);\n            }\n        }\n        const renderOp = new WebGlCoreRenderOp(renderer.glw, renderer.options, webGlBuffers, this.sdfShader, {\n            transform: transform.data,\n            // IMPORTANT: The SDF Shader expects the color NOT to be premultiplied\n            // for the best blending results. Which is why we use `mergeColorAlpha`\n            // instead of `mergeColorAlphaPremultiplied` here.\n            color: mergeColorAlpha(color, alpha),\n            size: fontSize / (trFontFace.data?.info.size || 0),\n            scrollY,\n            distanceRange,\n            debug: debug.sdfShaderDebug,\n        }, alpha, clippingRect, { height: textH, width: textW }, 0, zIndex);\n        const texture = state.trFontFace?.texture;\n        assertTruthy(texture);\n        const ctxTexture = this.stage.txManager.getCtxTexture(texture);\n        renderOp.addTexture(ctxTexture);\n        renderOp.length = state.bufferNumFloats;\n        renderOp.numQuads = state.bufferNumQuads;\n        renderer.addRenderOp(renderOp);\n        // if (!debug.disableScissor) {\n        //   renderer.enableScissor(\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // Draw the arrays\n        // gl.drawArrays(\n        //   gl.TRIANGLES, // Primitive type\n        //   0,\n        //   bufferNumVertices, // Number of verticies\n        // );\n        // renderer.disableScissor();\n        // if (debug.showElementRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Blue,\n        //     elementRect.x,\n        //     elementRect.y,\n        //     elementRect.w,\n        //     elementRect.h,\n        //   );\n        // }\n        // if (debug.showVisibleRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Green,\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // if (debug.showRenderWindow && renderWindow) {\n        //   this.renderer.drawBorder(\n        //     Colors.Red,\n        //     x + renderWindow.x1,\n        //     y + renderWindow.y1 - scrollY,\n        //     x + renderWindow.x2 - (x + renderWindow.x1),\n        //     y + renderWindow.y2 - scrollY - (y + renderWindow.y1 - scrollY),\n        //   );\n        // }\n        // if (debug.printLayoutTime) {\n        //   debugData.drawSum += performance.now() - drawStartTime;\n        //   debugData.drawCount++;\n        // }\n    }\n    setIsRenderable(state, renderable) {\n        super.setIsRenderable(state, renderable);\n        state.trFontFace?.texture.setRenderableOwner(state, renderable);\n    }\n    destroyState(state) {\n        super.destroyState(state);\n        // If there's a Font Face assigned we must free the owner relation to its texture\n        state.trFontFace?.texture.setRenderableOwner(state, false);\n    }\n    //#endregion Overrides\n    resolveFontFace(props) {\n        return TrFontManager.resolveFontFace(this.fontFamilyArray, props);\n    }\n    /**\n     * Release the loaded SDF font face\n     *\n     * @param state\n     */\n    releaseFontFace(state) {\n        if (state.trFontFace) {\n            state.trFontFace.texture.setRenderableOwner(state, false);\n            state.trFontFace = undefined;\n        }\n    }\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-layed out on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.renderWindow.valid = false;\n        state.elementBounds.valid = false;\n        state.textH = undefined;\n        state.textW = undefined;\n        state.lineCache = [];\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    setElementBoundsX(state) {\n        const { x, contain, width } = state.props;\n        const { elementBounds } = state;\n        elementBounds.x1 = x;\n        elementBounds.x2 = contain !== 'none' ? x + width : Infinity;\n    }\n    setElementBoundsY(state) {\n        const { y, contain, height } = state.props;\n        const { elementBounds } = state;\n        elementBounds.y1 = y;\n        elementBounds.y2 = contain === 'both' ? y + height : Infinity;\n    }\n}\n//# sourceMappingURL=SdfTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Base class for Core extensions.\n *\n * @remarks\n * Core extensions are used to extend the Core Renderer with custom code such as\n * custom fonts, custom shaders, custom textures, custom animation functions,\n * and more.\n */\nexport class CoreExtension {\n}\n//# sourceMappingURL=CoreExtension.js.map","import { CoreExtension } from '../../exports/core-api.js';\n/**\n * Type guard that checks if a Class extends CoreExtension.\n *\n * @param Class\n * @returns\n */\nexport function classExtendsCoreExtension(Class) {\n    return Class.prototype instanceof CoreExtension;\n}\nexport async function loadCoreExtension(coreExtensionModule, stage) {\n    let module;\n    try {\n        console.log('Loading core extension', coreExtensionModule);\n        module = (await import(coreExtensionModule /* @vite-ignore */));\n    }\n    catch (e) {\n        console.error(`The core extension module at '${coreExtensionModule}' could not be loaded.`);\n        console.error(e);\n        return;\n    }\n    if (!module.default) {\n        console.error(`The core extension module at '${coreExtensionModule}' does not have a default export.`);\n        return;\n    }\n    const ExtensionClass = module.default;\n    if (classExtendsCoreExtension(ExtensionClass)) {\n        const coreExtension = new ExtensionClass();\n        try {\n            await coreExtension.run(stage);\n        }\n        catch (e) {\n            console.error(`The core extension at '${coreExtensionModule}' threw an error.`);\n            console.error(e);\n        }\n    }\n    else {\n        console.error(`The core extension at '${coreExtensionModule}' does not extend CoreExtension.`);\n    }\n}\nexport function santizeCustomDataMap(d) {\n    const validTypes = { boolean: true, string: true, number: true, undefined: true };\n    const keys = Object.keys(d);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (!key) {\n            continue;\n        }\n        const value = d[key];\n        const valueType = typeof value;\n        // Typescript doesn't understand the above const valueType \\_()_/\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore-next-line\n        if (valueType === 'string' && value.length > 2048) {\n            console.warn(`Custom Data value for ${key} is too long, it will be truncated to 2048 characters`);\n            // same here, see above comment, this can only be a string at this point\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore-next-line\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n            d[key] = value.substring(0, 2048);\n        }\n        if (!validTypes[valueType]) {\n            console.warn(`Custom Data value for ${key} is not a boolean, string, or number, it will be ignored`);\n            delete d[key];\n        }\n    }\n    return d;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ManualCountTextureUsageTracker, } from './texture-usage-trackers/ManualCountTextureUsageTracker.js';\nimport { FinalizationRegistryTextureUsageTracker } from './texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { Inspector } from './Inspector.js';\nimport { santizeCustomDataMap } from '../render-drivers/utils.js';\nimport { isProductionEnvironment } from '../utils.js';\n/**\n * The Renderer Main API\n *\n * @remarks\n * This is the primary class used to configure and operate the Renderer.\n *\n * It is used to create and destroy Nodes, as well as Texture and Shader\n * references.\n *\n * Example:\n * ```ts\n * import { RendererMain, MainCoreDriver } from '@lightningjs/renderer';\n *\n * // Initialize the Renderer\n * const renderer = new RendererMain(\n *   {\n *     appWidth: 1920,\n *     appHeight: 1080\n *   },\n *   'app',\n *   new MainCoreDriver(),\n * );\n * ```\n */\nexport class RendererMain extends EventEmitter {\n    root = null;\n    driver;\n    canvas;\n    settings;\n    inspector = null;\n    nodes = new Map();\n    nextTextureId = 1;\n    /**\n     * Texture Usage Tracker for Usage Based Texture Garbage Collection\n     *\n     * @remarks\n     * For internal use only. DO NOT ACCESS.\n     */\n    textureTracker;\n    /**\n     * Constructs a new Renderer instance\n     *\n     * @param settings Renderer settings\n     * @param target Element ID or HTMLElement to insert the canvas into\n     * @param driver Core Driver to use\n     */\n    constructor(settings, target, driver) {\n        super();\n        const resolvedSettings = {\n            appWidth: settings.appWidth || 1920,\n            appHeight: settings.appHeight || 1080,\n            txMemByteThreshold: settings.txMemByteThreshold || 124e6,\n            boundsMargin: settings.boundsMargin || 0,\n            deviceLogicalPixelRatio: settings.deviceLogicalPixelRatio || 1,\n            devicePhysicalPixelRatio: settings.devicePhysicalPixelRatio || window.devicePixelRatio,\n            clearColor: settings.clearColor ?? 0x00000000,\n            coreExtensionModule: settings.coreExtensionModule || null,\n            experimental_FinalizationRegistryTextureUsageTracker: settings.experimental_FinalizationRegistryTextureUsageTracker ?? false,\n            textureCleanupOptions: settings.textureCleanupOptions || {},\n            fpsUpdateInterval: settings.fpsUpdateInterval || 0,\n            numImageWorkers: settings.numImageWorkers !== undefined ? settings.numImageWorkers : 2,\n            enableContextSpy: settings.enableContextSpy ?? false,\n            enableInspector: settings.enableInspector ?? false,\n            renderMode: settings.renderMode ?? 'webgl'\n        };\n        this.settings = resolvedSettings;\n        const { appWidth, appHeight, deviceLogicalPixelRatio, devicePhysicalPixelRatio, enableInspector, } = resolvedSettings;\n        const releaseCallback = (textureId) => {\n            this.driver.releaseTexture(textureId);\n        };\n        const useFinalizationRegistryTracker = resolvedSettings.experimental_FinalizationRegistryTextureUsageTracker &&\n            typeof FinalizationRegistry === 'function';\n        this.textureTracker = useFinalizationRegistryTracker\n            ? new FinalizationRegistryTextureUsageTracker(releaseCallback)\n            : new ManualCountTextureUsageTracker(releaseCallback, this.settings.textureCleanupOptions);\n        const deviceLogicalWidth = appWidth * deviceLogicalPixelRatio;\n        const deviceLogicalHeight = appHeight * deviceLogicalPixelRatio;\n        this.driver = driver;\n        const canvas = document.createElement('canvas');\n        this.canvas = canvas;\n        canvas.width = deviceLogicalWidth * devicePhysicalPixelRatio;\n        canvas.height = deviceLogicalHeight * devicePhysicalPixelRatio;\n        canvas.style.width = `${deviceLogicalWidth}px`;\n        canvas.style.height = `${deviceLogicalHeight}px`;\n        let targetEl;\n        if (typeof target === 'string') {\n            targetEl = document.getElementById(target);\n        }\n        else {\n            targetEl = target;\n        }\n        if (!targetEl) {\n            throw new Error('Could not find target element');\n        }\n        // Hook up the driver's callbacks\n        driver.onCreateNode = (node) => {\n            this.nodes.set(node.id, node);\n        };\n        driver.onBeforeDestroyNode = (node) => {\n            this.nodes.delete(node.id);\n        };\n        driver.onFpsUpdate = (fpsData) => {\n            this.emit('fpsUpdate', fpsData);\n        };\n        driver.onFrameTick = (frameTickData) => {\n            this.emit('frameTick', frameTickData);\n        };\n        driver.onIdle = () => {\n            this.emit('idle');\n        };\n        targetEl.appendChild(canvas);\n        if (enableInspector && !isProductionEnvironment()) {\n            this.inspector = new Inspector(canvas, resolvedSettings);\n        }\n    }\n    /**\n     * Initialize the renderer\n     *\n     * @remarks\n     * This method must be called and resolved asyncronously before any other\n     * methods are called.\n     */\n    async init() {\n        await this.driver.init(this, this.settings, this.canvas);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.root = this.driver.getRootNode();\n    }\n    /**\n     * Create a new scene graph node\n     *\n     * @remarks\n     * A node is the main graphical building block of the Renderer scene graph. It\n     * can be a container for other nodes, or it can be a leaf node that renders a\n     * solid color, gradient, image, or specific texture, using a specific shader.\n     *\n     * To create a text node, see {@link createTextNode}.\n     *\n     * See {@link INode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createNode(props) {\n        if (this.inspector) {\n            return this.inspector.createNode(this.driver, this.resolveNodeDefaults(props));\n        }\n        return this.driver.createNode(this.resolveNodeDefaults(props));\n    }\n    /**\n     * Create a new scene graph text node\n     *\n     * @remarks\n     * A text node is the second graphical building block of the Renderer scene\n     * graph. It renders text using a specific text renderer that is automatically\n     * chosen based on the font requested and what type of fonts are installed\n     * into an app via a CoreExtension.\n     *\n     * See {@link ITextNode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createTextNode(props) {\n        const fontSize = props.fontSize ?? 16;\n        const data = {\n            ...this.resolveNodeDefaults(props),\n            text: props.text ?? '',\n            textRendererOverride: props.textRendererOverride ?? null,\n            fontSize,\n            fontFamily: props.fontFamily ?? 'sans-serif',\n            fontStyle: props.fontStyle ?? 'normal',\n            fontWeight: props.fontWeight ?? 'normal',\n            fontStretch: props.fontStretch ?? 'normal',\n            textAlign: props.textAlign ?? 'left',\n            contain: props.contain ?? 'none',\n            scrollable: props.scrollable ?? false,\n            scrollY: props.scrollY ?? 0,\n            offsetY: props.offsetY ?? 0,\n            letterSpacing: props.letterSpacing ?? 0,\n            lineHeight: props.lineHeight ?? fontSize,\n            maxLines: props.maxLines ?? 0,\n            textBaseline: props.textBaseline ?? 'alphabetic',\n            verticalAlign: props.verticalAlign ?? 'top',\n            overflowSuffix: props.overflowSuffix ?? '...',\n            debug: props.debug ?? {},\n        };\n        if (this.inspector) {\n            return this.inspector.createTextNode(this.driver, data);\n        }\n        return this.driver.createTextNode(data);\n    }\n    /**\n     * Resolves the default property values for a Node\n     *\n     * @remarks\n     * This method is used internally by the RendererMain to resolve the default\n     * property values for a Node. It is exposed publicly so that it can be used\n     * by Core Driver implementations.\n     *\n     * @param props\n     * @returns\n     */\n    resolveNodeDefaults(props) {\n        const color = props.color ?? 0xffffffff;\n        const colorTl = props.colorTl ?? props.colorTop ?? props.colorLeft ?? color;\n        const colorTr = props.colorTr ?? props.colorTop ?? props.colorRight ?? color;\n        const colorBl = props.colorBl ?? props.colorBottom ?? props.colorLeft ?? color;\n        const colorBr = props.colorBr ?? props.colorBottom ?? props.colorRight ?? color;\n        const data = santizeCustomDataMap(props.data ?? {});\n        return {\n            x: props.x ?? 0,\n            y: props.y ?? 0,\n            width: props.width ?? 0,\n            height: props.height ?? 0,\n            alpha: props.alpha ?? 1,\n            autosize: props.autosize ?? false,\n            clipping: props.clipping ?? false,\n            color,\n            colorTop: props.colorTop ?? color,\n            colorBottom: props.colorBottom ?? color,\n            colorLeft: props.colorLeft ?? color,\n            colorRight: props.colorRight ?? color,\n            colorBl,\n            colorBr,\n            colorTl,\n            colorTr,\n            zIndex: props.zIndex ?? 0,\n            zIndexLocked: props.zIndexLocked ?? 0,\n            parent: props.parent ?? null,\n            texture: props.texture ?? null,\n            shader: props.shader ?? null,\n            // Since setting the `src` will trigger a texture load, we need to set it after\n            // we set the texture. Otherwise, problems happen.\n            src: props.src ?? '',\n            scale: props.scale ?? null,\n            scaleX: props.scaleX ?? props.scale ?? 1,\n            scaleY: props.scaleY ?? props.scale ?? 1,\n            mount: props.mount ?? 0,\n            mountX: props.mountX ?? props.mount ?? 0,\n            mountY: props.mountY ?? props.mount ?? 0,\n            pivot: props.pivot ?? 0.5,\n            pivotX: props.pivotX ?? props.pivot ?? 0.5,\n            pivotY: props.pivotY ?? props.pivot ?? 0.5,\n            rotation: props.rotation ?? 0,\n            data: data,\n        };\n    }\n    /**\n     * Destroy a node\n     *\n     * @remarks\n     * This method destroys a node but does not destroy its children.\n     *\n     * @param node\n     * @returns\n     */\n    destroyNode(node) {\n        if (this.inspector) {\n            this.inspector.destroyNode(node);\n        }\n        return this.driver.destroyNode(node);\n    }\n    /**\n     * Create a new texture reference\n     *\n     * @remarks\n     * This method creates a new reference to a texture. The texture is not\n     * loaded until it is used on a node.\n     *\n     * It can be assigned to a node's `texture` property, or it can be used\n     * when creating a SubTexture.\n     *\n     * @param textureType\n     * @param props\n     * @param options\n     * @returns\n     */\n    createTexture(textureType, props, options) {\n        const id = this.nextTextureId++;\n        const desc = {\n            descType: 'texture',\n            txType: textureType,\n            props,\n            options: {\n                ...options,\n                // This ID is used to identify the texture in the CoreTextureManager's\n                // ID Texture Map cache.\n                id,\n            },\n        };\n        this.textureTracker.registerTexture(desc);\n        return desc;\n    }\n    /**\n     * Create a new shader reference\n     *\n     * @remarks\n     * This method creates a new reference to a shader. The shader is not\n     * loaded until it is used on a Node.\n     *\n     * It can be assigned to a Node's `shader` property.\n     *\n     * @param shaderType\n     * @param props\n     * @returns\n     */\n    createShader(shaderType, props) {\n        return {\n            descType: 'shader',\n            shType: shaderType,\n            props: props,\n        };\n    }\n    /**\n     * Get a Node by its ID\n     *\n     * @param id\n     * @returns\n     */\n    getNodeById(id) {\n        return this.nodes.get(id) || null;\n    }\n    toggleFreeze() {\n        throw new Error('Not implemented');\n    }\n    advanceFrame() {\n        throw new Error('Not implemented');\n    }\n    /**\n     * Re-render the current frame without advancing any running animations.\n     *\n     * @remarks\n     * Any state changes will be reflected in the re-rendered frame. Useful for\n     * debugging.\n     *\n     * May not do anything if the render loop is running on a separate worker.\n     */\n    rerender() {\n        throw new Error('Not implemented');\n    }\n}\n//# sourceMappingURL=RendererMain.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getTimingFunction } from '../utils.js';\nimport { mergeColorProgress } from '../../utils.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nexport class CoreAnimation extends EventEmitter {\n    node;\n    props;\n    settings;\n    propStartValues = {};\n    restoreValues = {};\n    progress = 0;\n    delayFor = 0;\n    timingFunction;\n    propsList; //fixme - aint got not time for this\n    constructor(node, props, settings) {\n        super();\n        this.node = node;\n        this.props = props;\n        this.settings = settings;\n        this.propStartValues = {};\n        this.propsList = Object.keys(props);\n        this.propsList.forEach((propName) => {\n            this.propStartValues[propName] = node[propName];\n        });\n        this.timingFunction = (t) => t;\n        if (settings.easing && typeof settings.easing === 'string') {\n            this.timingFunction = getTimingFunction(settings.easing);\n        }\n        this.delayFor = settings.delay || 0;\n    }\n    reset() {\n        this.progress = 0;\n        this.delayFor = this.settings.delay || 0;\n        this.update(0);\n    }\n    restore() {\n        this.reset();\n        Object.keys(this.props).forEach((propName) => {\n            this.node[propName] = this.propStartValues[propName];\n        });\n    }\n    reverse() {\n        this.progress = 0;\n        Object.keys(this.props).forEach((propName) => {\n            // set the start value to the current value\n            const startValue = this.props[propName];\n            const endValue = this.propStartValues[propName];\n            // swap the start and end values\n            this.props[propName] = endValue;\n            this.propStartValues[propName] = startValue;\n        });\n        // restore stop method if we are not looping\n        if (!this.settings.loop) {\n            this.settings.stopMethod = false;\n        }\n    }\n    applyEasing(p, s, e) {\n        return (this.timingFunction(p) || p) * (e - s) + s;\n    }\n    update(dt) {\n        const { duration, loop, easing, stopMethod } = this.settings;\n        if (!duration) {\n            this.emit('finished', {});\n            return;\n        }\n        if (this.delayFor > 0) {\n            this.delayFor -= dt;\n            return;\n        }\n        if (this.delayFor <= 0 && this.progress === 0) {\n            this.emit('start', {});\n        }\n        this.progress += dt / duration;\n        if (this.progress > 1) {\n            this.progress = loop ? 0 : 1;\n            if (stopMethod) {\n                // If there's a stop method emit finished so the stop method can be applied.\n                // TODO: We should probably reevaluate how stopMethod is implemented as currently\n                // stop method 'reset' does not work when looping.\n                this.emit('finished', {});\n                return;\n            }\n        }\n        for (let i = 0; i < this.propsList.length; i++) {\n            const propName = this.propsList[i];\n            const propValue = this.props[propName];\n            const startValue = this.propStartValues[propName];\n            const endValue = propValue;\n            if (propName.indexOf('color') !== -1) {\n                // check if we have to change the color to begin with\n                if (startValue === endValue) {\n                    this.node[propName] = startValue;\n                    continue;\n                }\n                if (easing) {\n                    const easingProgressValue = this.timingFunction(this.progress) || this.progress;\n                    const easingColorValue = mergeColorProgress(startValue, endValue, easingProgressValue);\n                    this.node[propName] = easingColorValue;\n                    continue;\n                }\n                this.node[propName] = mergeColorProgress(startValue, endValue, this.progress);\n                continue;\n            }\n            if (easing) {\n                this.node[propName] = this.applyEasing(this.progress, startValue, endValue);\n                continue;\n            }\n            this.node[propName] =\n                startValue + (endValue - startValue) * this.progress;\n        }\n        if (this.progress === 1) {\n            this.emit('finished', {});\n        }\n    }\n}\n//# sourceMappingURL=CoreAnimation.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nexport class CoreAnimationController {\n    manager;\n    animation;\n    startedPromise = null;\n    /**\n     * If this is null, then the animation hasn't started yet.\n     */\n    startedResolve = null;\n    stoppedPromise = null;\n    /**\n     * If this is null, then the animation is in a finished / stopped state.\n     */\n    stoppedResolve = null;\n    constructor(manager, animation) {\n        this.manager = manager;\n        this.animation = animation;\n        this.state = 'stopped';\n    }\n    state;\n    start() {\n        this.makeStartedPromise();\n        this.animation.once('start', this.started.bind(this));\n        this.makeStoppedPromise();\n        this.animation.once('finished', this.finished.bind(this));\n        // prevent registering the same animation twice\n        if (!this.manager.activeAnimations.has(this.animation)) {\n            this.manager.registerAnimation(this.animation);\n        }\n        this.state = 'running';\n        return this;\n    }\n    stop() {\n        this.manager.unregisterAnimation(this.animation);\n        if (this.stoppedResolve !== null) {\n            this.stoppedResolve();\n            this.stoppedResolve = null;\n        }\n        this.animation.reset();\n        this.state = 'stopped';\n        return this;\n    }\n    pause() {\n        this.manager.unregisterAnimation(this.animation);\n        this.state = 'paused';\n        return this;\n    }\n    restore() {\n        this.stoppedResolve = null;\n        this.animation.restore();\n        return this;\n    }\n    waitUntilStarted() {\n        this.makeStartedPromise();\n        const promise = this.startedPromise;\n        assertTruthy(promise);\n        return promise;\n    }\n    waitUntilStopped() {\n        this.makeStoppedPromise();\n        const promise = this.stoppedPromise;\n        assertTruthy(promise);\n        return promise;\n    }\n    makeStartedPromise() {\n        if (this.startedResolve === null) {\n            this.startedPromise = new Promise((resolve) => {\n                this.startedResolve = resolve;\n            });\n        }\n    }\n    makeStoppedPromise() {\n        if (this.stoppedResolve === null) {\n            this.stoppedPromise = new Promise((resolve) => {\n                this.stoppedResolve = resolve;\n            });\n        }\n    }\n    started() {\n        assertTruthy(this.startedResolve);\n        // resolve promise (and pass current this to continue to the chain)\n        this.startedResolve(this);\n        this.startedResolve = null;\n    }\n    finished() {\n        assertTruthy(this.stoppedResolve);\n        // If the animation is looping, then we need to restart it.\n        const { loop, stopMethod } = this.animation.settings;\n        if (stopMethod === 'reverse') {\n            this.animation.reverse();\n            this.start();\n            return;\n        }\n        // resolve promise\n        this.stoppedResolve();\n        this.stoppedResolve = null;\n        if (loop) {\n            return;\n        }\n        // unregister animation\n        this.manager.unregisterAnimation(this.animation);\n    }\n}\n//# sourceMappingURL=CoreAnimationController.js.map","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n// Matrix3d is a 3x3 matrix in column-major order because that's how WebGL likes it.\n// The matrix is stored in a Float32Array in the following order:\n// | 0 3 6 |\n// | 1 4 7 |\n// | 2 5 8 |\n// The following constants are used to index into the array in a row-major way.\nconst m0 = 0;\nconst m1 = 3;\nconst m2 = 6;\nconst m3 = 1;\nconst m4 = 4;\nconst m5 = 7;\nconst m6 = 2;\nconst m7 = 5;\nconst m8 = 8;\n/**\n * A 3x3 matrix representing a 2D transformation.\n *\n * @remarks\n * The matrix is stored in column-major order in the `data` property which can\n * be passed directly to a WebGL shader uniform.\n *\n * The matrix is stored in a Float32Array in the following index order:\n * | 0 3 6 |\n * | 1 4 7 |\n * | 2 5 8 |\n *\n * Only the first two rows are really used for the transformation. The last row is\n * generally always `[0, 0, 1]` if you only use the 2D transformation methods\n * provided by this class.\n *\n * For convenience, entries in the first two rows can be accessed by the following\n * getter properties:\n * | ta tb tx |\n * | tc td ty |\n * | 0  0  1  |\n */\nexport class Matrix3d {\n    data;\n    /**\n     * Creates a new 3x3 matrix.\n     *\n     * @param entries Row-major 3x3 matrix\n     */\n    constructor(entries) {\n        if (entries) {\n            // Transpose the input matrix so that it's in column-major order.\n            this.data = new Float32Array(9);\n            this.data[m0] = entries[0];\n            this.data[m1] = entries[3];\n            this.data[m2] = entries[6];\n            this.data[m3] = entries[1];\n            this.data[m4] = entries[4];\n            this.data[m5] = entries[7];\n            this.data[m6] = entries[2];\n            this.data[m7] = entries[5];\n            this.data[m8] = entries[8];\n        }\n        else {\n            this.data = new Float32Array(9);\n        }\n    }\n    /**\n     * Returns a temporary matrix that can be used for calculations.\n     *\n     * @remarks\n     * This is useful for avoiding allocations in tight loops.\n     *\n     * The matrix is not guaranteed to be the same between calls.\n     *\n     * @returns\n     */\n    static get temp() {\n        return tempMatrix;\n    }\n    static multiply(a, b, out) {\n        const e0 = a.data[m0] * b.data[m0] +\n            a.data[m1] * b.data[m3] +\n            a.data[m2] * b.data[m6];\n        const e1 = a.data[m0] * b.data[m1] +\n            a.data[m1] * b.data[m4] +\n            a.data[m2] * b.data[m7];\n        const e2 = a.data[m0] * b.data[m2] +\n            a.data[m1] * b.data[m5] +\n            a.data[m2] * b.data[m8];\n        const e3 = a.data[m3] * b.data[m0] +\n            a.data[m4] * b.data[m3] +\n            a.data[m5] * b.data[m6];\n        const e4 = a.data[m3] * b.data[m1] +\n            a.data[m4] * b.data[m4] +\n            a.data[m5] * b.data[m7];\n        const e5 = a.data[m3] * b.data[m2] +\n            a.data[m4] * b.data[m5] +\n            a.data[m5] * b.data[m8];\n        const e6 = a.data[m6] * b.data[m0] +\n            a.data[m7] * b.data[m3] +\n            a.data[m8] * b.data[m6];\n        const e7 = a.data[m6] * b.data[m1] +\n            a.data[m7] * b.data[m4] +\n            a.data[m8] * b.data[m7];\n        const e8 = a.data[m6] * b.data[m2] +\n            a.data[m7] * b.data[m5] +\n            a.data[m8] * b.data[m8];\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = e0;\n        out.data[m1] = e1;\n        out.data[m2] = e2;\n        out.data[m3] = e3;\n        out.data[m4] = e4;\n        out.data[m5] = e5;\n        out.data[m6] = e6;\n        out.data[m7] = e7;\n        out.data[m8] = e8;\n        return out;\n    }\n    static identity(out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = 1;\n        out.data[m1] = 0;\n        out.data[m2] = 0;\n        out.data[m3] = 0;\n        out.data[m4] = 1;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static translate(x, y, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = 1;\n        out.data[m1] = 0;\n        out.data[m2] = x;\n        out.data[m3] = 0;\n        out.data[m4] = 1;\n        out.data[m5] = y;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static scale(sx, sy, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = sx;\n        out.data[m1] = 0;\n        out.data[m2] = 0;\n        out.data[m3] = 0;\n        out.data[m4] = sy;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static rotate(angle, out) {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = cos;\n        out.data[m1] = -sin;\n        out.data[m2] = 0;\n        out.data[m3] = sin;\n        out.data[m4] = cos;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static copy(src, dst, transpose) {\n        if (!dst) {\n            dst = new Matrix3d();\n        }\n        dst.data[0] = src.data[0];\n        dst.data[1] = src.data[1];\n        dst.data[2] = src.data[2];\n        dst.data[3] = src.data[3];\n        dst.data[4] = src.data[4];\n        dst.data[5] = src.data[5];\n        dst.data[6] = src.data[6];\n        dst.data[7] = src.data[7];\n        dst.data[8] = src.data[8];\n        return dst;\n    }\n    translate(x, y) {\n        this.data[m2] = this.data[m0] * x + this.data[m1] * y + this.data[m2];\n        this.data[m5] = this.data[m3] * x + this.data[m4] * y + this.data[m5];\n        return this;\n    }\n    scale(sx, sy) {\n        this.data[m0] = this.data[m0] * sx;\n        this.data[m1] = this.data[m1] * sy;\n        this.data[m3] = this.data[m3] * sx;\n        this.data[m4] = this.data[m4] * sy;\n        return this;\n    }\n    rotate(angle) {\n        if (angle === 0 || !((angle % Math.PI) * 2)) {\n            return this;\n        }\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        const e0 = this.data[m0] * cos + this.data[m1] * sin;\n        const e1 = this.data[m1] * cos - this.data[m0] * sin;\n        const e3 = this.data[m3] * cos + this.data[m4] * sin;\n        const e4 = this.data[m4] * cos - this.data[m3] * sin;\n        this.data[m0] = e0;\n        this.data[m1] = e1;\n        this.data[m3] = e3;\n        this.data[m4] = e4;\n        return this;\n    }\n    multiply(other) {\n        return Matrix3d.multiply(this, other, this);\n    }\n    get tx() {\n        return this.data[m2];\n    }\n    get ty() {\n        return this.data[m5];\n    }\n    get ta() {\n        return this.data[m0];\n    }\n    get tb() {\n        return this.data[m1];\n    }\n    get tc() {\n        return this.data[m3];\n    }\n    get td() {\n        return this.data[m4];\n    }\n    transformPoint(x, y) {\n        return [\n            this.data[m0] * x + this.data[m1] * y + this.data[m2],\n            this.data[m3] * x + this.data[m4] * y + this.data[m3],\n        ];\n    }\n}\nconst tempMatrix = new Matrix3d();\n//# sourceMappingURL=Matrix3d.js.map","const rx1 = 0;\nconst rx2 = 2;\nconst rx3 = 4;\nconst rx4 = 6;\nconst ry1 = 1;\nconst ry2 = 3;\nconst ry3 = 5;\nconst ry4 = 7;\nexport class RenderCoords {\n    data;\n    constructor(entries) {\n        this.data = new Float32Array(8);\n        if (entries) {\n            this.data[rx1] = entries[rx1];\n            this.data[rx2] = entries[rx2];\n            this.data[rx3] = entries[rx3];\n            this.data[rx4] = entries[rx4];\n            this.data[ry1] = entries[ry1];\n            this.data[ry2] = entries[ry2];\n            this.data[ry3] = entries[ry3];\n            this.data[ry4] = entries[ry4];\n        }\n    }\n    static translate(x1, y1, x2, y2, x3, y3, x4, y4, out) {\n        if (!out) {\n            out = new RenderCoords();\n        }\n        out.data[rx1] = x1;\n        out.data[rx2] = x2;\n        out.data[rx3] = x3;\n        out.data[rx4] = x4;\n        out.data[ry1] = y1;\n        out.data[ry2] = y2;\n        out.data[ry3] = y3;\n        out.data[ry4] = y4;\n        return out;\n    }\n    get x1() {\n        return this.data[rx1];\n    }\n    get x2() {\n        return this.data[rx2];\n    }\n    get x3() {\n        return this.data[rx3];\n    }\n    get x4() {\n        return this.data[rx4];\n    }\n    get y1() {\n        return this.data[ry1];\n    }\n    get y2() {\n        return this.data[ry2];\n    }\n    get y3() {\n        return this.data[ry3];\n    }\n    get y4() {\n        return this.data[ry4];\n    }\n}\n//# sourceMappingURL=RenderCoords.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, mergeColorAlphaPremultiplied, getImageAspectRatio, } from '../utils.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { copyRect, intersectRect, createBound, boundInsideBound, } from './lib/utils.js';\nimport { Matrix3d } from './lib/Matrix3d.js';\nimport { RenderCoords } from './lib/RenderCoords.js';\nexport var CoreNodeRenderState;\n(function (CoreNodeRenderState) {\n    CoreNodeRenderState[CoreNodeRenderState[\"Init\"] = 0] = \"Init\";\n    CoreNodeRenderState[CoreNodeRenderState[\"OutOfBounds\"] = 2] = \"OutOfBounds\";\n    CoreNodeRenderState[CoreNodeRenderState[\"InBounds\"] = 4] = \"InBounds\";\n    CoreNodeRenderState[CoreNodeRenderState[\"InViewport\"] = 8] = \"InViewport\";\n})(CoreNodeRenderState || (CoreNodeRenderState = {}));\nconst CoreNodeRenderStateMap = new Map();\nCoreNodeRenderStateMap.set(CoreNodeRenderState.Init, 'init');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.OutOfBounds, 'outOfBounds');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.InBounds, 'inBounds');\nCoreNodeRenderStateMap.set(CoreNodeRenderState.InViewport, 'inViewport');\nexport var UpdateType;\n(function (UpdateType) {\n    /**\n     * Child updates\n     */\n    UpdateType[UpdateType[\"Children\"] = 1] = \"Children\";\n    /**\n     * Scale/Rotate transform update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `scaleRotateTransform`\n     */\n    UpdateType[UpdateType[\"ScaleRotate\"] = 2] = \"ScaleRotate\";\n    /**\n     * Translate transform update (x/y/width/height/pivot/mount)\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `localTransform`\n     */\n    UpdateType[UpdateType[\"Local\"] = 4] = \"Local\";\n    /**\n     * Global Transform update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `globalTransform`\n     * - `renderCoords`\n     * - `renderBound`\n     */\n    UpdateType[UpdateType[\"Global\"] = 8] = \"Global\";\n    /**\n     * Clipping rect update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `clippingRect`\n     */\n    UpdateType[UpdateType[\"Clipping\"] = 16] = \"Clipping\";\n    /**\n     * Calculated ZIndex update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `calcZIndex`\n     */\n    UpdateType[UpdateType[\"CalculatedZIndex\"] = 32] = \"CalculatedZIndex\";\n    /**\n     * Z-Index Sorted Children update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `children` (sorts children by their `calcZIndex`)\n     */\n    UpdateType[UpdateType[\"ZIndexSortedChildren\"] = 64] = \"ZIndexSortedChildren\";\n    /**\n     * Premultiplied Colors update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `premultipliedColorTl`\n     * - `premultipliedColorTr`\n     * - `premultipliedColorBl`\n     * - `premultipliedColorBr`\n     */\n    UpdateType[UpdateType[\"PremultipliedColors\"] = 128] = \"PremultipliedColors\";\n    /**\n     * World Alpha update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `worldAlpha` = `parent.worldAlpha` * `alpha`\n     */\n    UpdateType[UpdateType[\"WorldAlpha\"] = 256] = \"WorldAlpha\";\n    /**\n     * Render State update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `renderState`\n     */\n    UpdateType[UpdateType[\"RenderState\"] = 512] = \"RenderState\";\n    /**\n     * Is Renderable update\n     *\n     * @remarks\n     * CoreNode Properties Updated:\n     * - `isRenderable`\n     */\n    UpdateType[UpdateType[\"IsRenderable\"] = 1024] = \"IsRenderable\";\n    /**\n     * None\n     */\n    UpdateType[UpdateType[\"None\"] = 0] = \"None\";\n    /**\n     * All\n     */\n    UpdateType[UpdateType[\"All\"] = 2047] = \"All\";\n})(UpdateType || (UpdateType = {}));\nexport class CoreNode extends EventEmitter {\n    stage;\n    children = [];\n    props;\n    updateType = UpdateType.All;\n    globalTransform;\n    scaleRotateTransform;\n    localTransform;\n    renderCoords;\n    renderBound;\n    strictBound;\n    preloadBound;\n    clippingRect = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        valid: false,\n    };\n    isRenderable = false;\n    renderState = CoreNodeRenderState.Init;\n    worldAlpha = 1;\n    premultipliedColorTl = 0;\n    premultipliedColorTr = 0;\n    premultipliedColorBl = 0;\n    premultipliedColorBr = 0;\n    calcZIndex = 0;\n    constructor(stage, props) {\n        super();\n        this.stage = stage;\n        this.props = {\n            ...props,\n            parent: null,\n        };\n        // Allow for parent to be processed appropriately\n        this.parent = props.parent;\n        this.updateScaleRotateTransform();\n    }\n    //#region Textures\n    loadTexture(textureType, props, options = null) {\n        // First unload any existing texture\n        if (this.props.texture) {\n            this.unloadTexture();\n        }\n        const { txManager } = this.stage;\n        const texture = txManager.loadTexture(textureType, props, options);\n        this.props.texture = texture;\n        this.props.textureOptions = options;\n        this.setUpdateType(UpdateType.IsRenderable);\n        // If texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            if (texture.state === 'loaded') {\n                this.onTextureLoaded(texture, texture.dimensions);\n            }\n            else if (texture.state === 'failed') {\n                this.onTextureFailed(texture, texture.error);\n            }\n            else if (texture.state === 'freed') {\n                this.onTextureFreed(texture);\n            }\n            texture.on('loaded', this.onTextureLoaded);\n            texture.on('failed', this.onTextureFailed);\n            texture.on('freed', this.onTextureFreed);\n        });\n    }\n    unloadTexture() {\n        if (this.props.texture) {\n            const { texture } = this.props;\n            texture.off('loaded', this.onTextureLoaded);\n            texture.off('failed', this.onTextureFailed);\n            texture.off('freed', this.onTextureFreed);\n            texture.setRenderableOwner(this, false);\n        }\n        this.props.texture = null;\n        this.props.textureOptions = null;\n        this.setUpdateType(UpdateType.IsRenderable);\n    }\n    autosizeNode(dimensions) {\n        if (this.autosize) {\n            this.width = dimensions.width;\n            this.height = dimensions.height;\n        }\n    }\n    onTextureLoaded = (target, dimensions) => {\n        this.autosizeNode(dimensions);\n        // Texture was loaded. In case the RAF loop has already stopped, we request\n        // a render to ensure the texture is rendered.\n        this.stage.requestRender();\n        this.emit('loaded', {\n            type: 'texture',\n            dimensions,\n        });\n    };\n    onTextureFailed = (target, error) => {\n        this.emit('failed', {\n            type: 'texture',\n            error,\n        });\n    };\n    onTextureFreed = (target) => {\n        this.emit('freed', {\n            type: 'texture',\n        });\n    };\n    //#endregion Textures\n    loadShader(shaderType, props) {\n        const shManager = this.stage.renderer.getShaderManager();\n        assertTruthy(shManager);\n        const { shader, props: p } = shManager.loadShader(shaderType, props);\n        this.props.shader = shader;\n        this.props.shaderProps = p;\n        this.setUpdateType(UpdateType.IsRenderable);\n    }\n    /**\n     * Change types types is used to determine the scope of the changes being applied\n     *\n     * @remarks\n     * See {@link UpdateType} for more information on each type\n     *\n     * @param type\n     */\n    setUpdateType(type) {\n        this.updateType |= type;\n        // If we're updating this node at all, we need to inform the parent\n        // (and all ancestors) that their children need updating as well\n        const parent = this.props.parent;\n        if (parent && !(parent.updateType & UpdateType.Children)) {\n            parent.setUpdateType(UpdateType.Children);\n        }\n    }\n    sortChildren() {\n        this.children.sort((a, b) => a.calcZIndex - b.calcZIndex);\n    }\n    updateScaleRotateTransform() {\n        this.scaleRotateTransform = Matrix3d.rotate(this.props.rotation, this.scaleRotateTransform).scale(this.props.scaleX, this.props.scaleY);\n    }\n    updateLocalTransform() {\n        assertTruthy(this.scaleRotateTransform);\n        const pivotTranslateX = this.props.pivotX * this.props.width;\n        const pivotTranslateY = this.props.pivotY * this.props.height;\n        const mountTranslateX = this.props.mountX * this.props.width;\n        const mountTranslateY = this.props.mountY * this.props.height;\n        this.localTransform = Matrix3d.translate(pivotTranslateX - mountTranslateX + this.props.x, pivotTranslateY - mountTranslateY + this.props.y, this.localTransform)\n            .multiply(this.scaleRotateTransform)\n            .translate(-pivotTranslateX, -pivotTranslateY);\n        this.setUpdateType(UpdateType.Global);\n    }\n    /**\n     * @todo: test for correct calculation flag\n     * @param delta\n     */\n    update(delta, parentClippingRect) {\n        if (this.updateType & UpdateType.ScaleRotate) {\n            this.updateScaleRotateTransform();\n            this.setUpdateType(UpdateType.Local);\n        }\n        if (this.updateType & UpdateType.Local) {\n            this.updateLocalTransform();\n            this.setUpdateType(UpdateType.Global);\n        }\n        const parent = this.props.parent;\n        let childUpdateType = UpdateType.None;\n        if (this.updateType & UpdateType.Global) {\n            assertTruthy(this.localTransform);\n            this.globalTransform = Matrix3d.copy(parent?.globalTransform || this.localTransform, this.globalTransform);\n            if (parent) {\n                this.globalTransform.multiply(this.localTransform);\n            }\n            this.calculateRenderCoords();\n            this.updateBoundingRect();\n            this.setUpdateType(UpdateType.Clipping | UpdateType.RenderState | UpdateType.Children);\n            childUpdateType |= UpdateType.Global;\n        }\n        if (this.updateType & UpdateType.Clipping) {\n            this.calculateClippingRect(parentClippingRect);\n            this.setUpdateType(UpdateType.Children);\n            childUpdateType |= UpdateType.Clipping;\n        }\n        if (this.updateType & UpdateType.WorldAlpha) {\n            if (parent) {\n                this.worldAlpha = parent.worldAlpha * this.props.alpha;\n            }\n            else {\n                this.worldAlpha = this.props.alpha;\n            }\n            this.setUpdateType(UpdateType.Children |\n                UpdateType.PremultipliedColors |\n                UpdateType.IsRenderable);\n            childUpdateType |= UpdateType.WorldAlpha;\n        }\n        if (this.updateType & UpdateType.PremultipliedColors) {\n            this.premultipliedColorTl = mergeColorAlphaPremultiplied(this.props.colorTl, this.worldAlpha, true);\n            // If all the colors are the same just sent them all to the same value\n            if (this.props.colorTl === this.props.colorTr &&\n                this.props.colorBl === this.props.colorBr &&\n                this.props.colorTl === this.props.colorBl) {\n                this.premultipliedColorTr =\n                    this.premultipliedColorBl =\n                        this.premultipliedColorBr =\n                            this.premultipliedColorTl;\n            }\n            else {\n                this.premultipliedColorTr = mergeColorAlphaPremultiplied(this.props.colorTr, this.worldAlpha, true);\n                this.premultipliedColorBl = mergeColorAlphaPremultiplied(this.props.colorBl, this.worldAlpha, true);\n                this.premultipliedColorBr = mergeColorAlphaPremultiplied(this.props.colorBr, this.worldAlpha, true);\n            }\n        }\n        if (this.updateType & UpdateType.RenderState) {\n            this.updateRenderState(parentClippingRect);\n            this.setUpdateType(UpdateType.IsRenderable);\n        }\n        if (this.updateType & UpdateType.IsRenderable) {\n            this.updateIsRenderable();\n        }\n        // No need to update zIndex if there is no parent\n        if (parent && this.updateType & UpdateType.CalculatedZIndex) {\n            this.calculateZIndex();\n            // Tell parent to re-sort children\n            parent.setUpdateType(UpdateType.ZIndexSortedChildren);\n        }\n        if (this.updateType & UpdateType.Children && this.children.length) {\n            this.children.forEach((child) => {\n                // Trigger the depenedent update types on the child\n                child.setUpdateType(childUpdateType);\n                // If child has no updates, skip\n                if (child.updateType === 0) {\n                    return;\n                }\n                child.update(delta, this.clippingRect);\n            });\n        }\n        // Sorting children MUST happen after children have been updated so\n        // that they have the oppotunity to update their calculated zIndex.\n        if (this.updateType & UpdateType.ZIndexSortedChildren) {\n            // reorder z-index\n            this.sortChildren();\n        }\n        // reset update type\n        this.updateType = 0;\n    }\n    //check if CoreNode is renderable based on props\n    checkRenderProps() {\n        if (this.props.texture) {\n            return true;\n        }\n        if (!this.props.width || !this.props.height) {\n            return false;\n        }\n        if (this.props.shader) {\n            return true;\n        }\n        if (this.props.clipping) {\n            return true;\n        }\n        if (this.props.color !== 0) {\n            return true;\n        }\n        // Consider removing these checks and just using the color property check above.\n        // Maybe add a forceRender prop for nodes that should always render.\n        if (this.props.colorTop !== 0) {\n            return true;\n        }\n        if (this.props.colorBottom !== 0) {\n            return true;\n        }\n        if (this.props.colorLeft !== 0) {\n            return true;\n        }\n        if (this.props.colorRight !== 0) {\n            return true;\n        }\n        if (this.props.colorTl !== 0) {\n            return true;\n        }\n        if (this.props.colorTr !== 0) {\n            return true;\n        }\n        if (this.props.colorBl !== 0) {\n            return true;\n        }\n        if (this.props.colorBr !== 0) {\n            return true;\n        }\n        return false;\n    }\n    checkRenderBounds(parentClippingRect) {\n        assertTruthy(this.renderBound);\n        const rectW = parentClippingRect.width || this.stage.root.width;\n        const rectH = parentClippingRect.height || this.stage.root.height;\n        this.strictBound = createBound(parentClippingRect.x, parentClippingRect.y, parentClippingRect.x + rectW, parentClippingRect.y + rectH, this.strictBound);\n        const renderM = this.stage.boundsMargin;\n        this.preloadBound = createBound(parentClippingRect.x - renderM[3], parentClippingRect.y - renderM[0], parentClippingRect.x + rectW + renderM[1], parentClippingRect.y + rectH + renderM[2], this.preloadBound);\n        if (boundInsideBound(this.renderBound, this.strictBound)) {\n            return CoreNodeRenderState.InViewport;\n        }\n        if (boundInsideBound(this.renderBound, this.preloadBound)) {\n            return CoreNodeRenderState.InBounds;\n        }\n        return CoreNodeRenderState.OutOfBounds;\n    }\n    updateRenderState(parentClippingRect) {\n        const renderState = this.checkRenderBounds(parentClippingRect);\n        if (renderState !== this.renderState) {\n            let previous = this.renderState;\n            this.renderState = renderState;\n            if (previous === CoreNodeRenderState.InViewport) {\n                this.emit('outOfViewport', {\n                    previous,\n                    current: renderState,\n                });\n            }\n            if (previous < CoreNodeRenderState.InBounds &&\n                renderState === CoreNodeRenderState.InViewport) {\n                this.emit(CoreNodeRenderStateMap.get(CoreNodeRenderState.InBounds), {\n                    previous,\n                    current: renderState,\n                });\n                previous = CoreNodeRenderState.InBounds;\n            }\n            else if (previous > CoreNodeRenderState.InBounds &&\n                renderState === CoreNodeRenderState.OutOfBounds) {\n                this.emit(CoreNodeRenderStateMap.get(CoreNodeRenderState.InBounds), {\n                    previous,\n                    current: renderState,\n                });\n                previous = CoreNodeRenderState.InBounds;\n            }\n            const event = CoreNodeRenderStateMap.get(renderState);\n            assertTruthy(event);\n            this.emit(event, {\n                previous,\n                current: renderState,\n            });\n        }\n    }\n    setRenderState(state) {\n        if (state !== this.renderState) {\n            this.renderState = state;\n            this.emit(CoreNodeRenderState[state]);\n        }\n    }\n    /**\n     * This function updates the `isRenderable` property based on certain conditions.\n     *\n     * @returns\n     */\n    updateIsRenderable() {\n        let newIsRenderable;\n        if (this.worldAlpha === 0 || !this.checkRenderProps()) {\n            newIsRenderable = false;\n        }\n        else {\n            newIsRenderable = this.renderState > CoreNodeRenderState.OutOfBounds;\n        }\n        if (this.isRenderable !== newIsRenderable) {\n            this.isRenderable = newIsRenderable;\n            this.onChangeIsRenderable(newIsRenderable);\n        }\n    }\n    onChangeIsRenderable(isRenderable) {\n        this.props.texture?.setRenderableOwner(this, isRenderable);\n    }\n    calculateRenderCoords() {\n        const { width, height, globalTransform: transform } = this;\n        assertTruthy(transform);\n        const { tx, ty, ta, tb, tc, td } = transform;\n        if (tb === 0 && tc === 0) {\n            const minX = tx;\n            const maxX = tx + width * ta;\n            const minY = ty;\n            const maxY = ty + height * td;\n            this.renderCoords = RenderCoords.translate(\n            //top-left\n            minX, minY, \n            //top-right\n            maxX, minY, \n            //bottom-right\n            maxX, maxY, \n            //bottom-left\n            minX, maxY, this.renderCoords);\n        }\n        else {\n            this.renderCoords = RenderCoords.translate(\n            //top-left\n            tx, ty, \n            //top-right\n            tx + width * ta, ty + width * tc, \n            //bottom-right\n            tx + width * ta + height * tb, ty + width * tc + height * td, \n            //bottom-left\n            tx + height * tb, ty + height * td, this.renderCoords);\n        }\n    }\n    updateBoundingRect() {\n        const { renderCoords, globalTransform: transform } = this;\n        assertTruthy(transform);\n        assertTruthy(renderCoords);\n        const { tb, tc } = transform;\n        const { x1, y1, x3, y3 } = renderCoords;\n        if (tb === 0 || tc === 0) {\n            this.renderBound = createBound(x1, y1, x3, y3, this.renderBound);\n        }\n        else {\n            const { x2, x4, y2, y4 } = renderCoords;\n            this.renderBound = createBound(Math.min(x1, x2, x3, x4), Math.min(y1, y2, y3, y4), Math.max(x1, x2, x3, x4), Math.max(y1, y2, y3, y4), this.renderBound);\n        }\n    }\n    /**\n     * This function calculates the clipping rectangle for a node.\n     *\n     * The function then checks if the node is rotated. If the node requires clipping and is not rotated, a new clipping rectangle is created based on the node's global transform and dimensions.\n     * If a parent clipping rectangle exists, it is intersected with the node's clipping rectangle (if it exists), or replaces the node's clipping rectangle.\n     *\n     * Finally, the node's parentClippingRect and clippingRect properties are updated.\n     */\n    calculateClippingRect(parentClippingRect) {\n        assertTruthy(this.globalTransform);\n        const { clippingRect, props, globalTransform: gt } = this;\n        const { clipping } = props;\n        const isRotated = gt.tb !== 0 || gt.tc !== 0;\n        if (clipping && !isRotated) {\n            clippingRect.x = gt.tx;\n            clippingRect.y = gt.ty;\n            clippingRect.width = this.width * gt.ta;\n            clippingRect.height = this.height * gt.td;\n            clippingRect.valid = true;\n        }\n        else {\n            clippingRect.valid = false;\n        }\n        if (parentClippingRect.valid && clippingRect.valid) {\n            // Intersect parent clipping rect with node clipping rect\n            intersectRect(parentClippingRect, clippingRect, clippingRect);\n        }\n        else if (parentClippingRect.valid) {\n            // Copy parent clipping rect\n            copyRect(parentClippingRect, clippingRect);\n            clippingRect.valid = true;\n        }\n    }\n    calculateZIndex() {\n        const props = this.props;\n        const z = props.zIndex || 0;\n        const p = props.parent?.zIndex || 0;\n        let zIndex = z;\n        if (props.parent?.zIndexLocked) {\n            zIndex = z < p ? z : p;\n        }\n        this.calcZIndex = zIndex;\n    }\n    /**\n     * Destroy the node and cleanup all resources\n     */\n    destroy() {\n        this.unloadTexture();\n        this.clippingRect.valid = false;\n        this.isRenderable = false;\n        delete this.renderCoords;\n        delete this.renderBound;\n        delete this.strictBound;\n        delete this.preloadBound;\n        delete this.globalTransform;\n        delete this.scaleRotateTransform;\n        delete this.localTransform;\n        this.props.texture = null;\n        this.props.shader = null;\n        this.removeAllListeners();\n        this.parent = null;\n    }\n    renderQuads(renderer) {\n        const { width, height, texture, textureOptions, shader, shaderProps } = this.props;\n        const { premultipliedColorTl, premultipliedColorTr, premultipliedColorBl, premultipliedColorBr, } = this;\n        const { zIndex, worldAlpha, globalTransform: gt, clippingRect } = this;\n        assertTruthy(gt);\n        // add to list of renderables to be sorted before rendering\n        renderer.addQuad({\n            width,\n            height,\n            colorTl: premultipliedColorTl,\n            colorTr: premultipliedColorTr,\n            colorBl: premultipliedColorBl,\n            colorBr: premultipliedColorBr,\n            texture,\n            textureOptions,\n            zIndex,\n            shader,\n            shaderProps,\n            alpha: worldAlpha,\n            clippingRect,\n            tx: gt.tx,\n            ty: gt.ty,\n            ta: gt.ta,\n            tb: gt.tb,\n            tc: gt.tc,\n            td: gt.td,\n        });\n        // Calculate absolute X and Y based on all ancestors\n        // renderer.addQuad(absX, absY, w, h, color, texture, textureOptions, zIndex);\n    }\n    //#region Properties\n    get id() {\n        return this.props.id;\n    }\n    get x() {\n        return this.props.x;\n    }\n    set x(value) {\n        if (this.props.x !== value) {\n            this.props.x = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get absX() {\n        return (this.props.x +\n            (this.props.parent?.absX || this.props.parent?.globalTransform?.tx || 0));\n    }\n    get absY() {\n        return this.props.y + (this.props.parent?.absY ?? 0);\n    }\n    get y() {\n        return this.props.y;\n    }\n    set y(value) {\n        if (this.props.y !== value) {\n            this.props.y = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        if (this.props.width !== value) {\n            this.props.width = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        if (this.props.height !== value) {\n            this.props.height = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get scale() {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        return this.scaleX;\n    }\n    set scale(value) {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        this.scaleX = value;\n        this.scaleY = value;\n    }\n    get scaleX() {\n        return this.props.scaleX;\n    }\n    set scaleX(value) {\n        if (this.props.scaleX !== value) {\n            this.props.scaleX = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get scaleY() {\n        return this.props.scaleY;\n    }\n    set scaleY(value) {\n        if (this.props.scaleY !== value) {\n            this.props.scaleY = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get mount() {\n        return this.props.mount;\n    }\n    set mount(value) {\n        if (this.props.mountX !== value || this.props.mountY !== value) {\n            this.props.mountX = value;\n            this.props.mountY = value;\n            this.props.mount = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountX() {\n        return this.props.mountX;\n    }\n    set mountX(value) {\n        if (this.props.mountX !== value) {\n            this.props.mountX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountY() {\n        return this.props.mountY;\n    }\n    set mountY(value) {\n        if (this.props.mountY !== value) {\n            this.props.mountY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivot() {\n        return this.props.pivot;\n    }\n    set pivot(value) {\n        if (this.props.pivotX !== value || this.props.pivotY !== value) {\n            this.props.pivotX = value;\n            this.props.pivotY = value;\n            this.props.pivot = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotX() {\n        return this.props.pivotX;\n    }\n    set pivotX(value) {\n        if (this.props.pivotX !== value) {\n            this.props.pivotX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotY() {\n        return this.props.pivotY;\n    }\n    set pivotY(value) {\n        if (this.props.pivotY !== value) {\n            this.props.pivotY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get rotation() {\n        return this.props.rotation;\n    }\n    set rotation(value) {\n        if (this.props.rotation !== value) {\n            this.props.rotation = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get alpha() {\n        return this.props.alpha;\n    }\n    set alpha(value) {\n        this.props.alpha = value;\n        this.setUpdateType(UpdateType.PremultipliedColors | UpdateType.WorldAlpha);\n    }\n    get autosize() {\n        return this.props.autosize;\n    }\n    set autosize(value) {\n        this.props.autosize = value;\n    }\n    get clipping() {\n        return this.props.clipping;\n    }\n    set clipping(value) {\n        this.props.clipping = value;\n        this.setUpdateType(UpdateType.Clipping);\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(value) {\n        if (this.props.colorTl !== value ||\n            this.props.colorTr !== value ||\n            this.props.colorBl !== value ||\n            this.props.colorBr !== value) {\n            this.colorTl = value;\n            this.colorTr = value;\n            this.colorBl = value;\n            this.colorBr = value;\n        }\n        this.props.color = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTop() {\n        return this.props.colorTop;\n    }\n    set colorTop(value) {\n        if (this.props.colorTl !== value || this.props.colorTr !== value) {\n            this.colorTl = value;\n            this.colorTr = value;\n        }\n        this.props.colorTop = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBottom() {\n        return this.props.colorBottom;\n    }\n    set colorBottom(value) {\n        if (this.props.colorBl !== value || this.props.colorBr !== value) {\n            this.colorBl = value;\n            this.colorBr = value;\n        }\n        this.props.colorBottom = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorLeft() {\n        return this.props.colorLeft;\n    }\n    set colorLeft(value) {\n        if (this.props.colorTl !== value || this.props.colorBl !== value) {\n            this.colorTl = value;\n            this.colorBl = value;\n        }\n        this.props.colorLeft = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorRight() {\n        return this.props.colorRight;\n    }\n    set colorRight(value) {\n        if (this.props.colorTr !== value || this.props.colorBr !== value) {\n            this.colorTr = value;\n            this.colorBr = value;\n        }\n        this.props.colorRight = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTl() {\n        return this.props.colorTl;\n    }\n    set colorTl(value) {\n        this.props.colorTl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTr() {\n        return this.props.colorTr;\n    }\n    set colorTr(value) {\n        this.props.colorTr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBl() {\n        return this.props.colorBl;\n    }\n    set colorBl(value) {\n        this.props.colorBl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBr() {\n        return this.props.colorBr;\n    }\n    set colorBr(value) {\n        this.props.colorBr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    // we're only interested in parent zIndex to test\n    // if we should use node zIndex is higher then parent zIndex\n    get zIndexLocked() {\n        return this.props.zIndexLocked || 0;\n    }\n    set zIndexLocked(value) {\n        this.props.zIndexLocked = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        this.children.forEach((child) => {\n            child.setUpdateType(UpdateType.CalculatedZIndex);\n        });\n    }\n    get zIndex() {\n        return this.props.zIndex;\n    }\n    set zIndex(value) {\n        this.props.zIndex = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        this.children.forEach((child) => {\n            child.setUpdateType(UpdateType.CalculatedZIndex);\n        });\n    }\n    get parent() {\n        return this.props.parent;\n    }\n    set parent(newParent) {\n        const oldParent = this.props.parent;\n        if (oldParent === newParent) {\n            return;\n        }\n        this.props.parent = newParent;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"CoreNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n            oldParent.setUpdateType(UpdateType.Children | UpdateType.ZIndexSortedChildren);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n            // Since this node has a new parent, to be safe, have it do a full update.\n            this.setUpdateType(UpdateType.All);\n            // Tell parent that it's children need to be updated and sorted.\n            newParent.setUpdateType(UpdateType.Children | UpdateType.ZIndexSortedChildren);\n        }\n        this.updateScaleRotateTransform();\n    }\n}\n//# sourceMappingURL=CoreNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { CoreAnimation } from '../../core/animations/CoreAnimation.js';\nimport { CoreAnimationController } from '../../core/animations/CoreAnimationController.js';\nimport { CoreNode } from '../../core/CoreNode.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { santizeCustomDataMap } from '../utils.js';\nlet nextId = 1;\nexport function getNewId() {\n    return nextId++;\n}\nexport class MainOnlyNode extends EventEmitter {\n    rendererMain;\n    stage;\n    id;\n    coreNode;\n    // Prop stores\n    _children = [];\n    _src = '';\n    _parent = null;\n    _texture = null;\n    _shader = null;\n    _data = {};\n    constructor(props, rendererMain, stage, coreNode) {\n        super();\n        this.rendererMain = rendererMain;\n        this.stage = stage;\n        this.id = coreNode?.id ?? getNewId();\n        this.coreNode =\n            coreNode ||\n                new CoreNode(this.stage, {\n                    id: this.id,\n                    x: props.x,\n                    y: props.y,\n                    width: props.width,\n                    height: props.height,\n                    alpha: props.alpha,\n                    autosize: props.autosize,\n                    clipping: props.clipping,\n                    color: props.color,\n                    colorTop: props.colorTop,\n                    colorBottom: props.colorBottom,\n                    colorLeft: props.colorLeft,\n                    colorRight: props.colorRight,\n                    colorTl: props.colorTl,\n                    colorTr: props.colorTr,\n                    colorBl: props.colorBl,\n                    colorBr: props.colorBr,\n                    zIndex: props.zIndex,\n                    zIndexLocked: props.zIndexLocked,\n                    scaleX: props.scaleX,\n                    scaleY: props.scaleY,\n                    mountX: props.mountX,\n                    mountY: props.mountY,\n                    mount: props.mount,\n                    pivot: props.pivot,\n                    pivotX: props.pivotX,\n                    pivotY: props.pivotY,\n                    rotation: props.rotation,\n                    parent: null,\n                    shader: null,\n                    shaderProps: null,\n                    texture: null,\n                    textureOptions: null,\n                });\n        // Forward loaded/failed events\n        this.coreNode.on('loaded', this.onTextureLoaded);\n        this.coreNode.on('failed', this.onTextureFailed);\n        this.coreNode.on('freed', this.onTextureFreed);\n        this.coreNode.on('outOfBounds', this.onOutOfBounds);\n        this.coreNode.on('inBounds', this.onInBounds);\n        this.coreNode.on('outOfViewport', this.onOutOfViewport);\n        this.coreNode.on('inViewport', this.onInViewport);\n        // Assign properties to this object\n        this.parent = props.parent;\n        this.shader = props.shader;\n        this.texture = props.texture;\n        this.src = props.src;\n        this._data = props.data;\n    }\n    get x() {\n        return this.coreNode.x;\n    }\n    set x(value) {\n        this.coreNode.x = value;\n    }\n    get y() {\n        return this.coreNode.y;\n    }\n    set y(value) {\n        this.coreNode.y = value;\n    }\n    get width() {\n        return this.coreNode.width;\n    }\n    set width(value) {\n        this.coreNode.width = value;\n    }\n    get height() {\n        return this.coreNode.height;\n    }\n    set height(value) {\n        this.coreNode.height = value;\n    }\n    get alpha() {\n        return this.coreNode.alpha;\n    }\n    set alpha(value) {\n        this.coreNode.alpha = value;\n    }\n    get autosize() {\n        return this.coreNode.autosize;\n    }\n    set autosize(value) {\n        this.coreNode.autosize = value;\n    }\n    get clipping() {\n        return this.coreNode.clipping;\n    }\n    set clipping(value) {\n        this.coreNode.clipping = value;\n    }\n    get color() {\n        return this.coreNode.color;\n    }\n    set color(value) {\n        this.coreNode.color = value;\n    }\n    get colorTop() {\n        return this.coreNode.colorTop;\n    }\n    set colorTop(value) {\n        this.coreNode.colorTop = value;\n    }\n    get colorBottom() {\n        return this.coreNode.colorBottom;\n    }\n    set colorBottom(value) {\n        this.coreNode.colorBottom = value;\n    }\n    get colorLeft() {\n        return this.coreNode.colorLeft;\n    }\n    set colorLeft(value) {\n        this.coreNode.colorLeft = value;\n    }\n    get colorRight() {\n        return this.coreNode.colorRight;\n    }\n    set colorRight(value) {\n        this.coreNode.colorRight = value;\n    }\n    get colorTl() {\n        return this.coreNode.colorTl;\n    }\n    set colorTl(value) {\n        this.coreNode.colorTl = value;\n    }\n    get colorTr() {\n        return this.coreNode.colorTr;\n    }\n    set colorTr(value) {\n        this.coreNode.colorTr = value;\n    }\n    get colorBl() {\n        return this.coreNode.colorBl;\n    }\n    set colorBl(value) {\n        this.coreNode.colorBl = value;\n    }\n    get colorBr() {\n        return this.coreNode.colorBr;\n    }\n    set colorBr(value) {\n        this.coreNode.colorBr = value;\n    }\n    get scale() {\n        if (this.scaleX !== this.scaleY) {\n            return null;\n        }\n        return this.coreNode.scaleX;\n    }\n    set scale(value) {\n        // We ignore `null` when it's set.\n        if (value === null) {\n            return;\n        }\n        this.coreNode.scaleX = value;\n        this.coreNode.scaleY = value;\n    }\n    get scaleX() {\n        return this.coreNode.scaleX;\n    }\n    set scaleX(value) {\n        this.coreNode.scaleX = value;\n    }\n    get scaleY() {\n        return this.coreNode.scaleY;\n    }\n    set scaleY(value) {\n        this.coreNode.scaleY = value;\n    }\n    get mount() {\n        return this.coreNode.mount;\n    }\n    set mount(value) {\n        this.coreNode.mount = value;\n    }\n    get mountX() {\n        return this.coreNode.mountX;\n    }\n    set mountX(value) {\n        this.coreNode.mountX = value;\n    }\n    get mountY() {\n        return this.coreNode.mountY;\n    }\n    set mountY(value) {\n        this.coreNode.mountY = value;\n    }\n    get pivot() {\n        return this.coreNode.pivot;\n    }\n    set pivot(value) {\n        this.coreNode.pivot = value;\n    }\n    get pivotX() {\n        return this.coreNode.pivotX;\n    }\n    set pivotX(value) {\n        this.coreNode.pivotX = value;\n    }\n    get pivotY() {\n        return this.coreNode.pivotY;\n    }\n    set pivotY(value) {\n        this.coreNode.pivotY = value;\n    }\n    get rotation() {\n        return this.coreNode.rotation;\n    }\n    set rotation(value) {\n        this.coreNode.rotation = value;\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(newParent) {\n        const oldParent = this._parent;\n        this._parent = newParent;\n        this.coreNode.parent = newParent?.coreNode ?? null;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"MainOnlyNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n        }\n    }\n    get children() {\n        return this._children;\n    }\n    get zIndex() {\n        return this.coreNode.zIndex;\n    }\n    set zIndex(value) {\n        this.coreNode.zIndex = value;\n    }\n    get zIndexLocked() {\n        return this.coreNode.zIndexLocked;\n    }\n    set zIndexLocked(value) {\n        this.coreNode.zIndexLocked = value;\n    }\n    get src() {\n        return this._src;\n    }\n    set src(imageUrl) {\n        if (this._src === imageUrl) {\n            return;\n        }\n        this._src = imageUrl;\n        if (!imageUrl) {\n            this.texture = null;\n            return;\n        }\n        this.texture = this.rendererMain.createTexture('ImageTexture', {\n            src: imageUrl,\n        });\n    }\n    //#region Texture\n    get texture() {\n        return this._texture;\n    }\n    set texture(texture) {\n        if (this._texture === texture) {\n            return;\n        }\n        if (this._texture) {\n            this.rendererMain.textureTracker.decrementTextureRefCount(this._texture);\n        }\n        if (texture) {\n            this.rendererMain.textureTracker.incrementTextureRefCount(texture);\n        }\n        this._texture = texture;\n        if (texture) {\n            this.coreNode.loadTexture(texture.txType, texture.props, texture.options);\n        }\n        else {\n            this.coreNode.unloadTexture();\n        }\n    }\n    onTextureLoaded = (target, payload) => {\n        this.emit('loaded', payload);\n    };\n    onTextureFailed = (target, payload) => {\n        this.emit('failed', payload);\n    };\n    onTextureFreed = (target, payload) => {\n        this.emit('freed', payload);\n    };\n    onOutOfBounds = (target, payload) => {\n        this.emit('outOfBounds', payload);\n    };\n    onInBounds = (target, payload) => {\n        this.emit('inBounds', payload);\n    };\n    onOutOfViewport = (target, payload) => {\n        this.emit('outOfViewport', payload);\n    };\n    onInViewport = (target, payload) => {\n        this.emit('inViewport', payload);\n    };\n    //#endregion Texture\n    get shader() {\n        return this._shader;\n    }\n    set shader(shader) {\n        if (this._shader === shader) {\n            return;\n        }\n        this._shader = shader;\n        if (shader) {\n            this.coreNode.loadShader(shader.shType, shader.props);\n        }\n    }\n    get data() {\n        return this._data;\n    }\n    set data(d) {\n        this._data = santizeCustomDataMap(d);\n    }\n    destroy() {\n        this.emit('beforeDestroy', {});\n        //use while loop since setting parent to null removes it from array\n        let child = this.children[0];\n        while (child) {\n            child.destroy();\n            child = this.children[0];\n        }\n        this.coreNode.destroy();\n        this.parent = null;\n        this.texture = null;\n        this.emit('afterDestroy', {});\n        this.removeAllListeners();\n    }\n    flush() {\n        // No-op\n    }\n    animate(props, settings) {\n        const animation = new CoreAnimation(this.coreNode, props, settings);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n        const controller = new CoreAnimationController(this.stage.animationManager, animation);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return controller;\n    }\n}\n//# sourceMappingURL=MainOnlyNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Platform render loop initiator\n */\nexport const startLoop = (stage) => {\n    let isIdle = false;\n    const runLoop = () => {\n        stage.updateAnimations();\n        if (!stage.hasSceneUpdates()) {\n            // We still need to calculate the fps else it looks like the app is frozen\n            stage.calculateFps();\n            setTimeout(runLoop, 16.666666666666668);\n            if (!isIdle) {\n                stage.emit('idle');\n                isIdle = true;\n            }\n            return;\n        }\n        isIdle = false;\n        stage.drawFrame();\n        requestAnimationFrame(runLoop);\n    };\n    requestAnimationFrame(runLoop);\n};\n/**\n * Return unix timestamp\n * @return {number}\n */\nexport const getTimeStamp = () => {\n    return performance ? performance.now() : Date.now();\n};\n//# sourceMappingURL=platform.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreAnimation } from './CoreAnimation.js';\nexport class AnimationManager {\n    activeAnimations = new Set();\n    registerAnimation(animation) {\n        this.activeAnimations.add(animation);\n    }\n    unregisterAnimation(animation) {\n        this.activeAnimations.delete(animation);\n    }\n    update(dt) {\n        this.activeAnimations.forEach((animation) => {\n            animation.update(dt);\n        });\n    }\n}\n//# sourceMappingURL=AnimationManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {} from '../textures/Texture.js';\nexport class ImageWorkerManager {\n    imageWorkersEnabled = true;\n    messageManager = {};\n    workers = [];\n    workerIndex = 0;\n    constructor(numImageWorkers) {\n        this.workers = this.createWorkers(numImageWorkers);\n        this.workers.forEach((worker) => {\n            worker.onmessage = this.handleMessage.bind(this);\n        });\n    }\n    handleMessage(event) {\n        const { src, data, error } = event.data;\n        const msg = this.messageManager[src];\n        if (msg) {\n            const [resolve, reject] = msg;\n            delete this.messageManager[src];\n            if (error) {\n                reject(new Error(error));\n            }\n            else {\n                resolve(data);\n            }\n        }\n    }\n    createWorkers(numWorkers = 1) {\n        const workerCode = `\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = (event) => {\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ src: src, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ src: src, error: error.message });\n          });\n      };\n    `;\n        const blob = new Blob([workerCode.replace('\"use strict\";', '')], {\n            type: 'application/javascript',\n        });\n        const blobURL = (self.URL ? URL : webkitURL).createObjectURL(blob);\n        const workers = [];\n        for (let i = 0; i < numWorkers; i++) {\n            workers.push(new Worker(blobURL));\n        }\n        return workers;\n    }\n    getNextWorker() {\n        const worker = this.workers[this.workerIndex];\n        this.workerIndex = (this.workerIndex + 1) % this.workers.length;\n        return worker;\n    }\n    convertUrlToAbsolute(url) {\n        const absoluteUrl = new URL(url, self.location.href);\n        return absoluteUrl.href;\n    }\n    getImage(src, premultiplyAlpha) {\n        return new Promise((resolve, reject) => {\n            try {\n                if (this.workers) {\n                    const absoluteSrcUrl = this.convertUrlToAbsolute(src);\n                    this.messageManager[absoluteSrcUrl] = [resolve, reject];\n                    this.getNextWorker().postMessage({\n                        src: absoluteSrcUrl,\n                        premultiplyAlpha,\n                    });\n                }\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    }\n}\n//# sourceMappingURL=ImageWorker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\n/**\n * Texture consisting of a random grid of greyscale pixels\n *\n * @remarks\n * The width and height of the NoiseTexture are defined by it's\n * {@link NoiseTextureProps.width} and {@link NoiseTextureProps.height}\n * properties. The {@link NoiseTextureProps.cacheId} prop can be varied in order\n * to bypass cache and get newly randomized texture data.\n */\nexport class NoiseTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = NoiseTexture.resolveDefaults(props);\n    }\n    async getTextureData() {\n        const { width, height } = this.props;\n        const size = width * height * 4;\n        const pixelData8 = new Uint8ClampedArray(size);\n        for (let i = 0; i < size; i += 4) {\n            const v = Math.floor(Math.random() * 256);\n            pixelData8[i] = v;\n            pixelData8[i + 1] = v;\n            pixelData8[i + 2] = v;\n            pixelData8[i + 3] = 255;\n        }\n        return {\n            data: new ImageData(pixelData8, width, height),\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = NoiseTexture.resolveDefaults(props);\n        return `NoiseTexture,${resolvedProps.width},${resolvedProps.height},${resolvedProps.cacheId}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 128,\n            height: props.height ?? 128,\n            cacheId: props.cacheId ?? 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=NoiseTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../utils.js';\nimport { ImageWorkerManager } from './lib/ImageWorker.js';\nimport { ColorTexture } from './textures/ColorTexture.js';\nimport { ImageTexture } from './textures/ImageTexture.js';\nimport { NoiseTexture } from './textures/NoiseTexture.js';\nimport { SubTexture } from './textures/SubTexture.js';\nexport class CoreTextureManager {\n    /**\n     * Amount of used memory defined in pixels\n     */\n    usedMemory = 0;\n    txConstructors = {};\n    textureKeyCache = new Map();\n    textureIdCache = new Map();\n    ctxTextureCache = new WeakMap();\n    textureRefCountMap = new WeakMap();\n    imageWorkerManager = null;\n    hasCreateImageBitmap = !!self.createImageBitmap;\n    hasWorker = !!self.Worker;\n    /**\n     * Renderer that this texture manager is associated with\n     *\n     * @remarks\n     * This MUST be set before the texture manager is used. Otherwise errors\n     * will occur when using the texture manager.\n     */\n    renderer;\n    constructor(numImageWorkers) {\n        // Register default known texture types\n        if (this.hasCreateImageBitmap && this.hasWorker) {\n            this.imageWorkerManager = new ImageWorkerManager(numImageWorkers);\n        }\n        if (!this.hasCreateImageBitmap) {\n            console.warn('[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower.');\n        }\n        this.registerTextureType('ImageTexture', ImageTexture);\n        this.registerTextureType('ColorTexture', ColorTexture);\n        this.registerTextureType('NoiseTexture', NoiseTexture);\n        this.registerTextureType('SubTexture', SubTexture);\n    }\n    registerTextureType(textureType, textureClass) {\n        this.txConstructors[textureType] = textureClass;\n    }\n    loadTexture(textureType, props, options = null) {\n        const TextureClass = this.txConstructors[textureType];\n        if (!TextureClass) {\n            throw new Error(`Texture type \"${textureType}\" is not registered`);\n        }\n        let texture;\n        // If an ID is specified, try to get the texture from the ID cache first\n        if (options?.id !== undefined && this.textureIdCache.has(options.id)) {\n            // console.log('Getting texture by texture desc ID', options.id);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            texture = this.textureIdCache.get(options.id);\n        }\n        // If the texture is not found in the ID cache, try to get it from the key cache\n        if (!texture) {\n            const descId = options?.id;\n            const cacheKey = options?.cacheKey ?? TextureClass.makeCacheKey(props);\n            if (cacheKey && this.textureKeyCache.has(cacheKey)) {\n                // console.log('Getting texture by cache key', cacheKey);\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                texture = this.textureKeyCache.get(cacheKey);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n                texture = new TextureClass(this, props);\n            }\n            if (descId) {\n                this.addTextureIdToCache(descId, cacheKey, texture);\n            }\n        }\n        if (options?.preload) {\n            const ctxTx = this.getCtxTexture(texture);\n            ctxTx.load();\n        }\n        return texture;\n    }\n    /**\n     * Add a `Texture` to the texture cache by its texture desc ID and cache key\n     *\n     * @remarks\n     * This is used internally by the `CoreTextureManager` to cache textures\n     * when they are created.\n     *\n     * It handles updating the texture ID cache, texture key cache, and texture\n     * reference count map.\n     *\n     * @param textureDescId\n     * @param cacheKey\n     * @param texture\n     */\n    addTextureIdToCache(textureDescId, cacheKey, texture) {\n        const { textureIdCache, textureRefCountMap } = this;\n        textureIdCache.set(textureDescId, texture);\n        if (textureRefCountMap.has(texture)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            textureRefCountMap.get(texture).count++;\n        }\n        else {\n            textureRefCountMap.set(texture, { cacheKey, count: 1 });\n            if (cacheKey) {\n                this.textureKeyCache.set(cacheKey, texture);\n            }\n        }\n    }\n    /**\n     * Remove a `Texture` from the texture cache by its texture desc ID\n     *\n     * @remarks\n     * This is called externally by when we know (at least reasonably well) that\n     * the `TextureRef` in the Main API space has been is no longer used. This\n     * allows us to remove the `Texture` from the Usage Cache so that it can be\n     * garbage collected as well.\n     *\n     * @param textureDescId\n     */\n    removeTextureIdFromCache(textureDescId) {\n        const { textureIdCache, textureRefCountMap } = this;\n        const texture = textureIdCache.get(textureDescId);\n        if (!texture) {\n            // Sometimes a texture is removed from the cache before it ever gets\n            // added to the cache. This is fine and not an error.\n            return;\n        }\n        textureIdCache.delete(textureDescId);\n        if (textureRefCountMap.has(texture)) {\n            const refCountObj = textureRefCountMap.get(texture);\n            assertTruthy(refCountObj);\n            refCountObj.count--;\n            if (refCountObj.count === 0) {\n                textureRefCountMap.delete(texture);\n                // If the texture is not referenced anywhere else, remove it from the key cache\n                // as well.\n                // This should allow the `Texture` instance to be garbage collected.\n                if (refCountObj.cacheKey) {\n                    this.textureKeyCache.delete(refCountObj.cacheKey);\n                }\n            }\n        }\n        // Free the ctx texture if it exists.\n        this.ctxTextureCache.get(texture)?.free();\n    }\n    /**\n     * Get an object containing debug information about the texture manager.\n     *\n     * @returns\n     */\n    getDebugInfo() {\n        // const textureSet = new Set<Texture>();\n        // for (const texture of this.textureIdCache.values()) {\n        //   textureSet.add(texture);\n        // }\n        // for (const texture of this.textureKeyCache.values()) {\n        //   textureSet.add(texture);\n        // }\n        // TODO: Output number of bytes used by textures\n        return {\n            keyCacheSize: this.textureKeyCache.size,\n            idCacheSize: this.textureIdCache.size,\n        };\n    }\n    /**\n     * Get a CoreContextTexture for the given Texture source.\n     *\n     * @remarks\n     * If the texture source already has an allocated CoreContextTexture, it will be\n     * returned from the cache. Otherwise, a new CoreContextTexture will be created\n     * and cached.\n     *\n     * ContextTextures are stored in a WeakMap, so they will be garbage collected\n     * when the Texture source is no longer referenced.\n     *\n     * @param textureSource\n     * @returns\n     */\n    getCtxTexture(textureSource) {\n        if (this.ctxTextureCache.has(textureSource)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return this.ctxTextureCache.get(textureSource);\n        }\n        const texture = this.renderer.createCtxTexture(textureSource);\n        this.ctxTextureCache.set(textureSource, texture);\n        return texture;\n    }\n}\n//# sourceMappingURL=CoreTextureManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Class that keeps track of the invocations of Context methods when\n * the `enableContextSpy` renderer option is enabled.\n */\nexport class ContextSpy {\n    data = {};\n    reset() {\n        this.data = {};\n    }\n    increment(name) {\n        if (!this.data[name]) {\n            this.data[name] = 0;\n        }\n        this.data[name]++;\n    }\n    getData() {\n        return { ...this.data };\n    }\n}\n//# sourceMappingURL=ContextSpy.js.map","export class TextureMemoryManager {\n    memUsed = 0;\n    textures = new Map();\n    threshold;\n    /**\n     * @param byteThreshold Number of texture bytes to trigger garbage collection\n     */\n    constructor(byteThreshold) {\n        this.threshold = byteThreshold;\n        // If the threshold is 0, we disable the memory manager by replacing the\n        // setTextureMemUse method with a no-op function.\n        if (byteThreshold === 0) {\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            this.setTextureMemUse = () => { };\n        }\n    }\n    setTextureMemUse(ctxTexture, byteSize) {\n        if (this.textures.has(ctxTexture)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.memUsed -= this.textures.get(ctxTexture);\n        }\n        if (byteSize === 0) {\n            this.textures.delete(ctxTexture);\n            return;\n        }\n        else {\n            this.memUsed += byteSize;\n            this.textures.set(ctxTexture, byteSize);\n        }\n        if (this.memUsed > this.threshold) {\n            this.gc();\n        }\n    }\n    gc() {\n        this.textures.forEach((byteSize, ctxTexture) => {\n            if (!ctxTexture.renderable) {\n                ctxTexture.free();\n            }\n        });\n    }\n}\n//# sourceMappingURL=TextureMemoryManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst WHITE = {\n    isWhite: true,\n    a: 1,\n    r: 0xff,\n    g: 0xff,\n    b: 0xff\n};\n/**\n * Extract color components\n */\nexport function parseColor(abgr) {\n    if (abgr === 0xffffffff) {\n        return WHITE;\n    }\n    const a = ((abgr >>> 24) & 0xff) / 255;\n    const b = ((abgr >>> 16) & 0xff) & 0xff;\n    const g = ((abgr >>> 8) & 0xff) & 0xff;\n    const r = (abgr & 0xff) & 0xff;\n    return { isWhite: false, a, r, g, b };\n}\n/**\n * Format a parsed color into a rgba CSS color\n */\nexport function formatRgba({ a, r, g, b }) {\n    return `rgba(${r},${g},${b},${a})`;\n}\n//# sourceMappingURL=ColorUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from \"../../../utils.js\";\nimport { CoreContextTexture } from \"../CoreContextTexture.js\";\nimport { formatRgba } from \"./internal/ColorUtils.js\";\nexport class CanvasCoreTexture extends CoreContextTexture {\n    image;\n    tintCache;\n    load() {\n        if (this.textureSource.state !== 'freed') {\n            return;\n        }\n        this.textureSource.setState('loading');\n        this.onLoadRequest().then((size) => {\n            this.textureSource.setState('loaded', size);\n            this.updateMemSize();\n        }).catch((err) => {\n            this.textureSource.setState('failed', err);\n        });\n    }\n    free() {\n        this.image = undefined;\n        this.tintCache = undefined;\n        this.textureSource.setState('freed');\n        this.memManager.setTextureMemUse(this, 0);\n    }\n    updateMemSize() {\n        // Counting memory usage for:\n        // - main image\n        // - tinted image\n        const mult = this.tintCache ? 8 : 4;\n        if (this.textureSource.dimensions) {\n            const { width, height } = this.textureSource.dimensions;\n            this.memManager.setTextureMemUse(this, width * height * mult);\n        }\n    }\n    hasImage() {\n        return this.image !== undefined;\n    }\n    getImage(color) {\n        const image = this.image;\n        assertTruthy(image, 'Attempt to get unloaded image texture');\n        if (color.isWhite) {\n            if (this.tintCache) {\n                this.tintCache = undefined;\n                this.updateMemSize();\n            }\n            return image;\n        }\n        const key = formatRgba(color);\n        if (this.tintCache?.key === key) {\n            return this.tintCache.image;\n        }\n        const tintedImage = this.tintTexture(image, key);\n        this.tintCache = {\n            key,\n            image: tintedImage\n        };\n        this.updateMemSize();\n        return tintedImage;\n    }\n    tintTexture(source, color) {\n        const { width, height } = source;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n            // fill with target color\n            ctx.fillStyle = color;\n            ctx.globalCompositeOperation = 'copy';\n            ctx.fillRect(0, 0, width, height);\n            // multiply with image, resulting in non-transparent tinted image\n            ctx.globalCompositeOperation = 'multiply';\n            ctx.drawImage(source, 0, 0, width, height, 0, 0, width, height);\n            // apply original image alpha\n            ctx.globalCompositeOperation = 'destination-in';\n            ctx.drawImage(source, 0, 0, width, height, 0, 0, width, height);\n        }\n        return canvas;\n    }\n    get renderable() {\n        return this.textureSource.renderable;\n    }\n    async onLoadRequest() {\n        const { data } = await this.textureSource.getTextureData();\n        // TODO: canvas from text renderer should be able to provide the canvas directly\n        // instead of having to re-draw it into a new canvas...\n        if (data instanceof ImageData) {\n            const canvas = document.createElement('canvas');\n            canvas.width = data.width;\n            canvas.height = data.height;\n            const ctx = canvas.getContext('2d');\n            if (ctx)\n                ctx.putImageData(data, 0, 0);\n            this.image = canvas;\n            return { width: data.width, height: data.height };\n        }\n        else if (data instanceof ImageBitmap) {\n            this.image = data;\n            return { width: data.width, height: data.height };\n        }\n        return { width: 0, height: 0 };\n    }\n}\n//# sourceMappingURL=CanvasCoreTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ROUNDED_RECTANGLE_SHADER_TYPE, UnsupportedShader } from \"../shaders/UnsupportedShader.js\";\n/**\n * Extract `RoundedRectangle` shader radius to apply as a clipping\n */\nexport function getRadius(quad) {\n    if (quad.shader instanceof UnsupportedShader) {\n        const shType = quad.shader.shType;\n        if (shType === ROUNDED_RECTANGLE_SHADER_TYPE) {\n            return quad.shaderProps?.radius ?? 0;\n        }\n    }\n    return 0;\n}\n//# sourceMappingURL=C2DShaderUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getRgbaComponents } from \"../../lib/utils.js\";\nimport { SubTexture } from \"../../textures/SubTexture.js\";\nimport { CoreRenderer } from \"../CoreRenderer.js\";\nimport { CanvasCoreTexture } from \"./CanvasCoreTexture.js\";\nimport { getRadius } from \"./internal/C2DShaderUtils.js\";\nimport { formatRgba, parseColor } from \"./internal/ColorUtils.js\";\nexport class CanvasCoreRenderer extends CoreRenderer {\n    context;\n    canvas;\n    pixelRatio;\n    clearColor;\n    constructor(options) {\n        super(options);\n        this.mode = 'canvas';\n        this.shManager.renderer = this;\n        const { canvas, pixelRatio, clearColor } = options;\n        this.canvas = canvas;\n        this.context = canvas.getContext('2d');\n        this.pixelRatio = pixelRatio;\n        this.clearColor = clearColor ? getRgbaComponents(clearColor) : undefined;\n    }\n    reset() {\n        // eslint-disable-next-line no-self-assign\n        this.canvas.width = this.canvas.width; // quick reset canvas\n        const ctx = this.context;\n        if (this.clearColor) {\n            const [r, g, b, a] = this.clearColor;\n            ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a / 255})`;\n            ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        }\n        ctx.scale(this.pixelRatio, this.pixelRatio);\n    }\n    render() {\n        // noop\n    }\n    addQuad(quad) {\n        const ctx = this.context;\n        const { tx, ty, width, height, alpha, colorTl, colorTr, colorBr, ta, tb, tc, td, clippingRect } = quad;\n        let texture = quad.texture;\n        let ctxTexture = undefined;\n        let frame;\n        if (texture) {\n            if (texture instanceof SubTexture) {\n                frame = texture.props;\n                texture = texture.parentTexture;\n            }\n            ctxTexture = this.txManager.getCtxTexture(texture);\n            if (texture.state === 'freed') {\n                ctxTexture.load();\n                return;\n            }\n            if (texture.state !== 'loaded' || !ctxTexture.hasImage()) {\n                return;\n            }\n        }\n        const color = parseColor(colorTl);\n        const hasTransform = ta !== 1;\n        const hasClipping = clippingRect.width !== 0 && clippingRect.height !== 0;\n        const hasGradient = colorTl !== colorTr || colorTl !== colorBr;\n        const radius = quad.shader ? getRadius(quad) : 0;\n        if (hasTransform || hasClipping || radius) {\n            ctx.save();\n        }\n        if (hasClipping) {\n            const path = new Path2D();\n            const { x, y, width, height } = clippingRect;\n            path.rect(x, y, width, height);\n            ctx.clip(path);\n        }\n        if (hasTransform) {\n            // Quad transform:\n            // | ta tb tx |\n            // | tc td ty |\n            // | 0  0  1  |\n            // C2D transform:\n            // | a  c  e  |\n            // | b  d  f  |\n            // | 0  0  1  |\n            const scale = this.pixelRatio;\n            ctx.setTransform(ta, tc, tb, td, tx * scale, ty * scale);\n            ctx.scale(scale, scale);\n            ctx.translate(-tx, -ty);\n        }\n        if (radius) {\n            const path = new Path2D();\n            path.roundRect(tx, ty, width, height, radius);\n            ctx.clip(path);\n        }\n        if (ctxTexture) {\n            const image = ctxTexture.getImage(color);\n            ctx.globalAlpha = alpha;\n            if (frame) {\n                ctx.drawImage(image, frame.x, frame.y, frame.width, frame.height, tx, ty, width, height);\n            }\n            else {\n                ctx.drawImage(image, tx, ty, width, height);\n            }\n            ctx.globalAlpha = 1;\n        }\n        else if (hasGradient) {\n            let endX = tx;\n            let endY = ty;\n            let endColor;\n            if (colorTl === colorTr) {\n                // vertical\n                endX = tx;\n                endY = ty + height;\n                endColor = parseColor(colorBr);\n            }\n            else {\n                // horizontal\n                endX = tx + width;\n                endY = ty;\n                endColor = parseColor(colorTr);\n            }\n            const gradient = ctx.createLinearGradient(tx, ty, endX, endY);\n            gradient.addColorStop(0, formatRgba(color));\n            gradient.addColorStop(1, formatRgba(endColor));\n            ctx.fillStyle = gradient;\n            ctx.fillRect(tx, ty, width, height);\n        }\n        else {\n            ctx.fillStyle = formatRgba(color);\n            ctx.fillRect(tx, ty, width, height);\n        }\n        if (hasTransform || hasClipping || radius) {\n            ctx.restore();\n        }\n    }\n    createCtxTexture(textureSource) {\n        return new CanvasCoreTexture(this.txMemManager, textureSource);\n    }\n    getShaderManager() {\n        return this.shManager;\n    }\n}\n//# sourceMappingURL=CanvasCoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { startLoop, getTimeStamp } from './platform.js';\nimport { WebGlCoreRenderer } from './renderers/webgl/WebGlCoreRenderer.js';\nimport { assertTruthy, setPremultiplyMode } from '../utils.js';\nimport { AnimationManager } from './animations/AnimationManager.js';\nimport { CoreNode } from './CoreNode.js';\nimport { CoreTextureManager } from './CoreTextureManager.js';\nimport { TrFontManager } from './text-rendering/TrFontManager.js';\nimport { CoreShaderManager } from './CoreShaderManager.js';\nimport { SdfTextRenderer } from './text-rendering/renderers/SdfTextRenderer/SdfTextRenderer.js';\nimport { CanvasTextRenderer } from './text-rendering/renderers/CanvasTextRenderer.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { ContextSpy } from './lib/ContextSpy.js';\nimport { TextureMemoryManager } from './TextureMemoryManager.js';\nimport { CanvasCoreRenderer } from './renderers/canvas/CanvasCoreRenderer.js';\nconst bufferMemory = 2e6;\nconst autoStart = true;\nexport class Stage extends EventEmitter {\n    options;\n    /// Module Instances\n    animationManager;\n    txManager;\n    txMemManager;\n    fontManager;\n    textRenderers;\n    shManager;\n    renderer;\n    root;\n    boundsMargin;\n    /// State\n    deltaTime = 0;\n    lastFrameTime = 0;\n    currentFrameTime = 0;\n    fpsNumFrames = 0;\n    fpsElapsedTime = 0;\n    renderRequested = false;\n    /// Debug data\n    contextSpy = null;\n    /**\n     * Stage constructor\n     */\n    constructor(options) {\n        super();\n        this.options = options;\n        const { canvas, clearColor, rootId, debug, appWidth, appHeight, boundsMargin, enableContextSpy, numImageWorkers, txMemByteThreshold, renderMode } = options;\n        this.txManager = new CoreTextureManager(numImageWorkers);\n        this.txMemManager = new TextureMemoryManager(txMemByteThreshold);\n        this.shManager = new CoreShaderManager();\n        this.animationManager = new AnimationManager();\n        this.contextSpy = enableContextSpy ? new ContextSpy() : null;\n        let bm = [0, 0, 0, 0];\n        if (boundsMargin) {\n            bm = Array.isArray(boundsMargin)\n                ? boundsMargin\n                : [boundsMargin, boundsMargin, boundsMargin, boundsMargin];\n        }\n        this.boundsMargin = bm;\n        if (debug?.monitorTextureCache) {\n            setInterval(() => {\n                assertTruthy(this.txManager);\n                const debugInfo = this.txManager.getDebugInfo();\n                console.log('Texture ID Cache Size: ', debugInfo.idCacheSize);\n                console.log('Texture Key Cache Size: ', debugInfo.keyCacheSize);\n            }, 1000);\n        }\n        const rendererOptions = {\n            stage: this,\n            canvas,\n            pixelRatio: options.devicePhysicalPixelRatio * options.deviceLogicalPixelRatio,\n            clearColor: clearColor ?? 0xff000000,\n            bufferMemory,\n            txManager: this.txManager,\n            txMemManager: this.txMemManager,\n            shManager: this.shManager,\n            contextSpy: this.contextSpy,\n        };\n        if (renderMode === 'canvas') {\n            this.renderer = new CanvasCoreRenderer(rendererOptions);\n        }\n        else {\n            this.renderer = new WebGlCoreRenderer(rendererOptions);\n        }\n        setPremultiplyMode(renderMode);\n        // Must do this after renderer is created\n        this.txManager.renderer = this.renderer;\n        this.textRenderers = renderMode === 'webgl' ? {\n            canvas: new CanvasTextRenderer(this),\n            sdf: new SdfTextRenderer(this),\n        } : {\n            canvas: new CanvasTextRenderer(this),\n        };\n        this.fontManager = new TrFontManager(this.textRenderers);\n        // create root node\n        const rootNode = new CoreNode(this, {\n            id: rootId,\n            x: 0,\n            y: 0,\n            width: appWidth,\n            height: appHeight,\n            alpha: 1,\n            autosize: false,\n            clipping: false,\n            color: 0x00000000,\n            colorTop: 0x00000000,\n            colorBottom: 0x00000000,\n            colorLeft: 0x00000000,\n            colorRight: 0x00000000,\n            colorTl: 0x00000000,\n            colorTr: 0x00000000,\n            colorBl: 0x00000000,\n            colorBr: 0x00000000,\n            zIndex: 0,\n            zIndexLocked: 0,\n            scaleX: 1,\n            scaleY: 1,\n            mountX: 0,\n            mountY: 0,\n            mount: 0,\n            pivot: 0.5,\n            pivotX: 0.5,\n            pivotY: 0.5,\n            rotation: 0,\n            parent: null,\n            texture: null,\n            textureOptions: null,\n            shader: null,\n            shaderProps: null,\n        });\n        this.root = rootNode;\n        // execute platform start loop\n        if (autoStart) {\n            startLoop(this);\n        }\n    }\n    /**\n     * Update animations\n     */\n    updateAnimations() {\n        const { animationManager } = this;\n        if (!this.root) {\n            return;\n        }\n        this.lastFrameTime = this.currentFrameTime;\n        this.currentFrameTime = getTimeStamp();\n        this.deltaTime = !this.lastFrameTime\n            ? 100 / 6\n            : this.currentFrameTime - this.lastFrameTime;\n        this.emit('frameTick', {\n            time: this.currentFrameTime,\n            delta: this.deltaTime,\n        });\n        // step animation\n        animationManager.update(this.deltaTime);\n    }\n    /**\n     * Check if the scene has updates\n     */\n    hasSceneUpdates() {\n        return !!this.root.updateType || this.renderRequested;\n    }\n    /**\n     * Start a new frame draw\n     */\n    drawFrame() {\n        const { renderer, renderRequested } = this;\n        // Update tree if needed\n        if (this.root.updateType !== 0) {\n            this.root.update(this.deltaTime, this.root.clippingRect);\n        }\n        // test if we need to update the scene\n        renderer?.reset();\n        this.addQuads(this.root);\n        renderer?.render();\n        this.calculateFps();\n        // Reset renderRequested flag if it was set\n        if (renderRequested) {\n            this.renderRequested = false;\n        }\n    }\n    calculateFps() {\n        // If there's an FPS update interval, emit the FPS update event\n        // when the specified interval has elapsed.\n        const { fpsUpdateInterval } = this.options;\n        if (fpsUpdateInterval) {\n            this.fpsNumFrames++;\n            this.fpsElapsedTime += this.deltaTime;\n            if (this.fpsElapsedTime >= fpsUpdateInterval) {\n                const fps = Math.round((this.fpsNumFrames * 1000) / this.fpsElapsedTime);\n                this.fpsNumFrames = 0;\n                this.fpsElapsedTime = 0;\n                this.emit('fpsUpdate', {\n                    fps,\n                    contextSpyData: this.contextSpy?.getData() ?? null,\n                });\n                this.contextSpy?.reset();\n            }\n        }\n    }\n    addQuads(node) {\n        assertTruthy(this.renderer && node.globalTransform);\n        if (node.isRenderable) {\n            node.renderQuads(this.renderer);\n        }\n        for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i];\n            if (!child) {\n                continue;\n            }\n            if (child?.worldAlpha === 0) {\n                continue;\n            }\n            this.addQuads(child);\n        }\n    }\n    /**\n     * Request a render pass without forcing an update\n     */\n    requestRender() {\n        this.renderRequested = true;\n    }\n    /**\n     * Given a font name, and possible renderer override, return the best compatible text renderer.\n     *\n     * @remarks\n     * Will always return at least a canvas renderer if no other suitable renderer can be resolved.\n     *\n     * @param fontFamily\n     * @param textRendererOverride\n     * @returns\n     */\n    resolveTextRenderer(trProps, textRendererOverride = null) {\n        let rendererId = textRendererOverride;\n        let overrideFallback = false;\n        // Check if the override is valid (if one is provided)\n        if (rendererId) {\n            const possibleRenderer = this.textRenderers[rendererId];\n            if (!possibleRenderer) {\n                console.warn(`Text renderer override '${rendererId}' not found.`);\n                rendererId = null;\n                overrideFallback = true;\n            }\n            else if (!possibleRenderer.canRenderFont(trProps)) {\n                console.warn(`Cannot use override text renderer '${rendererId}' for font`, trProps);\n                rendererId = null;\n                overrideFallback = true;\n            }\n        }\n        if (!rendererId) {\n            // Iterate through the text renderers and find the first one that can render the font\n            for (const [trId, tr] of Object.entries(this.textRenderers)) {\n                if (trId === 'canvas') {\n                    // Canvas is always a fallback\n                    continue;\n                }\n                if (tr.canRenderFont(trProps)) {\n                    rendererId = trId;\n                    break;\n                }\n            }\n            if (!rendererId) {\n                // If no renderer can be found, use the canvas renderer\n                rendererId = 'canvas';\n            }\n        }\n        if (overrideFallback) {\n            console.warn(`Falling back to text renderer ${String(rendererId)}`);\n        }\n        // By now we are guaranteed to have a valid rendererId (at least Canvas);\n        const resolvedTextRenderer = this.textRenderers[rendererId];\n        assertTruthy(resolvedTextRenderer, 'resolvedTextRenderer undefined');\n        // Need to explicitly cast to TextRenderer because TS doesn't like\n        // the covariant state argument in the setter method map\n        return resolvedTextRenderer;\n    }\n}\n//# sourceMappingURL=Stage.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreNode, UpdateType } from './CoreNode.js';\nimport { assertTruthy } from '../utils.js';\nexport class CoreTextNode extends CoreNode {\n    textRenderer;\n    trState;\n    _textRendererOverride = null;\n    constructor(stage, props) {\n        super(stage, props);\n        this._textRendererOverride = props.textRendererOverride;\n        const { resolvedTextRenderer, textRendererState } = this.resolveTextRendererAndState({\n            x: this.absX,\n            y: this.absY,\n            width: props.width,\n            height: props.height,\n            textAlign: props.textAlign,\n            color: props.color,\n            zIndex: props.zIndex,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            letterSpacing: props.letterSpacing,\n            debug: props.debug,\n            fontFamily: props.fontFamily,\n            fontSize: props.fontSize,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            fontWeight: props.fontWeight,\n            text: props.text,\n            lineHeight: props.lineHeight,\n            maxLines: props.maxLines,\n            textBaseline: props.textBaseline,\n            verticalAlign: props.verticalAlign,\n            overflowSuffix: props.overflowSuffix,\n        });\n        this.textRenderer = resolvedTextRenderer;\n        this.trState = textRendererState;\n    }\n    onTextLoaded = () => {\n        const { contain } = this;\n        const setWidth = this.trState.props.width;\n        const setHeight = this.trState.props.height;\n        const calcWidth = this.trState.textW || 0;\n        const calcHeight = this.trState.textH || 0;\n        if (contain === 'both') {\n            this.props.width = setWidth;\n            this.props.height = setHeight;\n        }\n        else if (contain === 'width') {\n            this.props.width = setWidth;\n            this.props.height = calcHeight;\n        }\n        else if (contain === 'none') {\n            this.props.width = calcWidth;\n            this.props.height = calcHeight;\n        }\n        this.updateLocalTransform();\n        // Incase the RAF loop has been stopped already before text was loaded,\n        // we request a render so it can be drawn.\n        this.stage.requestRender();\n        this.emit('loaded', {\n            type: 'text',\n            dimensions: {\n                width: this.trState.textW || 0,\n                height: this.trState.textH || 0,\n            },\n        });\n    };\n    onTextFailed = (target, error) => {\n        this.emit('failed', {\n            type: 'text',\n            error,\n        });\n    };\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        this.props.width = value;\n        this.textRenderer.set.width(this.trState, value);\n        // If not containing, we must update the local transform to account for the\n        // new width\n        if (this.contain === 'none') {\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        this.props.height = value;\n        this.textRenderer.set.height(this.trState, value);\n        // If not containing in the horizontal direction, we must update the local\n        // transform to account for the new height\n        if (this.contain !== 'both') {\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get color() {\n        return this.trState.props.color;\n    }\n    set color(value) {\n        this.textRenderer.set.color(this.trState, value);\n    }\n    get text() {\n        return this.trState.props.text;\n    }\n    set text(value) {\n        this.textRenderer.set.text(this.trState, value);\n    }\n    get textRendererOverride() {\n        return this._textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this._textRendererOverride = value;\n        this.textRenderer.destroyState(this.trState);\n        const { resolvedTextRenderer, textRendererState } = this.resolveTextRendererAndState(this.trState.props);\n        this.textRenderer = resolvedTextRenderer;\n        this.trState = textRendererState;\n    }\n    get fontSize() {\n        return this.trState.props.fontSize;\n    }\n    set fontSize(value) {\n        this.textRenderer.set.fontSize(this.trState, value);\n    }\n    get fontFamily() {\n        return this.trState.props.fontFamily;\n    }\n    set fontFamily(value) {\n        this.textRenderer.set.fontFamily(this.trState, value);\n    }\n    get fontStretch() {\n        return this.trState.props.fontStretch;\n    }\n    set fontStretch(value) {\n        this.textRenderer.set.fontStretch(this.trState, value);\n    }\n    get fontStyle() {\n        return this.trState.props.fontStyle;\n    }\n    set fontStyle(value) {\n        this.textRenderer.set.fontStyle(this.trState, value);\n    }\n    get fontWeight() {\n        return this.trState.props.fontWeight;\n    }\n    set fontWeight(value) {\n        this.textRenderer.set.fontWeight(this.trState, value);\n    }\n    get textAlign() {\n        return this.trState.props.textAlign;\n    }\n    set textAlign(value) {\n        this.textRenderer.set.textAlign(this.trState, value);\n    }\n    get contain() {\n        return this.trState.props.contain;\n    }\n    set contain(value) {\n        this.textRenderer.set.contain(this.trState, value);\n    }\n    get scrollable() {\n        return this.trState.props.scrollable;\n    }\n    set scrollable(value) {\n        this.textRenderer.set.scrollable(this.trState, value);\n    }\n    get scrollY() {\n        return this.trState.props.scrollY;\n    }\n    set scrollY(value) {\n        this.textRenderer.set.scrollY(this.trState, value);\n    }\n    get offsetY() {\n        return this.trState.props.offsetY;\n    }\n    set offsetY(value) {\n        this.textRenderer.set.offsetY(this.trState, value);\n    }\n    get letterSpacing() {\n        return this.trState.props.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.textRenderer.set.letterSpacing(this.trState, value);\n    }\n    get lineHeight() {\n        return this.trState.props.lineHeight;\n    }\n    set lineHeight(value) {\n        if (this.textRenderer.set.lineHeight) {\n            this.textRenderer.set.lineHeight(this.trState, value);\n        }\n    }\n    get maxLines() {\n        return this.trState.props.maxLines;\n    }\n    set maxLines(value) {\n        if (this.textRenderer.set.maxLines) {\n            this.textRenderer.set.maxLines(this.trState, value);\n        }\n    }\n    get textBaseline() {\n        return this.trState.props.textBaseline;\n    }\n    set textBaseline(value) {\n        if (this.textRenderer.set.textBaseline) {\n            this.textRenderer.set.textBaseline(this.trState, value);\n        }\n    }\n    get verticalAlign() {\n        return this.trState.props.verticalAlign;\n    }\n    set verticalAlign(value) {\n        if (this.textRenderer.set.verticalAlign) {\n            this.textRenderer.set.verticalAlign(this.trState, value);\n        }\n    }\n    get overflowSuffix() {\n        return this.trState.props.overflowSuffix;\n    }\n    set overflowSuffix(value) {\n        if (this.textRenderer.set.overflowSuffix) {\n            this.textRenderer.set.overflowSuffix(this.trState, value);\n        }\n    }\n    get debug() {\n        return this.trState.props.debug;\n    }\n    set debug(value) {\n        this.textRenderer.set.debug(this.trState, value);\n    }\n    update(delta, parentClippingRect) {\n        super.update(delta, parentClippingRect);\n        assertTruthy(this.globalTransform);\n        // globalTransform is updated in super.update(delta)\n        this.textRenderer.set.x(this.trState, this.globalTransform.tx);\n        this.textRenderer.set.y(this.trState, this.globalTransform.ty);\n    }\n    checkRenderProps() {\n        if (this.trState.props.text !== '') {\n            return true;\n        }\n        return super.checkRenderProps();\n    }\n    onChangeIsRenderable(isRenderable) {\n        super.onChangeIsRenderable(isRenderable);\n        this.textRenderer.setIsRenderable(this.trState, isRenderable);\n    }\n    renderQuads(renderer) {\n        assertTruthy(this.globalTransform);\n        this.textRenderer.renderQuads(this.trState, this.globalTransform, this.clippingRect, this.worldAlpha);\n    }\n    /**\n     * Destroy the node and cleanup all resources\n     */\n    destroy() {\n        super.destroy();\n        this.textRenderer.destroyState(this.trState);\n    }\n    /**\n     * Resolve a text renderer and a new state based on the current text renderer props provided\n     * @param props\n     * @returns\n     */\n    resolveTextRendererAndState(props) {\n        const resolvedTextRenderer = this.stage.resolveTextRenderer(props, this._textRendererOverride);\n        const textRendererState = resolvedTextRenderer.createState(props);\n        textRendererState.emitter.on('loaded', this.onTextLoaded);\n        textRendererState.emitter.on('failed', this.onTextFailed);\n        resolvedTextRenderer.scheduleUpdateState(textRendererState);\n        return {\n            resolvedTextRenderer,\n            textRendererState,\n        };\n    }\n}\n//# sourceMappingURL=CoreTextNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MainOnlyNode, getNewId } from './MainOnlyNode.js';\nimport { CoreTextNode } from '../../core/CoreTextNode.js';\nexport class MainOnlyTextNode extends MainOnlyNode {\n    constructor(props, rendererMain, stage) {\n        super(props, rendererMain, stage, new CoreTextNode(stage, {\n            id: getNewId(),\n            x: props.x,\n            y: props.y,\n            width: props.width,\n            height: props.height,\n            alpha: props.alpha,\n            autosize: props.autosize,\n            clipping: props.clipping,\n            color: props.color,\n            colorTop: props.colorTop,\n            colorBottom: props.colorBottom,\n            colorLeft: props.colorLeft,\n            colorRight: props.colorRight,\n            colorTl: props.colorTl,\n            colorTr: props.colorTr,\n            colorBl: props.colorBl,\n            colorBr: props.colorBr,\n            zIndex: props.zIndex,\n            zIndexLocked: props.zIndexLocked,\n            scaleX: props.scaleX,\n            scaleY: props.scaleY,\n            mountX: props.mountX,\n            mountY: props.mountY,\n            mount: props.mount,\n            pivot: props.pivot,\n            pivotX: props.pivotX,\n            pivotY: props.pivotY,\n            rotation: props.rotation,\n            // Text properties\n            text: props.text,\n            fontSize: props.fontSize,\n            fontFamily: props.fontFamily,\n            fontWeight: props.fontWeight,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            letterSpacing: props.letterSpacing,\n            textAlign: props.textAlign,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            textRendererOverride: props.textRendererOverride,\n            lineHeight: props.lineHeight,\n            maxLines: props.maxLines,\n            textBaseline: props.textBaseline,\n            verticalAlign: props.verticalAlign,\n            overflowSuffix: props.overflowSuffix,\n            debug: props.debug,\n            // These properties will get set appropriately in the base MainOnlyNode class\n            parent: null,\n            texture: null,\n            textureOptions: null,\n            shader: null,\n            shaderProps: null,\n        }));\n    }\n    get text() {\n        return this.coreNode.text;\n    }\n    set text(value) {\n        this.coreNode.text = value;\n    }\n    get textRendererOverride() {\n        return this.coreNode.textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this.coreNode.textRendererOverride = value;\n    }\n    get fontSize() {\n        return this.coreNode.fontSize;\n    }\n    set fontSize(value) {\n        this.coreNode.fontSize = value;\n    }\n    get fontFamily() {\n        return this.coreNode.fontFamily;\n    }\n    set fontFamily(value) {\n        this.coreNode.fontFamily = value;\n    }\n    get fontWeight() {\n        return this.coreNode.fontWeight;\n    }\n    set fontWeight(value) {\n        this.coreNode.fontWeight = value;\n    }\n    get fontStretch() {\n        return this.coreNode.fontStretch;\n    }\n    set fontStretch(value) {\n        this.coreNode.fontStretch = value;\n    }\n    get fontStyle() {\n        return this.coreNode.fontStyle;\n    }\n    set fontStyle(value) {\n        this.coreNode.fontStyle = value;\n    }\n    get textAlign() {\n        return this.coreNode.textAlign;\n    }\n    set textAlign(value) {\n        this.coreNode.textAlign = value;\n    }\n    get contain() {\n        return this.coreNode.contain;\n    }\n    set contain(value) {\n        this.coreNode.contain = value;\n    }\n    get scrollable() {\n        return this.coreNode.scrollable;\n    }\n    set scrollable(value) {\n        this.coreNode.scrollable = value;\n    }\n    get scrollY() {\n        return this.coreNode.scrollY;\n    }\n    set scrollY(value) {\n        this.coreNode.scrollY = value;\n    }\n    get offsetY() {\n        return this.coreNode.offsetY;\n    }\n    set offsetY(value) {\n        this.coreNode.offsetY = value;\n    }\n    get letterSpacing() {\n        return this.coreNode.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.coreNode.letterSpacing = value;\n    }\n    get lineHeight() {\n        return this.coreNode.lineHeight;\n    }\n    set lineHeight(value) {\n        if (value) {\n            this.coreNode.lineHeight = value;\n        }\n    }\n    get maxLines() {\n        return this.coreNode.maxLines;\n    }\n    set maxLines(value) {\n        if (value) {\n            this.coreNode.maxLines = value;\n        }\n    }\n    get textBaseline() {\n        return this.coreNode.textBaseline;\n    }\n    set textBaseline(value) {\n        if (value) {\n            this.coreNode.textBaseline = value;\n        }\n    }\n    get verticalAlign() {\n        return this.coreNode.verticalAlign;\n    }\n    set verticalAlign(value) {\n        if (value) {\n            this.coreNode.verticalAlign = value;\n        }\n    }\n    get overflowSuffix() {\n        return this.coreNode.overflowSuffix;\n    }\n    set overflowSuffix(value) {\n        if (value) {\n            this.coreNode.overflowSuffix = value;\n        }\n    }\n    get debug() {\n        return this.coreNode.debug;\n    }\n    set debug(value) {\n        this.coreNode.debug = value;\n    }\n}\n//# sourceMappingURL=MainOnlyTextNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { MainOnlyNode, getNewId } from './MainOnlyNode.js';\nimport { Stage, } from '../../core/Stage.js';\nimport { MainOnlyTextNode } from './MainOnlyTextNode.js';\nimport { loadCoreExtension } from '../utils.js';\nexport class MainCoreDriver {\n    root = null;\n    stage = null;\n    rendererMain = null;\n    async init(rendererMain, rendererSettings, canvas) {\n        this.stage = new Stage({\n            rootId: getNewId(),\n            appWidth: rendererSettings.appWidth,\n            appHeight: rendererSettings.appHeight,\n            txMemByteThreshold: rendererSettings.txMemByteThreshold,\n            boundsMargin: rendererSettings.boundsMargin,\n            deviceLogicalPixelRatio: rendererSettings.deviceLogicalPixelRatio,\n            devicePhysicalPixelRatio: rendererSettings.devicePhysicalPixelRatio,\n            clearColor: rendererSettings.clearColor,\n            canvas,\n            fpsUpdateInterval: rendererSettings.fpsUpdateInterval,\n            enableContextSpy: rendererSettings.enableContextSpy,\n            numImageWorkers: rendererSettings.numImageWorkers,\n            renderMode: rendererSettings.renderMode,\n            debug: {\n                monitorTextureCache: false,\n            },\n        });\n        this.rendererMain = rendererMain;\n        assertTruthy(this.stage.root);\n        const node = new MainOnlyNode(rendererMain.resolveNodeDefaults({}), this.rendererMain, this.stage, this.stage.root);\n        this.root = node;\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        // Load the Core Extension Module if one was specified.\n        if (rendererSettings.coreExtensionModule) {\n            await loadCoreExtension(rendererSettings.coreExtensionModule, this.stage);\n        }\n        // Forward fpsUpdate events from the stage to RendererMain\n        this.stage.on('fpsUpdate', ((stage, fpsData) => {\n            this.onFpsUpdate(fpsData);\n        }));\n        this.stage.on('frameTick', ((stage, frameTickData) => {\n            this.onFrameTick(frameTickData);\n        }));\n        this.stage.on('idle', () => {\n            this.onIdle();\n        });\n    }\n    createNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    createTextNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyTextNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    // TODO: Remove?\n    destroyNode(node) {\n        node.destroy();\n    }\n    releaseTexture(id) {\n        const { stage } = this;\n        assertTruthy(stage);\n        stage.txManager.removeTextureIdFromCache(id);\n    }\n    getRootNode() {\n        assertTruthy(this.root);\n        return this.root;\n    }\n    //#region Event Methods\n    // The implementations for these event methods are provided by RendererMain\n    onCreateNode(node) {\n        throw new Error('Method not implemented.');\n    }\n    onBeforeDestroyNode(node) {\n        throw new Error('Method not implemented.');\n    }\n    onFpsUpdate(fpsData) {\n        throw new Error('Method not implemented.');\n    }\n    onFrameTick(frameTickData) {\n        throw new Error('Method not implemented.');\n    }\n    onIdle() {\n        throw new Error('Method not implemented.');\n    }\n}\n//# sourceMappingURL=MainCoreDriver.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { MainCoreDriver, RendererMain } from '@lightningjs/renderer';\nexport let renderer;\nexport let createShader;\nexport function startLightningRenderer(options = {}, rootId = 'app') {\n    const driver = new MainCoreDriver();\n    renderer = new RendererMain(options, rootId, driver);\n    createShader = renderer.createShader.bind(renderer);\n    return renderer;\n}\n//# sourceMappingURL=lightningInit.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Children class\n */\nexport default class Children extends Array {\n    _parent;\n    constructor(node) {\n        super();\n        this._parent = node;\n    }\n    get selected() {\n        // For selected Elements should always be an ElementNode\n        return this[this._parent.selected || 0];\n    }\n    get firstChild() {\n        return this[0];\n    }\n    insert(node, beforeNode) {\n        if (beforeNode) {\n            const index = this.indexOf(beforeNode);\n            this.splice(index, 0, node);\n        }\n        else {\n            this.push(node);\n        }\n        node.parent = this._parent;\n    }\n    remove(node) {\n        const nodeIndexToRemove = this.indexOf(node);\n        if (nodeIndexToRemove >= 0) {\n            this.splice(nodeIndexToRemove, 1);\n        }\n    }\n}\n//# sourceMappingURL=children.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isDevEnv() {\n    return import.meta.env && import.meta.env.DEV;\n}\nexport const isDev = isDevEnv() || false;\nexport const config = {\n    debug: false,\n    animationsEnabled: true,\n    animationSettings: {\n        duration: 250,\n        easing: 'ease-in-out',\n    },\n    fontSettings: {\n        fontFamily: 'Ubuntu',\n        fontSize: 100,\n    },\n};\n//# sourceMappingURL=config.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { config, isDev } from './config.js';\nfunction hasDebug(node) {\n    return isObject(node) && node.debug;\n}\nexport function log(msg, node, ...args) {\n    if (isDev) {\n        if (config.debug || hasDebug(node) || hasDebug(args[0])) {\n            console.log(msg, node, ...args);\n        }\n    }\n}\nexport function isFunc(item) {\n    return typeof item === 'function';\n}\nexport function isObject(item) {\n    return typeof item === 'object';\n}\nexport function isArray(item) {\n    return Array.isArray(item);\n}\nexport function isString(item) {\n    return typeof item === 'string';\n}\nexport function isNumber(item) {\n    return typeof item === 'number';\n}\nexport function isInteger(item) {\n    return Number.isInteger(item);\n}\nexport function keyExists(obj, keys) {\n    for (const key of keys) {\n        if (key in obj) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function flattenStyles(obj, result = {}) {\n    if (isArray(obj)) {\n        obj.forEach((item) => {\n            flattenStyles(item, result);\n        });\n    }\n    else if (obj) {\n        // handle the case where the object is not an array\n        for (const key in obj) {\n            // be careful of 0 values\n            if (result[key] === undefined) {\n                result[key] = obj[key];\n            }\n        }\n    }\n    return result;\n}\n/**\n * Converts a color string to a color number value.\n */\nexport function hexColor(color = '') {\n    if (isInteger(color)) {\n        return color;\n    }\n    if (typeof color === 'string') {\n        // Renderer expects RGBA values\n        if (color.startsWith('#')) {\n            return Number(color.replace('#', '0x') + (color.length === 7 ? 'ff' : ''));\n        }\n        if (color.startsWith('0x')) {\n            return Number(color);\n        }\n        return Number('0x' + (color.length === 6 ? color + 'ff' : color));\n    }\n    return 0x00000000;\n}\n/**\n * Converts degrees to radians\n */\nexport function deg2rad(deg) {\n    return (deg * Math.PI) / 180;\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { isArray, isString } from '../utils.js';\nexport default class States extends Array {\n    onChange;\n    constructor(callback, initialState = {}) {\n        if (isArray(initialState)) {\n            super(...initialState);\n        }\n        else if (isString(initialState)) {\n            super(initialState);\n        }\n        else {\n            super(...Object.entries(initialState)\n                .filter(([_key, value]) => value)\n                .map(([key]) => key));\n        }\n        this.onChange = callback;\n        return this;\n    }\n    has(state) {\n        return this.indexOf(state) >= 0;\n    }\n    is(state) {\n        return this.indexOf(state) >= 0;\n    }\n    add(state) {\n        this.push(state);\n        this.onChange();\n    }\n    toggle(state) {\n        if (this.has(state)) {\n            this.remove(state);\n        }\n        else {\n            this.add(state);\n        }\n    }\n    remove(state) {\n        const stateIndexToRemove = this.indexOf(state);\n        if (stateIndexToRemove >= 0) {\n            this.splice(stateIndexToRemove, 1);\n            this.onChange();\n        }\n    }\n}\n//# sourceMappingURL=states.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nexport default function (node) {\n    const children = [];\n    let hasOrder = false;\n    for (let i = 0; i < node.children.length; i++) {\n        const c = node.children[i];\n        // Filter empty text nodes which are place holders for <Show> and elements missing dimensions\n        if (c.name === 'TextNode') {\n            continue;\n        }\n        // Skip layout for non flex items\n        if (c.flexItem === false) {\n            continue;\n        }\n        // text node hasnt loaded yet - skip layout\n        if (c.name === 'text' && c.text !== '' && !(c.width || c.height)) {\n            return false;\n        }\n        if (c.flexOrder !== undefined) {\n            hasOrder = true;\n        }\n        children.push(c);\n    }\n    if (hasOrder) {\n        children.sort((a, b) => (a.flexOrder || 0) - (b.flexOrder || 0));\n    }\n    const numChildren = children.length;\n    const direction = node.flexDirection || 'row';\n    const isRow = direction === 'row';\n    const dimension = isRow ? 'width' : 'height';\n    const crossDimension = isRow ? 'height' : 'width';\n    const marginOne = isRow ? 'marginLeft' : 'marginTop';\n    const marginTwo = isRow ? 'marginRight' : 'marginBottom';\n    const prop = isRow ? 'x' : 'y';\n    const crossProp = isRow ? 'y' : 'x';\n    const containerSize = node[dimension] || 0;\n    const containerCrossSize = node[crossDimension] || 0;\n    const gap = node.gap || 0;\n    const justify = node.justifyContent || 'flexStart';\n    const align = node.alignItems;\n    let itemSize = 0;\n    if (['center', 'spaceBetween', 'spaceEvenly'].includes(justify)) {\n        itemSize = children.reduce((prev, c) => prev + (c[dimension] || 0), 0);\n    }\n    // Only align children if container has a cross size\n    const crossAlignChild = containerCrossSize && align\n        ? (c) => {\n            if (align === 'flexStart') {\n                c[crossProp] = 0;\n            }\n            else if (align === 'center') {\n                c[crossProp] = (containerCrossSize - (c[crossDimension] || 0)) / 2;\n            }\n            else if (align === 'flexEnd') {\n                c[crossProp] = containerCrossSize - (c[crossDimension] || 0);\n            }\n        }\n        : (c) => c;\n    if (justify === 'flexStart') {\n        let start = 0;\n        children.forEach((c) => {\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        });\n        // Update container size\n        if (node.flexBoundary !== 'fixed') {\n            const calculatedSize = start - gap;\n            if (calculatedSize !== node[dimension]) {\n                node[dimension] = calculatedSize;\n                return true;\n            }\n        }\n    }\n    else if (justify === 'flexEnd') {\n        let start = containerSize;\n        for (let i = numChildren - 1; i >= 0; i--) {\n            const c = children[i];\n            assertTruthy(c);\n            c[prop] = start - (c[dimension] || 0) - (c[marginTwo] || 0);\n            start -=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n            crossAlignChild(c);\n        }\n    }\n    else if (justify === 'center') {\n        let start = (containerSize - (itemSize + gap * (numChildren - 1))) / 2;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + gap;\n            crossAlignChild(c);\n        });\n    }\n    else if (justify === 'spaceBetween') {\n        const toPad = (containerSize - itemSize) / (numChildren - 1);\n        let start = 0;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + toPad;\n            crossAlignChild(c);\n        });\n    }\n    else if (justify === 'spaceEvenly') {\n        const toPad = (containerSize - itemSize) / (numChildren + 1);\n        let start = toPad;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + toPad;\n            crossAlignChild(c);\n        });\n    }\n    // Container was not updated\n    return false;\n}\n//# sourceMappingURL=flex.js.map","/**\n* @vue/shared v3.4.26\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str, expectsLowerCase) {\n  const set = new Set(str.split(\",\"));\n  return expectsLowerCase ? (val) => set.has(val.toLowerCase()) : (val) => set.has(val);\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction((str) => {\n  const s = str ? `on${capitalize(str)}` : ``;\n  return s;\n});\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"HOISTED\": -1,\n  \"-1\": \"HOISTED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length)\n          continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  let ret = \"\";\n  if (!styles || isString(styles)) {\n    return ret;\n  }\n  for (const key in styles) {\n    const value = styles[key];\n    const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n    if (isString(value) || typeof value === \"number\") {\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props)\n    return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length)\n    return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b)\n    return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (val && val.__v_isRef) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","/**\n* @vue/reactivity v3.4.26\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { NOOP, extend, isArray, isSymbol, isMap, isIntegerKey, hasOwn, hasChanged, isObject, makeMap, capitalize, toRawType, def, isFunction } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n      this._active = false;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction recordEffectScope(effect, scope = activeEffectScope) {\n  if (scope && scope.active) {\n    scope.effects.push(effect);\n  }\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeEffect;\nclass ReactiveEffect {\n  constructor(fn, trigger, scheduler, scope) {\n    this.fn = fn;\n    this.trigger = trigger;\n    this.scheduler = scheduler;\n    this.active = true;\n    this.deps = [];\n    /**\n     * @internal\n     */\n    this._dirtyLevel = 4;\n    /**\n     * @internal\n     */\n    this._trackId = 0;\n    /**\n     * @internal\n     */\n    this._runnings = 0;\n    /**\n     * @internal\n     */\n    this._shouldSchedule = false;\n    /**\n     * @internal\n     */\n    this._depsLength = 0;\n    recordEffectScope(this, scope);\n  }\n  get dirty() {\n    if (this._dirtyLevel === 2 || this._dirtyLevel === 3) {\n      this._dirtyLevel = 1;\n      pauseTracking();\n      for (let i = 0; i < this._depsLength; i++) {\n        const dep = this.deps[i];\n        if (dep.computed) {\n          triggerComputed(dep.computed);\n          if (this._dirtyLevel >= 4) {\n            break;\n          }\n        }\n      }\n      if (this._dirtyLevel === 1) {\n        this._dirtyLevel = 0;\n      }\n      resetTracking();\n    }\n    return this._dirtyLevel >= 4;\n  }\n  set dirty(v) {\n    this._dirtyLevel = v ? 4 : 0;\n  }\n  run() {\n    this._dirtyLevel = 0;\n    if (!this.active) {\n      return this.fn();\n    }\n    let lastShouldTrack = shouldTrack;\n    let lastEffect = activeEffect;\n    try {\n      shouldTrack = true;\n      activeEffect = this;\n      this._runnings++;\n      preCleanupEffect(this);\n      return this.fn();\n    } finally {\n      postCleanupEffect(this);\n      this._runnings--;\n      activeEffect = lastEffect;\n      shouldTrack = lastShouldTrack;\n    }\n  }\n  stop() {\n    if (this.active) {\n      preCleanupEffect(this);\n      postCleanupEffect(this);\n      this.onStop && this.onStop();\n      this.active = false;\n    }\n  }\n}\nfunction triggerComputed(computed) {\n  return computed.value;\n}\nfunction preCleanupEffect(effect2) {\n  effect2._trackId++;\n  effect2._depsLength = 0;\n}\nfunction postCleanupEffect(effect2) {\n  if (effect2.deps.length > effect2._depsLength) {\n    for (let i = effect2._depsLength; i < effect2.deps.length; i++) {\n      cleanupDepEffect(effect2.deps[i], effect2);\n    }\n    effect2.deps.length = effect2._depsLength;\n  }\n}\nfunction cleanupDepEffect(dep, effect2) {\n  const trackId = dep.get(effect2);\n  if (trackId !== void 0 && effect2._trackId !== trackId) {\n    dep.delete(effect2);\n    if (dep.size === 0) {\n      dep.cleanup();\n    }\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const _effect = new ReactiveEffect(fn, NOOP, () => {\n    if (_effect.dirty) {\n      _effect.run();\n    }\n  });\n  if (options) {\n    extend(_effect, options);\n    if (options.scope)\n      recordEffectScope(_effect, options.scope);\n  }\n  if (!options || !options.lazy) {\n    _effect.run();\n  }\n  const runner = _effect.run.bind(_effect);\n  runner.effect = _effect;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nlet pauseScheduleStack = 0;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction pauseScheduling() {\n  pauseScheduleStack++;\n}\nfunction resetScheduling() {\n  pauseScheduleStack--;\n  while (!pauseScheduleStack && queueEffectSchedulers.length) {\n    queueEffectSchedulers.shift()();\n  }\n}\nfunction trackEffect(effect2, dep, debuggerEventExtraInfo) {\n  var _a;\n  if (dep.get(effect2) !== effect2._trackId) {\n    dep.set(effect2, effect2._trackId);\n    const oldDep = effect2.deps[effect2._depsLength];\n    if (oldDep !== dep) {\n      if (oldDep) {\n        cleanupDepEffect(oldDep, effect2);\n      }\n      effect2.deps[effect2._depsLength++] = dep;\n    } else {\n      effect2._depsLength++;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      (_a = effect2.onTrack) == null ? void 0 : _a.call(effect2, extend({ effect: effect2 }, debuggerEventExtraInfo));\n    }\n  }\n}\nconst queueEffectSchedulers = [];\nfunction triggerEffects(dep, dirtyLevel, debuggerEventExtraInfo) {\n  var _a;\n  pauseScheduling();\n  for (const effect2 of dep.keys()) {\n    let tracking;\n    if (effect2._dirtyLevel < dirtyLevel && (tracking != null ? tracking : tracking = dep.get(effect2) === effect2._trackId)) {\n      effect2._shouldSchedule || (effect2._shouldSchedule = effect2._dirtyLevel === 0);\n      effect2._dirtyLevel = dirtyLevel;\n    }\n    if (effect2._shouldSchedule && (tracking != null ? tracking : tracking = dep.get(effect2) === effect2._trackId)) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        (_a = effect2.onTrigger) == null ? void 0 : _a.call(effect2, extend({ effect: effect2 }, debuggerEventExtraInfo));\n      }\n      effect2.trigger();\n      if ((!effect2._runnings || effect2.allowRecurse) && effect2._dirtyLevel !== 2) {\n        effect2._shouldSchedule = false;\n        if (effect2.scheduler) {\n          queueEffectSchedulers.push(effect2.scheduler);\n        }\n      }\n    }\n  }\n  resetScheduling();\n}\n\nconst createDep = (cleanup, computed) => {\n  const dep = /* @__PURE__ */ new Map();\n  dep.cleanup = cleanup;\n  dep.computed = computed;\n  return dep;\n};\n\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"iterate\" : \"\");\nconst MAP_KEY_ITERATE_KEY = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"Map key iterate\" : \"\");\nfunction track(target, type, key) {\n  if (shouldTrack && activeEffect) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = createDep(() => depsMap.delete(key)));\n    }\n    trackEffect(\n      activeEffect,\n      dep,\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target,\n        type,\n        key\n      } : void 0\n    );\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    return;\n  }\n  let deps = [];\n  if (type === \"clear\") {\n    deps = [...depsMap.values()];\n  } else if (key === \"length\" && isArray(target)) {\n    const newLength = Number(newValue);\n    depsMap.forEach((dep, key2) => {\n      if (key2 === \"length\" || !isSymbol(key2) && key2 >= newLength) {\n        deps.push(dep);\n      }\n    });\n  } else {\n    if (key !== void 0) {\n      deps.push(depsMap.get(key));\n    }\n    switch (type) {\n      case \"add\":\n        if (!isArray(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n          if (isMap(target)) {\n            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n          }\n        } else if (isIntegerKey(key)) {\n          deps.push(depsMap.get(\"length\"));\n        }\n        break;\n      case \"delete\":\n        if (!isArray(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n          if (isMap(target)) {\n            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n          }\n        }\n        break;\n      case \"set\":\n        if (isMap(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n        }\n        break;\n    }\n  }\n  pauseScheduling();\n  for (const dep of deps) {\n    if (dep) {\n      triggerEffects(\n        dep,\n        4,\n        !!(process.env.NODE_ENV !== \"production\") ? {\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        } : void 0\n      );\n    }\n  }\n  resetScheduling();\n}\nfunction getDepFromReactive(object, key) {\n  const depsMap = targetMap.get(object);\n  return depsMap && depsMap.get(key);\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nconst arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();\nfunction createArrayInstrumentations() {\n  const instrumentations = {};\n  [\"includes\", \"indexOf\", \"lastIndexOf\"].forEach((key) => {\n    instrumentations[key] = function(...args) {\n      const arr = toRaw(this);\n      for (let i = 0, l = this.length; i < l; i++) {\n        track(arr, \"get\", i + \"\");\n      }\n      const res = arr[key](...args);\n      if (res === -1 || res === false) {\n        return arr[key](...args.map(toRaw));\n      } else {\n        return res;\n      }\n    };\n  });\n  [\"push\", \"pop\", \"shift\", \"unshift\", \"splice\"].forEach((key) => {\n    instrumentations[key] = function(...args) {\n      pauseTracking();\n      pauseScheduling();\n      const res = toRaw(this)[key].apply(this, args);\n      resetScheduling();\n      resetTracking();\n      return res;\n    };\n  });\n  return instrumentations;\n}\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key))\n    key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the reciever is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      if (targetIsArray && hasOwn(arrayInstrumentations, key)) {\n        return Reflect.get(arrayInstrumentations, key, receiver);\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(target, key, receiver);\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(target, key, value, receiver);\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(\n  true\n);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction get(target, key, isReadonly = false, isShallow = false) {\n  target = target[\"__v_raw\"];\n  const rawTarget = toRaw(target);\n  const rawKey = toRaw(key);\n  if (!isReadonly) {\n    if (hasChanged(key, rawKey)) {\n      track(rawTarget, \"get\", key);\n    }\n    track(rawTarget, \"get\", rawKey);\n  }\n  const { has: has2 } = getProto(rawTarget);\n  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n  if (has2.call(rawTarget, key)) {\n    return wrap(target.get(key));\n  } else if (has2.call(rawTarget, rawKey)) {\n    return wrap(target.get(rawKey));\n  } else if (target !== rawTarget) {\n    target.get(key);\n  }\n}\nfunction has(key, isReadonly = false) {\n  const target = this[\"__v_raw\"];\n  const rawTarget = toRaw(target);\n  const rawKey = toRaw(key);\n  if (!isReadonly) {\n    if (hasChanged(key, rawKey)) {\n      track(rawTarget, \"has\", key);\n    }\n    track(rawTarget, \"has\", rawKey);\n  }\n  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n}\nfunction size(target, isReadonly = false) {\n  target = target[\"__v_raw\"];\n  !isReadonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n  return Reflect.get(target, \"size\", target);\n}\nfunction add(value) {\n  value = toRaw(value);\n  const target = toRaw(this);\n  const proto = getProto(target);\n  const hadKey = proto.has.call(target, value);\n  if (!hadKey) {\n    target.add(value);\n    trigger(target, \"add\", value, value);\n  }\n  return this;\n}\nfunction set(key, value) {\n  value = toRaw(value);\n  const target = toRaw(this);\n  const { has: has2, get: get2 } = getProto(target);\n  let hadKey = has2.call(target, key);\n  if (!hadKey) {\n    key = toRaw(key);\n    hadKey = has2.call(target, key);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    checkIdentityKeys(target, has2, key);\n  }\n  const oldValue = get2.call(target, key);\n  target.set(key, value);\n  if (!hadKey) {\n    trigger(target, \"add\", key, value);\n  } else if (hasChanged(value, oldValue)) {\n    trigger(target, \"set\", key, value, oldValue);\n  }\n  return this;\n}\nfunction deleteEntry(key) {\n  const target = toRaw(this);\n  const { has: has2, get: get2 } = getProto(target);\n  let hadKey = has2.call(target, key);\n  if (!hadKey) {\n    key = toRaw(key);\n    hadKey = has2.call(target, key);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    checkIdentityKeys(target, has2, key);\n  }\n  const oldValue = get2 ? get2.call(target, key) : void 0;\n  const result = target.delete(key);\n  if (hadKey) {\n    trigger(target, \"delete\", key, void 0, oldValue);\n  }\n  return result;\n}\nfunction clear() {\n  const target = toRaw(this);\n  const hadItems = target.size !== 0;\n  const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n  const result = target.clear();\n  if (hadItems) {\n    trigger(target, \"clear\", void 0, void 0, oldTarget);\n  }\n  return result;\n}\nfunction createForEach(isReadonly, isShallow) {\n  return function forEach(callback, thisArg) {\n    const observed = this;\n    const target = observed[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    !isReadonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n    return target.forEach((value, key) => {\n      return callback.call(thisArg, wrap(value), wrap(key), observed);\n    });\n  };\n}\nfunction createIterableMethod(method, isReadonly, isShallow) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    !isReadonly && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations() {\n  const mutableInstrumentations2 = {\n    get(key) {\n      return get(this, key);\n    },\n    get size() {\n      return size(this);\n    },\n    has,\n    add,\n    set,\n    delete: deleteEntry,\n    clear,\n    forEach: createForEach(false, false)\n  };\n  const shallowInstrumentations2 = {\n    get(key) {\n      return get(this, key, false, true);\n    },\n    get size() {\n      return size(this);\n    },\n    has,\n    add,\n    set,\n    delete: deleteEntry,\n    clear,\n    forEach: createForEach(false, true)\n  };\n  const readonlyInstrumentations2 = {\n    get(key) {\n      return get(this, key, true);\n    },\n    get size() {\n      return size(this, true);\n    },\n    has(key) {\n      return has.call(this, key, true);\n    },\n    add: createReadonlyMethod(\"add\"),\n    set: createReadonlyMethod(\"set\"),\n    delete: createReadonlyMethod(\"delete\"),\n    clear: createReadonlyMethod(\"clear\"),\n    forEach: createForEach(true, false)\n  };\n  const shallowReadonlyInstrumentations2 = {\n    get(key) {\n      return get(this, key, true, true);\n    },\n    get size() {\n      return size(this, true);\n    },\n    has(key) {\n      return has.call(this, key, true);\n    },\n    add: createReadonlyMethod(\"add\"),\n    set: createReadonlyMethod(\"set\"),\n    delete: createReadonlyMethod(\"delete\"),\n    clear: createReadonlyMethod(\"clear\"),\n    forEach: createForEach(true, true)\n  };\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    mutableInstrumentations2[method] = createIterableMethod(method, false, false);\n    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);\n    shallowInstrumentations2[method] = createIterableMethod(method, false, true);\n    shallowReadonlyInstrumentations2[method] = createIterableMethod(\n      method,\n      true,\n      true\n    );\n  });\n  return [\n    mutableInstrumentations2,\n    readonlyInstrumentations2,\n    shallowInstrumentations2,\n    shallowReadonlyInstrumentations2\n  ];\n}\nconst [\n  mutableInstrumentations,\n  readonlyInstrumentations,\n  shallowInstrumentations,\n  shallowReadonlyInstrumentations\n] = /* @__PURE__ */ createInstrumentations();\nfunction createInstrumentationGetter(isReadonly, shallow) {\n  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has2, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has2.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`value cannot be made reactive: ${String(target)}`);\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nconst COMPUTED_SIDE_EFFECT_WARN = `Computed is still dirty after getter evaluation, likely because a computed is mutating its own dependency in its getter. State mutations in computed getters should be avoided.  Check the docs for more details: https://vuejs.org/guide/essentials/computed.html#getters-should-be-side-effect-free`;\nclass ComputedRefImpl {\n  constructor(getter, _setter, isReadonly, isSSR) {\n    this.getter = getter;\n    this._setter = _setter;\n    this.dep = void 0;\n    this.__v_isRef = true;\n    this[\"__v_isReadonly\"] = false;\n    this.effect = new ReactiveEffect(\n      () => getter(this._value),\n      () => triggerRefValue(\n        this,\n        this.effect._dirtyLevel === 2 ? 2 : 3\n      )\n    );\n    this.effect.computed = this;\n    this.effect.active = this._cacheable = !isSSR;\n    this[\"__v_isReadonly\"] = isReadonly;\n  }\n  get value() {\n    const self = toRaw(this);\n    if ((!self._cacheable || self.effect.dirty) && hasChanged(self._value, self._value = self.effect.run())) {\n      triggerRefValue(self, 4);\n    }\n    trackRefValue(self);\n    if (self.effect._dirtyLevel >= 2) {\n      if (!!(process.env.NODE_ENV !== \"production\") && this._warnRecursive) {\n        warn(COMPUTED_SIDE_EFFECT_WARN, `\n\ngetter: `, this.getter);\n      }\n      triggerRefValue(self, 2);\n    }\n    return self._value;\n  }\n  set value(newValue) {\n    this._setter(newValue);\n  }\n  // #region polyfill _dirty for backward compatibility third party code for Vue <= 3.3.x\n  get _dirty() {\n    return this.effect.dirty;\n  }\n  set _dirty(v) {\n    this.effect.dirty = v;\n  }\n  // #endregion\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  const onlyGetter = isFunction(getterOrOptions);\n  if (onlyGetter) {\n    getter = getterOrOptions;\n    setter = !!(process.env.NODE_ENV !== \"production\") ? () => {\n      warn(\"Write operation failed: computed value is readonly\");\n    } : NOOP;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.effect.onTrack = debugOptions.onTrack;\n    cRef.effect.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nfunction trackRefValue(ref2) {\n  var _a;\n  if (shouldTrack && activeEffect) {\n    ref2 = toRaw(ref2);\n    trackEffect(\n      activeEffect,\n      (_a = ref2.dep) != null ? _a : ref2.dep = createDep(\n        () => ref2.dep = void 0,\n        ref2 instanceof ComputedRefImpl ? ref2 : void 0\n      ),\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target: ref2,\n        type: \"get\",\n        key: \"value\"\n      } : void 0\n    );\n  }\n}\nfunction triggerRefValue(ref2, dirtyLevel = 4, newVal) {\n  ref2 = toRaw(ref2);\n  const dep = ref2.dep;\n  if (dep) {\n    triggerEffects(\n      dep,\n      dirtyLevel,\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: newVal\n      } : void 0\n    );\n  }\n}\nfunction isRef(r) {\n  return !!(r && r.__v_isRef === true);\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, __v_isShallow) {\n    this.__v_isShallow = __v_isShallow;\n    this.dep = void 0;\n    this.__v_isRef = true;\n    this._rawValue = __v_isShallow ? value : toRaw(value);\n    this._value = __v_isShallow ? value : toReactive(value);\n  }\n  get value() {\n    trackRefValue(this);\n    return this._value;\n  }\n  set value(newVal) {\n    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);\n    newVal = useDirectValue ? newVal : toRaw(newVal);\n    if (hasChanged(newVal, this._rawValue)) {\n      this._rawValue = newVal;\n      this._value = useDirectValue ? newVal : toReactive(newVal);\n      triggerRefValue(this, 4, newVal);\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  triggerRefValue(ref2, 4, !!(process.env.NODE_ENV !== \"production\") ? ref2.value : void 0);\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this.dep = void 0;\n    this.__v_isRef = true;\n    const { get, set } = factory(\n      () => trackRefValue(this),\n      () => triggerRefValue(this)\n    );\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this.__v_isRef = true;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this.__v_isRef = true;\n    this.__v_isReadonly = true;\n  }\n  get value() {\n    return this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nconst deferredComputed = computed;\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\"\n};\n\nexport { EffectScope, ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, computed, customRef, deferredComputed, effect, effectScope, enableTracking, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, pauseScheduling, pauseTracking, proxyRefs, reactive, readonly, ref, resetScheduling, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, toValue, track, trigger, triggerRef, unref };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ref } from '@vue/reactivity';\nexport const activeElement = ref(undefined);\nexport const setActiveElement = (val) => (activeElement.value = val);\n//# sourceMappingURL=activeElement.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { renderer, createShader } from '../lightningInit.js';\nimport Children from './children.js';\nimport States from './states.js';\nimport calculateFlex from '../flex.js';\nimport { log, isArray, isNumber, isFunc, keyExists, flattenStyles, } from '../utils.js';\nimport { config } from '../config.js';\nimport { setActiveElement } from '../../vue/activeElement.js';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nconst { animationSettings: defaultAnimationSettings } = config;\nconst layoutQueue = [];\nlet queueLayout = true;\nfunction convertEffectsToShader(styleEffects) {\n    const effects = [];\n    for (const [type, props] of Object.entries(styleEffects)) {\n        effects.push({ type, props });\n    }\n    return createShader('DynamicShader', { effects: effects });\n}\nfunction borderAccessor(direction = '') {\n    return {\n        set(value) {\n            // Format: width || { width, color }\n            if (isNumber(value)) {\n                value = { width: value, color: 0x000000ff };\n            }\n            this.effects = {\n                ...(this.effects || {}),\n                ...{ [`border${direction}`]: value },\n            };\n            this[`_border${direction}`] = value;\n        },\n        get() {\n            return this[`_border${direction}`];\n        },\n    };\n}\nconst LightningRendererNumberProps = [\n    'alpha',\n    'color',\n    'colorTop',\n    'colorRight',\n    'colorLeft',\n    'colorBottom',\n    'colorTl',\n    'colorTr',\n    'colorBl',\n    'colorBr',\n    'height',\n    'fontSize',\n    'lineHeight',\n    'mount',\n    'mountX',\n    'mountY',\n    'pivot',\n    'pivotX',\n    'pivotY',\n    'rotation',\n    'scale',\n    'width',\n    'worldX',\n    'worldY',\n    'x',\n    'y',\n    'zIndex',\n    'zIndexLocked',\n];\nconst LightningRendererNonAnimatingProps = [\n    'autosize',\n    'clipping',\n    'contain',\n    'fontFamily',\n    'fontStretch',\n    'fontStyle',\n    'fontWeight',\n    'letterSpacing',\n    'maxLines',\n    'offsetY',\n    'overflowSuffix',\n    'rtt',\n    'scrollable',\n    'scrollY',\n    'src',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'textOverflow',\n    'texture',\n    'verticalAlign',\n    'wordWrap',\n];\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nexport class ElementNode extends Object {\n    id;\n    debug;\n    name;\n    lng;\n    renderer;\n    selected;\n    autofocus;\n    flexItem;\n    flexOrder;\n    flexBoundary; // default is undefined - contained for flex calculated size\n    _queueDelete;\n    forwardFocus;\n    _undoStyles;\n    _renderProps;\n    _effects;\n    _parent;\n    _shader;\n    _style;\n    _states;\n    _events;\n    _animationSettings;\n    _borderRadius;\n    _border;\n    _borderLeft;\n    _borderRight;\n    _borderTop;\n    _borderBottom;\n    _animationQueue = [];\n    _animationQueueSettings;\n    _animationRunning = false;\n    children;\n    constructor(name) {\n        super();\n        this.name = name;\n        this._renderProps = {};\n        this.children = new Children(this);\n    }\n    get effects() {\n        return this._effects;\n    }\n    set effects(v) {\n        this._effects = v;\n        if (this.lng) {\n            this.shader = convertEffectsToShader(v);\n        }\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(p) {\n        this._parent = p;\n        if (this.lng) {\n            this.lng.parent = p?.lng ?? null;\n        }\n    }\n    get shader() {\n        return this._shader;\n    }\n    set shader(v) {\n        if (isArray(v)) {\n            this._shader = createShader(...v);\n        }\n        else {\n            this._shader = v;\n        }\n        this._sendToLightning('shader', this._shader);\n    }\n    _sendToLightningAnimatable(name, value) {\n        if (this.lng) {\n            if (config.animationsEnabled &&\n                this.transition &&\n                (this.transition === true || this.transition[name])) {\n                const animationSettings = this.transition === true || this.transition[name] === true\n                    ? undefined\n                    : this.transition[name];\n                return this.animate({ [name]: value }, animationSettings).start();\n            }\n            this.lng[name] = value;\n        }\n        else {\n            this._renderProps[name] = value;\n        }\n    }\n    _sendToLightning(name, value) {\n        if (this.lng) {\n            this.lng[name] = value;\n        }\n        else {\n            this._renderProps[name] = value;\n        }\n    }\n    animate(props, animationSettings) {\n        assertTruthy(this.lng, 'Node must be rendered before animating');\n        return this.lng.animate(props, animationSettings || this.animationSettings);\n    }\n    chain(props, animationSettings) {\n        if (this._animationRunning) {\n            this._animationQueue = [];\n            this._animationRunning = false;\n        }\n        if (animationSettings) {\n            this._animationQueueSettings = animationSettings;\n        }\n        else if (!this._animationQueueSettings) {\n            this._animationQueueSettings =\n                animationSettings || this.animationSettings;\n        }\n        animationSettings = animationSettings || this._animationQueueSettings;\n        this._animationQueue.push({ props, animationSettings });\n        return this;\n    }\n    async start() {\n        let animation = this._animationQueue.shift();\n        while (animation) {\n            this._animationRunning = true;\n            await this.animate(animation.props, animation.animationSettings)\n                .start()\n                .waitUntilStopped();\n            animation = this._animationQueue.shift();\n        }\n        this._animationRunning = false;\n        this._animationQueueSettings = undefined;\n    }\n    setFocus() {\n        if (this.lng) {\n            // can be 0\n            if (this.forwardFocus !== undefined) {\n                if (isFunc(this.forwardFocus)) {\n                    if (this.forwardFocus.call(this, this) !== false) {\n                        return;\n                    }\n                }\n                else {\n                    const focusedIndex = typeof this.forwardFocus === 'number' ? this.forwardFocus : null;\n                    if (focusedIndex !== null && focusedIndex < this.children.length) {\n                        const child = this.children[focusedIndex];\n                        child instanceof ElementNode && child.setFocus();\n                        return;\n                    }\n                }\n            }\n            // Delay setting focus so children can render (useful for Row + Column)\n            queueMicrotask(() => setActiveElement(this));\n        }\n        else {\n            this.autofocus = true;\n        }\n    }\n    isTextNode() {\n        return this.name === 'text';\n    }\n    _layoutOnLoad() {\n        this.lng.on('loaded', (_node, loadedPayload) => {\n            const { dimensions } = loadedPayload;\n            this.parent.updateLayout(this, dimensions);\n        });\n    }\n    getText() {\n        return this.children.map((c) => c.text).join('');\n    }\n    destroy() {\n        if (this._queueDelete) {\n            this.lng?.destroy();\n        }\n    }\n    // Must be set before render\n    set onEvents(events) {\n        this._events = events;\n    }\n    get onEvents() {\n        return this._events || [];\n    }\n    set style(values) {\n        if (isArray(values)) {\n            this._style = flattenStyles(values);\n        }\n        else {\n            this._style = values;\n        }\n        // Keys set in JSX are more important\n        for (const key in this._style) {\n            // be careful of 0 values\n            if (this[key] === undefined) {\n                this[key] = this._style[key];\n            }\n        }\n    }\n    get style() {\n        return this._style;\n    }\n    get hasChildren() {\n        return this.children.length > 0;\n    }\n    getChildById(id) {\n        return this.children.find((c) => c.id === id);\n    }\n    searchChildrenById(id) {\n        // traverse all the childrens children\n        for (let i = 0; i < this.children.length; i++) {\n            const child = this.children[i];\n            if (child instanceof ElementNode) {\n                if (child.id === id) {\n                    return child;\n                }\n                const found = child.searchChildrenById(id);\n                if (found) {\n                    return found;\n                }\n            }\n        }\n    }\n    set states(states) {\n        this._states = new States(this._stateChanged.bind(this), states);\n        if (this.lng) {\n            this._stateChanged();\n        }\n    }\n    get states() {\n        this._states = this._states || new States(this._stateChanged.bind(this));\n        return this._states;\n    }\n    get animationSettings() {\n        return this._animationSettings || defaultAnimationSettings;\n    }\n    set animationSettings(animationSettings) {\n        this._animationSettings = animationSettings;\n    }\n    requiresLayout() {\n        return this.display === 'flex' || this.onBeforeLayout;\n    }\n    updateLayout(child, dimensions) {\n        if (this.hasChildren) {\n            log('Layout: ', this);\n            let changedLayout = false;\n            if (isFunc(this.onBeforeLayout)) {\n                changedLayout = this.onBeforeLayout.call(this, this, child, dimensions);\n            }\n            if (this.display === 'flex') {\n                if (calculateFlex(this) || changedLayout) {\n                    this.parent?.updateLayout();\n                }\n            }\n            else if (changedLayout) {\n                this.parent?.updateLayout();\n            }\n            isFunc(this.onLayout) &&\n                this.onLayout.call(this, this, child, dimensions);\n        }\n    }\n    _stateChanged() {\n        log('State Changed: ', this, this.states);\n        if (this.forwardStates) {\n            // apply states to children first\n            const states = this.states.slice();\n            this.children.forEach((c) => (c.states = states));\n        }\n        const states = this.states;\n        if (this._undoStyles || (this.style && keyExists(this.style, states))) {\n            this._undoStyles = this._undoStyles || [];\n            const stylesToUndo = {};\n            this._undoStyles.forEach((styleKey) => {\n                stylesToUndo[styleKey] = this.style[styleKey];\n            });\n            const newStyles = states.reduce((acc, state) => {\n                const styles = this.style[state];\n                if (styles) {\n                    acc = {\n                        ...acc,\n                        ...styles,\n                    };\n                }\n                return acc;\n            }, {});\n            this._undoStyles = Object.keys(newStyles);\n            // Apply transition first\n            if (newStyles.transition !== undefined) {\n                this.transition = newStyles.transition;\n            }\n            // Apply the styles\n            Object.assign(this, stylesToUndo, newStyles);\n        }\n    }\n    render() {\n        // Elements are rendered from the outside in, then `insert`ed from the inside out.\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const node = this;\n        const parent = this.parent;\n        if (!parent) {\n            console.warn('Parent not set - no node created for: ', this);\n            return;\n        }\n        if (!parent.lng) {\n            console.warn('Parent not rendered yet: ', this);\n            return;\n        }\n        if (this.lng) {\n            console.warn('Node already rendered: ', this);\n            return;\n        }\n        if (parent.requiresLayout() && layoutQueue.indexOf(parent) === -1) {\n            layoutQueue.push(parent);\n            if (queueLayout) {\n                queueLayout = false;\n                queueMicrotask(() => {\n                    queueLayout = true;\n                    while (layoutQueue.length) {\n                        const n = layoutQueue.pop();\n                        n.updateLayout();\n                    }\n                });\n            }\n        }\n        if (this.states.length) {\n            this._stateChanged();\n        }\n        const props = node._renderProps;\n        props.x = props.x || 0;\n        props.y = props.y || 0;\n        if (parent.lng) {\n            props.parent = parent.lng;\n        }\n        if (node._effects) {\n            this.shader = convertEffectsToShader(node._effects);\n        }\n        if (node.isTextNode()) {\n            if (config.fontSettings) {\n                for (const key in config.fontSettings) {\n                    if (props[key] === undefined) {\n                        props[key] = config.fontSettings[key];\n                    }\n                }\n            }\n            props.text = node.getText();\n            // contain is either width or both\n            if (props.contain) {\n                if (!props.width) {\n                    props.width =\n                        (parent.width || 0) - props.x - (props.marginRight || 0);\n                }\n                if (props.contain === 'both' && !props.height && !props.maxLines) {\n                    props.height =\n                        (parent.height || 0) - props.y - (props.marginBottom || 0);\n                }\n                else if (props.maxLines === 1) {\n                    props.height = (props.height ||\n                        props.lineHeight ||\n                        props.fontSize);\n                }\n            }\n            log('Rendering: ', this, props);\n            node.lng = renderer.createTextNode(props);\n            if (parent.requiresLayout() && (!props.width || !props.height)) {\n                node._layoutOnLoad();\n            }\n        }\n        else {\n            // If its not an image or texture apply some defaults\n            if (!props.texture) {\n                // Set width and height to parent less offset\n                if (isNaN(props.width)) {\n                    props.width = (parent.width || 0) - props.x;\n                }\n                if (isNaN(props.height)) {\n                    props.height = (parent.height || 0) - props.y;\n                }\n                if (!props.color && !props.src) {\n                    // Default color to transparent - If you later set a src, you'll need\n                    // to set color '#ffffffff'\n                    props.color = 0x00000000;\n                }\n            }\n            log('Rendering: ', this, props);\n            node.lng = renderer.createNode(props);\n        }\n        if (props.autosize && parent.requiresLayout()) {\n            node._layoutOnLoad();\n        }\n        if (node.onFail) {\n            node.lng.on('failed', node.onFail);\n        }\n        if (node.onLoad) {\n            node.lng.on('loaded', node.onLoad);\n        }\n        isFunc(this.onCreate) && this.onCreate.call(this, node);\n        node.onEvents.forEach(([name, handler]) => {\n            node.lng?.on(name, (inode, data) => handler(node, data));\n        });\n        // L3 Inspector adds div to the lng object\n        //@ts-expect-error - div is not in the typings\n        if (node.lng.div) {\n            //@ts-expect-error - div is not in the typings\n            node.lng.div.solid = node;\n        }\n        if (node.name !== 'text') {\n            node.children.forEach((c) => {\n                if (c.render) {\n                    c.render();\n                }\n                else if (c.text !== '') {\n                    // Solid Show uses an empty text node as a placeholder\n                    console.warn('TextNode outside of <Text>: ', c);\n                }\n            });\n        }\n        node.autofocus && node.setFocus();\n        // clean up after first render;\n        this._renderProps = {};\n    }\n}\nfor (const key of LightningRendererNumberProps) {\n    Object.defineProperty(ElementNode.prototype, key, {\n        get() {\n            return this.lng ? this.lng[key] : this._renderProps[key];\n        },\n        set(v) {\n            this._sendToLightningAnimatable(key, v);\n        },\n    });\n}\nfor (const key of LightningRendererNonAnimatingProps) {\n    Object.defineProperty(ElementNode.prototype, key, {\n        get() {\n            return this.lng ? this.lng[key] : this._renderProps[key];\n        },\n        set(v) {\n            this._sendToLightning(key, v);\n        },\n    });\n}\n// Add Border Helpers\nObject.defineProperties(ElementNode.prototype, {\n    borderRadius: {\n        set(radius) {\n            this._borderRadius = radius;\n            this.effects = {\n                ...(this.effects || {}),\n                ...{ radius: { radius } },\n            };\n        },\n        get() {\n            return this._borderRadius;\n        },\n    },\n    border: borderAccessor(),\n    borderLeft: borderAccessor('Left'),\n    borderRight: borderAccessor('Right'),\n    borderTop: borderAccessor('Top'),\n    borderBottom: borderAccessor('Bottom'),\n});\nObject.defineProperties(ElementNode.prototype, {\n    linearGradient: {\n        set(props = {}) {\n            this._linearGradient = props;\n            this.effects = {\n                ...(this.effects || {}),\n                ...{ linearGradient: props },\n            };\n        },\n        get() {\n            return this._linearGradient;\n        },\n    },\n});\n//# sourceMappingURL=elementNode.js.map","/**\n* @vue/runtime-core v3.4.26\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { pauseTracking, resetTracking, isRef, toRaw, shallowReadonly, isShallow, isReactive, ReactiveEffect, getCurrentScope, ref, track, reactive, shallowReactive, trigger, isProxy, proxyRefs, markRaw, EffectScope, computed as computed$1, customRef, isReadonly } from '@vue/reactivity';\nexport { EffectScope, ReactiveEffect, TrackOpTypes, TriggerOpTypes, customRef, effect, effectScope, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, proxyRefs, reactive, readonly, ref, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, toValue, triggerRef, unref } from '@vue/reactivity';\nimport { isString, isFunction, isPromise, isArray, NOOP, getGlobalThis, extend, EMPTY_OBJ, toHandlerKey, looseToNumber, hyphenate, camelize, isObject, isOn, hasOwn, isModelListener, capitalize, toNumber, hasChanged, remove, isSet, isMap, isPlainObject, isBuiltInDirective, invokeArrayFns, isRegExp, isGloballyAllowed, NO, isReservedProp, EMPTY_ARR, toRawType, makeMap, def, normalizeClass, stringifyStyle, normalizeStyle, isKnownSvgAttr, isBooleanAttr, isKnownHtmlAttr, includeBooleanAttr, isRenderableAttrValue } from '@vue/shared';\nexport { camelize, capitalize, normalizeClass, normalizeProps, normalizeStyle, toDisplayString, toHandlerKey } from '@vue/shared';\n\nconst stack = [];\nfunction pushWarningContext(vnode) {\n  stack.push(vnode);\n}\nfunction popWarningContext() {\n  stack.pop();\n}\nfunction warn$1(msg, ...args) {\n  pauseTracking();\n  const instance = stack.length ? stack[stack.length - 1].component : null;\n  const appWarnHandler = instance && instance.appContext.config.warnHandler;\n  const trace = getComponentTrace();\n  if (appWarnHandler) {\n    callWithErrorHandling(\n      appWarnHandler,\n      instance,\n      11,\n      [\n        msg + args.map((a) => {\n          var _a, _b;\n          return (_b = (_a = a.toString) == null ? void 0 : _a.call(a)) != null ? _b : JSON.stringify(a);\n        }).join(\"\"),\n        instance && instance.proxy,\n        trace.map(\n          ({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`\n        ).join(\"\\n\"),\n        trace\n      ]\n    );\n  } else {\n    const warnArgs = [`[Vue warn]: ${msg}`, ...args];\n    if (trace.length && // avoid spamming console during tests\n    true) {\n      warnArgs.push(`\n`, ...formatTrace(trace));\n    }\n    console.warn(...warnArgs);\n  }\n  resetTracking();\n}\nfunction getComponentTrace() {\n  let currentVNode = stack[stack.length - 1];\n  if (!currentVNode) {\n    return [];\n  }\n  const normalizedStack = [];\n  while (currentVNode) {\n    const last = normalizedStack[0];\n    if (last && last.vnode === currentVNode) {\n      last.recurseCount++;\n    } else {\n      normalizedStack.push({\n        vnode: currentVNode,\n        recurseCount: 0\n      });\n    }\n    const parentInstance = currentVNode.component && currentVNode.component.parent;\n    currentVNode = parentInstance && parentInstance.vnode;\n  }\n  return normalizedStack;\n}\nfunction formatTrace(trace) {\n  const logs = [];\n  trace.forEach((entry, i) => {\n    logs.push(...i === 0 ? [] : [`\n`], ...formatTraceEntry(entry));\n  });\n  return logs;\n}\nfunction formatTraceEntry({ vnode, recurseCount }) {\n  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\n  const isRoot = vnode.component ? vnode.component.parent == null : false;\n  const open = ` at <${formatComponentName(\n    vnode.component,\n    vnode.type,\n    isRoot\n  )}`;\n  const close = `>` + postfix;\n  return vnode.props ? [open, ...formatProps(vnode.props), close] : [open + close];\n}\nfunction formatProps(props) {\n  const res = [];\n  const keys = Object.keys(props);\n  keys.slice(0, 3).forEach((key) => {\n    res.push(...formatProp(key, props[key]));\n  });\n  if (keys.length > 3) {\n    res.push(` ...`);\n  }\n  return res;\n}\nfunction formatProp(key, value, raw) {\n  if (isString(value)) {\n    value = JSON.stringify(value);\n    return raw ? value : [`${key}=${value}`];\n  } else if (typeof value === \"number\" || typeof value === \"boolean\" || value == null) {\n    return raw ? value : [`${key}=${value}`];\n  } else if (isRef(value)) {\n    value = formatProp(key, toRaw(value.value), true);\n    return raw ? value : [`${key}=Ref<`, value, `>`];\n  } else if (isFunction(value)) {\n    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\n  } else {\n    value = toRaw(value);\n    return raw ? value : [`${key}=`, value];\n  }\n}\nfunction assertNumber(val, type) {\n  if (!!!(process.env.NODE_ENV !== \"production\"))\n    return;\n  if (val === void 0) {\n    return;\n  } else if (typeof val !== \"number\") {\n    warn$1(`${type} is not a valid number - got ${JSON.stringify(val)}.`);\n  } else if (isNaN(val)) {\n    warn$1(`${type} is NaN - the duration expression might be incorrect.`);\n  }\n}\n\nconst ErrorCodes = {\n  \"SETUP_FUNCTION\": 0,\n  \"0\": \"SETUP_FUNCTION\",\n  \"RENDER_FUNCTION\": 1,\n  \"1\": \"RENDER_FUNCTION\",\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\",\n  \"NATIVE_EVENT_HANDLER\": 5,\n  \"5\": \"NATIVE_EVENT_HANDLER\",\n  \"COMPONENT_EVENT_HANDLER\": 6,\n  \"6\": \"COMPONENT_EVENT_HANDLER\",\n  \"VNODE_HOOK\": 7,\n  \"7\": \"VNODE_HOOK\",\n  \"DIRECTIVE_HOOK\": 8,\n  \"8\": \"DIRECTIVE_HOOK\",\n  \"TRANSITION_HOOK\": 9,\n  \"9\": \"TRANSITION_HOOK\",\n  \"APP_ERROR_HANDLER\": 10,\n  \"10\": \"APP_ERROR_HANDLER\",\n  \"APP_WARN_HANDLER\": 11,\n  \"11\": \"APP_WARN_HANDLER\",\n  \"FUNCTION_REF\": 12,\n  \"12\": \"FUNCTION_REF\",\n  \"ASYNC_COMPONENT_LOADER\": 13,\n  \"13\": \"ASYNC_COMPONENT_LOADER\",\n  \"SCHEDULER\": 14,\n  \"14\": \"SCHEDULER\"\n};\nconst ErrorTypeStrings$1 = {\n  [\"sp\"]: \"serverPrefetch hook\",\n  [\"bc\"]: \"beforeCreate hook\",\n  [\"c\"]: \"created hook\",\n  [\"bm\"]: \"beforeMount hook\",\n  [\"m\"]: \"mounted hook\",\n  [\"bu\"]: \"beforeUpdate hook\",\n  [\"u\"]: \"updated\",\n  [\"bum\"]: \"beforeUnmount hook\",\n  [\"um\"]: \"unmounted hook\",\n  [\"a\"]: \"activated hook\",\n  [\"da\"]: \"deactivated hook\",\n  [\"ec\"]: \"errorCaptured hook\",\n  [\"rtc\"]: \"renderTracked hook\",\n  [\"rtg\"]: \"renderTriggered hook\",\n  [0]: \"setup function\",\n  [1]: \"render function\",\n  [2]: \"watcher getter\",\n  [3]: \"watcher callback\",\n  [4]: \"watcher cleanup function\",\n  [5]: \"native event handler\",\n  [6]: \"component event handler\",\n  [7]: \"vnode hook\",\n  [8]: \"directive hook\",\n  [9]: \"transition hook\",\n  [10]: \"app errorHandler\",\n  [11]: \"app warnHandler\",\n  [12]: \"ref function\",\n  [13]: \"async component loader\",\n  [14]: \"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core .\"\n};\nfunction callWithErrorHandling(fn, instance, type, args) {\n  try {\n    return args ? fn(...args) : fn();\n  } catch (err) {\n    handleError(err, instance, type);\n  }\n}\nfunction callWithAsyncErrorHandling(fn, instance, type, args) {\n  if (isFunction(fn)) {\n    const res = callWithErrorHandling(fn, instance, type, args);\n    if (res && isPromise(res)) {\n      res.catch((err) => {\n        handleError(err, instance, type);\n      });\n    }\n    return res;\n  }\n  if (isArray(fn)) {\n    const values = [];\n    for (let i = 0; i < fn.length; i++) {\n      values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));\n    }\n    return values;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `Invalid value type passed to callWithAsyncErrorHandling(): ${typeof fn}`\n    );\n  }\n}\nfunction handleError(err, instance, type, throwInDev = true) {\n  const contextVNode = instance ? instance.vnode : null;\n  if (instance) {\n    let cur = instance.parent;\n    const exposedInstance = instance.proxy;\n    const errorInfo = !!(process.env.NODE_ENV !== \"production\") ? ErrorTypeStrings$1[type] : `https://vuejs.org/error-reference/#runtime-${type}`;\n    while (cur) {\n      const errorCapturedHooks = cur.ec;\n      if (errorCapturedHooks) {\n        for (let i = 0; i < errorCapturedHooks.length; i++) {\n          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {\n            return;\n          }\n        }\n      }\n      cur = cur.parent;\n    }\n    const appErrorHandler = instance.appContext.config.errorHandler;\n    if (appErrorHandler) {\n      pauseTracking();\n      callWithErrorHandling(\n        appErrorHandler,\n        null,\n        10,\n        [err, exposedInstance, errorInfo]\n      );\n      resetTracking();\n      return;\n    }\n  }\n  logError(err, type, contextVNode, throwInDev);\n}\nfunction logError(err, type, contextVNode, throwInDev = true) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const info = ErrorTypeStrings$1[type];\n    if (contextVNode) {\n      pushWarningContext(contextVNode);\n    }\n    warn$1(`Unhandled error${info ? ` during execution of ${info}` : ``}`);\n    if (contextVNode) {\n      popWarningContext();\n    }\n    if (throwInDev) {\n      throw err;\n    } else {\n      console.error(err);\n    }\n  } else {\n    console.error(err);\n  }\n}\n\nlet isFlushing = false;\nlet isFlushPending = false;\nconst queue = [];\nlet flushIndex = 0;\nconst pendingPostFlushCbs = [];\nlet activePostFlushCbs = null;\nlet postFlushIndex = 0;\nconst resolvedPromise = /* @__PURE__ */ Promise.resolve();\nlet currentFlushPromise = null;\nconst RECURSION_LIMIT = 100;\nfunction nextTick(fn) {\n  const p = currentFlushPromise || resolvedPromise;\n  return fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\nfunction findInsertionIndex(id) {\n  let start = flushIndex + 1;\n  let end = queue.length;\n  while (start < end) {\n    const middle = start + end >>> 1;\n    const middleJob = queue[middle];\n    const middleJobId = getId(middleJob);\n    if (middleJobId < id || middleJobId === id && middleJob.pre) {\n      start = middle + 1;\n    } else {\n      end = middle;\n    }\n  }\n  return start;\n}\nfunction queueJob(job) {\n  if (!queue.length || !queue.includes(\n    job,\n    isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex\n  )) {\n    if (job.id == null) {\n      queue.push(job);\n    } else {\n      queue.splice(findInsertionIndex(job.id), 0, job);\n    }\n    queueFlush();\n  }\n}\nfunction queueFlush() {\n  if (!isFlushing && !isFlushPending) {\n    isFlushPending = true;\n    currentFlushPromise = resolvedPromise.then(flushJobs);\n  }\n}\nfunction invalidateJob(job) {\n  const i = queue.indexOf(job);\n  if (i > flushIndex) {\n    queue.splice(i, 1);\n  }\n}\nfunction queuePostFlushCb(cb) {\n  if (!isArray(cb)) {\n    if (!activePostFlushCbs || !activePostFlushCbs.includes(\n      cb,\n      cb.allowRecurse ? postFlushIndex + 1 : postFlushIndex\n    )) {\n      pendingPostFlushCbs.push(cb);\n    }\n  } else {\n    pendingPostFlushCbs.push(...cb);\n  }\n  queueFlush();\n}\nfunction flushPreFlushCbs(instance, seen, i = isFlushing ? flushIndex + 1 : 0) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  for (; i < queue.length; i++) {\n    const cb = queue[i];\n    if (cb && cb.pre) {\n      if (instance && cb.id !== instance.uid) {\n        continue;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, cb)) {\n        continue;\n      }\n      queue.splice(i, 1);\n      i--;\n      cb();\n    }\n  }\n}\nfunction flushPostFlushCbs(seen) {\n  if (pendingPostFlushCbs.length) {\n    const deduped = [...new Set(pendingPostFlushCbs)].sort(\n      (a, b) => getId(a) - getId(b)\n    );\n    pendingPostFlushCbs.length = 0;\n    if (activePostFlushCbs) {\n      activePostFlushCbs.push(...deduped);\n      return;\n    }\n    activePostFlushCbs = deduped;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      seen = seen || /* @__PURE__ */ new Map();\n    }\n    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, activePostFlushCbs[postFlushIndex])) {\n        continue;\n      }\n      activePostFlushCbs[postFlushIndex]();\n    }\n    activePostFlushCbs = null;\n    postFlushIndex = 0;\n  }\n}\nconst getId = (job) => job.id == null ? Infinity : job.id;\nconst comparator = (a, b) => {\n  const diff = getId(a) - getId(b);\n  if (diff === 0) {\n    if (a.pre && !b.pre)\n      return -1;\n    if (b.pre && !a.pre)\n      return 1;\n  }\n  return diff;\n};\nfunction flushJobs(seen) {\n  isFlushPending = false;\n  isFlushing = true;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  queue.sort(comparator);\n  const check = !!(process.env.NODE_ENV !== \"production\") ? (job) => checkRecursiveUpdates(seen, job) : NOOP;\n  try {\n    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {\n      const job = queue[flushIndex];\n      if (job && job.active !== false) {\n        if (!!(process.env.NODE_ENV !== \"production\") && check(job)) {\n          continue;\n        }\n        callWithErrorHandling(job, null, 14);\n      }\n    }\n  } finally {\n    flushIndex = 0;\n    queue.length = 0;\n    flushPostFlushCbs(seen);\n    isFlushing = false;\n    currentFlushPromise = null;\n    if (queue.length || pendingPostFlushCbs.length) {\n      flushJobs(seen);\n    }\n  }\n}\nfunction checkRecursiveUpdates(seen, fn) {\n  if (!seen.has(fn)) {\n    seen.set(fn, 1);\n  } else {\n    const count = seen.get(fn);\n    if (count > RECURSION_LIMIT) {\n      const instance = fn.ownerInstance;\n      const componentName = instance && getComponentName(instance.type);\n      handleError(\n        `Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,\n        null,\n        10\n      );\n      return true;\n    } else {\n      seen.set(fn, count + 1);\n    }\n  }\n}\n\nlet isHmrUpdating = false;\nconst hmrDirtyComponents = /* @__PURE__ */ new Set();\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  getGlobalThis().__VUE_HMR_RUNTIME__ = {\n    createRecord: tryWrap(createRecord),\n    rerender: tryWrap(rerender),\n    reload: tryWrap(reload)\n  };\n}\nconst map = /* @__PURE__ */ new Map();\nfunction registerHMR(instance) {\n  const id = instance.type.__hmrId;\n  let record = map.get(id);\n  if (!record) {\n    createRecord(id, instance.type);\n    record = map.get(id);\n  }\n  record.instances.add(instance);\n}\nfunction unregisterHMR(instance) {\n  map.get(instance.type.__hmrId).instances.delete(instance);\n}\nfunction createRecord(id, initialDef) {\n  if (map.has(id)) {\n    return false;\n  }\n  map.set(id, {\n    initialDef: normalizeClassComponent(initialDef),\n    instances: /* @__PURE__ */ new Set()\n  });\n  return true;\n}\nfunction normalizeClassComponent(component) {\n  return isClassComponent(component) ? component.__vccOpts : component;\n}\nfunction rerender(id, newRender) {\n  const record = map.get(id);\n  if (!record) {\n    return;\n  }\n  record.initialDef.render = newRender;\n  [...record.instances].forEach((instance) => {\n    if (newRender) {\n      instance.render = newRender;\n      normalizeClassComponent(instance.type).render = newRender;\n    }\n    instance.renderCache = [];\n    isHmrUpdating = true;\n    instance.effect.dirty = true;\n    instance.update();\n    isHmrUpdating = false;\n  });\n}\nfunction reload(id, newComp) {\n  const record = map.get(id);\n  if (!record)\n    return;\n  newComp = normalizeClassComponent(newComp);\n  updateComponentDef(record.initialDef, newComp);\n  const instances = [...record.instances];\n  for (const instance of instances) {\n    const oldComp = normalizeClassComponent(instance.type);\n    if (!hmrDirtyComponents.has(oldComp)) {\n      if (oldComp !== record.initialDef) {\n        updateComponentDef(oldComp, newComp);\n      }\n      hmrDirtyComponents.add(oldComp);\n    }\n    instance.appContext.propsCache.delete(instance.type);\n    instance.appContext.emitsCache.delete(instance.type);\n    instance.appContext.optionsCache.delete(instance.type);\n    if (instance.ceReload) {\n      hmrDirtyComponents.add(oldComp);\n      instance.ceReload(newComp.styles);\n      hmrDirtyComponents.delete(oldComp);\n    } else if (instance.parent) {\n      instance.parent.effect.dirty = true;\n      queueJob(instance.parent.update);\n    } else if (instance.appContext.reload) {\n      instance.appContext.reload();\n    } else if (typeof window !== \"undefined\") {\n      window.location.reload();\n    } else {\n      console.warn(\n        \"[HMR] Root or manually mounted instance modified. Full reload required.\"\n      );\n    }\n  }\n  queuePostFlushCb(() => {\n    for (const instance of instances) {\n      hmrDirtyComponents.delete(\n        normalizeClassComponent(instance.type)\n      );\n    }\n  });\n}\nfunction updateComponentDef(oldComp, newComp) {\n  extend(oldComp, newComp);\n  for (const key in oldComp) {\n    if (key !== \"__file\" && !(key in newComp)) {\n      delete oldComp[key];\n    }\n  }\n}\nfunction tryWrap(fn) {\n  return (id, arg) => {\n    try {\n      return fn(id, arg);\n    } catch (e) {\n      console.error(e);\n      console.warn(\n        `[HMR] Something went wrong during Vue component hot-reload. Full reload required.`\n      );\n    }\n  };\n}\n\nlet devtools$1;\nlet buffer = [];\nlet devtoolsNotInstalled = false;\nfunction emit$1(event, ...args) {\n  if (devtools$1) {\n    devtools$1.emit(event, ...args);\n  } else if (!devtoolsNotInstalled) {\n    buffer.push({ event, args });\n  }\n}\nfunction setDevtoolsHook$1(hook, target) {\n  var _a, _b;\n  devtools$1 = hook;\n  if (devtools$1) {\n    devtools$1.enabled = true;\n    buffer.forEach(({ event, args }) => devtools$1.emit(event, ...args));\n    buffer = [];\n  } else if (\n    // handle late devtools injection - only do this if we are in an actual\n    // browser environment to avoid the timer handle stalling test runner exit\n    // (#4815)\n    typeof window !== \"undefined\" && // some envs mock window but not fully\n    window.HTMLElement && // also exclude jsdom\n    !((_b = (_a = window.navigator) == null ? void 0 : _a.userAgent) == null ? void 0 : _b.includes(\"jsdom\"))\n  ) {\n    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];\n    replay.push((newHook) => {\n      setDevtoolsHook$1(newHook, target);\n    });\n    setTimeout(() => {\n      if (!devtools$1) {\n        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;\n        devtoolsNotInstalled = true;\n        buffer = [];\n      }\n    }, 3e3);\n  } else {\n    devtoolsNotInstalled = true;\n    buffer = [];\n  }\n}\nfunction devtoolsInitApp(app, version) {\n  emit$1(\"app:init\" /* APP_INIT */, app, version, {\n    Fragment,\n    Text,\n    Comment,\n    Static\n  });\n}\nfunction devtoolsUnmountApp(app) {\n  emit$1(\"app:unmount\" /* APP_UNMOUNT */, app);\n}\nconst devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook(\n  \"component:added\" /* COMPONENT_ADDED */\n);\nconst devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook(\"component:updated\" /* COMPONENT_UPDATED */);\nconst _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook(\n  \"component:removed\" /* COMPONENT_REMOVED */\n);\nconst devtoolsComponentRemoved = (component) => {\n  if (devtools$1 && typeof devtools$1.cleanupBuffer === \"function\" && // remove the component if it wasn't buffered\n  !devtools$1.cleanupBuffer(component)) {\n    _devtoolsComponentRemoved(component);\n  }\n};\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction createDevtoolsComponentHook(hook) {\n  return (component) => {\n    emit$1(\n      hook,\n      component.appContext.app,\n      component.uid,\n      component.parent ? component.parent.uid : void 0,\n      component\n    );\n  };\n}\nconst devtoolsPerfStart = /* @__PURE__ */ createDevtoolsPerformanceHook(\n  \"perf:start\" /* PERFORMANCE_START */\n);\nconst devtoolsPerfEnd = /* @__PURE__ */ createDevtoolsPerformanceHook(\n  \"perf:end\" /* PERFORMANCE_END */\n);\nfunction createDevtoolsPerformanceHook(hook) {\n  return (component, type, time) => {\n    emit$1(hook, component.appContext.app, component.uid, component, type, time);\n  };\n}\nfunction devtoolsComponentEmit(component, event, params) {\n  emit$1(\n    \"component:emit\" /* COMPONENT_EMIT */,\n    component.appContext.app,\n    component,\n    event,\n    params\n  );\n}\n\nfunction emit(instance, event, ...rawArgs) {\n  if (instance.isUnmounted)\n    return;\n  const props = instance.vnode.props || EMPTY_OBJ;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const {\n      emitsOptions,\n      propsOptions: [propsOptions]\n    } = instance;\n    if (emitsOptions) {\n      if (!(event in emitsOptions) && true) {\n        if (!propsOptions || !(toHandlerKey(event) in propsOptions)) {\n          warn$1(\n            `Component emitted event \"${event}\" but it is neither declared in the emits option nor as an \"${toHandlerKey(event)}\" prop.`\n          );\n        }\n      } else {\n        const validator = emitsOptions[event];\n        if (isFunction(validator)) {\n          const isValid = validator(...rawArgs);\n          if (!isValid) {\n            warn$1(\n              `Invalid event arguments: event validation failed for event \"${event}\".`\n            );\n          }\n        }\n      }\n    }\n  }\n  let args = rawArgs;\n  const isModelListener = event.startsWith(\"update:\");\n  const modelArg = isModelListener && event.slice(7);\n  if (modelArg && modelArg in props) {\n    const modifiersKey = `${modelArg === \"modelValue\" ? \"model\" : modelArg}Modifiers`;\n    const { number, trim } = props[modifiersKey] || EMPTY_OBJ;\n    if (trim) {\n      args = rawArgs.map((a) => isString(a) ? a.trim() : a);\n    }\n    if (number) {\n      args = rawArgs.map(looseToNumber);\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsComponentEmit(instance, event, args);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const lowerCaseEvent = event.toLowerCase();\n    if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {\n      warn$1(\n        `Event \"${lowerCaseEvent}\" is emitted in component ${formatComponentName(\n          instance,\n          instance.type\n        )} but the handler is registered for \"${event}\". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use \"${hyphenate(\n          event\n        )}\" instead of \"${event}\".`\n      );\n    }\n  }\n  let handlerName;\n  let handler = props[handlerName = toHandlerKey(event)] || // also try camelCase event handler (#2249)\n  props[handlerName = toHandlerKey(camelize(event))];\n  if (!handler && isModelListener) {\n    handler = props[handlerName = toHandlerKey(hyphenate(event))];\n  }\n  if (handler) {\n    callWithAsyncErrorHandling(\n      handler,\n      instance,\n      6,\n      args\n    );\n  }\n  const onceHandler = props[handlerName + `Once`];\n  if (onceHandler) {\n    if (!instance.emitted) {\n      instance.emitted = {};\n    } else if (instance.emitted[handlerName]) {\n      return;\n    }\n    instance.emitted[handlerName] = true;\n    callWithAsyncErrorHandling(\n      onceHandler,\n      instance,\n      6,\n      args\n    );\n  }\n}\nfunction normalizeEmitsOptions(comp, appContext, asMixin = false) {\n  const cache = appContext.emitsCache;\n  const cached = cache.get(comp);\n  if (cached !== void 0) {\n    return cached;\n  }\n  const raw = comp.emits;\n  let normalized = {};\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendEmits = (raw2) => {\n      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);\n      if (normalizedFromExtend) {\n        hasExtends = true;\n        extend(normalized, normalizedFromExtend);\n      }\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendEmits);\n    }\n    if (comp.extends) {\n      extendEmits(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendEmits);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, null);\n    }\n    return null;\n  }\n  if (isArray(raw)) {\n    raw.forEach((key) => normalized[key] = null);\n  } else {\n    extend(normalized, raw);\n  }\n  if (isObject(comp)) {\n    cache.set(comp, normalized);\n  }\n  return normalized;\n}\nfunction isEmitListener(options, key) {\n  if (!options || !isOn(key)) {\n    return false;\n  }\n  key = key.slice(2).replace(/Once$/, \"\");\n  return hasOwn(options, key[0].toLowerCase() + key.slice(1)) || hasOwn(options, hyphenate(key)) || hasOwn(options, key);\n}\n\nlet currentRenderingInstance = null;\nlet currentScopeId = null;\nfunction setCurrentRenderingInstance(instance) {\n  const prev = currentRenderingInstance;\n  currentRenderingInstance = instance;\n  currentScopeId = instance && instance.type.__scopeId || null;\n  return prev;\n}\nfunction pushScopeId(id) {\n  currentScopeId = id;\n}\nfunction popScopeId() {\n  currentScopeId = null;\n}\nconst withScopeId = (_id) => withCtx;\nfunction withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {\n  if (!ctx)\n    return fn;\n  if (fn._n) {\n    return fn;\n  }\n  const renderFnWithContext = (...args) => {\n    if (renderFnWithContext._d) {\n      setBlockTracking(-1);\n    }\n    const prevInstance = setCurrentRenderingInstance(ctx);\n    let res;\n    try {\n      res = fn(...args);\n    } finally {\n      setCurrentRenderingInstance(prevInstance);\n      if (renderFnWithContext._d) {\n        setBlockTracking(1);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentUpdated(ctx);\n    }\n    return res;\n  };\n  renderFnWithContext._n = true;\n  renderFnWithContext._c = true;\n  renderFnWithContext._d = true;\n  return renderFnWithContext;\n}\n\nlet accessedAttrs = false;\nfunction markAttrsAccessed() {\n  accessedAttrs = true;\n}\nfunction renderComponentRoot(instance) {\n  const {\n    type: Component,\n    vnode,\n    proxy,\n    withProxy,\n    propsOptions: [propsOptions],\n    slots,\n    attrs,\n    emit,\n    render,\n    renderCache,\n    props,\n    data,\n    setupState,\n    ctx,\n    inheritAttrs\n  } = instance;\n  const prev = setCurrentRenderingInstance(instance);\n  let result;\n  let fallthroughAttrs;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    accessedAttrs = false;\n  }\n  try {\n    if (vnode.shapeFlag & 4) {\n      const proxyToUse = withProxy || proxy;\n      const thisProxy = !!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup ? new Proxy(proxyToUse, {\n        get(target, key, receiver) {\n          warn$1(\n            `Property '${String(\n              key\n            )}' was accessed via 'this'. Avoid using 'this' in templates.`\n          );\n          return Reflect.get(target, key, receiver);\n        }\n      }) : proxyToUse;\n      result = normalizeVNode(\n        render.call(\n          thisProxy,\n          proxyToUse,\n          renderCache,\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          setupState,\n          data,\n          ctx\n        )\n      );\n      fallthroughAttrs = attrs;\n    } else {\n      const render2 = Component;\n      if (!!(process.env.NODE_ENV !== \"production\") && attrs === props) {\n        markAttrsAccessed();\n      }\n      result = normalizeVNode(\n        render2.length > 1 ? render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          !!(process.env.NODE_ENV !== \"production\") ? {\n            get attrs() {\n              markAttrsAccessed();\n              return shallowReadonly(attrs);\n            },\n            slots,\n            emit\n          } : { attrs, slots, emit }\n        ) : render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          null\n        )\n      );\n      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);\n    }\n  } catch (err) {\n    blockStack.length = 0;\n    handleError(err, instance, 1);\n    result = createVNode(Comment);\n  }\n  let root = result;\n  let setRoot = void 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && result.patchFlag > 0 && result.patchFlag & 2048) {\n    [root, setRoot] = getChildRoot(result);\n  }\n  if (fallthroughAttrs && inheritAttrs !== false) {\n    const keys = Object.keys(fallthroughAttrs);\n    const { shapeFlag } = root;\n    if (keys.length) {\n      if (shapeFlag & (1 | 6)) {\n        if (propsOptions && keys.some(isModelListener)) {\n          fallthroughAttrs = filterModelListeners(\n            fallthroughAttrs,\n            propsOptions\n          );\n        }\n        root = cloneVNode(root, fallthroughAttrs, false, true);\n      } else if (!!(process.env.NODE_ENV !== \"production\") && !accessedAttrs && root.type !== Comment) {\n        const allAttrs = Object.keys(attrs);\n        const eventAttrs = [];\n        const extraAttrs = [];\n        for (let i = 0, l = allAttrs.length; i < l; i++) {\n          const key = allAttrs[i];\n          if (isOn(key)) {\n            if (!isModelListener(key)) {\n              eventAttrs.push(key[2].toLowerCase() + key.slice(3));\n            }\n          } else {\n            extraAttrs.push(key);\n          }\n        }\n        if (extraAttrs.length) {\n          warn$1(\n            `Extraneous non-props attributes (${extraAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`\n          );\n        }\n        if (eventAttrs.length) {\n          warn$1(\n            `Extraneous non-emits event listeners (${eventAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the \"emits\" option.`\n          );\n        }\n      }\n    }\n  }\n  if (vnode.dirs) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Runtime directive used on component with non-element root node. The directives will not function as intended.`\n      );\n    }\n    root = cloneVNode(root, null, false, true);\n    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;\n  }\n  if (vnode.transition) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Component inside <Transition> renders non-element root node that cannot be animated.`\n      );\n    }\n    root.transition = vnode.transition;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && setRoot) {\n    setRoot(root);\n  } else {\n    result = root;\n  }\n  setCurrentRenderingInstance(prev);\n  return result;\n}\nconst getChildRoot = (vnode) => {\n  const rawChildren = vnode.children;\n  const dynamicChildren = vnode.dynamicChildren;\n  const childRoot = filterSingleRoot(rawChildren, false);\n  if (!childRoot) {\n    return [vnode, void 0];\n  } else if (!!(process.env.NODE_ENV !== \"production\") && childRoot.patchFlag > 0 && childRoot.patchFlag & 2048) {\n    return getChildRoot(childRoot);\n  }\n  const index = rawChildren.indexOf(childRoot);\n  const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;\n  const setRoot = (updatedRoot) => {\n    rawChildren[index] = updatedRoot;\n    if (dynamicChildren) {\n      if (dynamicIndex > -1) {\n        dynamicChildren[dynamicIndex] = updatedRoot;\n      } else if (updatedRoot.patchFlag > 0) {\n        vnode.dynamicChildren = [...dynamicChildren, updatedRoot];\n      }\n    }\n  };\n  return [normalizeVNode(childRoot), setRoot];\n};\nfunction filterSingleRoot(children, recurse = true) {\n  let singleRoot;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (isVNode(child)) {\n      if (child.type !== Comment || child.children === \"v-if\") {\n        if (singleRoot) {\n          return;\n        } else {\n          singleRoot = child;\n          if (!!(process.env.NODE_ENV !== \"production\") && recurse && singleRoot.patchFlag > 0 && singleRoot.patchFlag & 2048) {\n            return filterSingleRoot(singleRoot.children);\n          }\n        }\n      }\n    } else {\n      return;\n    }\n  }\n  return singleRoot;\n}\nconst getFunctionalFallthrough = (attrs) => {\n  let res;\n  for (const key in attrs) {\n    if (key === \"class\" || key === \"style\" || isOn(key)) {\n      (res || (res = {}))[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst filterModelListeners = (attrs, props) => {\n  const res = {};\n  for (const key in attrs) {\n    if (!isModelListener(key) || !(key.slice(9) in props)) {\n      res[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst isElementRoot = (vnode) => {\n  return vnode.shapeFlag & (6 | 1) || vnode.type === Comment;\n};\nfunction shouldUpdateComponent(prevVNode, nextVNode, optimized) {\n  const { props: prevProps, children: prevChildren, component } = prevVNode;\n  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;\n  const emits = component.emitsOptions;\n  if (!!(process.env.NODE_ENV !== \"production\") && (prevChildren || nextChildren) && isHmrUpdating) {\n    return true;\n  }\n  if (nextVNode.dirs || nextVNode.transition) {\n    return true;\n  }\n  if (optimized && patchFlag >= 0) {\n    if (patchFlag & 1024) {\n      return true;\n    }\n    if (patchFlag & 16) {\n      if (!prevProps) {\n        return !!nextProps;\n      }\n      return hasPropsChanged(prevProps, nextProps, emits);\n    } else if (patchFlag & 8) {\n      const dynamicProps = nextVNode.dynamicProps;\n      for (let i = 0; i < dynamicProps.length; i++) {\n        const key = dynamicProps[i];\n        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {\n          return true;\n        }\n      }\n    }\n  } else {\n    if (prevChildren || nextChildren) {\n      if (!nextChildren || !nextChildren.$stable) {\n        return true;\n      }\n    }\n    if (prevProps === nextProps) {\n      return false;\n    }\n    if (!prevProps) {\n      return !!nextProps;\n    }\n    if (!nextProps) {\n      return true;\n    }\n    return hasPropsChanged(prevProps, nextProps, emits);\n  }\n  return false;\n}\nfunction hasPropsChanged(prevProps, nextProps, emitsOptions) {\n  const nextKeys = Object.keys(nextProps);\n  if (nextKeys.length !== Object.keys(prevProps).length) {\n    return true;\n  }\n  for (let i = 0; i < nextKeys.length; i++) {\n    const key = nextKeys[i];\n    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction updateHOCHostEl({ vnode, parent }, el) {\n  while (parent) {\n    const root = parent.subTree;\n    if (root.suspense && root.suspense.activeBranch === vnode) {\n      root.el = vnode.el;\n    }\n    if (root === vnode) {\n      (vnode = parent.vnode).el = el;\n      parent = parent.parent;\n    } else {\n      break;\n    }\n  }\n}\n\nconst COMPONENTS = \"components\";\nconst DIRECTIVES = \"directives\";\nfunction resolveComponent(name, maybeSelfReference) {\n  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;\n}\nconst NULL_DYNAMIC_COMPONENT = Symbol.for(\"v-ndc\");\nfunction resolveDynamicComponent(component) {\n  if (isString(component)) {\n    return resolveAsset(COMPONENTS, component, false) || component;\n  } else {\n    return component || NULL_DYNAMIC_COMPONENT;\n  }\n}\nfunction resolveDirective(name) {\n  return resolveAsset(DIRECTIVES, name);\n}\nfunction resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {\n  const instance = currentRenderingInstance || currentInstance;\n  if (instance) {\n    const Component = instance.type;\n    if (type === COMPONENTS) {\n      const selfName = getComponentName(\n        Component,\n        false\n      );\n      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {\n        return Component;\n      }\n    }\n    const res = (\n      // local registration\n      // check instance[type] first which is resolved for options API\n      resolve(instance[type] || Component[type], name) || // global registration\n      resolve(instance.appContext[type], name)\n    );\n    if (!res && maybeSelfReference) {\n      return Component;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && warnMissing && !res) {\n      const extra = type === COMPONENTS ? `\nIf this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.` : ``;\n      warn$1(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);\n    }\n    return res;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `resolve${capitalize(type.slice(0, -1))} can only be used in render() or setup().`\n    );\n  }\n}\nfunction resolve(registry, name) {\n  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);\n}\n\nconst isSuspense = (type) => type.__isSuspense;\nlet suspenseId = 0;\nconst SuspenseImpl = {\n  name: \"Suspense\",\n  // In order to make Suspense tree-shakable, we need to avoid importing it\n  // directly in the renderer. The renderer checks for the __isSuspense flag\n  // on a vnode's type and calls the `process` method, passing in renderer\n  // internals.\n  __isSuspense: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n    if (n1 == null) {\n      mountSuspense(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    } else {\n      if (parentSuspense && parentSuspense.deps > 0 && !n1.suspense.isInFallback) {\n        n2.suspense = n1.suspense;\n        n2.suspense.vnode = n2;\n        n2.el = n1.el;\n        return;\n      }\n      patchSuspense(\n        n1,\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    }\n  },\n  hydrate: hydrateSuspense,\n  create: createSuspenseBoundary,\n  normalize: normalizeSuspenseChildren\n};\nconst Suspense = SuspenseImpl ;\nfunction triggerEvent(vnode, name) {\n  const eventListener = vnode.props && vnode.props[name];\n  if (isFunction(eventListener)) {\n    eventListener();\n  }\n}\nfunction mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n  const {\n    p: patch,\n    o: { createElement }\n  } = rendererInternals;\n  const hiddenContainer = createElement(\"div\");\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    container,\n    hiddenContainer,\n    anchor,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals\n  );\n  patch(\n    null,\n    suspense.pendingBranch = vnode.ssContent,\n    hiddenContainer,\n    null,\n    parentComponent,\n    suspense,\n    namespace,\n    slotScopeIds\n  );\n  if (suspense.deps > 0) {\n    triggerEvent(vnode, \"onPending\");\n    triggerEvent(vnode, \"onFallback\");\n    patch(\n      null,\n      vnode.ssFallback,\n      container,\n      anchor,\n      parentComponent,\n      null,\n      // fallback tree will not have suspense context\n      namespace,\n      slotScopeIds\n    );\n    setActiveBranch(suspense, vnode.ssFallback);\n  } else {\n    suspense.resolve(false, true);\n  }\n}\nfunction patchSuspense(n1, n2, container, anchor, parentComponent, namespace, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {\n  const suspense = n2.suspense = n1.suspense;\n  suspense.vnode = n2;\n  n2.el = n1.el;\n  const newBranch = n2.ssContent;\n  const newFallback = n2.ssFallback;\n  const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;\n  if (pendingBranch) {\n    suspense.pendingBranch = newBranch;\n    if (isSameVNodeType(newBranch, pendingBranch)) {\n      patch(\n        pendingBranch,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else if (isInFallback) {\n        if (!isHydrating) {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      }\n    } else {\n      suspense.pendingId = suspenseId++;\n      if (isHydrating) {\n        suspense.isHydrating = false;\n        suspense.activeBranch = pendingBranch;\n      } else {\n        unmount(pendingBranch, parentComponent, suspense);\n      }\n      suspense.deps = 0;\n      suspense.effects.length = 0;\n      suspense.hiddenContainer = createElement(\"div\");\n      if (isInFallback) {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        } else {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      } else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n        patch(\n          activeBranch,\n          newBranch,\n          container,\n          anchor,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        suspense.resolve(true);\n      } else {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        }\n      }\n    }\n  } else {\n    if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n      patch(\n        activeBranch,\n        newBranch,\n        container,\n        anchor,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      setActiveBranch(suspense, newBranch);\n    } else {\n      triggerEvent(n2, \"onPending\");\n      suspense.pendingBranch = newBranch;\n      if (newBranch.shapeFlag & 512) {\n        suspense.pendingId = newBranch.component.suspenseId;\n      } else {\n        suspense.pendingId = suspenseId++;\n      }\n      patch(\n        null,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else {\n        const { timeout, pendingId } = suspense;\n        if (timeout > 0) {\n          setTimeout(() => {\n            if (suspense.pendingId === pendingId) {\n              suspense.fallback(newFallback);\n            }\n          }, timeout);\n        } else if (timeout === 0) {\n          suspense.fallback(newFallback);\n        }\n      }\n    }\n  }\n}\nlet hasWarned = false;\nfunction createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, namespace, slotScopeIds, optimized, rendererInternals, isHydrating = false) {\n  if (!!(process.env.NODE_ENV !== \"production\") && true && !hasWarned) {\n    hasWarned = true;\n    console[console.info ? \"info\" : \"log\"](\n      `<Suspense> is an experimental feature and its API will likely change.`\n    );\n  }\n  const {\n    p: patch,\n    m: move,\n    um: unmount,\n    n: next,\n    o: { parentNode, remove }\n  } = rendererInternals;\n  let parentSuspenseId;\n  const isSuspensible = isVNodeSuspensible(vnode);\n  if (isSuspensible) {\n    if (parentSuspense && parentSuspense.pendingBranch) {\n      parentSuspenseId = parentSuspense.pendingId;\n      parentSuspense.deps++;\n    }\n  }\n  const timeout = vnode.props ? toNumber(vnode.props.timeout) : void 0;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    assertNumber(timeout, `Suspense timeout`);\n  }\n  const initialAnchor = anchor;\n  const suspense = {\n    vnode,\n    parent: parentSuspense,\n    parentComponent,\n    namespace,\n    container,\n    hiddenContainer,\n    deps: 0,\n    pendingId: suspenseId++,\n    timeout: typeof timeout === \"number\" ? timeout : -1,\n    activeBranch: null,\n    pendingBranch: null,\n    isInFallback: !isHydrating,\n    isHydrating,\n    isUnmounted: false,\n    effects: [],\n    resolve(resume = false, sync = false) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        if (!resume && !suspense.pendingBranch) {\n          throw new Error(\n            `suspense.resolve() is called without a pending branch.`\n          );\n        }\n        if (suspense.isUnmounted) {\n          throw new Error(\n            `suspense.resolve() is called on an already unmounted suspense boundary.`\n          );\n        }\n      }\n      const {\n        vnode: vnode2,\n        activeBranch,\n        pendingBranch,\n        pendingId,\n        effects,\n        parentComponent: parentComponent2,\n        container: container2\n      } = suspense;\n      let delayEnter = false;\n      if (suspense.isHydrating) {\n        suspense.isHydrating = false;\n      } else if (!resume) {\n        delayEnter = activeBranch && pendingBranch.transition && pendingBranch.transition.mode === \"out-in\";\n        if (delayEnter) {\n          activeBranch.transition.afterLeave = () => {\n            if (pendingId === suspense.pendingId) {\n              move(\n                pendingBranch,\n                container2,\n                anchor === initialAnchor ? next(activeBranch) : anchor,\n                0\n              );\n              queuePostFlushCb(effects);\n            }\n          };\n        }\n        if (activeBranch) {\n          if (parentNode(activeBranch.el) !== suspense.hiddenContainer) {\n            anchor = next(activeBranch);\n          }\n          unmount(activeBranch, parentComponent2, suspense, true);\n        }\n        if (!delayEnter) {\n          move(pendingBranch, container2, anchor, 0);\n        }\n      }\n      setActiveBranch(suspense, pendingBranch);\n      suspense.pendingBranch = null;\n      suspense.isInFallback = false;\n      let parent = suspense.parent;\n      let hasUnresolvedAncestor = false;\n      while (parent) {\n        if (parent.pendingBranch) {\n          parent.effects.push(...effects);\n          hasUnresolvedAncestor = true;\n          break;\n        }\n        parent = parent.parent;\n      }\n      if (!hasUnresolvedAncestor && !delayEnter) {\n        queuePostFlushCb(effects);\n      }\n      suspense.effects = [];\n      if (isSuspensible) {\n        if (parentSuspense && parentSuspense.pendingBranch && parentSuspenseId === parentSuspense.pendingId) {\n          parentSuspense.deps--;\n          if (parentSuspense.deps === 0 && !sync) {\n            parentSuspense.resolve();\n          }\n        }\n      }\n      triggerEvent(vnode2, \"onResolve\");\n    },\n    fallback(fallbackVNode) {\n      if (!suspense.pendingBranch) {\n        return;\n      }\n      const { vnode: vnode2, activeBranch, parentComponent: parentComponent2, container: container2, namespace: namespace2 } = suspense;\n      triggerEvent(vnode2, \"onFallback\");\n      const anchor2 = next(activeBranch);\n      const mountFallback = () => {\n        if (!suspense.isInFallback) {\n          return;\n        }\n        patch(\n          null,\n          fallbackVNode,\n          container2,\n          anchor2,\n          parentComponent2,\n          null,\n          // fallback tree will not have suspense context\n          namespace2,\n          slotScopeIds,\n          optimized\n        );\n        setActiveBranch(suspense, fallbackVNode);\n      };\n      const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === \"out-in\";\n      if (delayEnter) {\n        activeBranch.transition.afterLeave = mountFallback;\n      }\n      suspense.isInFallback = true;\n      unmount(\n        activeBranch,\n        parentComponent2,\n        null,\n        // no suspense so unmount hooks fire now\n        true\n        // shouldRemove\n      );\n      if (!delayEnter) {\n        mountFallback();\n      }\n    },\n    move(container2, anchor2, type) {\n      suspense.activeBranch && move(suspense.activeBranch, container2, anchor2, type);\n      suspense.container = container2;\n    },\n    next() {\n      return suspense.activeBranch && next(suspense.activeBranch);\n    },\n    registerDep(instance, setupRenderEffect) {\n      const isInPendingSuspense = !!suspense.pendingBranch;\n      if (isInPendingSuspense) {\n        suspense.deps++;\n      }\n      const hydratedEl = instance.vnode.el;\n      instance.asyncDep.catch((err) => {\n        handleError(err, instance, 0);\n      }).then((asyncSetupResult) => {\n        if (instance.isUnmounted || suspense.isUnmounted || suspense.pendingId !== instance.suspenseId) {\n          return;\n        }\n        instance.asyncResolved = true;\n        const { vnode: vnode2 } = instance;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(vnode2);\n        }\n        handleSetupResult(instance, asyncSetupResult, false);\n        if (hydratedEl) {\n          vnode2.el = hydratedEl;\n        }\n        const placeholder = !hydratedEl && instance.subTree.el;\n        setupRenderEffect(\n          instance,\n          vnode2,\n          // component may have been moved before resolve.\n          // if this is not a hydration, instance.subTree will be the comment\n          // placeholder.\n          parentNode(hydratedEl || instance.subTree.el),\n          // anchor will not be used if this is hydration, so only need to\n          // consider the comment placeholder case.\n          hydratedEl ? null : next(instance.subTree),\n          suspense,\n          namespace,\n          optimized\n        );\n        if (placeholder) {\n          remove(placeholder);\n        }\n        updateHOCHostEl(instance, vnode2.el);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        if (isInPendingSuspense && --suspense.deps === 0) {\n          suspense.resolve();\n        }\n      });\n    },\n    unmount(parentSuspense2, doRemove) {\n      suspense.isUnmounted = true;\n      if (suspense.activeBranch) {\n        unmount(\n          suspense.activeBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n      if (suspense.pendingBranch) {\n        unmount(\n          suspense.pendingBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n    }\n  };\n  return suspense;\n}\nfunction hydrateSuspense(node, vnode, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals, hydrateNode) {\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    node.parentNode,\n    // eslint-disable-next-line no-restricted-globals\n    document.createElement(\"div\"),\n    null,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals,\n    true\n  );\n  const result = hydrateNode(\n    node,\n    suspense.pendingBranch = vnode.ssContent,\n    parentComponent,\n    suspense,\n    slotScopeIds,\n    optimized\n  );\n  if (suspense.deps === 0) {\n    suspense.resolve(false, true);\n  }\n  return result;\n}\nfunction normalizeSuspenseChildren(vnode) {\n  const { shapeFlag, children } = vnode;\n  const isSlotChildren = shapeFlag & 32;\n  vnode.ssContent = normalizeSuspenseSlot(\n    isSlotChildren ? children.default : children\n  );\n  vnode.ssFallback = isSlotChildren ? normalizeSuspenseSlot(children.fallback) : createVNode(Comment);\n}\nfunction normalizeSuspenseSlot(s) {\n  let block;\n  if (isFunction(s)) {\n    const trackBlock = isBlockTreeEnabled && s._c;\n    if (trackBlock) {\n      s._d = false;\n      openBlock();\n    }\n    s = s();\n    if (trackBlock) {\n      s._d = true;\n      block = currentBlock;\n      closeBlock();\n    }\n  }\n  if (isArray(s)) {\n    const singleChild = filterSingleRoot(s);\n    if (!!(process.env.NODE_ENV !== \"production\") && !singleChild && s.filter((child) => child !== NULL_DYNAMIC_COMPONENT).length > 0) {\n      warn$1(`<Suspense> slots expect a single root node.`);\n    }\n    s = singleChild;\n  }\n  s = normalizeVNode(s);\n  if (block && !s.dynamicChildren) {\n    s.dynamicChildren = block.filter((c) => c !== s);\n  }\n  return s;\n}\nfunction queueEffectWithSuspense(fn, suspense) {\n  if (suspense && suspense.pendingBranch) {\n    if (isArray(fn)) {\n      suspense.effects.push(...fn);\n    } else {\n      suspense.effects.push(fn);\n    }\n  } else {\n    queuePostFlushCb(fn);\n  }\n}\nfunction setActiveBranch(suspense, branch) {\n  suspense.activeBranch = branch;\n  const { vnode, parentComponent } = suspense;\n  let el = branch.el;\n  while (!el && branch.component) {\n    branch = branch.component.subTree;\n    el = branch.el;\n  }\n  vnode.el = el;\n  if (parentComponent && parentComponent.subTree === vnode) {\n    parentComponent.vnode.el = el;\n    updateHOCHostEl(parentComponent, el);\n  }\n}\nfunction isVNodeSuspensible(vnode) {\n  const suspensible = vnode.props && vnode.props.suspensible;\n  return suspensible != null && suspensible !== false;\n}\n\nconst ssrContextKey = Symbol.for(\"v-scx\");\nconst useSSRContext = () => {\n  {\n    const ctx = inject(ssrContextKey);\n    if (!ctx) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build.`\n      );\n    }\n    return ctx;\n  }\n};\n\nfunction watchEffect(effect, options) {\n  return doWatch(effect, null, options);\n}\nfunction watchPostEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"post\" }) : { flush: \"post\" }\n  );\n}\nfunction watchSyncEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"sync\" }) : { flush: \"sync\" }\n  );\n}\nconst INITIAL_WATCHER_VALUE = {};\nfunction watch(source, cb, options) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(cb)) {\n    warn$1(\n      `\\`watch(fn, options?)\\` signature has been moved to a separate API. Use \\`watchEffect(fn, options?)\\` instead. \\`watch\\` now only supports \\`watch(source, cb, options?) signature.`\n    );\n  }\n  return doWatch(source, cb, options);\n}\nfunction doWatch(source, cb, {\n  immediate,\n  deep,\n  flush,\n  once,\n  onTrack,\n  onTrigger\n} = EMPTY_OBJ) {\n  if (cb && once) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      unwatch();\n    };\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && deep !== void 0 && typeof deep === \"number\") {\n    warn$1(\n      `watch() \"deep\" option with number value will be used as watch depth in future versions. Please use a boolean instead to avoid potential breakage.`\n    );\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && !cb) {\n    if (immediate !== void 0) {\n      warn$1(\n        `watch() \"immediate\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (deep !== void 0) {\n      warn$1(\n        `watch() \"deep\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (once !== void 0) {\n      warn$1(\n        `watch() \"once\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n  }\n  const warnInvalidSource = (s) => {\n    warn$1(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const instance = currentInstance;\n  const reactiveGetter = (source2) => deep === true ? source2 : (\n    // for deep: false, only traverse root-level properties\n    traverse(source2, deep === false ? 1 : void 0)\n  );\n  let getter;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return callWithErrorHandling(s, instance, 2);\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = () => callWithErrorHandling(source, instance, 2);\n    } else {\n      getter = () => {\n        if (cleanup) {\n          cleanup();\n        }\n        return callWithAsyncErrorHandling(\n          source,\n          instance,\n          3,\n          [onCleanup]\n        );\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    getter = () => traverse(baseGetter());\n  }\n  let cleanup;\n  let onCleanup = (fn) => {\n    cleanup = effect.onStop = () => {\n      callWithErrorHandling(fn, instance, 4);\n      cleanup = effect.onStop = void 0;\n    };\n  };\n  let ssrCleanup;\n  if (isInSSRComponentSetup) {\n    onCleanup = NOOP;\n    if (!cb) {\n      getter();\n    } else if (immediate) {\n      callWithAsyncErrorHandling(cb, instance, 3, [\n        getter(),\n        isMultiSource ? [] : void 0,\n        onCleanup\n      ]);\n    }\n    if (flush === \"sync\") {\n      const ctx = useSSRContext();\n      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);\n    } else {\n      return NOOP;\n    }\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = () => {\n    if (!effect.active || !effect.dirty) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue)) || false) {\n        if (cleanup) {\n          cleanup();\n        }\n        callWithAsyncErrorHandling(cb, instance, 3, [\n          newValue,\n          // pass undefined as the old value when it's changed for the first time\n          oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n          onCleanup\n        ]);\n        oldValue = newValue;\n      }\n    } else {\n      effect.run();\n    }\n  };\n  job.allowRecurse = !!cb;\n  let scheduler;\n  if (flush === \"sync\") {\n    scheduler = job;\n  } else if (flush === \"post\") {\n    scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);\n  } else {\n    job.pre = true;\n    if (instance)\n      job.id = instance.uid;\n    scheduler = () => queueJob(job);\n  }\n  const effect = new ReactiveEffect(getter, NOOP, scheduler);\n  const scope = getCurrentScope();\n  const unwatch = () => {\n    effect.stop();\n    if (scope) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = onTrack;\n    effect.onTrigger = onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job();\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (flush === \"post\") {\n    queuePostRenderEffect(\n      effect.run.bind(effect),\n      instance && instance.suspense\n    );\n  } else {\n    effect.run();\n  }\n  if (ssrCleanup)\n    ssrCleanup.push(unwatch);\n  return unwatch;\n}\nfunction instanceWatch(source, value, options) {\n  const publicThis = this.proxy;\n  const getter = isString(source) ? source.includes(\".\") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);\n  let cb;\n  if (isFunction(value)) {\n    cb = value;\n  } else {\n    cb = value.handler;\n    options = value;\n  }\n  const reset = setCurrentInstance(this);\n  const res = doWatch(getter, cb.bind(publicThis), options);\n  reset();\n  return res;\n}\nfunction createPathGetter(ctx, path) {\n  const segments = path.split(\".\");\n  return () => {\n    let cur = ctx;\n    for (let i = 0; i < segments.length && cur; i++) {\n      cur = cur[segments[i]];\n    }\n    return cur;\n  };\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n  }\n  return value;\n}\n\nfunction validateDirectiveName(name) {\n  if (isBuiltInDirective(name)) {\n    warn$1(\"Do not use built-in directive ids as custom directive id: \" + name);\n  }\n}\nfunction withDirectives(vnode, directives) {\n  if (currentRenderingInstance === null) {\n    !!(process.env.NODE_ENV !== \"production\") && warn$1(`withDirectives can only be used inside render functions.`);\n    return vnode;\n  }\n  const instance = getExposeProxy(currentRenderingInstance) || currentRenderingInstance.proxy;\n  const bindings = vnode.dirs || (vnode.dirs = []);\n  for (let i = 0; i < directives.length; i++) {\n    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\n    if (dir) {\n      if (isFunction(dir)) {\n        dir = {\n          mounted: dir,\n          updated: dir\n        };\n      }\n      if (dir.deep) {\n        traverse(value);\n      }\n      bindings.push({\n        dir,\n        instance,\n        value,\n        oldValue: void 0,\n        arg,\n        modifiers\n      });\n    }\n  }\n  return vnode;\n}\nfunction invokeDirectiveHook(vnode, prevVNode, instance, name) {\n  const bindings = vnode.dirs;\n  const oldBindings = prevVNode && prevVNode.dirs;\n  for (let i = 0; i < bindings.length; i++) {\n    const binding = bindings[i];\n    if (oldBindings) {\n      binding.oldValue = oldBindings[i].value;\n    }\n    let hook = binding.dir[name];\n    if (hook) {\n      pauseTracking();\n      callWithAsyncErrorHandling(hook, instance, 8, [\n        vnode.el,\n        binding,\n        vnode,\n        prevVNode\n      ]);\n      resetTracking();\n    }\n  }\n}\n\nconst leaveCbKey = Symbol(\"_leaveCb\");\nconst enterCbKey = Symbol(\"_enterCb\");\nfunction useTransitionState() {\n  const state = {\n    isMounted: false,\n    isLeaving: false,\n    isUnmounting: false,\n    leavingVNodes: /* @__PURE__ */ new Map()\n  };\n  onMounted(() => {\n    state.isMounted = true;\n  });\n  onBeforeUnmount(() => {\n    state.isUnmounting = true;\n  });\n  return state;\n}\nconst TransitionHookValidator = [Function, Array];\nconst BaseTransitionPropsValidators = {\n  mode: String,\n  appear: Boolean,\n  persisted: Boolean,\n  // enter\n  onBeforeEnter: TransitionHookValidator,\n  onEnter: TransitionHookValidator,\n  onAfterEnter: TransitionHookValidator,\n  onEnterCancelled: TransitionHookValidator,\n  // leave\n  onBeforeLeave: TransitionHookValidator,\n  onLeave: TransitionHookValidator,\n  onAfterLeave: TransitionHookValidator,\n  onLeaveCancelled: TransitionHookValidator,\n  // appear\n  onBeforeAppear: TransitionHookValidator,\n  onAppear: TransitionHookValidator,\n  onAfterAppear: TransitionHookValidator,\n  onAppearCancelled: TransitionHookValidator\n};\nconst BaseTransitionImpl = {\n  name: `BaseTransition`,\n  props: BaseTransitionPropsValidators,\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const state = useTransitionState();\n    return () => {\n      const children = slots.default && getTransitionRawChildren(slots.default(), true);\n      if (!children || !children.length) {\n        return;\n      }\n      let child = children[0];\n      if (children.length > 1) {\n        let hasFound = false;\n        for (const c of children) {\n          if (c.type !== Comment) {\n            if (!!(process.env.NODE_ENV !== \"production\") && hasFound) {\n              warn$1(\n                \"<transition> can only be used on a single element or component. Use <transition-group> for lists.\"\n              );\n              break;\n            }\n            child = c;\n            hasFound = true;\n            if (!!!(process.env.NODE_ENV !== \"production\"))\n              break;\n          }\n        }\n      }\n      const rawProps = toRaw(props);\n      const { mode } = rawProps;\n      if (!!(process.env.NODE_ENV !== \"production\") && mode && mode !== \"in-out\" && mode !== \"out-in\" && mode !== \"default\") {\n        warn$1(`invalid <transition> mode: ${mode}`);\n      }\n      if (state.isLeaving) {\n        return emptyPlaceholder(child);\n      }\n      const innerChild = getKeepAliveChild(child);\n      if (!innerChild) {\n        return emptyPlaceholder(child);\n      }\n      const enterHooks = resolveTransitionHooks(\n        innerChild,\n        rawProps,\n        state,\n        instance\n      );\n      setTransitionHooks(innerChild, enterHooks);\n      const oldChild = instance.subTree;\n      const oldInnerChild = oldChild && getKeepAliveChild(oldChild);\n      if (oldInnerChild && oldInnerChild.type !== Comment && !isSameVNodeType(innerChild, oldInnerChild)) {\n        const leavingHooks = resolveTransitionHooks(\n          oldInnerChild,\n          rawProps,\n          state,\n          instance\n        );\n        setTransitionHooks(oldInnerChild, leavingHooks);\n        if (mode === \"out-in\" && innerChild.type !== Comment) {\n          state.isLeaving = true;\n          leavingHooks.afterLeave = () => {\n            state.isLeaving = false;\n            if (instance.update.active !== false) {\n              instance.effect.dirty = true;\n              instance.update();\n            }\n          };\n          return emptyPlaceholder(child);\n        } else if (mode === \"in-out\" && innerChild.type !== Comment) {\n          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {\n            const leavingVNodesCache = getLeavingNodesForType(\n              state,\n              oldInnerChild\n            );\n            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;\n            el[leaveCbKey] = () => {\n              earlyRemove();\n              el[leaveCbKey] = void 0;\n              delete enterHooks.delayedLeave;\n            };\n            enterHooks.delayedLeave = delayedLeave;\n          };\n        }\n      }\n      return child;\n    };\n  }\n};\nconst BaseTransition = BaseTransitionImpl;\nfunction getLeavingNodesForType(state, vnode) {\n  const { leavingVNodes } = state;\n  let leavingVNodesCache = leavingVNodes.get(vnode.type);\n  if (!leavingVNodesCache) {\n    leavingVNodesCache = /* @__PURE__ */ Object.create(null);\n    leavingVNodes.set(vnode.type, leavingVNodesCache);\n  }\n  return leavingVNodesCache;\n}\nfunction resolveTransitionHooks(vnode, props, state, instance) {\n  const {\n    appear,\n    mode,\n    persisted = false,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onEnterCancelled,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n    onLeaveCancelled,\n    onBeforeAppear,\n    onAppear,\n    onAfterAppear,\n    onAppearCancelled\n  } = props;\n  const key = String(vnode.key);\n  const leavingVNodesCache = getLeavingNodesForType(state, vnode);\n  const callHook = (hook, args) => {\n    hook && callWithAsyncErrorHandling(\n      hook,\n      instance,\n      9,\n      args\n    );\n  };\n  const callAsyncHook = (hook, args) => {\n    const done = args[1];\n    callHook(hook, args);\n    if (isArray(hook)) {\n      if (hook.every((hook2) => hook2.length <= 1))\n        done();\n    } else if (hook.length <= 1) {\n      done();\n    }\n  };\n  const hooks = {\n    mode,\n    persisted,\n    beforeEnter(el) {\n      let hook = onBeforeEnter;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onBeforeAppear || onBeforeEnter;\n        } else {\n          return;\n        }\n      }\n      if (el[leaveCbKey]) {\n        el[leaveCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      const leavingVNode = leavingVNodesCache[key];\n      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el[leaveCbKey]) {\n        leavingVNode.el[leaveCbKey]();\n      }\n      callHook(hook, [el]);\n    },\n    enter(el) {\n      let hook = onEnter;\n      let afterHook = onAfterEnter;\n      let cancelHook = onEnterCancelled;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onAppear || onEnter;\n          afterHook = onAfterAppear || onAfterEnter;\n          cancelHook = onAppearCancelled || onEnterCancelled;\n        } else {\n          return;\n        }\n      }\n      let called = false;\n      const done = el[enterCbKey] = (cancelled) => {\n        if (called)\n          return;\n        called = true;\n        if (cancelled) {\n          callHook(cancelHook, [el]);\n        } else {\n          callHook(afterHook, [el]);\n        }\n        if (hooks.delayedLeave) {\n          hooks.delayedLeave();\n        }\n        el[enterCbKey] = void 0;\n      };\n      if (hook) {\n        callAsyncHook(hook, [el, done]);\n      } else {\n        done();\n      }\n    },\n    leave(el, remove) {\n      const key2 = String(vnode.key);\n      if (el[enterCbKey]) {\n        el[enterCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      if (state.isUnmounting) {\n        return remove();\n      }\n      callHook(onBeforeLeave, [el]);\n      let called = false;\n      const done = el[leaveCbKey] = (cancelled) => {\n        if (called)\n          return;\n        called = true;\n        remove();\n        if (cancelled) {\n          callHook(onLeaveCancelled, [el]);\n        } else {\n          callHook(onAfterLeave, [el]);\n        }\n        el[leaveCbKey] = void 0;\n        if (leavingVNodesCache[key2] === vnode) {\n          delete leavingVNodesCache[key2];\n        }\n      };\n      leavingVNodesCache[key2] = vnode;\n      if (onLeave) {\n        callAsyncHook(onLeave, [el, done]);\n      } else {\n        done();\n      }\n    },\n    clone(vnode2) {\n      return resolveTransitionHooks(vnode2, props, state, instance);\n    }\n  };\n  return hooks;\n}\nfunction emptyPlaceholder(vnode) {\n  if (isKeepAlive(vnode)) {\n    vnode = cloneVNode(vnode);\n    vnode.children = null;\n    return vnode;\n  }\n}\nfunction getKeepAliveChild(vnode) {\n  if (!isKeepAlive(vnode)) {\n    return vnode;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && vnode.component) {\n    return vnode.component.subTree;\n  }\n  const { shapeFlag, children } = vnode;\n  if (children) {\n    if (shapeFlag & 16) {\n      return children[0];\n    }\n    if (shapeFlag & 32 && isFunction(children.default)) {\n      return children.default();\n    }\n  }\n}\nfunction setTransitionHooks(vnode, hooks) {\n  if (vnode.shapeFlag & 6 && vnode.component) {\n    setTransitionHooks(vnode.component.subTree, hooks);\n  } else if (vnode.shapeFlag & 128) {\n    vnode.ssContent.transition = hooks.clone(vnode.ssContent);\n    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);\n  } else {\n    vnode.transition = hooks;\n  }\n}\nfunction getTransitionRawChildren(children, keepComment = false, parentKey) {\n  let ret = [];\n  let keyedFragmentCount = 0;\n  for (let i = 0; i < children.length; i++) {\n    let child = children[i];\n    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);\n    if (child.type === Fragment) {\n      if (child.patchFlag & 128)\n        keyedFragmentCount++;\n      ret = ret.concat(\n        getTransitionRawChildren(child.children, keepComment, key)\n      );\n    } else if (keepComment || child.type !== Comment) {\n      ret.push(key != null ? cloneVNode(child, { key }) : child);\n    }\n  }\n  if (keyedFragmentCount > 1) {\n    for (let i = 0; i < ret.length; i++) {\n      ret[i].patchFlag = -2;\n    }\n  }\n  return ret;\n}\n\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineComponent(options, extraOptions) {\n  return isFunction(options) ? (\n    // #8326: extend call and options.name access are considered side-effects\n    // by Rollup, so we have to wrap it in a pure-annotated IIFE.\n    /* @__PURE__ */ (() => extend({ name: options.name }, extraOptions, { setup: options }))()\n  ) : options;\n}\n\nconst isAsyncWrapper = (i) => !!i.type.__asyncLoader;\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineAsyncComponent(source) {\n  if (isFunction(source)) {\n    source = { loader: source };\n  }\n  const {\n    loader,\n    loadingComponent,\n    errorComponent,\n    delay = 200,\n    timeout,\n    // undefined = never times out\n    suspensible = true,\n    onError: userOnError\n  } = source;\n  let pendingRequest = null;\n  let resolvedComp;\n  let retries = 0;\n  const retry = () => {\n    retries++;\n    pendingRequest = null;\n    return load();\n  };\n  const load = () => {\n    let thisRequest;\n    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {\n      err = err instanceof Error ? err : new Error(String(err));\n      if (userOnError) {\n        return new Promise((resolve, reject) => {\n          const userRetry = () => resolve(retry());\n          const userFail = () => reject(err);\n          userOnError(err, userRetry, userFail, retries + 1);\n        });\n      } else {\n        throw err;\n      }\n    }).then((comp) => {\n      if (thisRequest !== pendingRequest && pendingRequest) {\n        return pendingRequest;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && !comp) {\n        warn$1(\n          `Async component loader resolved to undefined. If you are using retry(), make sure to return its return value.`\n        );\n      }\n      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === \"Module\")) {\n        comp = comp.default;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && comp && !isObject(comp) && !isFunction(comp)) {\n        throw new Error(`Invalid async component load result: ${comp}`);\n      }\n      resolvedComp = comp;\n      return comp;\n    }));\n  };\n  return defineComponent({\n    name: \"AsyncComponentWrapper\",\n    __asyncLoader: load,\n    get __asyncResolved() {\n      return resolvedComp;\n    },\n    setup() {\n      const instance = currentInstance;\n      if (resolvedComp) {\n        return () => createInnerComp(resolvedComp, instance);\n      }\n      const onError = (err) => {\n        pendingRequest = null;\n        handleError(\n          err,\n          instance,\n          13,\n          !errorComponent\n        );\n      };\n      if (suspensible && instance.suspense || isInSSRComponentSetup) {\n        return load().then((comp) => {\n          return () => createInnerComp(comp, instance);\n        }).catch((err) => {\n          onError(err);\n          return () => errorComponent ? createVNode(errorComponent, {\n            error: err\n          }) : null;\n        });\n      }\n      const loaded = ref(false);\n      const error = ref();\n      const delayed = ref(!!delay);\n      if (delay) {\n        setTimeout(() => {\n          delayed.value = false;\n        }, delay);\n      }\n      if (timeout != null) {\n        setTimeout(() => {\n          if (!loaded.value && !error.value) {\n            const err = new Error(\n              `Async component timed out after ${timeout}ms.`\n            );\n            onError(err);\n            error.value = err;\n          }\n        }, timeout);\n      }\n      load().then(() => {\n        loaded.value = true;\n        if (instance.parent && isKeepAlive(instance.parent.vnode)) {\n          instance.parent.effect.dirty = true;\n          queueJob(instance.parent.update);\n        }\n      }).catch((err) => {\n        onError(err);\n        error.value = err;\n      });\n      return () => {\n        if (loaded.value && resolvedComp) {\n          return createInnerComp(resolvedComp, instance);\n        } else if (error.value && errorComponent) {\n          return createVNode(errorComponent, {\n            error: error.value\n          });\n        } else if (loadingComponent && !delayed.value) {\n          return createVNode(loadingComponent);\n        }\n      };\n    }\n  });\n}\nfunction createInnerComp(comp, parent) {\n  const { ref: ref2, props, children, ce } = parent.vnode;\n  const vnode = createVNode(comp, props, children);\n  vnode.ref = ref2;\n  vnode.ce = ce;\n  delete parent.vnode.ce;\n  return vnode;\n}\n\nconst isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\nconst KeepAliveImpl = {\n  name: `KeepAlive`,\n  // Marker for special handling inside the renderer. We are not using a ===\n  // check directly on KeepAlive in the renderer, because importing it directly\n  // would prevent it from being tree-shaken.\n  __isKeepAlive: true,\n  props: {\n    include: [String, RegExp, Array],\n    exclude: [String, RegExp, Array],\n    max: [String, Number]\n  },\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const sharedContext = instance.ctx;\n    if (!sharedContext.renderer) {\n      return () => {\n        const children = slots.default && slots.default();\n        return children && children.length === 1 ? children[0] : children;\n      };\n    }\n    const cache = /* @__PURE__ */ new Map();\n    const keys = /* @__PURE__ */ new Set();\n    let current = null;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.__v_cache = cache;\n    }\n    const parentSuspense = instance.suspense;\n    const {\n      renderer: {\n        p: patch,\n        m: move,\n        um: _unmount,\n        o: { createElement }\n      }\n    } = sharedContext;\n    const storageContainer = createElement(\"div\");\n    sharedContext.activate = (vnode, container, anchor, namespace, optimized) => {\n      const instance2 = vnode.component;\n      move(vnode, container, anchor, 0, parentSuspense);\n      patch(\n        instance2.vnode,\n        vnode,\n        container,\n        anchor,\n        instance2,\n        parentSuspense,\n        namespace,\n        vnode.slotScopeIds,\n        optimized\n      );\n      queuePostRenderEffect(() => {\n        instance2.isDeactivated = false;\n        if (instance2.a) {\n          invokeArrayFns(instance2.a);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n    };\n    sharedContext.deactivate = (vnode) => {\n      const instance2 = vnode.component;\n      move(vnode, storageContainer, null, 1, parentSuspense);\n      queuePostRenderEffect(() => {\n        if (instance2.da) {\n          invokeArrayFns(instance2.da);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n        instance2.isDeactivated = true;\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n    };\n    function unmount(vnode) {\n      resetShapeFlag(vnode);\n      _unmount(vnode, instance, parentSuspense, true);\n    }\n    function pruneCache(filter) {\n      cache.forEach((vnode, key) => {\n        const name = getComponentName(vnode.type);\n        if (name && (!filter || !filter(name))) {\n          pruneCacheEntry(key);\n        }\n      });\n    }\n    function pruneCacheEntry(key) {\n      const cached = cache.get(key);\n      if (!current || !isSameVNodeType(cached, current)) {\n        unmount(cached);\n      } else if (current) {\n        resetShapeFlag(current);\n      }\n      cache.delete(key);\n      keys.delete(key);\n    }\n    watch(\n      () => [props.include, props.exclude],\n      ([include, exclude]) => {\n        include && pruneCache((name) => matches(include, name));\n        exclude && pruneCache((name) => !matches(exclude, name));\n      },\n      // prune post-render after `current` has been updated\n      { flush: \"post\", deep: true }\n    );\n    let pendingCacheKey = null;\n    const cacheSubtree = () => {\n      if (pendingCacheKey != null) {\n        cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n      }\n    };\n    onMounted(cacheSubtree);\n    onUpdated(cacheSubtree);\n    onBeforeUnmount(() => {\n      cache.forEach((cached) => {\n        const { subTree, suspense } = instance;\n        const vnode = getInnerChild(subTree);\n        if (cached.type === vnode.type && cached.key === vnode.key) {\n          resetShapeFlag(vnode);\n          const da = vnode.component.da;\n          da && queuePostRenderEffect(da, suspense);\n          return;\n        }\n        unmount(cached);\n      });\n    });\n    return () => {\n      pendingCacheKey = null;\n      if (!slots.default) {\n        return null;\n      }\n      const children = slots.default();\n      const rawVNode = children[0];\n      if (children.length > 1) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`KeepAlive should contain exactly one component child.`);\n        }\n        current = null;\n        return children;\n      } else if (!isVNode(rawVNode) || !(rawVNode.shapeFlag & 4) && !(rawVNode.shapeFlag & 128)) {\n        current = null;\n        return rawVNode;\n      }\n      let vnode = getInnerChild(rawVNode);\n      const comp = vnode.type;\n      const name = getComponentName(\n        isAsyncWrapper(vnode) ? vnode.type.__asyncResolved || {} : comp\n      );\n      const { include, exclude, max } = props;\n      if (include && (!name || !matches(include, name)) || exclude && name && matches(exclude, name)) {\n        current = vnode;\n        return rawVNode;\n      }\n      const key = vnode.key == null ? comp : vnode.key;\n      const cachedVNode = cache.get(key);\n      if (vnode.el) {\n        vnode = cloneVNode(vnode);\n        if (rawVNode.shapeFlag & 128) {\n          rawVNode.ssContent = vnode;\n        }\n      }\n      pendingCacheKey = key;\n      if (cachedVNode) {\n        vnode.el = cachedVNode.el;\n        vnode.component = cachedVNode.component;\n        if (vnode.transition) {\n          setTransitionHooks(vnode, vnode.transition);\n        }\n        vnode.shapeFlag |= 512;\n        keys.delete(key);\n        keys.add(key);\n      } else {\n        keys.add(key);\n        if (max && keys.size > parseInt(max, 10)) {\n          pruneCacheEntry(keys.values().next().value);\n        }\n      }\n      vnode.shapeFlag |= 256;\n      current = vnode;\n      return isSuspense(rawVNode.type) ? rawVNode : vnode;\n    };\n  }\n};\nconst KeepAlive = KeepAliveImpl;\nfunction matches(pattern, name) {\n  if (isArray(pattern)) {\n    return pattern.some((p) => matches(p, name));\n  } else if (isString(pattern)) {\n    return pattern.split(\",\").includes(name);\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name);\n  }\n  return false;\n}\nfunction onActivated(hook, target) {\n  registerKeepAliveHook(hook, \"a\", target);\n}\nfunction onDeactivated(hook, target) {\n  registerKeepAliveHook(hook, \"da\", target);\n}\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\n  const wrappedHook = hook.__wdc || (hook.__wdc = () => {\n    let current = target;\n    while (current) {\n      if (current.isDeactivated) {\n        return;\n      }\n      current = current.parent;\n    }\n    return hook();\n  });\n  injectHook(type, wrappedHook, target);\n  if (target) {\n    let current = target.parent;\n    while (current && current.parent) {\n      if (isKeepAlive(current.parent.vnode)) {\n        injectToKeepAliveRoot(wrappedHook, type, target, current);\n      }\n      current = current.parent;\n    }\n  }\n}\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\n  const injected = injectHook(\n    type,\n    hook,\n    keepAliveRoot,\n    true\n    /* prepend */\n  );\n  onUnmounted(() => {\n    remove(keepAliveRoot[type], injected);\n  }, target);\n}\nfunction resetShapeFlag(vnode) {\n  vnode.shapeFlag &= ~256;\n  vnode.shapeFlag &= ~512;\n}\nfunction getInnerChild(vnode) {\n  return vnode.shapeFlag & 128 ? vnode.ssContent : vnode;\n}\n\nfunction injectHook(type, hook, target = currentInstance, prepend = false) {\n  if (target) {\n    const hooks = target[type] || (target[type] = []);\n    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {\n      if (target.isUnmounted) {\n        return;\n      }\n      pauseTracking();\n      const reset = setCurrentInstance(target);\n      const res = callWithAsyncErrorHandling(hook, target, type, args);\n      reset();\n      resetTracking();\n      return res;\n    });\n    if (prepend) {\n      hooks.unshift(wrappedHook);\n    } else {\n      hooks.push(wrappedHook);\n    }\n    return wrappedHook;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    const apiName = toHandlerKey(ErrorTypeStrings$1[type].replace(/ hook$/, \"\"));\n    warn$1(\n      `${apiName} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup().` + (` If you are using async setup(), make sure to register lifecycle hooks before the first await statement.` )\n    );\n  }\n}\nconst createHook = (lifecycle) => (hook, target = currentInstance) => (\n  // post-create lifecycle registrations are noops during SSR (except for serverPrefetch)\n  (!isInSSRComponentSetup || lifecycle === \"sp\") && injectHook(lifecycle, (...args) => hook(...args), target)\n);\nconst onBeforeMount = createHook(\"bm\");\nconst onMounted = createHook(\"m\");\nconst onBeforeUpdate = createHook(\"bu\");\nconst onUpdated = createHook(\"u\");\nconst onBeforeUnmount = createHook(\"bum\");\nconst onUnmounted = createHook(\"um\");\nconst onServerPrefetch = createHook(\"sp\");\nconst onRenderTriggered = createHook(\n  \"rtg\"\n);\nconst onRenderTracked = createHook(\n  \"rtc\"\n);\nfunction onErrorCaptured(hook, target = currentInstance) {\n  injectHook(\"ec\", hook, target);\n}\n\nfunction renderList(source, renderItem, cache, index) {\n  let ret;\n  const cached = cache && cache[index];\n  if (isArray(source) || isString(source)) {\n    ret = new Array(source.length);\n    for (let i = 0, l = source.length; i < l; i++) {\n      ret[i] = renderItem(source[i], i, void 0, cached && cached[i]);\n    }\n  } else if (typeof source === \"number\") {\n    if (!!(process.env.NODE_ENV !== \"production\") && !Number.isInteger(source)) {\n      warn$1(`The v-for range expect an integer value but got ${source}.`);\n    }\n    ret = new Array(source);\n    for (let i = 0; i < source; i++) {\n      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);\n    }\n  } else if (isObject(source)) {\n    if (source[Symbol.iterator]) {\n      ret = Array.from(\n        source,\n        (item, i) => renderItem(item, i, void 0, cached && cached[i])\n      );\n    } else {\n      const keys = Object.keys(source);\n      ret = new Array(keys.length);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        ret[i] = renderItem(source[key], key, i, cached && cached[i]);\n      }\n    }\n  } else {\n    ret = [];\n  }\n  if (cache) {\n    cache[index] = ret;\n  }\n  return ret;\n}\n\nfunction createSlots(slots, dynamicSlots) {\n  for (let i = 0; i < dynamicSlots.length; i++) {\n    const slot = dynamicSlots[i];\n    if (isArray(slot)) {\n      for (let j = 0; j < slot.length; j++) {\n        slots[slot[j].name] = slot[j].fn;\n      }\n    } else if (slot) {\n      slots[slot.name] = slot.key ? (...args) => {\n        const res = slot.fn(...args);\n        if (res)\n          res.key = slot.key;\n        return res;\n      } : slot.fn;\n    }\n  }\n  return slots;\n}\n\nfunction renderSlot(slots, name, props = {}, fallback, noSlotted) {\n  if (currentRenderingInstance.isCE || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.isCE) {\n    if (name !== \"default\")\n      props.name = name;\n    return createVNode(\"slot\", props, fallback && fallback());\n  }\n  let slot = slots[name];\n  if (!!(process.env.NODE_ENV !== \"production\") && slot && slot.length > 1) {\n    warn$1(\n      `SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template.`\n    );\n    slot = () => [];\n  }\n  if (slot && slot._c) {\n    slot._d = false;\n  }\n  openBlock();\n  const validSlotContent = slot && ensureValidVNode(slot(props));\n  const rendered = createBlock(\n    Fragment,\n    {\n      key: props.key || // slot content array of a dynamic conditional slot may have a branch\n      // key attached in the `createSlots` helper, respect that\n      validSlotContent && validSlotContent.key || `_${name}`\n    },\n    validSlotContent || (fallback ? fallback() : []),\n    validSlotContent && slots._ === 1 ? 64 : -2\n  );\n  if (!noSlotted && rendered.scopeId) {\n    rendered.slotScopeIds = [rendered.scopeId + \"-s\"];\n  }\n  if (slot && slot._c) {\n    slot._d = true;\n  }\n  return rendered;\n}\nfunction ensureValidVNode(vnodes) {\n  return vnodes.some((child) => {\n    if (!isVNode(child))\n      return true;\n    if (child.type === Comment)\n      return false;\n    if (child.type === Fragment && !ensureValidVNode(child.children))\n      return false;\n    return true;\n  }) ? vnodes : null;\n}\n\nfunction toHandlers(obj, preserveCaseIfNecessary) {\n  const ret = {};\n  if (!!(process.env.NODE_ENV !== \"production\") && !isObject(obj)) {\n    warn$1(`v-on with no argument expects an object value.`);\n    return ret;\n  }\n  for (const key in obj) {\n    ret[preserveCaseIfNecessary && /[A-Z]/.test(key) ? `on:${key}` : toHandlerKey(key)] = obj[key];\n  }\n  return ret;\n}\n\nconst getPublicInstance = (i) => {\n  if (!i)\n    return null;\n  if (isStatefulComponent(i))\n    return getExposeProxy(i) || i.proxy;\n  return getPublicInstance(i.parent);\n};\nconst publicPropertiesMap = (\n  // Move PURE marker to new line to workaround compiler discarding it\n  // due to type annotation\n  /* @__PURE__ */ extend(/* @__PURE__ */ Object.create(null), {\n    $: (i) => i,\n    $el: (i) => i.vnode.el,\n    $data: (i) => i.data,\n    $props: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.props) : i.props,\n    $attrs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.attrs) : i.attrs,\n    $slots: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.slots) : i.slots,\n    $refs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.refs) : i.refs,\n    $parent: (i) => getPublicInstance(i.parent),\n    $root: (i) => getPublicInstance(i.root),\n    $emit: (i) => i.emit,\n    $options: (i) => __VUE_OPTIONS_API__ ? resolveMergedOptions(i) : i.type,\n    $forceUpdate: (i) => i.f || (i.f = () => {\n      i.effect.dirty = true;\n      queueJob(i.update);\n    }),\n    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),\n    $watch: (i) => __VUE_OPTIONS_API__ ? instanceWatch.bind(i) : NOOP\n  })\n);\nconst isReservedPrefix = (key) => key === \"_\" || key === \"$\";\nconst hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn(state, key);\nconst PublicInstanceProxyHandlers = {\n  get({ _: instance }, key) {\n    if (key === \"__v_skip\") {\n      return true;\n    }\n    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;\n    if (!!(process.env.NODE_ENV !== \"production\") && key === \"__isVue\") {\n      return true;\n    }\n    let normalizedProps;\n    if (key[0] !== \"$\") {\n      const n = accessCache[key];\n      if (n !== void 0) {\n        switch (n) {\n          case 1 /* SETUP */:\n            return setupState[key];\n          case 2 /* DATA */:\n            return data[key];\n          case 4 /* CONTEXT */:\n            return ctx[key];\n          case 3 /* PROPS */:\n            return props[key];\n        }\n      } else if (hasSetupBinding(setupState, key)) {\n        accessCache[key] = 1 /* SETUP */;\n        return setupState[key];\n      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n        accessCache[key] = 2 /* DATA */;\n        return data[key];\n      } else if (\n        // only cache other properties when instance has declared (thus stable)\n        // props\n        (normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)\n      ) {\n        accessCache[key] = 3 /* PROPS */;\n        return props[key];\n      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n        accessCache[key] = 4 /* CONTEXT */;\n        return ctx[key];\n      } else if (!__VUE_OPTIONS_API__ || shouldCacheAccess) {\n        accessCache[key] = 0 /* OTHER */;\n      }\n    }\n    const publicGetter = publicPropertiesMap[key];\n    let cssModule, globalProperties;\n    if (publicGetter) {\n      if (key === \"$attrs\") {\n        track(instance.attrs, \"get\", \"\");\n        !!(process.env.NODE_ENV !== \"production\") && markAttrsAccessed();\n      } else if (!!(process.env.NODE_ENV !== \"production\") && key === \"$slots\") {\n        track(instance, \"get\", key);\n      }\n      return publicGetter(instance);\n    } else if (\n      // css module (injected by vue-loader)\n      (cssModule = type.__cssModules) && (cssModule = cssModule[key])\n    ) {\n      return cssModule;\n    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n      accessCache[key] = 4 /* CONTEXT */;\n      return ctx[key];\n    } else if (\n      // global properties\n      globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)\n    ) {\n      {\n        return globalProperties[key];\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\") && currentRenderingInstance && (!isString(key) || // #1091 avoid internal isRef/isVNode checks on component instance leading\n    // to infinite warning loop\n    key.indexOf(\"__v\") !== 0)) {\n      if (data !== EMPTY_OBJ && isReservedPrefix(key[0]) && hasOwn(data, key)) {\n        warn$1(\n          `Property ${JSON.stringify(\n            key\n          )} must be accessed via $data because it starts with a reserved character (\"$\" or \"_\") and is not proxied on the render context.`\n        );\n      } else if (instance === currentRenderingInstance) {\n        warn$1(\n          `Property ${JSON.stringify(key)} was accessed during render but is not defined on instance.`\n        );\n      }\n    }\n  },\n  set({ _: instance }, key, value) {\n    const { data, setupState, ctx } = instance;\n    if (hasSetupBinding(setupState, key)) {\n      setupState[key] = value;\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup && hasOwn(setupState, key)) {\n      warn$1(`Cannot mutate <script setup> binding \"${key}\" from Options API.`);\n      return false;\n    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n      data[key] = value;\n      return true;\n    } else if (hasOwn(instance.props, key)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`Attempting to mutate prop \"${key}\". Props are readonly.`);\n      return false;\n    }\n    if (key[0] === \"$\" && key.slice(1) in instance) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Attempting to mutate public property \"${key}\". Properties starting with $ are reserved and readonly.`\n      );\n      return false;\n    } else {\n      if (!!(process.env.NODE_ENV !== \"production\") && key in instance.appContext.config.globalProperties) {\n        Object.defineProperty(ctx, key, {\n          enumerable: true,\n          configurable: true,\n          value\n        });\n      } else {\n        ctx[key] = value;\n      }\n    }\n    return true;\n  },\n  has({\n    _: { data, setupState, accessCache, ctx, appContext, propsOptions }\n  }, key) {\n    let normalizedProps;\n    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);\n  },\n  defineProperty(target, key, descriptor) {\n    if (descriptor.get != null) {\n      target._.accessCache[key] = 0;\n    } else if (hasOwn(descriptor, \"value\")) {\n      this.set(target, key, descriptor.value, null);\n    }\n    return Reflect.defineProperty(target, key, descriptor);\n  }\n};\nif (!!(process.env.NODE_ENV !== \"production\") && true) {\n  PublicInstanceProxyHandlers.ownKeys = (target) => {\n    warn$1(\n      `Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead.`\n    );\n    return Reflect.ownKeys(target);\n  };\n}\nconst RuntimeCompiledPublicInstanceProxyHandlers = /* @__PURE__ */ extend(\n  {},\n  PublicInstanceProxyHandlers,\n  {\n    get(target, key) {\n      if (key === Symbol.unscopables) {\n        return;\n      }\n      return PublicInstanceProxyHandlers.get(target, key, target);\n    },\n    has(_, key) {\n      const has = key[0] !== \"_\" && !isGloballyAllowed(key);\n      if (!!(process.env.NODE_ENV !== \"production\") && !has && PublicInstanceProxyHandlers.has(_, key)) {\n        warn$1(\n          `Property ${JSON.stringify(\n            key\n          )} should not start with _ which is a reserved prefix for Vue internals.`\n        );\n      }\n      return has;\n    }\n  }\n);\nfunction createDevRenderContext(instance) {\n  const target = {};\n  Object.defineProperty(target, `_`, {\n    configurable: true,\n    enumerable: false,\n    get: () => instance\n  });\n  Object.keys(publicPropertiesMap).forEach((key) => {\n    Object.defineProperty(target, key, {\n      configurable: true,\n      enumerable: false,\n      get: () => publicPropertiesMap[key](instance),\n      // intercepted by the proxy so no need for implementation,\n      // but needed to prevent set errors\n      set: NOOP\n    });\n  });\n  return target;\n}\nfunction exposePropsOnRenderContext(instance) {\n  const {\n    ctx,\n    propsOptions: [propsOptions]\n  } = instance;\n  if (propsOptions) {\n    Object.keys(propsOptions).forEach((key) => {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => instance.props[key],\n        set: NOOP\n      });\n    });\n  }\n}\nfunction exposeSetupStateOnRenderContext(instance) {\n  const { ctx, setupState } = instance;\n  Object.keys(toRaw(setupState)).forEach((key) => {\n    if (!setupState.__isScriptSetup) {\n      if (isReservedPrefix(key[0])) {\n        warn$1(\n          `setup() return property ${JSON.stringify(\n            key\n          )} should not start with \"$\" or \"_\" which are reserved prefixes for Vue internals.`\n        );\n        return;\n      }\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => setupState[key],\n        set: NOOP\n      });\n    }\n  });\n}\n\nconst warnRuntimeUsage = (method) => warn$1(\n  `${method}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`\n);\nfunction defineProps() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineProps`);\n  }\n  return null;\n}\nfunction defineEmits() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineEmits`);\n  }\n  return null;\n}\nfunction defineExpose(exposed) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineExpose`);\n  }\n}\nfunction defineOptions(options) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineOptions`);\n  }\n}\nfunction defineSlots() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineSlots`);\n  }\n  return null;\n}\nfunction defineModel() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(\"defineModel\");\n  }\n}\nfunction withDefaults(props, defaults) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`withDefaults`);\n  }\n  return null;\n}\nfunction useSlots() {\n  return getContext().slots;\n}\nfunction useAttrs() {\n  return getContext().attrs;\n}\nfunction getContext() {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useContext() called without active instance.`);\n  }\n  return i.setupContext || (i.setupContext = createSetupContext(i));\n}\nfunction normalizePropsOrEmits(props) {\n  return isArray(props) ? props.reduce(\n    (normalized, p) => (normalized[p] = null, normalized),\n    {}\n  ) : props;\n}\nfunction mergeDefaults(raw, defaults) {\n  const props = normalizePropsOrEmits(raw);\n  for (const key in defaults) {\n    if (key.startsWith(\"__skip\"))\n      continue;\n    let opt = props[key];\n    if (opt) {\n      if (isArray(opt) || isFunction(opt)) {\n        opt = props[key] = { type: opt, default: defaults[key] };\n      } else {\n        opt.default = defaults[key];\n      }\n    } else if (opt === null) {\n      opt = props[key] = { default: defaults[key] };\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`props default key \"${key}\" has no corresponding declaration.`);\n    }\n    if (opt && defaults[`__skip_${key}`]) {\n      opt.skipFactory = true;\n    }\n  }\n  return props;\n}\nfunction mergeModels(a, b) {\n  if (!a || !b)\n    return a || b;\n  if (isArray(a) && isArray(b))\n    return a.concat(b);\n  return extend({}, normalizePropsOrEmits(a), normalizePropsOrEmits(b));\n}\nfunction createPropsRestProxy(props, excludedKeys) {\n  const ret = {};\n  for (const key in props) {\n    if (!excludedKeys.includes(key)) {\n      Object.defineProperty(ret, key, {\n        enumerable: true,\n        get: () => props[key]\n      });\n    }\n  }\n  return ret;\n}\nfunction withAsyncContext(getAwaitable) {\n  const ctx = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !ctx) {\n    warn$1(\n      `withAsyncContext called without active current instance. This is likely a bug.`\n    );\n  }\n  let awaitable = getAwaitable();\n  unsetCurrentInstance();\n  if (isPromise(awaitable)) {\n    awaitable = awaitable.catch((e) => {\n      setCurrentInstance(ctx);\n      throw e;\n    });\n  }\n  return [awaitable, () => setCurrentInstance(ctx)];\n}\n\nfunction createDuplicateChecker() {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (type, key) => {\n    if (cache[key]) {\n      warn$1(`${type} property \"${key}\" is already defined in ${cache[key]}.`);\n    } else {\n      cache[key] = type;\n    }\n  };\n}\nlet shouldCacheAccess = true;\nfunction applyOptions(instance) {\n  const options = resolveMergedOptions(instance);\n  const publicThis = instance.proxy;\n  const ctx = instance.ctx;\n  shouldCacheAccess = false;\n  if (options.beforeCreate) {\n    callHook(options.beforeCreate, instance, \"bc\");\n  }\n  const {\n    // state\n    data: dataOptions,\n    computed: computedOptions,\n    methods,\n    watch: watchOptions,\n    provide: provideOptions,\n    inject: injectOptions,\n    // lifecycle\n    created,\n    beforeMount,\n    mounted,\n    beforeUpdate,\n    updated,\n    activated,\n    deactivated,\n    beforeDestroy,\n    beforeUnmount,\n    destroyed,\n    unmounted,\n    render,\n    renderTracked,\n    renderTriggered,\n    errorCaptured,\n    serverPrefetch,\n    // public API\n    expose,\n    inheritAttrs,\n    // assets\n    components,\n    directives,\n    filters\n  } = options;\n  const checkDuplicateProperties = !!(process.env.NODE_ENV !== \"production\") ? createDuplicateChecker() : null;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const [propsOptions] = instance.propsOptions;\n    if (propsOptions) {\n      for (const key in propsOptions) {\n        checkDuplicateProperties(\"Props\" /* PROPS */, key);\n      }\n    }\n  }\n  if (injectOptions) {\n    resolveInjections(injectOptions, ctx, checkDuplicateProperties);\n  }\n  if (methods) {\n    for (const key in methods) {\n      const methodHandler = methods[key];\n      if (isFunction(methodHandler)) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          Object.defineProperty(ctx, key, {\n            value: methodHandler.bind(publicThis),\n            configurable: true,\n            enumerable: true,\n            writable: true\n          });\n        } else {\n          ctx[key] = methodHandler.bind(publicThis);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkDuplicateProperties(\"Methods\" /* METHODS */, key);\n        }\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(\n          `Method \"${key}\" has type \"${typeof methodHandler}\" in the component definition. Did you reference the function correctly?`\n        );\n      }\n    }\n  }\n  if (dataOptions) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(dataOptions)) {\n      warn$1(\n        `The data option must be a function. Plain object usage is no longer supported.`\n      );\n    }\n    const data = dataOptions.call(publicThis, publicThis);\n    if (!!(process.env.NODE_ENV !== \"production\") && isPromise(data)) {\n      warn$1(\n        `data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>.`\n      );\n    }\n    if (!isObject(data)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`data() should return an object.`);\n    } else {\n      instance.data = reactive(data);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (const key in data) {\n          checkDuplicateProperties(\"Data\" /* DATA */, key);\n          if (!isReservedPrefix(key[0])) {\n            Object.defineProperty(ctx, key, {\n              configurable: true,\n              enumerable: true,\n              get: () => data[key],\n              set: NOOP\n            });\n          }\n        }\n      }\n    }\n  }\n  shouldCacheAccess = true;\n  if (computedOptions) {\n    for (const key in computedOptions) {\n      const opt = computedOptions[key];\n      const get = isFunction(opt) ? opt.bind(publicThis, publicThis) : isFunction(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;\n      if (!!(process.env.NODE_ENV !== \"production\") && get === NOOP) {\n        warn$1(`Computed property \"${key}\" has no getter.`);\n      }\n      const set = !isFunction(opt) && isFunction(opt.set) ? opt.set.bind(publicThis) : !!(process.env.NODE_ENV !== \"production\") ? () => {\n        warn$1(\n          `Write operation failed: computed property \"${key}\" is readonly.`\n        );\n      } : NOOP;\n      const c = computed({\n        get,\n        set\n      });\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => c.value,\n        set: (v) => c.value = v\n      });\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        checkDuplicateProperties(\"Computed\" /* COMPUTED */, key);\n      }\n    }\n  }\n  if (watchOptions) {\n    for (const key in watchOptions) {\n      createWatcher(watchOptions[key], ctx, publicThis, key);\n    }\n  }\n  if (provideOptions) {\n    const provides = isFunction(provideOptions) ? provideOptions.call(publicThis) : provideOptions;\n    Reflect.ownKeys(provides).forEach((key) => {\n      provide(key, provides[key]);\n    });\n  }\n  if (created) {\n    callHook(created, instance, \"c\");\n  }\n  function registerLifecycleHook(register, hook) {\n    if (isArray(hook)) {\n      hook.forEach((_hook) => register(_hook.bind(publicThis)));\n    } else if (hook) {\n      register(hook.bind(publicThis));\n    }\n  }\n  registerLifecycleHook(onBeforeMount, beforeMount);\n  registerLifecycleHook(onMounted, mounted);\n  registerLifecycleHook(onBeforeUpdate, beforeUpdate);\n  registerLifecycleHook(onUpdated, updated);\n  registerLifecycleHook(onActivated, activated);\n  registerLifecycleHook(onDeactivated, deactivated);\n  registerLifecycleHook(onErrorCaptured, errorCaptured);\n  registerLifecycleHook(onRenderTracked, renderTracked);\n  registerLifecycleHook(onRenderTriggered, renderTriggered);\n  registerLifecycleHook(onBeforeUnmount, beforeUnmount);\n  registerLifecycleHook(onUnmounted, unmounted);\n  registerLifecycleHook(onServerPrefetch, serverPrefetch);\n  if (isArray(expose)) {\n    if (expose.length) {\n      const exposed = instance.exposed || (instance.exposed = {});\n      expose.forEach((key) => {\n        Object.defineProperty(exposed, key, {\n          get: () => publicThis[key],\n          set: (val) => publicThis[key] = val\n        });\n      });\n    } else if (!instance.exposed) {\n      instance.exposed = {};\n    }\n  }\n  if (render && instance.render === NOOP) {\n    instance.render = render;\n  }\n  if (inheritAttrs != null) {\n    instance.inheritAttrs = inheritAttrs;\n  }\n  if (components)\n    instance.components = components;\n  if (directives)\n    instance.directives = directives;\n}\nfunction resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP) {\n  if (isArray(injectOptions)) {\n    injectOptions = normalizeInject(injectOptions);\n  }\n  for (const key in injectOptions) {\n    const opt = injectOptions[key];\n    let injected;\n    if (isObject(opt)) {\n      if (\"default\" in opt) {\n        injected = inject(\n          opt.from || key,\n          opt.default,\n          true\n        );\n      } else {\n        injected = inject(opt.from || key);\n      }\n    } else {\n      injected = inject(opt);\n    }\n    if (isRef(injected)) {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => injected.value,\n        set: (v) => injected.value = v\n      });\n    } else {\n      ctx[key] = injected;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      checkDuplicateProperties(\"Inject\" /* INJECT */, key);\n    }\n  }\n}\nfunction callHook(hook, instance, type) {\n  callWithAsyncErrorHandling(\n    isArray(hook) ? hook.map((h) => h.bind(instance.proxy)) : hook.bind(instance.proxy),\n    instance,\n    type\n  );\n}\nfunction createWatcher(raw, ctx, publicThis, key) {\n  const getter = key.includes(\".\") ? createPathGetter(publicThis, key) : () => publicThis[key];\n  if (isString(raw)) {\n    const handler = ctx[raw];\n    if (isFunction(handler)) {\n      watch(getter, handler);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`Invalid watch handler specified by key \"${raw}\"`, handler);\n    }\n  } else if (isFunction(raw)) {\n    watch(getter, raw.bind(publicThis));\n  } else if (isObject(raw)) {\n    if (isArray(raw)) {\n      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));\n    } else {\n      const handler = isFunction(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];\n      if (isFunction(handler)) {\n        watch(getter, handler, raw);\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(`Invalid watch handler specified by key \"${raw.handler}\"`, handler);\n      }\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid watch option: \"${key}\"`, raw);\n  }\n}\nfunction resolveMergedOptions(instance) {\n  const base = instance.type;\n  const { mixins, extends: extendsOptions } = base;\n  const {\n    mixins: globalMixins,\n    optionsCache: cache,\n    config: { optionMergeStrategies }\n  } = instance.appContext;\n  const cached = cache.get(base);\n  let resolved;\n  if (cached) {\n    resolved = cached;\n  } else if (!globalMixins.length && !mixins && !extendsOptions) {\n    {\n      resolved = base;\n    }\n  } else {\n    resolved = {};\n    if (globalMixins.length) {\n      globalMixins.forEach(\n        (m) => mergeOptions(resolved, m, optionMergeStrategies, true)\n      );\n    }\n    mergeOptions(resolved, base, optionMergeStrategies);\n  }\n  if (isObject(base)) {\n    cache.set(base, resolved);\n  }\n  return resolved;\n}\nfunction mergeOptions(to, from, strats, asMixin = false) {\n  const { mixins, extends: extendsOptions } = from;\n  if (extendsOptions) {\n    mergeOptions(to, extendsOptions, strats, true);\n  }\n  if (mixins) {\n    mixins.forEach(\n      (m) => mergeOptions(to, m, strats, true)\n    );\n  }\n  for (const key in from) {\n    if (asMixin && key === \"expose\") {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `\"expose\" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.`\n      );\n    } else {\n      const strat = internalOptionMergeStrats[key] || strats && strats[key];\n      to[key] = strat ? strat(to[key], from[key]) : from[key];\n    }\n  }\n  return to;\n}\nconst internalOptionMergeStrats = {\n  data: mergeDataFn,\n  props: mergeEmitsOrPropsOptions,\n  emits: mergeEmitsOrPropsOptions,\n  // objects\n  methods: mergeObjectOptions,\n  computed: mergeObjectOptions,\n  // lifecycle\n  beforeCreate: mergeAsArray,\n  created: mergeAsArray,\n  beforeMount: mergeAsArray,\n  mounted: mergeAsArray,\n  beforeUpdate: mergeAsArray,\n  updated: mergeAsArray,\n  beforeDestroy: mergeAsArray,\n  beforeUnmount: mergeAsArray,\n  destroyed: mergeAsArray,\n  unmounted: mergeAsArray,\n  activated: mergeAsArray,\n  deactivated: mergeAsArray,\n  errorCaptured: mergeAsArray,\n  serverPrefetch: mergeAsArray,\n  // assets\n  components: mergeObjectOptions,\n  directives: mergeObjectOptions,\n  // watch\n  watch: mergeWatchOptions,\n  // provide / inject\n  provide: mergeDataFn,\n  inject: mergeInject\n};\nfunction mergeDataFn(to, from) {\n  if (!from) {\n    return to;\n  }\n  if (!to) {\n    return from;\n  }\n  return function mergedDataFn() {\n    return (extend)(\n      isFunction(to) ? to.call(this, this) : to,\n      isFunction(from) ? from.call(this, this) : from\n    );\n  };\n}\nfunction mergeInject(to, from) {\n  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));\n}\nfunction normalizeInject(raw) {\n  if (isArray(raw)) {\n    const res = {};\n    for (let i = 0; i < raw.length; i++) {\n      res[raw[i]] = raw[i];\n    }\n    return res;\n  }\n  return raw;\n}\nfunction mergeAsArray(to, from) {\n  return to ? [...new Set([].concat(to, from))] : from;\n}\nfunction mergeObjectOptions(to, from) {\n  return to ? extend(/* @__PURE__ */ Object.create(null), to, from) : from;\n}\nfunction mergeEmitsOrPropsOptions(to, from) {\n  if (to) {\n    if (isArray(to) && isArray(from)) {\n      return [.../* @__PURE__ */ new Set([...to, ...from])];\n    }\n    return extend(\n      /* @__PURE__ */ Object.create(null),\n      normalizePropsOrEmits(to),\n      normalizePropsOrEmits(from != null ? from : {})\n    );\n  } else {\n    return from;\n  }\n}\nfunction mergeWatchOptions(to, from) {\n  if (!to)\n    return from;\n  if (!from)\n    return to;\n  const merged = extend(/* @__PURE__ */ Object.create(null), to);\n  for (const key in from) {\n    merged[key] = mergeAsArray(to[key], from[key]);\n  }\n  return merged;\n}\n\nfunction createAppContext() {\n  return {\n    app: null,\n    config: {\n      isNativeTag: NO,\n      performance: false,\n      globalProperties: {},\n      optionMergeStrategies: {},\n      errorHandler: void 0,\n      warnHandler: void 0,\n      compilerOptions: {}\n    },\n    mixins: [],\n    components: {},\n    directives: {},\n    provides: /* @__PURE__ */ Object.create(null),\n    optionsCache: /* @__PURE__ */ new WeakMap(),\n    propsCache: /* @__PURE__ */ new WeakMap(),\n    emitsCache: /* @__PURE__ */ new WeakMap()\n  };\n}\nlet uid$1 = 0;\nfunction createAppAPI(render, hydrate) {\n  return function createApp(rootComponent, rootProps = null) {\n    if (!isFunction(rootComponent)) {\n      rootComponent = extend({}, rootComponent);\n    }\n    if (rootProps != null && !isObject(rootProps)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`root props passed to app.mount() must be an object.`);\n      rootProps = null;\n    }\n    const context = createAppContext();\n    const installedPlugins = /* @__PURE__ */ new WeakSet();\n    let isMounted = false;\n    const app = context.app = {\n      _uid: uid$1++,\n      _component: rootComponent,\n      _props: rootProps,\n      _container: null,\n      _context: context,\n      _instance: null,\n      version,\n      get config() {\n        return context.config;\n      },\n      set config(v) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `app.config cannot be replaced. Modify individual options instead.`\n          );\n        }\n      },\n      use(plugin, ...options) {\n        if (installedPlugins.has(plugin)) {\n          !!(process.env.NODE_ENV !== \"production\") && warn$1(`Plugin has already been applied to target app.`);\n        } else if (plugin && isFunction(plugin.install)) {\n          installedPlugins.add(plugin);\n          plugin.install(app, ...options);\n        } else if (isFunction(plugin)) {\n          installedPlugins.add(plugin);\n          plugin(app, ...options);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `A plugin must either be a function or an object with an \"install\" function.`\n          );\n        }\n        return app;\n      },\n      mixin(mixin) {\n        if (__VUE_OPTIONS_API__) {\n          if (!context.mixins.includes(mixin)) {\n            context.mixins.push(mixin);\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Mixin has already been applied to target app\" + (mixin.name ? `: ${mixin.name}` : \"\")\n            );\n          }\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Mixins are only available in builds supporting Options API\");\n        }\n        return app;\n      },\n      component(name, component) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateComponentName(name, context.config);\n        }\n        if (!component) {\n          return context.components[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.components[name]) {\n          warn$1(`Component \"${name}\" has already been registered in target app.`);\n        }\n        context.components[name] = component;\n        return app;\n      },\n      directive(name, directive) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateDirectiveName(name);\n        }\n        if (!directive) {\n          return context.directives[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.directives[name]) {\n          warn$1(`Directive \"${name}\" has already been registered in target app.`);\n        }\n        context.directives[name] = directive;\n        return app;\n      },\n      mount(rootContainer, isHydrate, namespace) {\n        if (!isMounted) {\n          if (!!(process.env.NODE_ENV !== \"production\") && rootContainer.__vue_app__) {\n            warn$1(\n              `There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling \\`app.unmount()\\` first.`\n            );\n          }\n          const vnode = createVNode(rootComponent, rootProps);\n          vnode.appContext = context;\n          if (namespace === true) {\n            namespace = \"svg\";\n          } else if (namespace === false) {\n            namespace = void 0;\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            context.reload = () => {\n              render(\n                cloneVNode(vnode),\n                rootContainer,\n                namespace\n              );\n            };\n          }\n          if (isHydrate && hydrate) {\n            hydrate(vnode, rootContainer);\n          } else {\n            render(vnode, rootContainer, namespace);\n          }\n          isMounted = true;\n          app._container = rootContainer;\n          rootContainer.__vue_app__ = app;\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = vnode.component;\n            devtoolsInitApp(app, version);\n          }\n          return getExposeProxy(vnode.component) || vnode.component.proxy;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. \\`const createMyApp = () => createApp(App)\\``\n          );\n        }\n      },\n      unmount() {\n        if (isMounted) {\n          render(null, app._container);\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = null;\n            devtoolsUnmountApp(app);\n          }\n          delete app._container.__vue_app__;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`Cannot unmount an app that is not mounted.`);\n        }\n      },\n      provide(key, value) {\n        if (!!(process.env.NODE_ENV !== \"production\") && key in context.provides) {\n          warn$1(\n            `App already provides property with key \"${String(key)}\". It will be overwritten with the new value.`\n          );\n        }\n        context.provides[key] = value;\n        return app;\n      },\n      runWithContext(fn) {\n        const lastApp = currentApp;\n        currentApp = app;\n        try {\n          return fn();\n        } finally {\n          currentApp = lastApp;\n        }\n      }\n    };\n    return app;\n  };\n}\nlet currentApp = null;\n\nfunction provide(key, value) {\n  if (!currentInstance) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`provide() can only be used inside setup().`);\n    }\n  } else {\n    let provides = currentInstance.provides;\n    const parentProvides = currentInstance.parent && currentInstance.parent.provides;\n    if (parentProvides === provides) {\n      provides = currentInstance.provides = Object.create(parentProvides);\n    }\n    provides[key] = value;\n  }\n}\nfunction inject(key, defaultValue, treatDefaultAsFactory = false) {\n  const instance = currentInstance || currentRenderingInstance;\n  if (instance || currentApp) {\n    const provides = instance ? instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides : currentApp._context.provides;\n    if (provides && key in provides) {\n      return provides[key];\n    } else if (arguments.length > 1) {\n      return treatDefaultAsFactory && isFunction(defaultValue) ? defaultValue.call(instance && instance.proxy) : defaultValue;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`injection \"${String(key)}\" not found.`);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`inject() can only be used inside setup() or functional components.`);\n  }\n}\nfunction hasInjectionContext() {\n  return !!(currentInstance || currentRenderingInstance || currentApp);\n}\n\nconst internalObjectProto = {};\nconst createInternalObject = () => Object.create(internalObjectProto);\nconst isInternalObject = (obj) => Object.getPrototypeOf(obj) === internalObjectProto;\n\nfunction initProps(instance, rawProps, isStateful, isSSR = false) {\n  const props = {};\n  const attrs = createInternalObject();\n  instance.propsDefaults = /* @__PURE__ */ Object.create(null);\n  setFullProps(instance, rawProps, props, attrs);\n  for (const key in instance.propsOptions[0]) {\n    if (!(key in props)) {\n      props[key] = void 0;\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n  if (isStateful) {\n    instance.props = isSSR ? props : shallowReactive(props);\n  } else {\n    if (!instance.type.props) {\n      instance.props = attrs;\n    } else {\n      instance.props = props;\n    }\n  }\n  instance.attrs = attrs;\n}\nfunction isInHmrContext(instance) {\n  while (instance) {\n    if (instance.type.__hmrId)\n      return true;\n    instance = instance.parent;\n  }\n}\nfunction updateProps(instance, rawProps, rawPrevProps, optimized) {\n  const {\n    props,\n    attrs,\n    vnode: { patchFlag }\n  } = instance;\n  const rawCurrentProps = toRaw(props);\n  const [options] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  if (\n    // always force full diff in dev\n    // - #1942 if hmr is enabled with sfc component\n    // - vite#872 non-sfc component used by sfc component\n    !(!!(process.env.NODE_ENV !== \"production\") && isInHmrContext(instance)) && (optimized || patchFlag > 0) && !(patchFlag & 16)\n  ) {\n    if (patchFlag & 8) {\n      const propsToUpdate = instance.vnode.dynamicProps;\n      for (let i = 0; i < propsToUpdate.length; i++) {\n        let key = propsToUpdate[i];\n        if (isEmitListener(instance.emitsOptions, key)) {\n          continue;\n        }\n        const value = rawProps[key];\n        if (options) {\n          if (hasOwn(attrs, key)) {\n            if (value !== attrs[key]) {\n              attrs[key] = value;\n              hasAttrsChanged = true;\n            }\n          } else {\n            const camelizedKey = camelize(key);\n            props[camelizedKey] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              camelizedKey,\n              value,\n              instance,\n              false\n            );\n          }\n        } else {\n          if (value !== attrs[key]) {\n            attrs[key] = value;\n            hasAttrsChanged = true;\n          }\n        }\n      }\n    }\n  } else {\n    if (setFullProps(instance, rawProps, props, attrs)) {\n      hasAttrsChanged = true;\n    }\n    let kebabKey;\n    for (const key in rawCurrentProps) {\n      if (!rawProps || // for camelCase\n      !hasOwn(rawProps, key) && // it's possible the original props was passed in as kebab-case\n      // and converted to camelCase (#955)\n      ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {\n        if (options) {\n          if (rawPrevProps && // for camelCase\n          (rawPrevProps[key] !== void 0 || // for kebab-case\n          rawPrevProps[kebabKey] !== void 0)) {\n            props[key] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              key,\n              void 0,\n              instance,\n              true\n            );\n          }\n        } else {\n          delete props[key];\n        }\n      }\n    }\n    if (attrs !== rawCurrentProps) {\n      for (const key in attrs) {\n        if (!rawProps || !hasOwn(rawProps, key) && true) {\n          delete attrs[key];\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (hasAttrsChanged) {\n    trigger(instance.attrs, \"set\", \"\");\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n}\nfunction setFullProps(instance, rawProps, props, attrs) {\n  const [options, needCastKeys] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  let rawCastValues;\n  if (rawProps) {\n    for (let key in rawProps) {\n      if (isReservedProp(key)) {\n        continue;\n      }\n      const value = rawProps[key];\n      let camelKey;\n      if (options && hasOwn(options, camelKey = camelize(key))) {\n        if (!needCastKeys || !needCastKeys.includes(camelKey)) {\n          props[camelKey] = value;\n        } else {\n          (rawCastValues || (rawCastValues = {}))[camelKey] = value;\n        }\n      } else if (!isEmitListener(instance.emitsOptions, key)) {\n        if (!(key in attrs) || value !== attrs[key]) {\n          attrs[key] = value;\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (needCastKeys) {\n    const rawCurrentProps = toRaw(props);\n    const castValues = rawCastValues || EMPTY_OBJ;\n    for (let i = 0; i < needCastKeys.length; i++) {\n      const key = needCastKeys[i];\n      props[key] = resolvePropValue(\n        options,\n        rawCurrentProps,\n        key,\n        castValues[key],\n        instance,\n        !hasOwn(castValues, key)\n      );\n    }\n  }\n  return hasAttrsChanged;\n}\nfunction resolvePropValue(options, props, key, value, instance, isAbsent) {\n  const opt = options[key];\n  if (opt != null) {\n    const hasDefault = hasOwn(opt, \"default\");\n    if (hasDefault && value === void 0) {\n      const defaultValue = opt.default;\n      if (opt.type !== Function && !opt.skipFactory && isFunction(defaultValue)) {\n        const { propsDefaults } = instance;\n        if (key in propsDefaults) {\n          value = propsDefaults[key];\n        } else {\n          const reset = setCurrentInstance(instance);\n          value = propsDefaults[key] = defaultValue.call(\n            null,\n            props\n          );\n          reset();\n        }\n      } else {\n        value = defaultValue;\n      }\n    }\n    if (opt[0 /* shouldCast */]) {\n      if (isAbsent && !hasDefault) {\n        value = false;\n      } else if (opt[1 /* shouldCastTrue */] && (value === \"\" || value === hyphenate(key))) {\n        value = true;\n      }\n    }\n  }\n  return value;\n}\nfunction normalizePropsOptions(comp, appContext, asMixin = false) {\n  const cache = appContext.propsCache;\n  const cached = cache.get(comp);\n  if (cached) {\n    return cached;\n  }\n  const raw = comp.props;\n  const normalized = {};\n  const needCastKeys = [];\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendProps = (raw2) => {\n      hasExtends = true;\n      const [props, keys] = normalizePropsOptions(raw2, appContext, true);\n      extend(normalized, props);\n      if (keys)\n        needCastKeys.push(...keys);\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendProps);\n    }\n    if (comp.extends) {\n      extendProps(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendProps);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, EMPTY_ARR);\n    }\n    return EMPTY_ARR;\n  }\n  if (isArray(raw)) {\n    for (let i = 0; i < raw.length; i++) {\n      if (!!(process.env.NODE_ENV !== \"production\") && !isString(raw[i])) {\n        warn$1(`props must be strings when using array syntax.`, raw[i]);\n      }\n      const normalizedKey = camelize(raw[i]);\n      if (validatePropName(normalizedKey)) {\n        normalized[normalizedKey] = EMPTY_OBJ;\n      }\n    }\n  } else if (raw) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isObject(raw)) {\n      warn$1(`invalid props options`, raw);\n    }\n    for (const key in raw) {\n      const normalizedKey = camelize(key);\n      if (validatePropName(normalizedKey)) {\n        const opt = raw[key];\n        const prop = normalized[normalizedKey] = isArray(opt) || isFunction(opt) ? { type: opt } : extend({}, opt);\n        if (prop) {\n          const booleanIndex = getTypeIndex(Boolean, prop.type);\n          const stringIndex = getTypeIndex(String, prop.type);\n          prop[0 /* shouldCast */] = booleanIndex > -1;\n          prop[1 /* shouldCastTrue */] = stringIndex < 0 || booleanIndex < stringIndex;\n          if (booleanIndex > -1 || hasOwn(prop, \"default\")) {\n            needCastKeys.push(normalizedKey);\n          }\n        }\n      }\n    }\n  }\n  const res = [normalized, needCastKeys];\n  if (isObject(comp)) {\n    cache.set(comp, res);\n  }\n  return res;\n}\nfunction validatePropName(key) {\n  if (key[0] !== \"$\" && !isReservedProp(key)) {\n    return true;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid prop name: \"${key}\" is a reserved property.`);\n  }\n  return false;\n}\nfunction getType(ctor) {\n  if (ctor === null) {\n    return \"null\";\n  }\n  if (typeof ctor === \"function\") {\n    return ctor.name || \"\";\n  } else if (typeof ctor === \"object\") {\n    const name = ctor.constructor && ctor.constructor.name;\n    return name || \"\";\n  }\n  return \"\";\n}\nfunction isSameType(a, b) {\n  return getType(a) === getType(b);\n}\nfunction getTypeIndex(type, expectedTypes) {\n  if (isArray(expectedTypes)) {\n    return expectedTypes.findIndex((t) => isSameType(t, type));\n  } else if (isFunction(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1;\n  }\n  return -1;\n}\nfunction validateProps(rawProps, props, instance) {\n  const resolvedValues = toRaw(props);\n  const options = instance.propsOptions[0];\n  for (const key in options) {\n    let opt = options[key];\n    if (opt == null)\n      continue;\n    validateProp(\n      key,\n      resolvedValues[key],\n      opt,\n      !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(resolvedValues) : resolvedValues,\n      !hasOwn(rawProps, key) && !hasOwn(rawProps, hyphenate(key))\n    );\n  }\n}\nfunction validateProp(name, value, prop, props, isAbsent) {\n  const { type, required, validator, skipCheck } = prop;\n  if (required && isAbsent) {\n    warn$1('Missing required prop: \"' + name + '\"');\n    return;\n  }\n  if (value == null && !required) {\n    return;\n  }\n  if (type != null && type !== true && !skipCheck) {\n    let isValid = false;\n    const types = isArray(type) ? type : [type];\n    const expectedTypes = [];\n    for (let i = 0; i < types.length && !isValid; i++) {\n      const { valid, expectedType } = assertType(value, types[i]);\n      expectedTypes.push(expectedType || \"\");\n      isValid = valid;\n    }\n    if (!isValid) {\n      warn$1(getInvalidTypeMessage(name, value, expectedTypes));\n      return;\n    }\n  }\n  if (validator && !validator(value, props)) {\n    warn$1('Invalid prop: custom validator check failed for prop \"' + name + '\".');\n  }\n}\nconst isSimpleType = /* @__PURE__ */ makeMap(\n  \"String,Number,Boolean,Function,Symbol,BigInt\"\n);\nfunction assertType(value, type) {\n  let valid;\n  const expectedType = getType(type);\n  if (isSimpleType(expectedType)) {\n    const t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    if (!valid && t === \"object\") {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === \"Object\") {\n    valid = isObject(value);\n  } else if (expectedType === \"Array\") {\n    valid = isArray(value);\n  } else if (expectedType === \"null\") {\n    valid = value === null;\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid,\n    expectedType\n  };\n}\nfunction getInvalidTypeMessage(name, value, expectedTypes) {\n  if (expectedTypes.length === 0) {\n    return `Prop type [] for prop \"${name}\" won't match anything. Did you mean to use type Array instead?`;\n  }\n  let message = `Invalid prop: type check failed for prop \"${name}\". Expected ${expectedTypes.map(capitalize).join(\" | \")}`;\n  const expectedType = expectedTypes[0];\n  const receivedType = toRawType(value);\n  const expectedValue = styleValue(value, expectedType);\n  const receivedValue = styleValue(value, receivedType);\n  if (expectedTypes.length === 1 && isExplicable(expectedType) && !isBoolean(expectedType, receivedType)) {\n    message += ` with value ${expectedValue}`;\n  }\n  message += `, got ${receivedType} `;\n  if (isExplicable(receivedType)) {\n    message += `with value ${receivedValue}.`;\n  }\n  return message;\n}\nfunction styleValue(value, type) {\n  if (type === \"String\") {\n    return `\"${value}\"`;\n  } else if (type === \"Number\") {\n    return `${Number(value)}`;\n  } else {\n    return `${value}`;\n  }\n}\nfunction isExplicable(type) {\n  const explicitTypes = [\"string\", \"number\", \"boolean\"];\n  return explicitTypes.some((elem) => type.toLowerCase() === elem);\n}\nfunction isBoolean(...args) {\n  return args.some((elem) => elem.toLowerCase() === \"boolean\");\n}\n\nconst isInternalKey = (key) => key[0] === \"_\" || key === \"$stable\";\nconst normalizeSlotValue = (value) => isArray(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];\nconst normalizeSlot = (key, rawSlot, ctx) => {\n  if (rawSlot._n) {\n    return rawSlot;\n  }\n  const normalized = withCtx((...args) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && currentInstance && (!ctx || ctx.root === currentInstance.root)) {\n      warn$1(\n        `Slot \"${key}\" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`\n      );\n    }\n    return normalizeSlotValue(rawSlot(...args));\n  }, ctx);\n  normalized._c = false;\n  return normalized;\n};\nconst normalizeObjectSlots = (rawSlots, slots, instance) => {\n  const ctx = rawSlots._ctx;\n  for (const key in rawSlots) {\n    if (isInternalKey(key))\n      continue;\n    const value = rawSlots[key];\n    if (isFunction(value)) {\n      slots[key] = normalizeSlot(key, value, ctx);\n    } else if (value != null) {\n      if (!!(process.env.NODE_ENV !== \"production\") && true) {\n        warn$1(\n          `Non-function value encountered for slot \"${key}\". Prefer function slots for better performance.`\n        );\n      }\n      const normalized = normalizeSlotValue(value);\n      slots[key] = () => normalized;\n    }\n  }\n};\nconst normalizeVNodeSlots = (instance, children) => {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isKeepAlive(instance.vnode) && true) {\n    warn$1(\n      `Non-function value encountered for default slot. Prefer function slots for better performance.`\n    );\n  }\n  const normalized = normalizeSlotValue(children);\n  instance.slots.default = () => normalized;\n};\nconst initSlots = (instance, children) => {\n  const slots = instance.slots = createInternalObject();\n  if (instance.vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      extend(slots, children);\n      def(slots, \"_\", type, true);\n    } else {\n      normalizeObjectSlots(children, slots);\n    }\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n  }\n};\nconst updateSlots = (instance, children, optimized) => {\n  const { vnode, slots } = instance;\n  let needDeletionCheck = true;\n  let deletionComparisonTarget = EMPTY_OBJ;\n  if (vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n        extend(slots, children);\n        trigger(instance, \"set\", \"$slots\");\n      } else if (optimized && type === 1) {\n        needDeletionCheck = false;\n      } else {\n        extend(slots, children);\n        if (!optimized && type === 1) {\n          delete slots._;\n        }\n      }\n    } else {\n      needDeletionCheck = !children.$stable;\n      normalizeObjectSlots(children, slots);\n    }\n    deletionComparisonTarget = children;\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n    deletionComparisonTarget = { default: 1 };\n  }\n  if (needDeletionCheck) {\n    for (const key in slots) {\n      if (!isInternalKey(key) && deletionComparisonTarget[key] == null) {\n        delete slots[key];\n      }\n    }\n  }\n};\n\nfunction setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {\n  if (isArray(rawRef)) {\n    rawRef.forEach(\n      (r, i) => setRef(\n        r,\n        oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef),\n        parentSuspense,\n        vnode,\n        isUnmount\n      )\n    );\n    return;\n  }\n  if (isAsyncWrapper(vnode) && !isUnmount) {\n    return;\n  }\n  const refValue = vnode.shapeFlag & 4 ? getExposeProxy(vnode.component) || vnode.component.proxy : vnode.el;\n  const value = isUnmount ? null : refValue;\n  const { i: owner, r: ref } = rawRef;\n  if (!!(process.env.NODE_ENV !== \"production\") && !owner) {\n    warn$1(\n      `Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.`\n    );\n    return;\n  }\n  const oldRef = oldRawRef && oldRawRef.r;\n  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;\n  const setupState = owner.setupState;\n  if (oldRef != null && oldRef !== ref) {\n    if (isString(oldRef)) {\n      refs[oldRef] = null;\n      if (hasOwn(setupState, oldRef)) {\n        setupState[oldRef] = null;\n      }\n    } else if (isRef(oldRef)) {\n      oldRef.value = null;\n    }\n  }\n  if (isFunction(ref)) {\n    callWithErrorHandling(ref, owner, 12, [value, refs]);\n  } else {\n    const _isString = isString(ref);\n    const _isRef = isRef(ref);\n    if (_isString || _isRef) {\n      const doSet = () => {\n        if (rawRef.f) {\n          const existing = _isString ? hasOwn(setupState, ref) ? setupState[ref] : refs[ref] : ref.value;\n          if (isUnmount) {\n            isArray(existing) && remove(existing, refValue);\n          } else {\n            if (!isArray(existing)) {\n              if (_isString) {\n                refs[ref] = [refValue];\n                if (hasOwn(setupState, ref)) {\n                  setupState[ref] = refs[ref];\n                }\n              } else {\n                ref.value = [refValue];\n                if (rawRef.k)\n                  refs[rawRef.k] = ref.value;\n              }\n            } else if (!existing.includes(refValue)) {\n              existing.push(refValue);\n            }\n          }\n        } else if (_isString) {\n          refs[ref] = value;\n          if (hasOwn(setupState, ref)) {\n            setupState[ref] = value;\n          }\n        } else if (_isRef) {\n          ref.value = value;\n          if (rawRef.k)\n            refs[rawRef.k] = value;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n        }\n      };\n      if (value) {\n        doSet.id = -1;\n        queuePostRenderEffect(doSet, parentSuspense);\n      } else {\n        doSet();\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n    }\n  }\n}\n\nlet hasMismatch = false;\nconst isSVGContainer = (container) => container.namespaceURI.includes(\"svg\") && container.tagName !== \"foreignObject\";\nconst isMathMLContainer = (container) => container.namespaceURI.includes(\"MathML\");\nconst getContainerType = (container) => {\n  if (isSVGContainer(container))\n    return \"svg\";\n  if (isMathMLContainer(container))\n    return \"mathml\";\n  return void 0;\n};\nconst isComment = (node) => node.nodeType === 8 /* COMMENT */;\nfunction createHydrationFunctions(rendererInternals) {\n  const {\n    mt: mountComponent,\n    p: patch,\n    o: {\n      patchProp,\n      createText,\n      nextSibling,\n      parentNode,\n      remove,\n      insert,\n      createComment\n    }\n  } = rendererInternals;\n  const hydrate = (vnode, container) => {\n    if (!container.hasChildNodes()) {\n      (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n        `Attempting to hydrate existing markup but container is empty. Performing full mount instead.`\n      );\n      patch(null, vnode, container);\n      flushPostFlushCbs();\n      container._vnode = vnode;\n      return;\n    }\n    hasMismatch = false;\n    hydrateNode(container.firstChild, vnode, null, null, null);\n    flushPostFlushCbs();\n    container._vnode = vnode;\n    if (hasMismatch && true) {\n      console.error(`Hydration completed but contains mismatches.`);\n    }\n  };\n  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const isFragmentStart = isComment(node) && node.data === \"[\";\n    const onMismatch = () => handleMismatch(\n      node,\n      vnode,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      isFragmentStart\n    );\n    const { type, ref, shapeFlag, patchFlag } = vnode;\n    let domType = node.nodeType;\n    vnode.el = node;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      if (!(\"__vnode\" in node)) {\n        Object.defineProperty(node, \"__vnode\", {\n          value: vnode,\n          enumerable: false\n        });\n      }\n      if (!(\"__vueParentComponent\" in node)) {\n        Object.defineProperty(node, \"__vueParentComponent\", {\n          value: parentComponent,\n          enumerable: false\n        });\n      }\n    }\n    if (patchFlag === -2) {\n      optimized = false;\n      vnode.dynamicChildren = null;\n    }\n    let nextNode = null;\n    switch (type) {\n      case Text:\n        if (domType !== 3 /* TEXT */) {\n          if (vnode.children === \"\") {\n            insert(vnode.el = createText(\"\"), parentNode(node), node);\n            nextNode = node;\n          } else {\n            nextNode = onMismatch();\n          }\n        } else {\n          if (node.data !== vnode.children) {\n            hasMismatch = true;\n            (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n              `Hydration text mismatch in`,\n              node.parentNode,\n              `\n  - rendered on server: ${JSON.stringify(\n                node.data\n              )}\n  - expected on client: ${JSON.stringify(vnode.children)}`\n            );\n            node.data = vnode.children;\n          }\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Comment:\n        if (isTemplateNode(node)) {\n          nextNode = nextSibling(node);\n          replaceNode(\n            vnode.el = node.content.firstChild,\n            node,\n            parentComponent\n          );\n        } else if (domType !== 8 /* COMMENT */ || isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Static:\n        if (isFragmentStart) {\n          node = nextSibling(node);\n          domType = node.nodeType;\n        }\n        if (domType === 1 /* ELEMENT */ || domType === 3 /* TEXT */) {\n          nextNode = node;\n          const needToAdoptContent = !vnode.children.length;\n          for (let i = 0; i < vnode.staticCount; i++) {\n            if (needToAdoptContent)\n              vnode.children += nextNode.nodeType === 1 /* ELEMENT */ ? nextNode.outerHTML : nextNode.data;\n            if (i === vnode.staticCount - 1) {\n              vnode.anchor = nextNode;\n            }\n            nextNode = nextSibling(nextNode);\n          }\n          return isFragmentStart ? nextSibling(nextNode) : nextNode;\n        } else {\n          onMismatch();\n        }\n        break;\n      case Fragment:\n        if (!isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = hydrateFragment(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            slotScopeIds,\n            optimized\n          );\n        }\n        break;\n      default:\n        if (shapeFlag & 1) {\n          if ((domType !== 1 /* ELEMENT */ || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) && !isTemplateNode(node)) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = hydrateElement(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized\n            );\n          }\n        } else if (shapeFlag & 6) {\n          vnode.slotScopeIds = slotScopeIds;\n          const container = parentNode(node);\n          if (isFragmentStart) {\n            nextNode = locateClosingAnchor(node);\n          } else if (isComment(node) && node.data === \"teleport start\") {\n            nextNode = locateClosingAnchor(node, node.data, \"teleport end\");\n          } else {\n            nextNode = nextSibling(node);\n          }\n          mountComponent(\n            vnode,\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            getContainerType(container),\n            optimized\n          );\n          if (isAsyncWrapper(vnode)) {\n            let subTree;\n            if (isFragmentStart) {\n              subTree = createVNode(Fragment);\n              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;\n            } else {\n              subTree = node.nodeType === 3 ? createTextVNode(\"\") : createVNode(\"div\");\n            }\n            subTree.el = node;\n            vnode.component.subTree = subTree;\n          }\n        } else if (shapeFlag & 64) {\n          if (domType !== 8 /* COMMENT */) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = vnode.type.hydrate(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized,\n              rendererInternals,\n              hydrateChildren\n            );\n          }\n        } else if (shapeFlag & 128) {\n          nextNode = vnode.type.hydrate(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            getContainerType(parentNode(node)),\n            slotScopeIds,\n            optimized,\n            rendererInternals,\n            hydrateNode\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) {\n          warn$1(\"Invalid HostVNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null) {\n      setRef(ref, null, parentSuspense, vnode);\n    }\n    return nextNode;\n  };\n  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const { type, props, patchFlag, shapeFlag, dirs, transition } = vnode;\n    const forcePatch = type === \"input\" || type === \"option\";\n    if (!!(process.env.NODE_ENV !== \"production\") || forcePatch || patchFlag !== -1) {\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n      }\n      let needCallTransitionHooks = false;\n      if (isTemplateNode(el)) {\n        needCallTransitionHooks = needTransition(parentSuspense, transition) && parentComponent && parentComponent.vnode.props && parentComponent.vnode.props.appear;\n        const content = el.content.firstChild;\n        if (needCallTransitionHooks) {\n          transition.beforeEnter(content);\n        }\n        replaceNode(content, el, parentComponent);\n        vnode.el = el = content;\n      }\n      if (shapeFlag & 16 && // skip if element has innerHTML / textContent\n      !(props && (props.innerHTML || props.textContent))) {\n        let next = hydrateChildren(\n          el.firstChild,\n          vnode,\n          el,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        let hasWarned = false;\n        while (next) {\n          hasMismatch = true;\n          if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n            warn$1(\n              `Hydration children mismatch on`,\n              el,\n              `\nServer rendered element contains more child nodes than client vdom.`\n            );\n            hasWarned = true;\n          }\n          const cur = next;\n          next = next.nextSibling;\n          remove(cur);\n        }\n      } else if (shapeFlag & 8) {\n        if (el.textContent !== vnode.children) {\n          hasMismatch = true;\n          (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n            `Hydration text content mismatch on`,\n            el,\n            `\n  - rendered on server: ${el.textContent}\n  - expected on client: ${vnode.children}`\n          );\n          el.textContent = vnode.children;\n        }\n      }\n      if (props) {\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ || forcePatch || !optimized || patchFlag & (16 | 32)) {\n          for (const key in props) {\n            if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && propHasMismatch(el, key, props[key], vnode, parentComponent)) {\n              hasMismatch = true;\n            }\n            if (forcePatch && (key.endsWith(\"value\") || key === \"indeterminate\") || isOn(key) && !isReservedProp(key) || // force hydrate v-bind with .prop modifiers\n            key[0] === \".\") {\n              patchProp(\n                el,\n                key,\n                null,\n                props[key],\n                void 0,\n                void 0,\n                parentComponent\n              );\n            }\n          }\n        } else if (props.onClick) {\n          patchProp(\n            el,\n            \"onClick\",\n            null,\n            props.onClick,\n            void 0,\n            void 0,\n            parentComponent\n          );\n        }\n      }\n      let vnodeHooks;\n      if (vnodeHooks = props && props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n      }\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n      }\n      if ((vnodeHooks = props && props.onVnodeMounted) || dirs || needCallTransitionHooks) {\n        queueEffectWithSuspense(() => {\n          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n          needCallTransitionHooks && transition.enter(el);\n          dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n        }, parentSuspense);\n      }\n    }\n    return el.nextSibling;\n  };\n  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!parentVNode.dynamicChildren;\n    const children = parentVNode.children;\n    const l = children.length;\n    let hasWarned = false;\n    for (let i = 0; i < l; i++) {\n      const vnode = optimized ? children[i] : children[i] = normalizeVNode(children[i]);\n      if (node) {\n        node = hydrateNode(\n          node,\n          vnode,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      } else if (vnode.type === Text && !vnode.children) {\n        continue;\n      } else {\n        hasMismatch = true;\n        if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n          warn$1(\n            `Hydration children mismatch on`,\n            container,\n            `\nServer rendered element contains fewer child nodes than client vdom.`\n          );\n          hasWarned = true;\n        }\n        patch(\n          null,\n          vnode,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          getContainerType(container),\n          slotScopeIds\n        );\n      }\n    }\n    return node;\n  };\n  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    const { slotScopeIds: fragmentSlotScopeIds } = vnode;\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    const container = parentNode(node);\n    const next = hydrateChildren(\n      nextSibling(node),\n      vnode,\n      container,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      optimized\n    );\n    if (next && isComment(next) && next.data === \"]\") {\n      return nextSibling(vnode.anchor = next);\n    } else {\n      hasMismatch = true;\n      insert(vnode.anchor = createComment(`]`), container, next);\n      return next;\n    }\n  };\n  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {\n    hasMismatch = true;\n    (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n      `Hydration node mismatch:\n- rendered on server:`,\n      node,\n      node.nodeType === 3 /* TEXT */ ? `(text)` : isComment(node) && node.data === \"[\" ? `(start of fragment)` : ``,\n      `\n- expected on client:`,\n      vnode.type\n    );\n    vnode.el = null;\n    if (isFragment) {\n      const end = locateClosingAnchor(node);\n      while (true) {\n        const next2 = nextSibling(node);\n        if (next2 && next2 !== end) {\n          remove(next2);\n        } else {\n          break;\n        }\n      }\n    }\n    const next = nextSibling(node);\n    const container = parentNode(node);\n    remove(node);\n    patch(\n      null,\n      vnode,\n      container,\n      next,\n      parentComponent,\n      parentSuspense,\n      getContainerType(container),\n      slotScopeIds\n    );\n    return next;\n  };\n  const locateClosingAnchor = (node, open = \"[\", close = \"]\") => {\n    let match = 0;\n    while (node) {\n      node = nextSibling(node);\n      if (node && isComment(node)) {\n        if (node.data === open)\n          match++;\n        if (node.data === close) {\n          if (match === 0) {\n            return nextSibling(node);\n          } else {\n            match--;\n          }\n        }\n      }\n    }\n    return node;\n  };\n  const replaceNode = (newNode, oldNode, parentComponent) => {\n    const parentNode2 = oldNode.parentNode;\n    if (parentNode2) {\n      parentNode2.replaceChild(newNode, oldNode);\n    }\n    let parent = parentComponent;\n    while (parent) {\n      if (parent.vnode.el === oldNode) {\n        parent.vnode.el = parent.subTree.el = newNode;\n      }\n      parent = parent.parent;\n    }\n  };\n  const isTemplateNode = (node) => {\n    return node.nodeType === 1 /* ELEMENT */ && node.tagName.toLowerCase() === \"template\";\n  };\n  return [hydrate, hydrateNode];\n}\nfunction propHasMismatch(el, key, clientValue, vnode, instance) {\n  var _a;\n  let mismatchType;\n  let mismatchKey;\n  let actual;\n  let expected;\n  if (key === \"class\") {\n    actual = el.getAttribute(\"class\");\n    expected = normalizeClass(clientValue);\n    if (!isSetEqual(toClassSet(actual || \"\"), toClassSet(expected))) {\n      mismatchType = mismatchKey = `class`;\n    }\n  } else if (key === \"style\") {\n    actual = el.getAttribute(\"style\");\n    expected = isString(clientValue) ? clientValue : stringifyStyle(normalizeStyle(clientValue));\n    const actualMap = toStyleMap(actual);\n    const expectedMap = toStyleMap(expected);\n    if (vnode.dirs) {\n      for (const { dir, value } of vnode.dirs) {\n        if (dir.name === \"show\" && !value) {\n          expectedMap.set(\"display\", \"none\");\n        }\n      }\n    }\n    const root = instance == null ? void 0 : instance.subTree;\n    if (vnode === root || (root == null ? void 0 : root.type) === Fragment && root.children.includes(vnode)) {\n      const cssVars = (_a = instance == null ? void 0 : instance.getCssVars) == null ? void 0 : _a.call(instance);\n      for (const key2 in cssVars) {\n        expectedMap.set(`--${key2}`, String(cssVars[key2]));\n      }\n    }\n    if (!isMapEqual(actualMap, expectedMap)) {\n      mismatchType = mismatchKey = \"style\";\n    }\n  } else if (el instanceof SVGElement && isKnownSvgAttr(key) || el instanceof HTMLElement && (isBooleanAttr(key) || isKnownHtmlAttr(key))) {\n    if (isBooleanAttr(key)) {\n      actual = el.hasAttribute(key);\n      expected = includeBooleanAttr(clientValue);\n    } else if (clientValue == null) {\n      actual = el.hasAttribute(key);\n      expected = false;\n    } else {\n      if (el.hasAttribute(key)) {\n        actual = el.getAttribute(key);\n      } else if (key === \"value\" && el.tagName === \"TEXTAREA\") {\n        actual = el.value;\n      } else {\n        actual = false;\n      }\n      expected = isRenderableAttrValue(clientValue) ? String(clientValue) : false;\n    }\n    if (actual !== expected) {\n      mismatchType = `attribute`;\n      mismatchKey = key;\n    }\n  }\n  if (mismatchType) {\n    const format = (v) => v === false ? `(not rendered)` : `${mismatchKey}=\"${v}\"`;\n    const preSegment = `Hydration ${mismatchType} mismatch on`;\n    const postSegment = `\n  - rendered on server: ${format(actual)}\n  - expected on client: ${format(expected)}\n  Note: this mismatch is check-only. The DOM will not be rectified in production due to performance overhead.\n  You should fix the source of the mismatch.`;\n    {\n      warn$1(preSegment, el, postSegment);\n    }\n    return true;\n  }\n  return false;\n}\nfunction toClassSet(str) {\n  return new Set(str.trim().split(/\\s+/));\n}\nfunction isSetEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const s of a) {\n    if (!b.has(s)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction toStyleMap(str) {\n  const styleMap = /* @__PURE__ */ new Map();\n  for (const item of str.split(\";\")) {\n    let [key, value] = item.split(\":\");\n    key = key == null ? void 0 : key.trim();\n    value = value == null ? void 0 : value.trim();\n    if (key && value) {\n      styleMap.set(key, value);\n    }\n  }\n  return styleMap;\n}\nfunction isMapEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const [key, value] of a) {\n    if (value !== b.get(key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nlet supported;\nlet perf;\nfunction startMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    perf.mark(`vue-${type}-${instance.uid}`);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfStart(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction endMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    const startTag = `vue-${type}-${instance.uid}`;\n    const endTag = startTag + `:end`;\n    perf.mark(endTag);\n    perf.measure(\n      `<${formatComponentName(instance, instance.type)}> ${type}`,\n      startTag,\n      endTag\n    );\n    perf.clearMarks(startTag);\n    perf.clearMarks(endTag);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfEnd(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction isSupported() {\n  if (supported !== void 0) {\n    return supported;\n  }\n  if (typeof window !== \"undefined\" && window.performance) {\n    supported = true;\n    perf = window.performance;\n  } else {\n    supported = false;\n  }\n  return supported;\n}\n\nfunction initFeatureFlags() {\n  const needWarn = [];\n  if (typeof __VUE_OPTIONS_API__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_OPTIONS_API__`);\n    getGlobalThis().__VUE_OPTIONS_API__ = true;\n  }\n  if (typeof __VUE_PROD_DEVTOOLS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_DEVTOOLS__`);\n    getGlobalThis().__VUE_PROD_DEVTOOLS__ = false;\n  }\n  if (typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_HYDRATION_MISMATCH_DETAILS__`);\n    getGlobalThis().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__ = false;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && needWarn.length) {\n    const multi = needWarn.length > 1;\n    console.warn(\n      `Feature flag${multi ? `s` : ``} ${needWarn.join(\", \")} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.\n\nFor more details, see https://link.vuejs.org/feature-flags.`\n    );\n  }\n}\n\nconst queuePostRenderEffect = queueEffectWithSuspense ;\nfunction createRenderer(options) {\n  return baseCreateRenderer(options);\n}\nfunction createHydrationRenderer(options) {\n  return baseCreateRenderer(options, createHydrationFunctions);\n}\nfunction baseCreateRenderer(options, createHydrationFns) {\n  {\n    initFeatureFlags();\n  }\n  const target = getGlobalThis();\n  target.__VUE__ = true;\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    setDevtoolsHook$1(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);\n  }\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    setScopeId: hostSetScopeId = NOOP,\n    insertStaticContent: hostInsertStaticContent\n  } = options;\n  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, namespace = void 0, slotScopeIds = null, optimized = !!(process.env.NODE_ENV !== \"production\") && isHmrUpdating ? false : !!n2.dynamicChildren) => {\n    if (n1 === n2) {\n      return;\n    }\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      anchor = getNextHostNode(n1);\n      unmount(n1, parentComponent, parentSuspense, true);\n      n1 = null;\n    }\n    if (n2.patchFlag === -2) {\n      optimized = false;\n      n2.dynamicChildren = null;\n    }\n    const { type, ref, shapeFlag } = n2;\n    switch (type) {\n      case Text:\n        processText(n1, n2, container, anchor);\n        break;\n      case Comment:\n        processCommentNode(n1, n2, container, anchor);\n        break;\n      case Static:\n        if (n1 == null) {\n          mountStaticNode(n2, container, anchor, namespace);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          patchStaticNode(n1, n2, container, namespace);\n        }\n        break;\n      case Fragment:\n        processFragment(\n          n1,\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        break;\n      default:\n        if (shapeFlag & 1) {\n          processElement(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 6) {\n          processComponent(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 64) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (shapeFlag & 128) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid VNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null && parentComponent) {\n      setRef(ref, n1 && n1.ref, parentSuspense, n2 || n1, !n2);\n    }\n  };\n  const processText = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateText(n2.children),\n        container,\n        anchor\n      );\n    } else {\n      const el = n2.el = n1.el;\n      if (n2.children !== n1.children) {\n        hostSetText(el, n2.children);\n      }\n    }\n  };\n  const processCommentNode = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateComment(n2.children || \"\"),\n        container,\n        anchor\n      );\n    } else {\n      n2.el = n1.el;\n    }\n  };\n  const mountStaticNode = (n2, container, anchor, namespace) => {\n    [n2.el, n2.anchor] = hostInsertStaticContent(\n      n2.children,\n      container,\n      anchor,\n      namespace,\n      n2.el,\n      n2.anchor\n    );\n  };\n  const patchStaticNode = (n1, n2, container, namespace) => {\n    if (n2.children !== n1.children) {\n      const anchor = hostNextSibling(n1.anchor);\n      removeStaticNode(n1);\n      [n2.el, n2.anchor] = hostInsertStaticContent(\n        n2.children,\n        container,\n        anchor,\n        namespace\n      );\n    } else {\n      n2.el = n1.el;\n      n2.anchor = n1.anchor;\n    }\n  };\n  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostInsert(el, container, nextSibling);\n      el = next;\n    }\n    hostInsert(anchor, container, nextSibling);\n  };\n  const removeStaticNode = ({ el, anchor }) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostRemove(el);\n      el = next;\n    }\n    hostRemove(anchor);\n  };\n  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    if (n2.type === \"svg\") {\n      namespace = \"svg\";\n    } else if (n2.type === \"math\") {\n      namespace = \"mathml\";\n    }\n    if (n1 == null) {\n      mountElement(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      patchElement(\n        n1,\n        n2,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let el;\n    let vnodeHook;\n    const { props, shapeFlag, transition, dirs } = vnode;\n    el = vnode.el = hostCreateElement(\n      vnode.type,\n      namespace,\n      props && props.is,\n      props\n    );\n    if (shapeFlag & 8) {\n      hostSetElementText(el, vnode.children);\n    } else if (shapeFlag & 16) {\n      mountChildren(\n        vnode.children,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(vnode, namespace),\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n    }\n    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);\n    if (props) {\n      for (const key in props) {\n        if (key !== \"value\" && !isReservedProp(key)) {\n          hostPatchProp(\n            el,\n            key,\n            null,\n            props[key],\n            namespace,\n            vnode.children,\n            parentComponent,\n            parentSuspense,\n            unmountChildren\n          );\n        }\n      }\n      if (\"value\" in props) {\n        hostPatchProp(el, \"value\", null, props.value, namespace);\n      }\n      if (vnodeHook = props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHook, parentComponent, vnode);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      Object.defineProperty(el, \"__vnode\", {\n        value: vnode,\n        enumerable: false\n      });\n      Object.defineProperty(el, \"__vueParentComponent\", {\n        value: parentComponent,\n        enumerable: false\n      });\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n    }\n    const needCallTransitionHooks = needTransition(parentSuspense, transition);\n    if (needCallTransitionHooks) {\n      transition.beforeEnter(el);\n    }\n    hostInsert(el, container, anchor);\n    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        needCallTransitionHooks && transition.enter(el);\n        dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n      }, parentSuspense);\n    }\n  };\n  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {\n    if (scopeId) {\n      hostSetScopeId(el, scopeId);\n    }\n    if (slotScopeIds) {\n      for (let i = 0; i < slotScopeIds.length; i++) {\n        hostSetScopeId(el, slotScopeIds[i]);\n      }\n    }\n    if (parentComponent) {\n      let subTree = parentComponent.subTree;\n      if (!!(process.env.NODE_ENV !== \"production\") && subTree.patchFlag > 0 && subTree.patchFlag & 2048) {\n        subTree = filterSingleRoot(subTree.children) || subTree;\n      }\n      if (vnode === subTree) {\n        const parentVNode = parentComponent.vnode;\n        setScopeId(\n          el,\n          parentVNode,\n          parentVNode.scopeId,\n          parentVNode.slotScopeIds,\n          parentComponent.parent\n        );\n      }\n    }\n  };\n  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);\n      patch(\n        null,\n        child,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const patchElement = (n1, n2, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const el = n2.el = n1.el;\n    let { patchFlag, dynamicChildren, dirs } = n2;\n    patchFlag |= n1.patchFlag & 16;\n    const oldProps = n1.props || EMPTY_OBJ;\n    const newProps = n2.props || EMPTY_OBJ;\n    let vnodeHook;\n    parentComponent && toggleRecurse(parentComponent, false);\n    if (vnodeHook = newProps.onVnodeBeforeUpdate) {\n      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n    }\n    if (dirs) {\n      invokeDirectiveHook(n2, n1, parentComponent, \"beforeUpdate\");\n    }\n    parentComponent && toggleRecurse(parentComponent, true);\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (dynamicChildren) {\n      patchBlockChildren(\n        n1.dynamicChildren,\n        dynamicChildren,\n        el,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds\n      );\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        traverseStaticChildren(n1, n2);\n      }\n    } else if (!optimized) {\n      patchChildren(\n        n1,\n        n2,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds,\n        false\n      );\n    }\n    if (patchFlag > 0) {\n      if (patchFlag & 16) {\n        patchProps(\n          el,\n          n2,\n          oldProps,\n          newProps,\n          parentComponent,\n          parentSuspense,\n          namespace\n        );\n      } else {\n        if (patchFlag & 2) {\n          if (oldProps.class !== newProps.class) {\n            hostPatchProp(el, \"class\", null, newProps.class, namespace);\n          }\n        }\n        if (patchFlag & 4) {\n          hostPatchProp(el, \"style\", oldProps.style, newProps.style, namespace);\n        }\n        if (patchFlag & 8) {\n          const propsToUpdate = n2.dynamicProps;\n          for (let i = 0; i < propsToUpdate.length; i++) {\n            const key = propsToUpdate[i];\n            const prev = oldProps[key];\n            const next = newProps[key];\n            if (next !== prev || key === \"value\") {\n              hostPatchProp(\n                el,\n                key,\n                prev,\n                next,\n                namespace,\n                n1.children,\n                parentComponent,\n                parentSuspense,\n                unmountChildren\n              );\n            }\n          }\n        }\n      }\n      if (patchFlag & 1) {\n        if (n1.children !== n2.children) {\n          hostSetElementText(el, n2.children);\n        }\n      }\n    } else if (!optimized && dynamicChildren == null) {\n      patchProps(\n        el,\n        n2,\n        oldProps,\n        newProps,\n        parentComponent,\n        parentSuspense,\n        namespace\n      );\n    }\n    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n        dirs && invokeDirectiveHook(n2, n1, parentComponent, \"updated\");\n      }, parentSuspense);\n    }\n  };\n  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, namespace, slotScopeIds) => {\n    for (let i = 0; i < newChildren.length; i++) {\n      const oldVNode = oldChildren[i];\n      const newVNode = newChildren[i];\n      const container = (\n        // oldVNode may be an errored async setup() component inside Suspense\n        // which will not have a mounted element\n        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent\n        // of the Fragment itself so it can move its children.\n        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement\n        // which also requires the correct parent container\n        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.\n        oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : (\n          // In other cases, the parent container is not actually used so we\n          // just pass the block element here to avoid a DOM parentNode call.\n          fallbackContainer\n        )\n      );\n      patch(\n        oldVNode,\n        newVNode,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        true\n      );\n    }\n  };\n  const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, namespace) => {\n    if (oldProps !== newProps) {\n      if (oldProps !== EMPTY_OBJ) {\n        for (const key in oldProps) {\n          if (!isReservedProp(key) && !(key in newProps)) {\n            hostPatchProp(\n              el,\n              key,\n              oldProps[key],\n              null,\n              namespace,\n              vnode.children,\n              parentComponent,\n              parentSuspense,\n              unmountChildren\n            );\n          }\n        }\n      }\n      for (const key in newProps) {\n        if (isReservedProp(key))\n          continue;\n        const next = newProps[key];\n        const prev = oldProps[key];\n        if (next !== prev && key !== \"value\") {\n          hostPatchProp(\n            el,\n            key,\n            prev,\n            next,\n            namespace,\n            vnode.children,\n            parentComponent,\n            parentSuspense,\n            unmountChildren\n          );\n        }\n      }\n      if (\"value\" in newProps) {\n        hostPatchProp(el, \"value\", oldProps.value, newProps.value, namespace);\n      }\n    }\n  };\n  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText(\"\");\n    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText(\"\");\n    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && // #5523 dev root fragment may inherit directives\n    (isHmrUpdating || patchFlag & 2048)) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    if (n1 == null) {\n      hostInsert(fragmentStartAnchor, container, anchor);\n      hostInsert(fragmentEndAnchor, container, anchor);\n      mountChildren(\n        // #10007\n        // such fragment like `<></>` will be compiled into\n        // a fragment which doesn't have a children.\n        // In this case fallback to an empty array\n        n2.children || [],\n        container,\n        fragmentEndAnchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result\n      // of renderSlot() with no valid children\n      n1.dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          container,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          traverseStaticChildren(n1, n2);\n        } else if (\n          // #2080 if the stable fragment has a key, it's a <template v-for> that may\n          //  get moved around. Make sure all root level vnodes inherit el.\n          // #2134 or if it's a component root, it may also get moved around\n          // as the component is being moved.\n          n2.key != null || parentComponent && n2 === parentComponent.subTree\n        ) {\n          traverseStaticChildren(\n            n1,\n            n2,\n            true\n            /* shallow */\n          );\n        }\n      } else {\n        patchChildren(\n          n1,\n          n2,\n          container,\n          fragmentEndAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n  };\n  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    n2.slotScopeIds = slotScopeIds;\n    if (n1 == null) {\n      if (n2.shapeFlag & 512) {\n        parentComponent.ctx.activate(\n          n2,\n          container,\n          anchor,\n          namespace,\n          optimized\n        );\n      } else {\n        mountComponent(\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          optimized\n        );\n      }\n    } else {\n      updateComponent(n1, n2, optimized);\n    }\n  };\n  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, namespace, optimized) => {\n    const instance = (initialVNode.component = createComponentInstance(\n      initialVNode,\n      parentComponent,\n      parentSuspense\n    ));\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      registerHMR(instance);\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      pushWarningContext(initialVNode);\n      startMeasure(instance, `mount`);\n    }\n    if (isKeepAlive(initialVNode)) {\n      instance.ctx.renderer = internals;\n    }\n    {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        startMeasure(instance, `init`);\n      }\n      setupComponent(instance);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        endMeasure(instance, `init`);\n      }\n    }\n    if (instance.asyncDep) {\n      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);\n      if (!initialVNode.el) {\n        const placeholder = instance.subTree = createVNode(Comment);\n        processCommentNode(null, placeholder, container, anchor);\n      }\n    } else {\n      setupRenderEffect(\n        instance,\n        initialVNode,\n        container,\n        anchor,\n        parentSuspense,\n        namespace,\n        optimized\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      popWarningContext();\n      endMeasure(instance, `mount`);\n    }\n  };\n  const updateComponent = (n1, n2, optimized) => {\n    const instance = n2.component = n1.component;\n    if (shouldUpdateComponent(n1, n2, optimized)) {\n      if (instance.asyncDep && !instance.asyncResolved) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(n2);\n        }\n        updateComponentPreRender(instance, n2, optimized);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        return;\n      } else {\n        instance.next = n2;\n        invalidateJob(instance.update);\n        instance.effect.dirty = true;\n        instance.update();\n      }\n    } else {\n      n2.el = n1.el;\n      instance.vnode = n2;\n    }\n  };\n  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, namespace, optimized) => {\n    const componentUpdateFn = () => {\n      if (!instance.isMounted) {\n        let vnodeHook;\n        const { el, props } = initialVNode;\n        const { bm, m, parent } = instance;\n        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);\n        toggleRecurse(instance, false);\n        if (bm) {\n          invokeArrayFns(bm);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {\n          invokeVNodeHook(vnodeHook, parent, initialVNode);\n        }\n        toggleRecurse(instance, true);\n        if (el && hydrateNode) {\n          const hydrateSubTree = () => {\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `render`);\n            }\n            instance.subTree = renderComponentRoot(instance);\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `render`);\n            }\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `hydrate`);\n            }\n            hydrateNode(\n              el,\n              instance.subTree,\n              instance,\n              parentSuspense,\n              null\n            );\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `hydrate`);\n            }\n          };\n          if (isAsyncWrapperVNode) {\n            initialVNode.type.__asyncLoader().then(\n              // note: we are moving the render call into an async callback,\n              // which means it won't track dependencies - but it's ok because\n              // a server-rendered async wrapper is already in resolved state\n              // and it will never need to change.\n              () => !instance.isUnmounted && hydrateSubTree()\n            );\n          } else {\n            hydrateSubTree();\n          }\n        } else {\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `render`);\n          }\n          const subTree = instance.subTree = renderComponentRoot(instance);\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `render`);\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `patch`);\n          }\n          patch(\n            null,\n            subTree,\n            container,\n            anchor,\n            instance,\n            parentSuspense,\n            namespace\n          );\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `patch`);\n          }\n          initialVNode.el = subTree.el;\n        }\n        if (m) {\n          queuePostRenderEffect(m, parentSuspense);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {\n          const scopedInitialVNode = initialVNode;\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode),\n            parentSuspense\n          );\n        }\n        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {\n          instance.a && queuePostRenderEffect(instance.a, parentSuspense);\n        }\n        instance.isMounted = true;\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentAdded(instance);\n        }\n        initialVNode = container = anchor = null;\n      } else {\n        let { next, bu, u, parent, vnode } = instance;\n        {\n          const nonHydratedAsyncRoot = locateNonHydratedAsyncRoot(instance);\n          if (nonHydratedAsyncRoot) {\n            if (next) {\n              next.el = vnode.el;\n              updateComponentPreRender(instance, next, optimized);\n            }\n            nonHydratedAsyncRoot.asyncDep.then(() => {\n              if (!instance.isUnmounted) {\n                componentUpdateFn();\n              }\n            });\n            return;\n          }\n        }\n        let originNext = next;\n        let vnodeHook;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(next || instance.vnode);\n        }\n        toggleRecurse(instance, false);\n        if (next) {\n          next.el = vnode.el;\n          updateComponentPreRender(instance, next, optimized);\n        } else {\n          next = vnode;\n        }\n        if (bu) {\n          invokeArrayFns(bu);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {\n          invokeVNodeHook(vnodeHook, parent, next, vnode);\n        }\n        toggleRecurse(instance, true);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `render`);\n        }\n        const nextTree = renderComponentRoot(instance);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `render`);\n        }\n        const prevTree = instance.subTree;\n        instance.subTree = nextTree;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `patch`);\n        }\n        patch(\n          prevTree,\n          nextTree,\n          // parent may have changed if it's in a teleport\n          hostParentNode(prevTree.el),\n          // anchor may have changed if it's in a fragment\n          getNextHostNode(prevTree),\n          instance,\n          parentSuspense,\n          namespace\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `patch`);\n        }\n        next.el = nextTree.el;\n        if (originNext === null) {\n          updateHOCHostEl(instance, nextTree.el);\n        }\n        if (u) {\n          queuePostRenderEffect(u, parentSuspense);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeUpdated) {\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, next, vnode),\n            parentSuspense\n          );\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentUpdated(instance);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n      }\n    };\n    const effect = instance.effect = new ReactiveEffect(\n      componentUpdateFn,\n      NOOP,\n      () => queueJob(update),\n      instance.scope\n      // track it in component's effect scope\n    );\n    const update = instance.update = () => {\n      if (effect.dirty) {\n        effect.run();\n      }\n    };\n    update.id = instance.uid;\n    toggleRecurse(instance, true);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      effect.onTrack = instance.rtc ? (e) => invokeArrayFns(instance.rtc, e) : void 0;\n      effect.onTrigger = instance.rtg ? (e) => invokeArrayFns(instance.rtg, e) : void 0;\n      update.ownerInstance = instance;\n    }\n    update();\n  };\n  const updateComponentPreRender = (instance, nextVNode, optimized) => {\n    nextVNode.component = instance;\n    const prevProps = instance.vnode.props;\n    instance.vnode = nextVNode;\n    instance.next = null;\n    updateProps(instance, nextVNode.props, prevProps, optimized);\n    updateSlots(instance, nextVNode.children, optimized);\n    pauseTracking();\n    flushPreFlushCbs(instance);\n    resetTracking();\n  };\n  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized = false) => {\n    const c1 = n1 && n1.children;\n    const prevShapeFlag = n1 ? n1.shapeFlag : 0;\n    const c2 = n2.children;\n    const { patchFlag, shapeFlag } = n2;\n    if (patchFlag > 0) {\n      if (patchFlag & 128) {\n        patchKeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      } else if (patchFlag & 256) {\n        patchUnkeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      }\n    }\n    if (shapeFlag & 8) {\n      if (prevShapeFlag & 16) {\n        unmountChildren(c1, parentComponent, parentSuspense);\n      }\n      if (c2 !== c1) {\n        hostSetElementText(container, c2);\n      }\n    } else {\n      if (prevShapeFlag & 16) {\n        if (shapeFlag & 16) {\n          patchKeyedChildren(\n            c1,\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else {\n          unmountChildren(c1, parentComponent, parentSuspense, true);\n        }\n      } else {\n        if (prevShapeFlag & 8) {\n          hostSetElementText(container, \"\");\n        }\n        if (shapeFlag & 16) {\n          mountChildren(\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      }\n    }\n  };\n  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    c1 = c1 || EMPTY_ARR;\n    c2 = c2 || EMPTY_ARR;\n    const oldLength = c1.length;\n    const newLength = c2.length;\n    const commonLength = Math.min(oldLength, newLength);\n    let i;\n    for (i = 0; i < commonLength; i++) {\n      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      patch(\n        c1[i],\n        nextChild,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (oldLength > newLength) {\n      unmountChildren(\n        c1,\n        parentComponent,\n        parentSuspense,\n        true,\n        false,\n        commonLength\n      );\n    } else {\n      mountChildren(\n        c2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        commonLength\n      );\n    }\n  };\n  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let i = 0;\n    const l2 = c2.length;\n    let e1 = c1.length - 1;\n    let e2 = l2 - 1;\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[i];\n      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      i++;\n    }\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1];\n      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      e1--;\n      e2--;\n    }\n    if (i > e1) {\n      if (i <= e2) {\n        const nextPos = e2 + 1;\n        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;\n        while (i <= e2) {\n          patch(\n            null,\n            c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]),\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          i++;\n        }\n      }\n    } else if (i > e2) {\n      while (i <= e1) {\n        unmount(c1[i], parentComponent, parentSuspense, true);\n        i++;\n      }\n    } else {\n      const s1 = i;\n      const s2 = i;\n      const keyToNewIndexMap = /* @__PURE__ */ new Map();\n      for (i = s2; i <= e2; i++) {\n        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n        if (nextChild.key != null) {\n          if (!!(process.env.NODE_ENV !== \"production\") && keyToNewIndexMap.has(nextChild.key)) {\n            warn$1(\n              `Duplicate keys found during update:`,\n              JSON.stringify(nextChild.key),\n              `Make sure keys are unique.`\n            );\n          }\n          keyToNewIndexMap.set(nextChild.key, i);\n        }\n      }\n      let j;\n      let patched = 0;\n      const toBePatched = e2 - s2 + 1;\n      let moved = false;\n      let maxNewIndexSoFar = 0;\n      const newIndexToOldIndexMap = new Array(toBePatched);\n      for (i = 0; i < toBePatched; i++)\n        newIndexToOldIndexMap[i] = 0;\n      for (i = s1; i <= e1; i++) {\n        const prevChild = c1[i];\n        if (patched >= toBePatched) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n          continue;\n        }\n        let newIndex;\n        if (prevChild.key != null) {\n          newIndex = keyToNewIndexMap.get(prevChild.key);\n        } else {\n          for (j = s2; j <= e2; j++) {\n            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {\n              newIndex = j;\n              break;\n            }\n          }\n        }\n        if (newIndex === void 0) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n        } else {\n          newIndexToOldIndexMap[newIndex - s2] = i + 1;\n          if (newIndex >= maxNewIndexSoFar) {\n            maxNewIndexSoFar = newIndex;\n          } else {\n            moved = true;\n          }\n          patch(\n            prevChild,\n            c2[newIndex],\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          patched++;\n        }\n      }\n      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;\n      j = increasingNewIndexSequence.length - 1;\n      for (i = toBePatched - 1; i >= 0; i--) {\n        const nextIndex = s2 + i;\n        const nextChild = c2[nextIndex];\n        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;\n        if (newIndexToOldIndexMap[i] === 0) {\n          patch(\n            null,\n            nextChild,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (moved) {\n          if (j < 0 || i !== increasingNewIndexSequence[j]) {\n            move(nextChild, container, anchor, 2);\n          } else {\n            j--;\n          }\n        }\n      }\n    }\n  };\n  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {\n    const { el, type, transition, children, shapeFlag } = vnode;\n    if (shapeFlag & 6) {\n      move(vnode.component.subTree, container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 128) {\n      vnode.suspense.move(container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 64) {\n      type.move(vnode, container, anchor, internals);\n      return;\n    }\n    if (type === Fragment) {\n      hostInsert(el, container, anchor);\n      for (let i = 0; i < children.length; i++) {\n        move(children[i], container, anchor, moveType);\n      }\n      hostInsert(vnode.anchor, container, anchor);\n      return;\n    }\n    if (type === Static) {\n      moveStaticNode(vnode, container, anchor);\n      return;\n    }\n    const needTransition2 = moveType !== 2 && shapeFlag & 1 && transition;\n    if (needTransition2) {\n      if (moveType === 0) {\n        transition.beforeEnter(el);\n        hostInsert(el, container, anchor);\n        queuePostRenderEffect(() => transition.enter(el), parentSuspense);\n      } else {\n        const { leave, delayLeave, afterLeave } = transition;\n        const remove2 = () => hostInsert(el, container, anchor);\n        const performLeave = () => {\n          leave(el, () => {\n            remove2();\n            afterLeave && afterLeave();\n          });\n        };\n        if (delayLeave) {\n          delayLeave(el, remove2, performLeave);\n        } else {\n          performLeave();\n        }\n      }\n    } else {\n      hostInsert(el, container, anchor);\n    }\n  };\n  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {\n    const {\n      type,\n      props,\n      ref,\n      children,\n      dynamicChildren,\n      shapeFlag,\n      patchFlag,\n      dirs\n    } = vnode;\n    if (ref != null) {\n      setRef(ref, null, parentSuspense, vnode, true);\n    }\n    if (shapeFlag & 256) {\n      parentComponent.ctx.deactivate(vnode);\n      return;\n    }\n    const shouldInvokeDirs = shapeFlag & 1 && dirs;\n    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);\n    let vnodeHook;\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {\n      invokeVNodeHook(vnodeHook, parentComponent, vnode);\n    }\n    if (shapeFlag & 6) {\n      unmountComponent(vnode.component, parentSuspense, doRemove);\n    } else {\n      if (shapeFlag & 128) {\n        vnode.suspense.unmount(parentSuspense, doRemove);\n        return;\n      }\n      if (shouldInvokeDirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeUnmount\");\n      }\n      if (shapeFlag & 64) {\n        vnode.type.remove(\n          vnode,\n          parentComponent,\n          parentSuspense,\n          optimized,\n          internals,\n          doRemove\n        );\n      } else if (dynamicChildren && // #1153: fast path should not be taken for non-stable (v-for) fragments\n      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {\n        unmountChildren(\n          dynamicChildren,\n          parentComponent,\n          parentSuspense,\n          false,\n          true\n        );\n      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {\n        unmountChildren(children, parentComponent, parentSuspense);\n      }\n      if (doRemove) {\n        remove(vnode);\n      }\n    }\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, \"unmounted\");\n      }, parentSuspense);\n    }\n  };\n  const remove = (vnode) => {\n    const { type, el, anchor, transition } = vnode;\n    if (type === Fragment) {\n      if (!!(process.env.NODE_ENV !== \"production\") && vnode.patchFlag > 0 && vnode.patchFlag & 2048 && transition && !transition.persisted) {\n        vnode.children.forEach((child) => {\n          if (child.type === Comment) {\n            hostRemove(child.el);\n          } else {\n            remove(child);\n          }\n        });\n      } else {\n        removeFragment(el, anchor);\n      }\n      return;\n    }\n    if (type === Static) {\n      removeStaticNode(vnode);\n      return;\n    }\n    const performRemove = () => {\n      hostRemove(el);\n      if (transition && !transition.persisted && transition.afterLeave) {\n        transition.afterLeave();\n      }\n    };\n    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {\n      const { leave, delayLeave } = transition;\n      const performLeave = () => leave(el, performRemove);\n      if (delayLeave) {\n        delayLeave(vnode.el, performRemove, performLeave);\n      } else {\n        performLeave();\n      }\n    } else {\n      performRemove();\n    }\n  };\n  const removeFragment = (cur, end) => {\n    let next;\n    while (cur !== end) {\n      next = hostNextSibling(cur);\n      hostRemove(cur);\n      cur = next;\n    }\n    hostRemove(end);\n  };\n  const unmountComponent = (instance, parentSuspense, doRemove) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      unregisterHMR(instance);\n    }\n    const { bum, scope, update, subTree, um } = instance;\n    if (bum) {\n      invokeArrayFns(bum);\n    }\n    scope.stop();\n    if (update) {\n      update.active = false;\n      unmount(subTree, instance, parentSuspense, doRemove);\n    }\n    if (um) {\n      queuePostRenderEffect(um, parentSuspense);\n    }\n    queuePostRenderEffect(() => {\n      instance.isUnmounted = true;\n    }, parentSuspense);\n    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {\n      parentSuspense.deps--;\n      if (parentSuspense.deps === 0) {\n        parentSuspense.resolve();\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentRemoved(instance);\n    }\n  };\n  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);\n    }\n  };\n  const getNextHostNode = (vnode) => {\n    if (vnode.shapeFlag & 6) {\n      return getNextHostNode(vnode.component.subTree);\n    }\n    if (vnode.shapeFlag & 128) {\n      return vnode.suspense.next();\n    }\n    return hostNextSibling(vnode.anchor || vnode.el);\n  };\n  let isFlushing = false;\n  const render = (vnode, container, namespace) => {\n    if (vnode == null) {\n      if (container._vnode) {\n        unmount(container._vnode, null, null, true);\n      }\n    } else {\n      patch(\n        container._vnode || null,\n        vnode,\n        container,\n        null,\n        null,\n        null,\n        namespace\n      );\n    }\n    if (!isFlushing) {\n      isFlushing = true;\n      flushPreFlushCbs();\n      flushPostFlushCbs();\n      isFlushing = false;\n    }\n    container._vnode = vnode;\n  };\n  const internals = {\n    p: patch,\n    um: unmount,\n    m: move,\n    r: remove,\n    mt: mountComponent,\n    mc: mountChildren,\n    pc: patchChildren,\n    pbc: patchBlockChildren,\n    n: getNextHostNode,\n    o: options\n  };\n  let hydrate;\n  let hydrateNode;\n  if (createHydrationFns) {\n    [hydrate, hydrateNode] = createHydrationFns(\n      internals\n    );\n  }\n  return {\n    render,\n    hydrate,\n    createApp: createAppAPI(render, hydrate)\n  };\n}\nfunction resolveChildrenNamespace({ type, props }, currentNamespace) {\n  return currentNamespace === \"svg\" && type === \"foreignObject\" || currentNamespace === \"mathml\" && type === \"annotation-xml\" && props && props.encoding && props.encoding.includes(\"html\") ? void 0 : currentNamespace;\n}\nfunction toggleRecurse({ effect, update }, allowed) {\n  effect.allowRecurse = update.allowRecurse = allowed;\n}\nfunction needTransition(parentSuspense, transition) {\n  return (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;\n}\nfunction traverseStaticChildren(n1, n2, shallow = false) {\n  const ch1 = n1.children;\n  const ch2 = n2.children;\n  if (isArray(ch1) && isArray(ch2)) {\n    for (let i = 0; i < ch1.length; i++) {\n      const c1 = ch1[i];\n      let c2 = ch2[i];\n      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {\n        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {\n          c2 = ch2[i] = cloneIfMounted(ch2[i]);\n          c2.el = c1.el;\n        }\n        if (!shallow)\n          traverseStaticChildren(c1, c2);\n      }\n      if (c2.type === Text) {\n        c2.el = c1.el;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && c2.type === Comment && !c2.el) {\n        c2.el = c1.el;\n      }\n    }\n  }\n}\nfunction getSequence(arr) {\n  const p = arr.slice();\n  const result = [0];\n  let i, j, u, v, c;\n  const len = arr.length;\n  for (i = 0; i < len; i++) {\n    const arrI = arr[i];\n    if (arrI !== 0) {\n      j = result[result.length - 1];\n      if (arr[j] < arrI) {\n        p[i] = j;\n        result.push(i);\n        continue;\n      }\n      u = 0;\n      v = result.length - 1;\n      while (u < v) {\n        c = u + v >> 1;\n        if (arr[result[c]] < arrI) {\n          u = c + 1;\n        } else {\n          v = c;\n        }\n      }\n      if (arrI < arr[result[u]]) {\n        if (u > 0) {\n          p[i] = result[u - 1];\n        }\n        result[u] = i;\n      }\n    }\n  }\n  u = result.length;\n  v = result[u - 1];\n  while (u-- > 0) {\n    result[u] = v;\n    v = p[v];\n  }\n  return result;\n}\nfunction locateNonHydratedAsyncRoot(instance) {\n  const subComponent = instance.subTree.component;\n  if (subComponent) {\n    if (subComponent.asyncDep && !subComponent.asyncResolved) {\n      return subComponent;\n    } else {\n      return locateNonHydratedAsyncRoot(subComponent);\n    }\n  }\n}\n\nconst isTeleport = (type) => type.__isTeleport;\nconst isTeleportDisabled = (props) => props && (props.disabled || props.disabled === \"\");\nconst isTargetSVG = (target) => typeof SVGElement !== \"undefined\" && target instanceof SVGElement;\nconst isTargetMathML = (target) => typeof MathMLElement === \"function\" && target instanceof MathMLElement;\nconst resolveTarget = (props, select) => {\n  const targetSelector = props && props.to;\n  if (isString(targetSelector)) {\n    if (!select) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Current renderer does not support string target for Teleports. (missing querySelector renderer option)`\n      );\n      return null;\n    } else {\n      const target = select(targetSelector);\n      if (!target) {\n        !!(process.env.NODE_ENV !== \"production\") && warn$1(\n          `Failed to locate Teleport target with selector \"${targetSelector}\". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`\n        );\n      }\n      return target;\n    }\n  } else {\n    if (!!(process.env.NODE_ENV !== \"production\") && !targetSelector && !isTeleportDisabled(props)) {\n      warn$1(`Invalid Teleport target: ${targetSelector}`);\n    }\n    return targetSelector;\n  }\n};\nconst TeleportImpl = {\n  name: \"Teleport\",\n  __isTeleport: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, internals) {\n    const {\n      mc: mountChildren,\n      pc: patchChildren,\n      pbc: patchBlockChildren,\n      o: { insert, querySelector, createText, createComment }\n    } = internals;\n    const disabled = isTeleportDisabled(n2.props);\n    let { shapeFlag, children, dynamicChildren } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (n1 == null) {\n      const placeholder = n2.el = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport start\") : createText(\"\");\n      const mainAnchor = n2.anchor = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport end\") : createText(\"\");\n      insert(placeholder, container, anchor);\n      insert(mainAnchor, container, anchor);\n      const target = n2.target = resolveTarget(n2.props, querySelector);\n      const targetAnchor = n2.targetAnchor = createText(\"\");\n      if (target) {\n        insert(targetAnchor, target);\n        if (namespace === \"svg\" || isTargetSVG(target)) {\n          namespace = \"svg\";\n        } else if (namespace === \"mathml\" || isTargetMathML(target)) {\n          namespace = \"mathml\";\n        }\n      } else if (!!(process.env.NODE_ENV !== \"production\") && !disabled) {\n        warn$1(\"Invalid Teleport target on mount:\", target, `(${typeof target})`);\n      }\n      const mount = (container2, anchor2) => {\n        if (shapeFlag & 16) {\n          mountChildren(\n            children,\n            container2,\n            anchor2,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      };\n      if (disabled) {\n        mount(container, mainAnchor);\n      } else if (target) {\n        mount(target, targetAnchor);\n      }\n    } else {\n      n2.el = n1.el;\n      const mainAnchor = n2.anchor = n1.anchor;\n      const target = n2.target = n1.target;\n      const targetAnchor = n2.targetAnchor = n1.targetAnchor;\n      const wasDisabled = isTeleportDisabled(n1.props);\n      const currentContainer = wasDisabled ? container : target;\n      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\n      if (namespace === \"svg\" || isTargetSVG(target)) {\n        namespace = \"svg\";\n      } else if (namespace === \"mathml\" || isTargetMathML(target)) {\n        namespace = \"mathml\";\n      }\n      if (dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          currentContainer,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        traverseStaticChildren(n1, n2, true);\n      } else if (!optimized) {\n        patchChildren(\n          n1,\n          n2,\n          currentContainer,\n          currentAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          false\n        );\n      }\n      if (disabled) {\n        if (!wasDisabled) {\n          moveTeleport(\n            n2,\n            container,\n            mainAnchor,\n            internals,\n            1\n          );\n        } else {\n          if (n2.props && n1.props && n2.props.to !== n1.props.to) {\n            n2.props.to = n1.props.to;\n          }\n        }\n      } else {\n        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\n          const nextTarget = n2.target = resolveTarget(\n            n2.props,\n            querySelector\n          );\n          if (nextTarget) {\n            moveTeleport(\n              n2,\n              nextTarget,\n              null,\n              internals,\n              0\n            );\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Invalid Teleport target on update:\",\n              target,\n              `(${typeof target})`\n            );\n          }\n        } else if (wasDisabled) {\n          moveTeleport(\n            n2,\n            target,\n            targetAnchor,\n            internals,\n            1\n          );\n        }\n      }\n    }\n    updateCssVars(n2);\n  },\n  remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {\n    const { shapeFlag, children, anchor, targetAnchor, target, props } = vnode;\n    if (target) {\n      hostRemove(targetAnchor);\n    }\n    doRemove && hostRemove(anchor);\n    if (shapeFlag & 16) {\n      const shouldRemove = doRemove || !isTeleportDisabled(props);\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        unmount(\n          child,\n          parentComponent,\n          parentSuspense,\n          shouldRemove,\n          !!child.dynamicChildren\n        );\n      }\n    }\n  },\n  move: moveTeleport,\n  hydrate: hydrateTeleport\n};\nfunction moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {\n  if (moveType === 0) {\n    insert(vnode.targetAnchor, container, parentAnchor);\n  }\n  const { el, anchor, shapeFlag, children, props } = vnode;\n  const isReorder = moveType === 2;\n  if (isReorder) {\n    insert(el, container, parentAnchor);\n  }\n  if (!isReorder || isTeleportDisabled(props)) {\n    if (shapeFlag & 16) {\n      for (let i = 0; i < children.length; i++) {\n        move(\n          children[i],\n          container,\n          parentAnchor,\n          2\n        );\n      }\n    }\n  }\n  if (isReorder) {\n    insert(anchor, container, parentAnchor);\n  }\n}\nfunction hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, {\n  o: { nextSibling, parentNode, querySelector }\n}, hydrateChildren) {\n  const target = vnode.target = resolveTarget(\n    vnode.props,\n    querySelector\n  );\n  if (target) {\n    const targetNode = target._lpa || target.firstChild;\n    if (vnode.shapeFlag & 16) {\n      if (isTeleportDisabled(vnode.props)) {\n        vnode.anchor = hydrateChildren(\n          nextSibling(node),\n          vnode,\n          parentNode(node),\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        vnode.targetAnchor = targetNode;\n      } else {\n        vnode.anchor = nextSibling(node);\n        let targetAnchor = targetNode;\n        while (targetAnchor) {\n          targetAnchor = nextSibling(targetAnchor);\n          if (targetAnchor && targetAnchor.nodeType === 8 && targetAnchor.data === \"teleport anchor\") {\n            vnode.targetAnchor = targetAnchor;\n            target._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);\n            break;\n          }\n        }\n        hydrateChildren(\n          targetNode,\n          vnode,\n          target,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n    updateCssVars(vnode);\n  }\n  return vnode.anchor && nextSibling(vnode.anchor);\n}\nconst Teleport = TeleportImpl;\nfunction updateCssVars(vnode) {\n  const ctx = vnode.ctx;\n  if (ctx && ctx.ut) {\n    let node = vnode.children[0].el;\n    while (node && node !== vnode.targetAnchor) {\n      if (node.nodeType === 1)\n        node.setAttribute(\"data-v-owner\", ctx.uid);\n      node = node.nextSibling;\n    }\n    ctx.ut();\n  }\n}\n\nconst Fragment = Symbol.for(\"v-fgt\");\nconst Text = Symbol.for(\"v-txt\");\nconst Comment = Symbol.for(\"v-cmt\");\nconst Static = Symbol.for(\"v-stc\");\nconst blockStack = [];\nlet currentBlock = null;\nfunction openBlock(disableTracking = false) {\n  blockStack.push(currentBlock = disableTracking ? null : []);\n}\nfunction closeBlock() {\n  blockStack.pop();\n  currentBlock = blockStack[blockStack.length - 1] || null;\n}\nlet isBlockTreeEnabled = 1;\nfunction setBlockTracking(value) {\n  isBlockTreeEnabled += value;\n}\nfunction setupBlock(vnode) {\n  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;\n  closeBlock();\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nfunction createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {\n  return setupBlock(\n    createBaseVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      shapeFlag,\n      true\n    )\n  );\n}\nfunction createBlock(type, props, children, patchFlag, dynamicProps) {\n  return setupBlock(\n    createVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      true\n    )\n  );\n}\nfunction isVNode(value) {\n  return value ? value.__v_isVNode === true : false;\n}\nfunction isSameVNodeType(n1, n2) {\n  if (!!(process.env.NODE_ENV !== \"production\") && n2.shapeFlag & 6 && hmrDirtyComponents.has(n2.type)) {\n    n1.shapeFlag &= ~256;\n    n2.shapeFlag &= ~512;\n    return false;\n  }\n  return n1.type === n2.type && n1.key === n2.key;\n}\nlet vnodeArgsTransformer;\nfunction transformVNodeArgs(transformer) {\n  vnodeArgsTransformer = transformer;\n}\nconst createVNodeWithArgsTransform = (...args) => {\n  return _createVNode(\n    ...vnodeArgsTransformer ? vnodeArgsTransformer(args, currentRenderingInstance) : args\n  );\n};\nconst normalizeKey = ({ key }) => key != null ? key : null;\nconst normalizeRef = ({\n  ref,\n  ref_key,\n  ref_for\n}) => {\n  if (typeof ref === \"number\") {\n    ref = \"\" + ref;\n  }\n  return ref != null ? isString(ref) || isRef(ref) || isFunction(ref) ? { i: currentRenderingInstance, r: ref, k: ref_key, f: !!ref_for } : ref : null;\n};\nfunction createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {\n  const vnode = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type,\n    props,\n    key: props && normalizeKey(props),\n    ref: props && normalizeRef(props),\n    scopeId: currentScopeId,\n    slotScopeIds: null,\n    children,\n    component: null,\n    suspense: null,\n    ssContent: null,\n    ssFallback: null,\n    dirs: null,\n    transition: null,\n    el: null,\n    anchor: null,\n    target: null,\n    targetAnchor: null,\n    staticCount: 0,\n    shapeFlag,\n    patchFlag,\n    dynamicProps,\n    dynamicChildren: null,\n    appContext: null,\n    ctx: currentRenderingInstance\n  };\n  if (needFullChildrenNormalization) {\n    normalizeChildren(vnode, children);\n    if (shapeFlag & 128) {\n      type.normalize(vnode);\n    }\n  } else if (children) {\n    vnode.shapeFlag |= isString(children) ? 8 : 16;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && vnode.key !== vnode.key) {\n    warn$1(`VNode created with invalid key (NaN). VNode type:`, vnode.type);\n  }\n  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself\n  !isBlockNode && // has current parent block\n  currentBlock && // presence of a patch flag indicates this node needs patching on updates.\n  // component nodes also should always be patched, because even if the\n  // component doesn't need to update, it needs to persist the instance on to\n  // the next vnode so that it can be properly unmounted later.\n  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the\n  // vnode should not be considered dynamic due to handler caching.\n  vnode.patchFlag !== 32) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nconst createVNode = !!(process.env.NODE_ENV !== \"production\") ? createVNodeWithArgsTransform : _createVNode;\nfunction _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {\n  if (!type || type === NULL_DYNAMIC_COMPONENT) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !type) {\n      warn$1(`Invalid vnode type when creating vnode: ${type}.`);\n    }\n    type = Comment;\n  }\n  if (isVNode(type)) {\n    const cloned = cloneVNode(\n      type,\n      props,\n      true\n      /* mergeRef: true */\n    );\n    if (children) {\n      normalizeChildren(cloned, children);\n    }\n    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {\n      if (cloned.shapeFlag & 6) {\n        currentBlock[currentBlock.indexOf(type)] = cloned;\n      } else {\n        currentBlock.push(cloned);\n      }\n    }\n    cloned.patchFlag |= -2;\n    return cloned;\n  }\n  if (isClassComponent(type)) {\n    type = type.__vccOpts;\n  }\n  if (props) {\n    props = guardReactiveProps(props);\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n      props.class = normalizeClass(klass);\n    }\n    if (isObject(style)) {\n      if (isProxy(style) && !isArray(style)) {\n        style = extend({}, style);\n      }\n      props.style = normalizeStyle(style);\n    }\n  }\n  const shapeFlag = isString(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject(type) ? 4 : isFunction(type) ? 2 : 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && shapeFlag & 4 && isProxy(type)) {\n    type = toRaw(type);\n    warn$1(\n      `Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with \\`markRaw\\` or using \\`shallowRef\\` instead of \\`ref\\`.`,\n      `\nComponent that was made reactive: `,\n      type\n    );\n  }\n  return createBaseVNode(\n    type,\n    props,\n    children,\n    patchFlag,\n    dynamicProps,\n    shapeFlag,\n    isBlockNode,\n    true\n  );\n}\nfunction guardReactiveProps(props) {\n  if (!props)\n    return null;\n  return isProxy(props) || isInternalObject(props) ? extend({}, props) : props;\n}\nfunction cloneVNode(vnode, extraProps, mergeRef = false, cloneTransition = false) {\n  const { props, ref, patchFlag, children, transition } = vnode;\n  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;\n  const cloned = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type: vnode.type,\n    props: mergedProps,\n    key: mergedProps && normalizeKey(mergedProps),\n    ref: extraProps && extraProps.ref ? (\n      // #2078 in the case of <component :is=\"vnode\" ref=\"extra\"/>\n      // if the vnode itself already has a ref, cloneVNode will need to merge\n      // the refs so the single vnode can be set on multiple refs\n      mergeRef && ref ? isArray(ref) ? ref.concat(normalizeRef(extraProps)) : [ref, normalizeRef(extraProps)] : normalizeRef(extraProps)\n    ) : ref,\n    scopeId: vnode.scopeId,\n    slotScopeIds: vnode.slotScopeIds,\n    children: !!(process.env.NODE_ENV !== \"production\") && patchFlag === -1 && isArray(children) ? children.map(deepCloneVNode) : children,\n    target: vnode.target,\n    targetAnchor: vnode.targetAnchor,\n    staticCount: vnode.staticCount,\n    shapeFlag: vnode.shapeFlag,\n    // if the vnode is cloned with extra props, we can no longer assume its\n    // existing patch flag to be reliable and need to add the FULL_PROPS flag.\n    // note: preserve flag for fragments since they use the flag for children\n    // fast paths only.\n    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,\n    dynamicProps: vnode.dynamicProps,\n    dynamicChildren: vnode.dynamicChildren,\n    appContext: vnode.appContext,\n    dirs: vnode.dirs,\n    transition,\n    // These should technically only be non-null on mounted VNodes. However,\n    // they *should* be copied for kept-alive vnodes. So we just always copy\n    // them since them being non-null during a mount doesn't affect the logic as\n    // they will simply be overwritten.\n    component: vnode.component,\n    suspense: vnode.suspense,\n    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),\n    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),\n    el: vnode.el,\n    anchor: vnode.anchor,\n    ctx: vnode.ctx,\n    ce: vnode.ce\n  };\n  if (transition && cloneTransition) {\n    cloned.transition = transition.clone(cloned);\n  }\n  return cloned;\n}\nfunction deepCloneVNode(vnode) {\n  const cloned = cloneVNode(vnode);\n  if (isArray(vnode.children)) {\n    cloned.children = vnode.children.map(deepCloneVNode);\n  }\n  return cloned;\n}\nfunction createTextVNode(text = \" \", flag = 0) {\n  return createVNode(Text, null, text, flag);\n}\nfunction createStaticVNode(content, numberOfNodes) {\n  const vnode = createVNode(Static, null, content);\n  vnode.staticCount = numberOfNodes;\n  return vnode;\n}\nfunction createCommentVNode(text = \"\", asBlock = false) {\n  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);\n}\nfunction normalizeVNode(child) {\n  if (child == null || typeof child === \"boolean\") {\n    return createVNode(Comment);\n  } else if (isArray(child)) {\n    return createVNode(\n      Fragment,\n      null,\n      // #3666, avoid reference pollution when reusing vnode\n      child.slice()\n    );\n  } else if (typeof child === \"object\") {\n    return cloneIfMounted(child);\n  } else {\n    return createVNode(Text, null, String(child));\n  }\n}\nfunction cloneIfMounted(child) {\n  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);\n}\nfunction normalizeChildren(vnode, children) {\n  let type = 0;\n  const { shapeFlag } = vnode;\n  if (children == null) {\n    children = null;\n  } else if (isArray(children)) {\n    type = 16;\n  } else if (typeof children === \"object\") {\n    if (shapeFlag & (1 | 64)) {\n      const slot = children.default;\n      if (slot) {\n        slot._c && (slot._d = false);\n        normalizeChildren(vnode, slot());\n        slot._c && (slot._d = true);\n      }\n      return;\n    } else {\n      type = 32;\n      const slotFlag = children._;\n      if (!slotFlag && !isInternalObject(children)) {\n        children._ctx = currentRenderingInstance;\n      } else if (slotFlag === 3 && currentRenderingInstance) {\n        if (currentRenderingInstance.slots._ === 1) {\n          children._ = 1;\n        } else {\n          children._ = 2;\n          vnode.patchFlag |= 1024;\n        }\n      }\n    }\n  } else if (isFunction(children)) {\n    children = { default: children, _ctx: currentRenderingInstance };\n    type = 32;\n  } else {\n    children = String(children);\n    if (shapeFlag & 64) {\n      type = 16;\n      children = [createTextVNode(children)];\n    } else {\n      type = 8;\n    }\n  }\n  vnode.children = children;\n  vnode.shapeFlag |= type;\n}\nfunction mergeProps(...args) {\n  const ret = {};\n  for (let i = 0; i < args.length; i++) {\n    const toMerge = args[i];\n    for (const key in toMerge) {\n      if (key === \"class\") {\n        if (ret.class !== toMerge.class) {\n          ret.class = normalizeClass([ret.class, toMerge.class]);\n        }\n      } else if (key === \"style\") {\n        ret.style = normalizeStyle([ret.style, toMerge.style]);\n      } else if (isOn(key)) {\n        const existing = ret[key];\n        const incoming = toMerge[key];\n        if (incoming && existing !== incoming && !(isArray(existing) && existing.includes(incoming))) {\n          ret[key] = existing ? [].concat(existing, incoming) : incoming;\n        }\n      } else if (key !== \"\") {\n        ret[key] = toMerge[key];\n      }\n    }\n  }\n  return ret;\n}\nfunction invokeVNodeHook(hook, instance, vnode, prevVNode = null) {\n  callWithAsyncErrorHandling(hook, instance, 7, [\n    vnode,\n    prevVNode\n  ]);\n}\n\nconst emptyAppContext = createAppContext();\nlet uid = 0;\nfunction createComponentInstance(vnode, parent, suspense) {\n  const type = vnode.type;\n  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;\n  const instance = {\n    uid: uid++,\n    vnode,\n    type,\n    parent,\n    appContext,\n    root: null,\n    // to be immediately set\n    next: null,\n    subTree: null,\n    // will be set synchronously right after creation\n    effect: null,\n    update: null,\n    // will be set synchronously right after creation\n    scope: new EffectScope(\n      true\n      /* detached */\n    ),\n    render: null,\n    proxy: null,\n    exposed: null,\n    exposeProxy: null,\n    withProxy: null,\n    provides: parent ? parent.provides : Object.create(appContext.provides),\n    accessCache: null,\n    renderCache: [],\n    // local resolved assets\n    components: null,\n    directives: null,\n    // resolved props and emits options\n    propsOptions: normalizePropsOptions(type, appContext),\n    emitsOptions: normalizeEmitsOptions(type, appContext),\n    // emit\n    emit: null,\n    // to be set immediately\n    emitted: null,\n    // props default value\n    propsDefaults: EMPTY_OBJ,\n    // inheritAttrs\n    inheritAttrs: type.inheritAttrs,\n    // state\n    ctx: EMPTY_OBJ,\n    data: EMPTY_OBJ,\n    props: EMPTY_OBJ,\n    attrs: EMPTY_OBJ,\n    slots: EMPTY_OBJ,\n    refs: EMPTY_OBJ,\n    setupState: EMPTY_OBJ,\n    setupContext: null,\n    attrsProxy: null,\n    slotsProxy: null,\n    // suspense related\n    suspense,\n    suspenseId: suspense ? suspense.pendingId : 0,\n    asyncDep: null,\n    asyncResolved: false,\n    // lifecycle hooks\n    // not using enums here because it results in computed properties\n    isMounted: false,\n    isUnmounted: false,\n    isDeactivated: false,\n    bc: null,\n    c: null,\n    bm: null,\n    m: null,\n    bu: null,\n    u: null,\n    um: null,\n    bum: null,\n    da: null,\n    a: null,\n    rtg: null,\n    rtc: null,\n    ec: null,\n    sp: null\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    instance.ctx = createDevRenderContext(instance);\n  } else {\n    instance.ctx = { _: instance };\n  }\n  instance.root = parent ? parent.root : instance;\n  instance.emit = emit.bind(null, instance);\n  if (vnode.ce) {\n    vnode.ce(instance);\n  }\n  return instance;\n}\nlet currentInstance = null;\nconst getCurrentInstance = () => currentInstance || currentRenderingInstance;\nlet internalSetCurrentInstance;\nlet setInSSRSetupState;\n{\n  const g = getGlobalThis();\n  const registerGlobalSetter = (key, setter) => {\n    let setters;\n    if (!(setters = g[key]))\n      setters = g[key] = [];\n    setters.push(setter);\n    return (v) => {\n      if (setters.length > 1)\n        setters.forEach((set) => set(v));\n      else\n        setters[0](v);\n    };\n  };\n  internalSetCurrentInstance = registerGlobalSetter(\n    `__VUE_INSTANCE_SETTERS__`,\n    (v) => currentInstance = v\n  );\n  setInSSRSetupState = registerGlobalSetter(\n    `__VUE_SSR_SETTERS__`,\n    (v) => isInSSRComponentSetup = v\n  );\n}\nconst setCurrentInstance = (instance) => {\n  const prev = currentInstance;\n  internalSetCurrentInstance(instance);\n  instance.scope.on();\n  return () => {\n    instance.scope.off();\n    internalSetCurrentInstance(prev);\n  };\n};\nconst unsetCurrentInstance = () => {\n  currentInstance && currentInstance.scope.off();\n  internalSetCurrentInstance(null);\n};\nconst isBuiltInTag = /* @__PURE__ */ makeMap(\"slot,component\");\nfunction validateComponentName(name, { isNativeTag }) {\n  if (isBuiltInTag(name) || isNativeTag(name)) {\n    warn$1(\n      \"Do not use built-in or reserved HTML elements as component id: \" + name\n    );\n  }\n}\nfunction isStatefulComponent(instance) {\n  return instance.vnode.shapeFlag & 4;\n}\nlet isInSSRComponentSetup = false;\nfunction setupComponent(instance, isSSR = false) {\n  isSSR && setInSSRSetupState(isSSR);\n  const { props, children } = instance.vnode;\n  const isStateful = isStatefulComponent(instance);\n  initProps(instance, props, isStateful, isSSR);\n  initSlots(instance, children);\n  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;\n  isSSR && setInSSRSetupState(false);\n  return setupResult;\n}\nfunction setupStatefulComponent(instance, isSSR) {\n  var _a;\n  const Component = instance.type;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    if (Component.name) {\n      validateComponentName(Component.name, instance.appContext.config);\n    }\n    if (Component.components) {\n      const names = Object.keys(Component.components);\n      for (let i = 0; i < names.length; i++) {\n        validateComponentName(names[i], instance.appContext.config);\n      }\n    }\n    if (Component.directives) {\n      const names = Object.keys(Component.directives);\n      for (let i = 0; i < names.length; i++) {\n        validateDirectiveName(names[i]);\n      }\n    }\n    if (Component.compilerOptions && isRuntimeOnly()) {\n      warn$1(\n        `\"compilerOptions\" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.`\n      );\n    }\n  }\n  instance.accessCache = /* @__PURE__ */ Object.create(null);\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    exposePropsOnRenderContext(instance);\n  }\n  const { setup } = Component;\n  if (setup) {\n    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;\n    const reset = setCurrentInstance(instance);\n    pauseTracking();\n    const setupResult = callWithErrorHandling(\n      setup,\n      instance,\n      0,\n      [\n        !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(instance.props) : instance.props,\n        setupContext\n      ]\n    );\n    resetTracking();\n    reset();\n    if (isPromise(setupResult)) {\n      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);\n      if (isSSR) {\n        return setupResult.then((resolvedResult) => {\n          handleSetupResult(instance, resolvedResult, isSSR);\n        }).catch((e) => {\n          handleError(e, instance, 0);\n        });\n      } else {\n        instance.asyncDep = setupResult;\n        if (!!(process.env.NODE_ENV !== \"production\") && !instance.suspense) {\n          const name = (_a = Component.name) != null ? _a : \"Anonymous\";\n          warn$1(\n            `Component <${name}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`\n          );\n        }\n      }\n    } else {\n      handleSetupResult(instance, setupResult, isSSR);\n    }\n  } else {\n    finishComponentSetup(instance, isSSR);\n  }\n}\nfunction handleSetupResult(instance, setupResult, isSSR) {\n  if (isFunction(setupResult)) {\n    if (instance.type.__ssrInlineRender) {\n      instance.ssrRender = setupResult;\n    } else {\n      instance.render = setupResult;\n    }\n  } else if (isObject(setupResult)) {\n    if (!!(process.env.NODE_ENV !== \"production\") && isVNode(setupResult)) {\n      warn$1(\n        `setup() should not return VNodes directly - return a render function instead.`\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.devtoolsRawSetupState = setupResult;\n    }\n    instance.setupState = proxyRefs(setupResult);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      exposeSetupStateOnRenderContext(instance);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\") && setupResult !== void 0) {\n    warn$1(\n      `setup() should return an object. Received: ${setupResult === null ? \"null\" : typeof setupResult}`\n    );\n  }\n  finishComponentSetup(instance, isSSR);\n}\nlet compile;\nlet installWithProxy;\nfunction registerRuntimeCompiler(_compile) {\n  compile = _compile;\n  installWithProxy = (i) => {\n    if (i.render._rc) {\n      i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);\n    }\n  };\n}\nconst isRuntimeOnly = () => !compile;\nfunction finishComponentSetup(instance, isSSR, skipOptions) {\n  const Component = instance.type;\n  if (!instance.render) {\n    if (!isSSR && compile && !Component.render) {\n      const template = Component.template || resolveMergedOptions(instance).template;\n      if (template) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `compile`);\n        }\n        const { isCustomElement, compilerOptions } = instance.appContext.config;\n        const { delimiters, compilerOptions: componentCompilerOptions } = Component;\n        const finalCompilerOptions = extend(\n          extend(\n            {\n              isCustomElement,\n              delimiters\n            },\n            compilerOptions\n          ),\n          componentCompilerOptions\n        );\n        Component.render = compile(template, finalCompilerOptions);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `compile`);\n        }\n      }\n    }\n    instance.render = Component.render || NOOP;\n    if (installWithProxy) {\n      installWithProxy(instance);\n    }\n  }\n  if (__VUE_OPTIONS_API__ && true) {\n    const reset = setCurrentInstance(instance);\n    pauseTracking();\n    try {\n      applyOptions(instance);\n    } finally {\n      resetTracking();\n      reset();\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && !Component.render && instance.render === NOOP && !isSSR) {\n    if (!compile && Component.template) {\n      warn$1(\n        `Component provided template option but runtime compilation is not supported in this build of Vue.` + (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".` )\n      );\n    } else {\n      warn$1(`Component is missing template or render function.`);\n    }\n  }\n}\nconst attrsProxyHandlers = !!(process.env.NODE_ENV !== \"production\") ? {\n  get(target, key) {\n    markAttrsAccessed();\n    track(target, \"get\", \"\");\n    return target[key];\n  },\n  set() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  },\n  deleteProperty() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  }\n} : {\n  get(target, key) {\n    track(target, \"get\", \"\");\n    return target[key];\n  }\n};\nfunction getSlotsProxy(instance) {\n  return instance.slotsProxy || (instance.slotsProxy = new Proxy(instance.slots, {\n    get(target, key) {\n      track(instance, \"get\", \"$slots\");\n      return target[key];\n    }\n  }));\n}\nfunction createSetupContext(instance) {\n  const expose = (exposed) => {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (instance.exposed) {\n        warn$1(`expose() should be called only once per setup().`);\n      }\n      if (exposed != null) {\n        let exposedType = typeof exposed;\n        if (exposedType === \"object\") {\n          if (isArray(exposed)) {\n            exposedType = \"array\";\n          } else if (isRef(exposed)) {\n            exposedType = \"ref\";\n          }\n        }\n        if (exposedType !== \"object\") {\n          warn$1(\n            `expose() should be passed a plain object, received ${exposedType}.`\n          );\n        }\n      }\n    }\n    instance.exposed = exposed || {};\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    let attrsProxy;\n    return Object.freeze({\n      get attrs() {\n        return attrsProxy || (attrsProxy = new Proxy(instance.attrs, attrsProxyHandlers));\n      },\n      get slots() {\n        return getSlotsProxy(instance);\n      },\n      get emit() {\n        return (event, ...args) => instance.emit(event, ...args);\n      },\n      expose\n    });\n  } else {\n    return {\n      attrs: new Proxy(instance.attrs, attrsProxyHandlers),\n      slots: instance.slots,\n      emit: instance.emit,\n      expose\n    };\n  }\n}\nfunction getExposeProxy(instance) {\n  if (instance.exposed) {\n    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {\n      get(target, key) {\n        if (key in target) {\n          return target[key];\n        } else if (key in publicPropertiesMap) {\n          return publicPropertiesMap[key](instance);\n        }\n      },\n      has(target, key) {\n        return key in target || key in publicPropertiesMap;\n      }\n    }));\n  }\n}\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str) => str.replace(classifyRE, (c) => c.toUpperCase()).replace(/[-_]/g, \"\");\nfunction getComponentName(Component, includeInferred = true) {\n  return isFunction(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;\n}\nfunction formatComponentName(instance, Component, isRoot = false) {\n  let name = getComponentName(Component);\n  if (!name && Component.__file) {\n    const match = Component.__file.match(/([^/\\\\]+)\\.\\w+$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n  if (!name && instance && instance.parent) {\n    const inferFromRegistry = (registry) => {\n      for (const key in registry) {\n        if (registry[key] === Component) {\n          return key;\n        }\n      }\n    };\n    name = inferFromRegistry(\n      instance.components || instance.parent.type.components\n    ) || inferFromRegistry(instance.appContext.components);\n  }\n  return name ? classify(name) : isRoot ? `App` : `Anonymous`;\n}\nfunction isClassComponent(value) {\n  return isFunction(value) && \"__vccOpts\" in value;\n}\n\nconst computed = (getterOrOptions, debugOptions) => {\n  const c = computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const i = getCurrentInstance();\n    if (i && i.appContext.config.warnRecursiveComputed) {\n      c._warnRecursive = true;\n    }\n  }\n  return c;\n};\n\nfunction useModel(props, name, options = EMPTY_OBJ) {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useModel() called without active instance.`);\n    return ref();\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && !i.propsOptions[0][name]) {\n    warn$1(`useModel() called with prop \"${name}\" which is not declared.`);\n    return ref();\n  }\n  const camelizedName = camelize(name);\n  const hyphenatedName = hyphenate(name);\n  const res = customRef((track, trigger) => {\n    let localValue;\n    watchSyncEffect(() => {\n      const propValue = props[name];\n      if (hasChanged(localValue, propValue)) {\n        localValue = propValue;\n        trigger();\n      }\n    });\n    return {\n      get() {\n        track();\n        return options.get ? options.get(localValue) : localValue;\n      },\n      set(value) {\n        const rawProps = i.vnode.props;\n        if (!(rawProps && // check if parent has passed v-model\n        (name in rawProps || camelizedName in rawProps || hyphenatedName in rawProps) && (`onUpdate:${name}` in rawProps || `onUpdate:${camelizedName}` in rawProps || `onUpdate:${hyphenatedName}` in rawProps)) && hasChanged(value, localValue)) {\n          localValue = value;\n          trigger();\n        }\n        i.emit(`update:${name}`, options.set ? options.set(value) : value);\n      }\n    };\n  });\n  const modifierKey = name === \"modelValue\" ? \"modelModifiers\" : `${name}Modifiers`;\n  res[Symbol.iterator] = () => {\n    let i2 = 0;\n    return {\n      next() {\n        if (i2 < 2) {\n          return { value: i2++ ? props[modifierKey] || {} : res, done: false };\n        } else {\n          return { done: true };\n        }\n      }\n    };\n  };\n  return res;\n}\n\nfunction h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      return createVNode(type, propsOrChildren);\n    } else {\n      return createVNode(type, null, propsOrChildren);\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    } else if (l === 3 && isVNode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n}\n\nfunction initCustomFormatter() {\n  if (!!!(process.env.NODE_ENV !== \"production\") || typeof window === \"undefined\") {\n    return;\n  }\n  const vueStyle = { style: \"color:#3ba776\" };\n  const numberStyle = { style: \"color:#1677ff\" };\n  const stringStyle = { style: \"color:#f5222d\" };\n  const keywordStyle = { style: \"color:#eb2f96\" };\n  const formatter = {\n    header(obj) {\n      if (!isObject(obj)) {\n        return null;\n      }\n      if (obj.__isVue) {\n        return [\"div\", vueStyle, `VueInstance`];\n      } else if (isRef(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, genRefFlag(obj)],\n          \"<\",\n          formatValue(obj.value),\n          `>`\n        ];\n      } else if (isReactive(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReactive\" : \"Reactive\"],\n          \"<\",\n          formatValue(obj),\n          `>${isReadonly(obj) ? ` (readonly)` : ``}`\n        ];\n      } else if (isReadonly(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReadonly\" : \"Readonly\"],\n          \"<\",\n          formatValue(obj),\n          \">\"\n        ];\n      }\n      return null;\n    },\n    hasBody(obj) {\n      return obj && obj.__isVue;\n    },\n    body(obj) {\n      if (obj && obj.__isVue) {\n        return [\n          \"div\",\n          {},\n          ...formatInstance(obj.$)\n        ];\n      }\n    }\n  };\n  function formatInstance(instance) {\n    const blocks = [];\n    if (instance.type.props && instance.props) {\n      blocks.push(createInstanceBlock(\"props\", toRaw(instance.props)));\n    }\n    if (instance.setupState !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"setup\", instance.setupState));\n    }\n    if (instance.data !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"data\", toRaw(instance.data)));\n    }\n    const computed = extractKeys(instance, \"computed\");\n    if (computed) {\n      blocks.push(createInstanceBlock(\"computed\", computed));\n    }\n    const injected = extractKeys(instance, \"inject\");\n    if (injected) {\n      blocks.push(createInstanceBlock(\"injected\", injected));\n    }\n    blocks.push([\n      \"div\",\n      {},\n      [\n        \"span\",\n        {\n          style: keywordStyle.style + \";opacity:0.66\"\n        },\n        \"$ (internal): \"\n      ],\n      [\"object\", { object: instance }]\n    ]);\n    return blocks;\n  }\n  function createInstanceBlock(type, target) {\n    target = extend({}, target);\n    if (!Object.keys(target).length) {\n      return [\"span\", {}];\n    }\n    return [\n      \"div\",\n      { style: \"line-height:1.25em;margin-bottom:0.6em\" },\n      [\n        \"div\",\n        {\n          style: \"color:#476582\"\n        },\n        type\n      ],\n      [\n        \"div\",\n        {\n          style: \"padding-left:1.25em\"\n        },\n        ...Object.keys(target).map((key) => {\n          return [\n            \"div\",\n            {},\n            [\"span\", keywordStyle, key + \": \"],\n            formatValue(target[key], false)\n          ];\n        })\n      ]\n    ];\n  }\n  function formatValue(v, asRaw = true) {\n    if (typeof v === \"number\") {\n      return [\"span\", numberStyle, v];\n    } else if (typeof v === \"string\") {\n      return [\"span\", stringStyle, JSON.stringify(v)];\n    } else if (typeof v === \"boolean\") {\n      return [\"span\", keywordStyle, v];\n    } else if (isObject(v)) {\n      return [\"object\", { object: asRaw ? toRaw(v) : v }];\n    } else {\n      return [\"span\", stringStyle, String(v)];\n    }\n  }\n  function extractKeys(instance, type) {\n    const Comp = instance.type;\n    if (isFunction(Comp)) {\n      return;\n    }\n    const extracted = {};\n    for (const key in instance.ctx) {\n      if (isKeyOfType(Comp, key, type)) {\n        extracted[key] = instance.ctx[key];\n      }\n    }\n    return extracted;\n  }\n  function isKeyOfType(Comp, key, type) {\n    const opts = Comp[type];\n    if (isArray(opts) && opts.includes(key) || isObject(opts) && key in opts) {\n      return true;\n    }\n    if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {\n      return true;\n    }\n    if (Comp.mixins && Comp.mixins.some((m) => isKeyOfType(m, key, type))) {\n      return true;\n    }\n  }\n  function genRefFlag(v) {\n    if (isShallow(v)) {\n      return `ShallowRef`;\n    }\n    if (v.effect) {\n      return `ComputedRef`;\n    }\n    return `Ref`;\n  }\n  if (window.devtoolsFormatters) {\n    window.devtoolsFormatters.push(formatter);\n  } else {\n    window.devtoolsFormatters = [formatter];\n  }\n}\n\nfunction withMemo(memo, render, cache, index) {\n  const cached = cache[index];\n  if (cached && isMemoSame(cached, memo)) {\n    return cached;\n  }\n  const ret = render();\n  ret.memo = memo.slice();\n  return cache[index] = ret;\n}\nfunction isMemoSame(cached, memo) {\n  const prev = cached.memo;\n  if (prev.length != memo.length) {\n    return false;\n  }\n  for (let i = 0; i < prev.length; i++) {\n    if (hasChanged(prev[i], memo[i])) {\n      return false;\n    }\n  }\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(cached);\n  }\n  return true;\n}\n\nconst version = \"3.4.26\";\nconst warn = !!(process.env.NODE_ENV !== \"production\") ? warn$1 : NOOP;\nconst ErrorTypeStrings = ErrorTypeStrings$1 ;\nconst devtools = !!(process.env.NODE_ENV !== \"production\") || true ? devtools$1 : void 0;\nconst setDevtoolsHook = !!(process.env.NODE_ENV !== \"production\") || true ? setDevtoolsHook$1 : NOOP;\nconst _ssrUtils = {\n  createComponentInstance,\n  setupComponent,\n  renderComponentRoot,\n  setCurrentRenderingInstance,\n  isVNode: isVNode,\n  normalizeVNode\n};\nconst ssrUtils = _ssrUtils ;\nconst resolveFilter = null;\nconst compatUtils = null;\nconst DeprecationTypes = null;\n\nexport { BaseTransition, BaseTransitionPropsValidators, Comment, DeprecationTypes, ErrorCodes, ErrorTypeStrings, Fragment, KeepAlive, Static, Suspense, Teleport, Text, assertNumber, callWithAsyncErrorHandling, callWithErrorHandling, cloneVNode, compatUtils, computed, createBlock, createCommentVNode, createElementBlock, createBaseVNode as createElementVNode, createHydrationRenderer, createPropsRestProxy, createRenderer, createSlots, createStaticVNode, createTextVNode, createVNode, defineAsyncComponent, defineComponent, defineEmits, defineExpose, defineModel, defineOptions, defineProps, defineSlots, devtools, getCurrentInstance, getTransitionRawChildren, guardReactiveProps, h, handleError, hasInjectionContext, initCustomFormatter, inject, isMemoSame, isRuntimeOnly, isVNode, mergeDefaults, mergeModels, mergeProps, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onServerPrefetch, onUnmounted, onUpdated, openBlock, popScopeId, provide, pushScopeId, queuePostFlushCb, registerRuntimeCompiler, renderList, renderSlot, resolveComponent, resolveDirective, resolveDynamicComponent, resolveFilter, resolveTransitionHooks, setBlockTracking, setDevtoolsHook, setTransitionHooks, ssrContextKey, ssrUtils, toHandlers, transformVNodeArgs, useAttrs, useModel, useSSRContext, useSlots, useTransitionState, version, warn, watch, watchEffect, watchPostEffect, watchSyncEffect, withAsyncContext, withCtx, withDefaults, withDirectives, withMemo, withScopeId };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nimport { log, ElementNode } from '../core';\nimport { markRaw } from '@vue/reactivity';\nexport default {\n    createElement(name) {\n        const node = new ElementNode(name);\n        markRaw(node);\n        return node;\n    },\n    createText(text) {\n        // A text node is just a string - not the <text> node\n        return { name: 'TextNode', text, parent: undefined };\n    },\n    createComment(text) {\n        // noop\n        return;\n    },\n    setText(node, value) {\n        log('Replace Text: ', node, value);\n        node.text = value;\n        const parent = node.parent;\n        assertTruthy(parent);\n        parent.text = parent.getText();\n    },\n    setElementText(node, value) {\n        log('SetElementText: ', node, value);\n        const textNode = {\n            name: 'TextNode',\n            text: value,\n            parent: undefined,\n        };\n        node.children.insert(textNode);\n        node.text = node.getText();\n    },\n    setProperty(node, name, prevValue = true, value = true) {\n        node[name] = value;\n    },\n    insert(node, parent, anchor) {\n        log('INSERT: ', parent, node, anchor);\n        parent.children.insert(node, anchor);\n        node._queueDelete = false;\n        if (node instanceof ElementNode) {\n            parent.lng && node.render();\n        }\n        else if (parent.isTextNode()) {\n            // TextNodes can be placed outside of <text> nodes when <Show> is used as placeholder\n            parent.text = parent.getText();\n        }\n    },\n    isTextNode(node) {\n        return node.isTextNode();\n    },\n    remove(node) {\n        log('REMOVE: ', node);\n        node.parent.children.remove(node);\n        node._queueDelete = true;\n        if (node instanceof ElementNode) {\n            // Solid replacesNodes to move them (via insert and remove),\n            // so we need to wait for the next microtask to destroy the node\n            // in the event it gets a new parent.\n            queueMicrotask(() => node.destroy());\n        }\n    },\n    querySelector(query) {\n        return undefined; //getChildById(query);\n    },\n    setScopeId(node, id) {\n        return (node.id = id);\n    },\n    parentNode(node) {\n        return node.parent;\n    },\n    nextSibling(node) {\n        const children = node.parent.children || [];\n        const index = children.indexOf(node) + 1;\n        if (index < children.length) {\n            return children[index];\n        }\n        return undefined;\n    },\n};\n//# sourceMappingURL=vueOps.js.map","/* eslint-disable @typescript-eslint/unbound-method */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createRenderer } from '@vue/runtime-core';\nimport nodeOps from './vueOps.js';\nimport { extend } from '@vue/shared';\nimport { Config, startLightningRenderer } from '../core';\nconst patchProp = nodeOps.setProperty;\nexport const createApp = async function (code, node) {\n    const renderer = startLightningRenderer(Config.rendererOptions, node);\n    await renderer.init();\n    const rootNode = nodeOps.createElement('App');\n    rootNode.lng = renderer.root;\n    baseCreateApp(code).mount(rootNode);\n    return {\n        rootNode,\n        renderer,\n    };\n};\nconst { render, createApp: baseCreateApp } = createRenderer(extend({ patchProp }, nodeOps));\nexport { render };\nexport * from './vueOps.js';\nexport * from '@vue/runtime-core';\n//# sourceMappingURL=render.js.map","export default 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA';\n","import API_KEY_V4 from './key';\nconst API_BASE = 'https://api.themoviedb.org/3';\nlet tmdbConfig;\nlet baseImageUrl;\nconst basePosterSize = 'w185';\n\nconst defaultFetchParams = {\n  headers: {\n    'Content-Type': 'application/json',\n    Authorization: 'Bearer ' + API_KEY_V4,\n  },\n};\n\nexport function getImageUrl(path: string, posterSize: string = basePosterSize) {\n  return baseImageUrl + posterSize + path;\n}\n\nfunction get(path: string, params: RequestInit = {}) {\n  if (tmdbConfig) {\n    return _get(path, params);\n  } else {\n    return loadConfig().then(() => _get(path, params));\n  }\n}\n\nfunction _get(path: string, params: RequestInit = {}) {\n  return fetch(API_BASE + path, {\n    ...defaultFetchParams,\n    ...params,\n  }).then((r) => r.json());\n}\n\nfunction loadConfig() {\n  return _get('/configuration').then((data) => {\n    tmdbConfig = data;\n    baseImageUrl = data.images?.secure_base_url;\n    return data;\n  });\n}\n\nexport default {\n  get,\n  loadConfig,\n};\n","import { getImageUrl } from '../index';\n\nfunction truncateString(str: string, maxLength: number): string {\n  if (str.length > maxLength) {\n    return str.substring(0, maxLength - 3) + '...';\n  }\n  return str;\n}\n\nexport function chunkArray(array: string[], size = 7) {\n  const result: string[][] = [];\n  for (let i = 0, j = array.length; i < j; i += size) {\n    result.push(array.slice(i, i + size));\n  }\n  return result;\n}\n\nexport interface Tile {\n  src: string;\n  tileSrc: string;\n  backdrop: string;\n  href: string;\n  shortTitle: string;\n  title: string;\n  data: unknown;\n  entityInfo: {\n    type: string;\n    id: string;\n  };\n  heroContent: {\n    title: string;\n    description: string;\n  };\n}\n\n// TODO: Remove `any` type\nexport function convertItemsToTiles(items: any[] = []): Tile[] {\n  return items.map((item) => ({\n    src: getImageUrl(item.poster_path || item.profile_path),\n    tileSrc: getImageUrl(item.backdrop_path || item.profile_path, 'w300'),\n    backdrop: getImageUrl(item.backdrop_path, 'w1280'),\n    href: `/entity/${item.media_type || 'people'}/${item.id}`,\n    shortTitle: truncateString(item.title || item.name, 30),\n    title: item.title || item.name,\n    data: item,\n    entityInfo: {\n      type: item.media_type || 'people',\n      id: item.id,\n    },\n    heroContent: {\n      title: item.title || item.name,\n      description: item.overview,\n    },\n  }));\n}\n","import api from '..';\nimport { convertItemsToTiles, chunkArray } from '../formatters/ItemFormatter';\n\nconst cache = new Map();\nconst leftoverTiles = new Map();\n\nexport default function (filter: string) {\n  return (pageIndex: number): Promise<any> => {\n    const url = `/trending/${filter}/week?page=${pageIndex}`;\n    if (cache.has(url)) {\n      return cache.get(url);\n    }\n\n    const result = api.get(url).then((trending) => {\n      const results = trending.results.filter((r) => !r.adult);\n      const tiles = (\n        leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []\n      ).concat(convertItemsToTiles(results));\n      const chunks = chunkArray(tiles);\n      if (chunks[chunks.length - 1].length < 7) {\n        leftoverTiles.set(filter, chunks.pop());\n      } else {\n        leftoverTiles.delete(filter);\n      }\n      return chunks;\n    });\n\n    cache.set(url, result);\n    return result;\n  };\n}\n","<template>\n   <node id=\"contentBlock\" :style=\"ContentBlockStyle\">\n    <text :style=\"HeadlineStyles\">{{title}}</text>\n    <text :style=\"DescriptionStyles\">{{description}}</text>\n  </node>\n</template>\n\n<script setup>\ndefineProps({\n  title: String,\n  description: String\n});\n\nconst blockWidth = 1200;\nconst ContentBlockStyle = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexBoundary: \"fixed\",\n  width: blockWidth,\n  height: 220,\n  gap: 16,\n};\n\nconst HeadlineStyles = {\n  fontSize: 50,\n  fontFamily: \"Ubuntu\",\n  fontWeight: 700,\n  maxLines: 1,\n  width: blockWidth,\n  contain: \"width\",\n};\n\nconst DescriptionStyles = {\n  fontSize: 28,\n  fontFamily: \"Ubuntu\",\n  fontWeight: 400,\n  lineHeight: 32,\n  width: blockWidth,\n  maxLines: 3,\n  contain: \"width\",\n};\n</script>\n","import { activeElement } from 'lightning-vue';\nimport type { ElementNode } from 'lightning-vue';\nimport { watch, ref, type Ref } from 'vue';\n\nexport function isFunc<T = (...args: unknown[]) => unknown>(\n  item: T,\n): item is NonNullable<T> {\n  return typeof item === 'function';\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isArray(item: unknown): item is any[] {\n  return Array.isArray(item);\n}\n\nexport interface DefaultKeyMap {\n  Left: string | number | (string | number)[];\n  Right: string | number | (string | number)[];\n  Up: string | number | (string | number)[];\n  Down: string | number | (string | number)[];\n  Enter: string | number | (string | number)[];\n  Last: string | number | (string | number)[];\n}\n\nexport interface KeyMap extends DefaultKeyMap {}\n\nexport type KeyHandlerReturn = boolean | void;\n\nexport type KeyHandler = (\n  this: ElementNode,\n  e: KeyboardEvent,\n  target: ElementNode,\n  handlerElm: ElementNode,\n) => KeyHandlerReturn;\n\n/**\n * Generates a map of event handlers for each key in the KeyMap\n */\ntype KeyMapEventHandlers = {\n  [K in keyof KeyMap as `on${Capitalize<K>}`]?: KeyHandler;\n};\n\ndeclare module 'lightning-vue' {\n  /**\n   * Augment the existing IntrinsicCommonProps interface with our own\n   * FocusManager-specific properties.\n   */\n  interface IntrinsicCommonProps extends KeyMapEventHandlers {\n    onFocus?: (\n      currentFocusedElm: ElementNode | undefined,\n      prevFocusedElm: ElementNode | undefined,\n    ) => void;\n    onBlur?: (\n      currentFocusedElm: ElementNode | undefined,\n      prevFocusedElm: ElementNode | undefined,\n    ) => void;\n    onKeyPress?: (\n      this: ElementNode,\n      e: KeyboardEvent,\n      mappedKeyEvent: string | undefined,\n      handlerElm: ElementNode,\n      currentFocusedElm: ElementNode,\n    ) => KeyHandlerReturn;\n    onSelectedChanged?: (\n      container: ElementNode,\n      activeElm: ElementNode,\n      selectedIndex: number | undefined,\n      lastSelectedIndex: number | undefined,\n    ) => void;\n    skipFocus?: boolean;\n    wrap?: boolean;\n    plinko?: boolean;\n  }\n\n  interface IntrinsicNodeStyleProps {\n    // TODO: Refactor states to use a $ prefix\n    focus?: IntrinsicNodeStyleProps;\n  }\n\n  interface IntrinsicTextNodeStyleProps {\n    // TODO: Refactor states to use a $ prefix\n    focus?: IntrinsicTextNodeStyleProps;\n  }\n\n  interface TextNode {\n    skipFocus?: undefined;\n  }\n}\n\nconst keyMapEntries: Record<string | number, string> = {\n  ArrowLeft: 'Left',\n  ArrowRight: 'Right',\n  ArrowUp: 'Up',\n  ArrowDown: 'Down',\n  Enter: 'Enter',\n  l: 'Last',\n  ' ': 'Space',\n  Backspace: 'Back',\n  Escape: 'Escape',\n};\n\nconst focusPath = ref<ElementNode[]>([]);\nconst setFocusPath = (value: ElementNode[]) => {\n  focusPath.value = value;\n};\nexport { focusPath };\n\nexport const useFocusManager = (userKeyMap?: Partial<KeyMap>) => {\n  if (userKeyMap) {\n    // Flatten the userKeyMap to a hash\n    for (const [key, value] of Object.entries(userKeyMap)) {\n      if (isArray(value)) {\n        value.forEach((v) => {\n          keyMapEntries[v] = key;\n        });\n      } else {\n        keyMapEntries[value] = key;\n      }\n    }\n  }\n  let prevFocusPath: ElementNode[] = [];\n\n  watch(\n    () => activeElement.value,\n    (currentFocusedElm, prevFocusedElm) => {\n      const newFocusedElms: ElementNode[] = [];\n      let current = currentFocusedElm;\n\n      const fp: ElementNode[] = [];\n      while (current) {\n        if (!current.states.has('focus')) {\n          current.states.add('focus');\n          isFunc(current.onFocus) &&\n            current.onFocus.call(current, currentFocusedElm, prevFocusedElm);\n\n          newFocusedElms.push(current);\n        }\n        fp.push(current);\n        current = current.parent!;\n      }\n\n      prevFocusPath.forEach((elm) => {\n        if (!fp.includes(elm)) {\n          elm.states.remove('focus');\n          isFunc(elm.onBlur) &&\n            elm.onBlur.call(elm, currentFocusedElm, prevFocusedElm);\n        }\n      });\n      prevFocusPath = fp;\n      setFocusPath(fp);\n    },\n  );\n\n  const keyDownHandler = (e) => {\n    if (e) {\n      // Search keyMap for the value of the pressed key or keyCode if value undefined\n      const mappedKeyEvent = keyMapEntries[e.key] || keyMapEntries[e.keyCode];\n      const fp = focusPath.value;\n      let finalFocusElm: ElementNode | undefined = undefined;\n      for (const elm of fp) {\n        finalFocusElm = finalFocusElm || (elm as ElementNode);\n        if (mappedKeyEvent) {\n          const onKeyHandler =\n            elm[`on${mappedKeyEvent}` as keyof KeyMapEventHandlers];\n          if (isFunc(onKeyHandler)) {\n            if (onKeyHandler.call(elm, e, elm, finalFocusElm) === true) {\n              break;\n            }\n          }\n        } else {\n          console.log(`Unhandled key event: ${e.key || e.keyCode}`);\n        }\n\n        if (isFunc(elm.onKeyPress)) {\n          if (\n            elm.onKeyPress.call(elm, e, mappedKeyEvent, elm, finalFocusElm) ===\n            true\n          ) {\n            break;\n          }\n        }\n      }\n      return false;\n    }\n  };\n  document.addEventListener('keydown', keyDownHandler);\n  //document.addEventListener('keyup', keyUpHandler);\n};\n","/*\n * Copyright 2024 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ElementNode } from 'lightning-vue';\n\nexport type KeyHandlerReturn = boolean | void;\n\nexport type KeyHandler = (\n  this: ElementNode,\n  e: KeyboardEvent,\n  target: ElementNode,\n  handlerElm: ElementNode,\n) => KeyHandlerReturn;\n\nexport function onGridFocus(this: ElementNode) {\n  if (!this || this.selected === undefined || this.children.length === 0)\n    return false;\n  let child = this.children[this.selected];\n  while (child?.skipFocus) {\n    this.selected++;\n    child = this.children[this.selected];\n  }\n  if (!(child instanceof ElementNode)) return false;\n  child.setFocus();\n  return true;\n}\n\nexport function handleNavigation(\n  direction: 'up' | 'right' | 'down' | 'left',\n): KeyHandler {\n  return function () {\n    const numChildren = this.children.length;\n    const wrap = this.wrap;\n    const lastSelected = this.selected || 0;\n\n    if (numChildren === 0) {\n      return false;\n    }\n\n    if (direction === 'right' || direction === 'down') {\n      do {\n        this.selected = ((this.selected || 0) % numChildren) + 1;\n        if (this.selected >= numChildren) {\n          if (!wrap) {\n            this.selected = undefined;\n            break;\n          }\n          this.selected = 0;\n        }\n      } while (this.children[this.selected]?.skipFocus);\n    } else if (direction === 'left' || direction === 'up') {\n      do {\n        this.selected = ((this.selected || 0) % numChildren) - 1;\n        if (this.selected < 0) {\n          if (!wrap) {\n            this.selected = undefined;\n            break;\n          }\n          this.selected = numChildren - 1;\n        }\n      } while (this.children[this.selected]?.skipFocus);\n    }\n\n    if (this.selected === undefined) {\n      this.selected = lastSelected;\n      if (this.children[this.selected]?.states!.has('focus')) {\n        // This child is already focused, so bubble up to next handler\n        return false;\n      }\n    }\n    const active = this.children[this.selected] as ElementNode;\n    this.onSelectedChanged &&\n      this.onSelectedChanged.call(\n        this,\n        this,\n        active,\n        this.selected,\n        lastSelected,\n      );\n\n    if (this.plinko && lastSelected !== undefined) {\n      // Set the next item to have the same selected index\n      // so we move up / down directly\n      const lastSelectedChild = this.children[lastSelected] as ElementNode;\n      const num = lastSelectedChild.selected || 0;\n      active.selected =\n        num < active.children.length ? num : active.children.length - 1;\n    }\n    active.setFocus();\n    return true;\n  };\n}\n","<script setup>\n  import browseProvider from \"./api/providers/browse\";\n  import ContentBlock from \"./components/ContentBlock.vue\";\n  import { useFocusManager } from \"./keyhandling\";\n  import { handleNavigation } from \"./handleNavigation\";\n\n  import { ref, onMounted } from 'vue';\n\n  useFocusManager();\n  const alpha = ref(1);\n  const rows = ref([]);\n  const column = ref(null);\n  const bgStyles = {\n    alpha: alpha.value,\n    color: 0xffffffff,\n  };\n\n  const handleRight = handleNavigation('right');\n  const handleLeft = handleNavigation('left');\n  const handleUp = handleNavigation('up');\n  const handleDown = handleNavigation('down');\n\n  const Thumbnail = {\n    borderRadius: 16,\n    width: 185,\n    height: 278,\n    scale: 1,\n    zIndex: 2,\n    transition: { scale: { duration: 250, easing: \"ease-in-out\" } },\n    border: { width: 0, color: 0x00000000 },\n    focus: { scale: 1.1, border: { color: 0xffffff66, width: 8 } },\n  };\n\n  const DuneDescription = \"Follow the mythic journey of Paul Atreides as he unites with Chani and the Fremen while on a path of revenge against the conspirators who destroyed his family. Facing a choice between the love of his life and the fate of the known universe, Paul endeavors to prevent a terrible future only he can foresee.\";\n\n  onMounted(() => {\n    browseProvider('all')(1).then((data) => {\n      rows.value = data;\n      setTimeout(() => column.value.children[1].children[1].setFocus(), 100);\n    });\n\n\n  });\n</script>\n\n\n<template>\n    <node :style=\"{width: 1920, height: 1080}\">\n      <node src=\"./assets/vue.png\" :width=\"200\" :height=\"200\" :x=\"30\" :y=\"20\" />\n      <ContentBlock :y=\"250\" :x=\"150\" title=\"Dune: Part 2\" :description=\"DuneDescription\" />\n      <node ref=\"column\" :onUp=\"handleUp\" :onDown=\"handleDown\" :x=\"150\" :y=\"450\" :width=\"1920\" :height=\"1080\" display=\"flex\" flexDirection=\"column\">\n        <node v-for=\"row in rows\" :onRight=\"handleRight\" :onLeft=\"handleLeft\" display=\"flex\" justifyContent=\"spaceBetween\" :width=\"1620\" :height=\"300\">\n          <node v-for=\"item in row\" :style=\"Thumbnail\" :src=\"item.src\" />\n        </node>\n      </node>\n      <node :width=\"1920\" :height=\"1080\" :zIndex=\"-5\">\n        <node ref=\"bg1\" src=\"https://image.tmdb.org/t/p/w1280/87IVlclAfWL6mdicU1DDuxdwXwe.jpg\" :style=\"bgStyles\" />\n        <node ref=\"bg2\" :style=\"bgStyles\" alpha=\"0\" />\n        <node\n          src=\"./assets/hero-mask-inverted.png\"\n          :color=\"0x000000ff\"\n          :width=\"1920\"\n          :height=\"1080\"\n        />\n      </node>\n    </node>\n</template>\n","import { createApp, Config } from 'lightning-vue';\nimport App from './App.vue';\n\nConfig.debug = false;\nConfig.rendererOptions = {\n  enableInspector: true,\n};\ncreateApp(App);\n"],"file":"assets/main-CM8woGqw.js"}