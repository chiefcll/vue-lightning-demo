var To=Object.defineProperty;var So=(s,t,e)=>t in s?To(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var c=(s,t,e)=>(So(s,typeof t!="symbol"?t+"":t,e),e);import{a as B,i as tn,T as Co,g as ai,E as bt,b as Je,c as Ot,d as Ro,e as Wi,f as Io,m as Kt,W as Yt,h as sn,C as Mo,j as rn,k as Lo,l as li,S as gr,n as nn,B as Fo,o as Eo,p as on,q as Po,r as No,s as Ao,t as Oo,u as mr,v as xr,w as ko,x as an,y as Bo,z as zo,A as $o,D as Do}from"./CoreExtension-Bq9xfxgV.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();class ln{constructor(t){c(this,"releaseCallback");this.releaseCallback=t}}class Uo extends ln{constructor(e,i){super(e);c(this,"textureMap",new Map);c(this,"zeroReferenceTextureSet",new Set);c(this,"options");this.options={textureCleanupIntervalMs:i.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:i.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const r=Date.now(),n=this.options.textureCleanupAgeThreadholdMs;for(const o of this.zeroReferenceTextureSet)r-o.lastUpdate>n&&(this.releaseCallback(o.id),this.textureMap.delete(o.id),this.zeroReferenceTextureSet.delete(o))},this.options.textureCleanupIntervalMs)}registerTexture(e){var r;const i=(r=e.options)==null?void 0:r.id;if(B(i,"Texture must have an id to be registered"),!this.textureMap.has(i)){const n={id:i,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(i,n),this.zeroReferenceTextureSet.add(n)}}incrementTextureRefCount(e){var n;const i=(n=e.options)==null?void 0:n.id;B(i,"Texture must have an id to be registered");let r=this.textureMap.get(i);r||(this.registerTexture(e),r=this.textureMap.get(i)),B(r,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}decrementTextureRefCount(e){var n;const i=(n=e.options)==null?void 0:n.id;B(i,"Texture must have an id to be registered");const r=this.textureMap.get(i);B(r,"Texture must have been registered"),r.nodeRefCount--,r.lastUpdate=Date.now(),r.nodeRefCount===0&&this.zeroReferenceTextureSet.add(r),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Wo extends ln{constructor(e){super(e);c(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var i,r;B((i=e.options)==null?void 0:i.id,"Texture must have an ID to be registered"),this.registry.register(e,(r=e.options)==null?void 0:r.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const jt={alpha:s=>s===1?null:{prop:"opacity",value:`${s}`},x:s=>({prop:"left",value:`${s}px`}),y:s=>({prop:"top",value:`${s}px`}),width:s=>s===0?null:{prop:"width",value:`${s}px`},height:s=>s===0?null:{prop:"height",value:`${s}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:s=>s===!1?null:{prop:"overflow",value:s?"hidden":"visible"},rotation:s=>s===0?null:{prop:"transform",value:`rotate(${s}rad)`},scale:s=>s===1?null:{prop:"transform",value:`scale(${s})`},scaleX:s=>s===1?null:{prop:"transform",value:`scaleX(${s})`},scaleY:s=>s===1?null:{prop:"transform",value:`scaleY(${s})`},color:s=>s===0?null:{prop:"color",value:cn(s)}},cn=s=>{const t=(s&255)/255,e=s>>8&255,i=s>>16&255;return`rgba(${s>>24&255},${i},${e},${t})`},Yo={id:"id"};class Ho{constructor(t,e){c(this,"root",null);c(this,"canvas",null);c(this,"height",1080);c(this,"width",1920);c(this,"scaleX",1);c(this,"scaleY",1);if(tn())return;if(!e)throw new Error("settings is required");this.height=Math.ceil(e.appHeight??1080/(e.deviceLogicalPixelRatio??1)),this.width=Math.ceil(e.appWidth??1900/(e.deviceLogicalPixelRatio??1)),this.scaleX=e.deviceLogicalPixelRatio??1,this.scaleY=e.deviceLogicalPixelRatio??1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,i=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left=`${i}px`,this.root.style.top=`${e}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const i=document.createElement("div");i.style.position="absolute",i.id=t.id.toString();for(const r in e)this.updateNodeProperty(i,r,e[r]);return i}createNode(t,e){const i=t.createNode(e),r=this.createDiv(i,e);return r.node=i,i.div=r,this.createProxy(i,r)}createTextNode(t,e){const i=t.createTextNode(e),r=this.createDiv(i,e);return r.node=i,i.div=r,this.createProxy(i,r)}createProxy(t,e){return new Proxy(t,{set:(i,r,n)=>(this.updateNodeProperty(e,r,n),Reflect.set(i,r,n)),get:(i,r,n)=>(r==="destroy"&&this.destroyNode(i),r==="animate"?(o,a)=>{const l=i.animate(o,a);return new Proxy(l,{get:(d,h,f)=>(h==="start"&&this.animateNode(e,t,o,a),Reflect.get(d,h,f))})}:Reflect.get(i,r,n))})}destroyNode(t){const e=document.getElementById(t.id.toString());e==null||e.remove()}updateNodeProperty(t,e,i){var r;if(!(this.root===null||i===void 0||i===null)){if(e==="parent"){const n=i.id;if(n===1){this.root.appendChild(t);return}const o=document.getElementById(n.toString());o==null||o.appendChild(t);return}if(e==="text"){t.innerHTML=String(i),t.style.visibility="hidden";return}if(e==="src"&&i){t.setAttribute("data-src",String(i));return}if(jt[e]){const n=(r=jt[e])==null?void 0:r.call(jt,i);if(n===null)return;if(typeof n=="string"){t.style.setProperty(n,String(i));return}typeof n=="object"&&t.style.setProperty(n.prop,n.value);return}if(Yo[e]){t.setAttribute(String(jt[e]),String(i));return}if(e==="data"){for(const n in i){const o=i[n];o===void 0?t.removeAttribute(`data-${n}`):t.setAttribute(`data-${n}`,String(o))}return}}}animateNode(t,e,i,r){const{duration:n=1e3,delay:o=0}=r,{x:a,y:l,width:d,height:h,alpha:f=1,rotation:m=0,scale:g=1,color:v}=i;function y(){setTimeout(()=>{t.style.top=`${l}px`,t.style.left=`${a}px`,t.style.width=`${d}px`,t.style.height=`${h}px`,t.style.opacity=`${f}`,t.style.rotate=`${m}rad`,t.style.scale=`${g}`,t.style.color=cn(v)},n)}setTimeout(y,o)}}const jo="modulepreload",Xo=function(s){return"/vue-lightning-demo/"+s},yr={},Vo=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),o=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));r=Promise.all(e.map(a=>{if(a=Xo(a),a in yr)return;yr[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":jo,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};class me{constructor(t){c(this,"priority",1);c(this,"name","");c(this,"ref");c(this,"target");c(this,"passParameters","");c(this,"declaredUniforms","");c(this,"uniformInfo",{});const{ref:e,target:i,props:r={}}=t;this.ref=e,this.target=i;const n={},o=[];let a="";const l=this.constructor.uniforms||{};for(const d in l){const h=l[d],f=h.type,m=`${e}_${d}`;let g="";h.size&&(g=`[${h.size(r)}]`),o.push(m),a+=`uniform ${f} ${m}${g};`,n[d]={name:m,uniform:l[d].method}}this.passParameters=o.join(","),this.declaredUniforms=a,this.uniformInfo=n}static getEffectKey(t){return""}static getMethodParameters(t,e){const i=[];for(const r in t){const n=t[r];let o="";n.size&&(o=`[${n.size(e)}]`),i.push(`${n.type} ${r}${o}`)}return i.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}c(me,"uniforms",{}),c(me,"methods"),c(me,"onShaderMask"),c(me,"onColorize"),c(me,"onEffectMask");const Ko={x:(s,t)=>{s.props.x=t},y:(s,t)=>{s.props.y=t},width:(s,t)=>{s.props.width=t},height:(s,t)=>{s.props.height=t},color:(s,t)=>{s.props.color=t},zIndex:(s,t)=>{s.props.zIndex=t},fontFamily:(s,t)=>{s.props.fontFamily=t},fontWeight:(s,t)=>{s.props.fontWeight=t},fontStyle:(s,t)=>{s.props.fontStyle=t},fontStretch:(s,t)=>{s.props.fontStretch=t},fontSize:(s,t)=>{s.props.fontSize=t},text:(s,t)=>{s.props.text=t},textAlign:(s,t)=>{s.props.textAlign=t},contain:(s,t)=>{s.props.contain=t},offsetY:(s,t)=>{s.props.offsetY=t},scrollable:(s,t)=>{s.props.scrollable=t},scrollY:(s,t)=>{s.props.scrollY=t},letterSpacing:(s,t)=>{s.props.letterSpacing=t},lineHeight:(s,t)=>{s.props.lineHeight=t},maxLines:(s,t)=>{s.props.maxLines=t},textBaseline:(s,t)=>{s.props.textBaseline=t},verticalAlign:(s,t)=>{s.props.verticalAlign=t},overflowSuffix:(s,t)=>{s.props.overflowSuffix=t},debug:(s,t)=>{s.props.debug=t}};class hn{constructor(t){c(this,"stage");c(this,"set");this.stage=t;const e={...Ko,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([i,r])=>[i,(n,o)=>{n.props[i]!==o&&(r(n,o),this.stage.requestRender())}])))}setStatus(t,e,i){t.status!==e&&(t.status=e,t.emitter.emit(e,i))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){["loading","loaded","failed"].forEach(i=>{t.emitter.off(i)})}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.updateScheduled=!1,this.updateState(t)}))}}class vr extends Co{constructor(e,i,r){super(e,i);c(this,"fontFace");c(this,"fontUrl");const n=r.replace(/\(|\)/g,""),o=this.descriptors,a={style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,variant:o.variant,featureSettings:o.featureSettings,display:o.display},l=new FontFace(e,`url(${n})`,a);l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=l,this.fontUrl=r}}const _r=2048;function wr(s,t,e,i,r){const n=s!=="bottom"?.5*t:0;return e*(i-1)+n+Math.max(e,t)+(r||0)}class Go{constructor(t,e){c(this,"_canvas");c(this,"_context");c(this,"_settings");c(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFace],e=[];for(let i=0,r=t.length;i<r;i++)t[i]==="serif"||t[i]==="sans-serif"?e.push(t[i]):e.push(`"${t[i]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch{console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),i=this._settings.paddingLeft*e,r=this._settings.paddingRight*e,n=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||n)*e;const l=this._settings.w*e,d=this._settings.h*e;let h=this._settings.wordWrapWidth*e;const f=this._settings.cutSx*e,m=this._settings.cutEx*e,g=this._settings.cutSy*e,v=this._settings.cutEy*e,y=(this._settings.letterSpacing||0)*e,_=this._settings.textIndent*e;this.setFontProperties();let S=l||2048/this.getPrecision(),P=S-i;if(P<10&&(S+=10-P,P=10),h||(h=P),this._settings.textOverflow&&!this._settings.wordWrap){let D;switch(this._settings.textOverflow){case"clip":D="";break;case"ellipsis":D=this._settings.overflowSuffix;break;default:D=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,h-_,D)}let T;if(this._settings.wordWrap)T=this.wrapText(this._settings.text,h,y,_);else{T={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const D=T.l.length;for(let $=0;$<D-1;$++)T.n.push($)}let R=T.l;if(this._settings.maxLines&&R.length>this._settings.maxLines){const D=R.slice(0,this._settings.maxLines);let $=null;if(this._settings.overflowSuffix){const ce=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,q=this.wrapText(D[D.length-1],h-ce,y,_);D[D.length-1]=`${q.l[0]}${this._settings.overflowSuffix}`,$=[q.l.length>1?q.l[1]:""]}else $=[""];let V;const W=R.length;let ee=0;const re=T.n.length;for(V=this._settings.maxLines;V<W;V++)$[ee]+=`${$[ee]?" ":""}${R[V]}`,V+1<re&&T.n[V+1]&&ee++;t.remainingText=$.join(`
`),t.moreTextLines=!0,R=D}else t.moreTextLines=!1,t.remainingText="";let N=0;const k=[];for(let D=0;D<R.length;D++){const $=this.measureText(R[D],y)+(D===0?_:0);k.push($),N=Math.max(N,$)}t.lineWidths=k,l||(S=N+i+r,P=N),a=a||n;let O;return d?O=d:O=wr(this._settings.textBaseline,n,a,R.length,o),o===null&&(o=n),t.w=S,t.h=O,t.lines=R,t.precision=e,S||(S=1),O||(O=1),(f||m)&&(S=Math.min(S,m-f)),(g||v)&&(O=Math.min(O,v-g)),t.width=S,t.innerWidth=P,t.height=O,t.fontSize=n,t.cutSx=f,t.cutSy=g,t.cutEx=m,t.cutEy=v,t.lineHeight=a,t.lineWidths=k,t.offsetY=o,t.paddingLeft=i,t.paddingRight=r,t.letterSpacing=y,t.textIndent=_,t}draw(t,e){const i=this.getPrecision(),r=(e==null?void 0:e.lines)||t.lines,n=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?wr(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*i):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),_r),this._canvas.height=Math.min(Math.ceil(o),_r),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,l;const d=[];for(let f=0,m=r.length;f<m;f++)a=f===0?t.textIndent:0,l=f*t.lineHeight+t.offsetY,this._settings.verticalAlign=="middle"?l+=(t.lineHeight-t.fontSize)/2:this._settings.verticalAlign=="bottom"&&(l+=t.lineHeight-t.fontSize),this._settings.textAlign==="right"?a+=t.innerWidth-n[f]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-n[f])/2),a+=t.paddingLeft,d.push({text:r[f],x:a,y:l,w:n[f]});if(this._settings.highlight){const f=this._settings.highlightColor,m=this._settings.highlightHeight*i||t.fontSize*1.5,g=this._settings.highlightOffset*i,v=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*i:t.paddingLeft,y=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*i:t.paddingRight;this._context.fillStyle=ai(f);for(let _=0;_<d.length;_++){const S=d[_];this._context.fillRect(S.x-v,S.y-t.offsetY+g,S.w+y+v,m)}}let h=null;this._settings.shadow&&(h=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=ai(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*i,this._context.shadowOffsetY=this._settings.shadowOffsetY*i,this._context.shadowBlur=this._settings.shadowBlur*i),this._context.fillStyle=ai(this._settings.textColor);for(let f=0,m=d.length;f<m;f++){const g=d[f];if(t.letterSpacing===0)this._context.fillText(g.text,g.x,g.y);else{const v=g.text.split("");let y=g.x;for(let _=0,S=v.length;_<S;_++)this._context.fillText(v[_],y,g.y),y+=this.measureText(v[_],t.letterSpacing)}}h&&(this._context.shadowColor=h[0],this._context.shadowOffsetX=h[1],this._context.shadowOffsetY=h[2],this._context.shadowBlur=h[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,i){const r=this._context.measureText(i).width,n=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let a=Math.floor(e*n/o),l=this._context.measureText(t.substring(0,a)).width+r;if(l>e)for(;a>0&&(l=this._context.measureText(t.substring(0,a)).width+r,l>e);)a-=1;else for(;a<n;)if(l=this._context.measureText(t.substring(0,a)).width+r,l<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=r?i:"")}wrapText(t,e,i,r=0){const n=t.split(/\r?\n/g);let o=[];const a=[];for(let l=0;l<n.length;l++){const d=[];let h="",f=e-r;const m=n[l].split(" ");for(let g=0;g<m.length;g++){const v=this.measureText(m[g],i),y=v+this.measureText(" ",i);g===0||y>f?(g>0&&(d.push(h),h=""),h+=m[g],f=e-v-(g===0?r:0)):(f-=y,h+=` ${m[g]}`)}d.push(h),h="",o=o.concat(d),l<n.length-1&&a.push(o.length)}return{l:o,n:a}}measureText(t,e=0){return e?t.split("").reduce((i,r)=>i+this._context.measureText(r).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const br=typeof self>"u"?globalThis:self;var en;const Tr=((en=br.document)==null?void 0:en.fonts)||br.fonts;function qo(s){const{fontFamily:t,fontStyle:e,fontWeight:i,fontStretch:r,fontSize:n}=s;return[e,i,r,`${n}px`,t].join(" ")}const Qo=Ot(0,0,0,0);class Sr extends hn{constructor(e){super(e);c(this,"canvas");c(this,"context");c(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let i=this.canvas.getContext("2d");i||(this.canvas=document.createElement("canvas"),i=this.canvas.getContext("2d")),B(i),this.context=i,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,i)=>{e.props.fontFamily=i,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,i)=>{e.props.fontWeight=i,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,i)=>{e.props.fontStyle=i,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,i)=>{e.props.fontStretch=i,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,i)=>{e.props.fontSize=i,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,i)=>{e.props.text=i,this.invalidateLayoutCache(e)},textAlign:(e,i)=>{e.props.textAlign=i,this.invalidateLayoutCache(e)},color:(e,i)=>{e.props.color=i,this.invalidateLayoutCache(e)},x:(e,i)=>{e.props.x=i,this.invalidateVisibleWindowCache(e)},y:(e,i)=>{e.props.y=i,this.invalidateVisibleWindowCache(e)},contain:(e,i)=>{e.props.contain=i,this.invalidateLayoutCache(e)},width:(e,i)=>{e.props.width=i,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,i)=>{e.props.height=i,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,i)=>{e.props.offsetY=i,this.invalidateLayoutCache(e)},scrollY:(e,i)=>{e.props.scrollY=i},letterSpacing:(e,i)=>{e.props.letterSpacing=i,this.invalidateLayoutCache(e)},lineHeight:(e,i)=>{e.props.lineHeight=i,this.invalidateLayoutCache(e)},maxLines:(e,i)=>{e.props.maxLines=i,this.invalidateLayoutCache(e)},textBaseline:(e,i)=>{e.props.textBaseline=i,this.invalidateLayoutCache(e)},verticalAlign:(e,i)=>{e.props.verticalAlign=i,this.invalidateLayoutCache(e)},overflowSuffix:(e,i)=>{e.props.overflowSuffix=i,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof vr}addFontFace(e){B(e instanceof vr),Tr.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new bt,canvasPages:void 0,lightning2TextRenderer:new Go(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){var v,y;if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const _=qo(e.props);if(e.fontInfo={cssString:_,loaded:!1},!e.fontInfo.loaded){Tr.load(_).then(this.onFontLoaded.bind(this,e,_)).catch(this.onFontLoadError.bind(this,e,_));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){const _=e.props.maxLines,S=e.props.contain==="both"?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,P=S>0&&_>0?Math.min(S,_):Math.max(S,_);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Je(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:P,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:i,y:r,width:n,height:o,scrollY:a,contain:l}=e.props,{visibleWindow:d}=e;let{renderWindow:h,canvasPages:f}=e;if(!d.valid){const _=Ot(i,r,l!=="none"?i+n:1/0,l==="both"?r+o:1/0,Qo);Ro(this.rendererBounds,_,d),d.valid=!0}const m=d.y2-d.y1,g=Math.ceil(m/e.renderInfo.lineHeight);if(m===0){f=void 0,h=void 0,this.setStatus(e,"loaded");return}else if(h&&f){const _=i+h.x1,S=r-a+h.y1,P=i+h.x2,T=r-a+h.y2;if(_<=d.x1&&P>=d.x2&&S<=d.y1&&T>=d.y2){this.setStatus(e,"loaded");return}T<d.y2?(h.y1+=g*e.renderInfo.lineHeight,h.y2+=g*e.renderInfo.lineHeight,f.push(f.shift()),f[2].lineNumStart=f[1].lineNumStart+g,f[2].lineNumEnd=f[2].lineNumStart+g,f[2].valid=!1):S>d.y1&&(h.y1-=g*e.renderInfo.lineHeight,h.y2-=g*e.renderInfo.lineHeight,f.unshift(f.pop()),f[0].lineNumStart=f[1].lineNumStart-g,f[0].lineNumEnd=f[0].lineNumStart+g,f[0].valid=!1)}else{const _=e.renderInfo.lineHeight*g,S=Math.ceil(a/_),P=S*g,T=P-g,R=P+g;f=[{texture:f==null?void 0:f[0].texture,lineNumStart:T,lineNumEnd:T+g,valid:!1},{texture:f==null?void 0:f[1].texture,lineNumStart:P,lineNumEnd:P+g,valid:!1},{texture:f==null?void 0:f[2].texture,lineNumStart:R,lineNumEnd:R+g,valid:!1}],e.canvasPages=f;const N=S*_;h={x1:0,y1:N-_,x2:n,y2:N+_*2}}e.renderWindow=h,performance.now();for(const _ of f)if(!_.valid){if(_.lineNumStart<0){(v=_.texture)==null||v.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),_.texture.setRenderableOwner(e,e.isRenderable),_.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(_.lineNumStart,_.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(_.lineNumStart,_.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((y=_.texture)==null||y.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),_.texture.setRenderableOwner(e,e.isRenderable)),_.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,i,r,n){var D,$,V,W,ee,re,ce,q,X,j,Q,we;const{stage:o}=this,{canvasPages:a,textW:l=0,textH:d=0,renderWindow:h}=e;if(!a||!h)return;const{x:f,y:m,scrollY:g,contain:v,width:y,height:_}=e.props,S={x:f,y:m,width:v!=="none"?y:l,height:v==="both"?_:d};Wi({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},S),B(a,"canvasPages is not defined"),B(h,"renderWindow is not defined");const T=(h.y2-h.y1)/3,{zIndex:R,color:N}=e.props,k=n*Io(N),O=Kt(4294967295,k);a[0].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:r,colorBl:O,colorBr:O,colorTl:O,colorTr:O,width:(($=(D=a[0].texture)==null?void 0:D.dimensions)==null?void 0:$.width)||0,height:((W=(V=a[0].texture)==null?void 0:V.dimensions)==null?void 0:W.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:R,tx:i.tx,ty:i.ty-g+h.y1,ta:i.ta,tb:i.tb,tc:i.tc,td:i.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:r,colorBl:O,colorBr:O,colorTl:O,colorTr:O,width:((re=(ee=a[1].texture)==null?void 0:ee.dimensions)==null?void 0:re.width)||0,height:((q=(ce=a[1].texture)==null?void 0:ce.dimensions)==null?void 0:q.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:R,tx:i.tx,ty:i.ty-g+h.y1+T,ta:i.ta,tb:i.tb,tc:i.tc,td:i.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:k,clippingRect:r,colorBl:O,colorBr:O,colorTl:O,colorTr:O,width:((j=(X=a[2].texture)==null?void 0:X.dimensions)==null?void 0:j.width)||0,height:((we=(Q=a[2].texture)==null?void 0:Q.dimensions)==null?void 0:we.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:R,tx:i.tx,ty:i.ty-g+h.y1+T+T,ta:i.ta,tb:i.tb,tc:i.tc,td:i.td})}setIsRenderable(e,i){var r;super.setIsRenderable(e,i),(r=e.canvasPages)==null||r.forEach(n=>{var o;(o=n.texture)==null||o.setRenderableOwner(e,i)})}destroyState(e){var i;(i=e.canvasPages)==null||i.forEach(r=>{var n;(n=r.texture)==null||n.setRenderableOwner(e,!1)})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,i){var r;i!==((r=e.fontInfo)==null?void 0:r.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,i,r){var n;i!==((n=e.fontInfo)==null?void 0:n.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,r),this.scheduleUpdateState(e))}}class dn extends Yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}c(dn,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class un extends Yt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});c(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:i,glw:r}=this;if(e.length>i.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${i.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((o,a)=>{r.activeTexture(a),r.bindTexture(o.ctxTexture)});const n=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",n)}}c(un,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(i=>`
          ${i!==0?"else ":""}if (idx == ${i}) {
            return texture2D(textures[${i}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});const ci=new Map,Zo=(s,t)=>{const e=JSON.stringify(s);if(ci.has(e))return ci.get(e);const i=(s??[]).map(r=>({type:r.type,props:t[r.type].resolveDefaults(r.props||{})}));return ci.set(e,i),i},et=class et extends Yt{constructor(e,i,r){const n=et.createShader(i,r);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...n.uniforms],shaderSources:{vertex:n.vertex,fragment:n.fragment}});c(this,"effects",[]);this.effects=n.effects,this.calculateProps=sn(this.calculateProps.bind(this))}bindTextures(e){const{glw:i}=this;i.activeTexture(0),i.bindTexture(e[0].ctxTexture)}calculateProps(e){const i=this.renderer.shManager.getRegisteredEffects(),r=[];return e==null||e.forEach((n,o)=>{const a=this.effects[o],l=i[a.name],d=n.props??{},h=a.uniformInfo;Object.keys(d).forEach(f=>{const m=l.uniforms[f],g=h[f];let v=m.validator?m.validator(d[f],d):d[f];Array.isArray(v)&&(v=new Float32Array(v)),r.push({name:g.name,value:v})})}),r}bindProps(e){this.calculateProps(e.effects).forEach(r=>{this.setUniform(r.name,r.value)})}canBatchShaderProps(e,i){if(e.$dimensions.width!==i.$dimensions.width||e.$dimensions.height!==i.$dimensions.height||e.effects.length!==i.effects.length)return!1;const r=e.effects.length;let n=0;for(;n<r;n++){const o=e.effects[n],a=i.effects[n];if(o.type!==a.type)return!1;for(const l in o.props)if(a.props&&!a.props[l]||o.props[l]!==a.props[l])return!1}return!0}static createShader(e,i){const r={},n={};let o="";const a=[],l=[],d=e.effects.map(v=>{const y=i[v.type],_=y.getEffectKey(v.props||{});r[_]=r[_]?++r[_]:1;const S=r[_];S===1&&l.push({key:_,type:v.type,props:v.props});const P=new y({ref:`${_}${S===1?"":S}`,target:_,props:v.props});return o+=P.declaredUniforms,a.push(...Object.values(P.uniformInfo)),P});let h="";l==null||l.forEach(v=>{const y=i[v.type],_=y.resolveDefaults(v.props??{}),S=[];for(const O in y.methods){let D=O;const $=y.methods[O];n[O]&&n[O]!==$&&(D=et.resolveMethodDuplicate(O,$,n)),n[D]=$.replace("function",D),S.push({m:O,cm:D})}let P=y.onShaderMask instanceof Function?y.onShaderMask(_):y.onShaderMask,T=y.onColorize instanceof Function?y.onColorize(_):y.onColorize,R=y.onEffectMask instanceof Function?y.onEffectMask(_):y.onEffectMask;S.forEach(O=>{const{m:D,cm:$}=O,V=new RegExp(`\\$${D}`,"g");P&&(P=P.replace(V,$)),T&&(T=T.replace(V,$)),R&&(R=R.replace(V,$))});const N=y.getMethodParameters(y.uniforms,_),k=N.length>0?`, ${N}`:"";P&&(h+=`
        float fx_${v.key}_onShaderMask(float shaderMask ${k}) {
          ${P}
        }
        `),T&&(h+=`
          vec4 fx_${v.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${k}) {
            ${T}
          }
        `),R&&(h+=`
          vec4 fx_${v.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${k}) {
            ${R}
          }
        `)});let f="";for(const v in n)f+=n[v];let m="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",g=`

    `;for(let v=0;v<d.length;v++){const y=d[v],_=y.passParameters.length>0?`, ${y.passParameters}`:"",S=i[y.name];S.onShaderMask&&(g+=`
        shaderMask = fx_${y.target}_onShaderMask(shaderMask ${_});
        `),S.onColorize&&(g+=`
        maskColor = fx_${y.target}_onColorize(shaderMask, maskColor, shaderColor${_});
        `),S.onEffectMask&&(m=`fx_${y.target}_onEffectMask(shaderMask, maskColor, shaderColor${_})`);const P=d[v+1];(P===void 0||i[P.name].onEffectMask)&&(g+=`
          shaderColor = ${m};
        `)}return{effects:d,uniforms:a,fragment:et.fragment(o,f,h,g),vertex:et.vertex()}}static resolveMethodDuplicate(e,i,r,n=0){const o=e+(n>0?n:"");return r[o]&&r[o]!==i?this.resolveMethodDuplicate(e,i,r,++n):o}static resolveDefaults(e,i){return{effects:Zo(e.effects,i),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,i){var n;let r="";return(n=e.effects)==null||n.forEach(o=>{const l=i[o.type].getEffectKey(o.props||{});r+=`,${l}`}),`DynamicShader${r}`}};c(et,"z$__type__Props"),c(et,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),c(et,"fragment",(e,i,r,n)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${i}

    ${r}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${n}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let kt=et;class bi extends Yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}c(bi,"z$__type__Props"),c(bi,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Jo=new Float32Array([1,0,0,0,1,0,0,0,1]),qs=class qs extends Yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=qs.resolveDefaults(t);for(const i in e)if(i==="transform")this.setUniform("u_transform",!1,e[i]);else if(i==="scrollY")this.setUniform("u_scrollY",e[i]);else if(i==="color"){const r=Je(e.color);this.setUniform("u_color",r)}else i==="size"?this.setUniform("u_size",e[i]):i==="distanceRange"?this.setUniform("u_distanceRange",e[i]):i==="debug"&&this.setUniform("u_debug",e[i]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??Jo,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}};c(qs,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;
        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);
        v_texcoord = a_textureCoordinate;
      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Ti=qs;class Rt extends me{constructor(){super(...arguments);c(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}c(Rt,"z$__type__Props"),c(Rt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let i=e;return Array.isArray(i)?i.length===2?i=[i[0],i[1],i[0],i[1]]:i.length===3?i=[i[0],i[1],i[2],i[0]]:i.length!==4&&(i=[i[0],i[0],i[0],i[0]]):typeof i=="number"&&(i=[i,i,i,i]),i}}}),c(Rt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),c(Rt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),c(Rt,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Gt extends me{constructor(){super(...arguments);c(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Gt,"z$__type__Props"),c(Gt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(Gt,"onEffectMask",`
  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),c(Gt,"onColorize",`
    return color;
  `);const at=class at extends me{constructor(){super(...arguments);c(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const i=e.colors??[4278190080,4294967295];let r=e.stops||[];if(r.length===0||r.length!==i.length){const n=i.length;let o=0;const a=r;for(;o<n;o++)r[o]?(a[o]=r[o],r[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(r[o]-a[o-2])/2)):a[o]=o*(1/(i.length-1));r=a}return{colors:i,stops:r,angle:e.angle??0}}};c(at,"z$__type__Props"),c(at,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(r=>Je(r)).reduce((r,n)=>r.concat(n),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(at,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),c(at,"ColorLoop",e=>{let i="";for(let r=2;r<e;r++)i+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return i}),c(at,"onColorize",e=>{const i=e.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${at.ColorLoop(i)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Si=at;class Ci extends me{constructor(){super(...arguments);c(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}c(Ci,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),c(Ci,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class It extends me{constructor(){super(...arguments);c(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(It,"z$__type__Props"),c(It,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(It,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(It,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(It,"onColorize",`
    return color;
  `);class Mt extends me{constructor(){super(...arguments);c(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Mt,"z$__type__Props"),c(Mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(Mt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Mt,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Mt,"onColorize",`
    return color;
  `);class Lt extends me{constructor(){super(...arguments);c(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Lt,"z$__type__Props"),c(Lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(Lt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Lt,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Lt,"onColorize",`
    return color;
  `);class Ft extends me{constructor(){super(...arguments);c(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Ft,"z$__type__Props"),c(Ft,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(Ft,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Ft,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Ft,"onColorize",`
    return color;
  `);class qt extends me{constructor(){super(...arguments);c(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}c(qt,"z$__type__Props"),c(qt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),c(qt,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),c(qt,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Bs extends me{constructor(){super(...arguments);c(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}c(Bs,"z$__type__Props"),c(Bs,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let i=e;return Array.isArray(i)?i.length===2?i=[i[0],i[1],i[0],i[1]]:i.length===3?i=[i[0],i[1],i[2],i[0]]:i.length!==4&&(i=[i[0],i[0],i[0],i[0]]):typeof i=="number"&&(i=[i,i,i,i]),i}}}),c(Bs,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const yt=class yt extends me{constructor(){super(...arguments);c(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const i=e.colors??[4278190080,4294967295];let r=e.stops||[];if(r.length===0||r.length!==i.length){const n=i.length;let o=0;const a=r;for(;o<n;o++)r[o]?(a[o]=r[o],r[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(r[o]-a[o-2])/2)):a[o]=o*(1/(i.length-1));r=a}return{colors:i,stops:r,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}};c(yt,"z$__type__Props"),c(yt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(r=>Je(r)).reduce((r,n)=>r.concat(n),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(yt,"ColorLoop",e=>{let i="";for(let r=2;r<e;r++)i+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return i}),c(yt,"onColorize",e=>{const i=e.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${yt.ColorLoop(i)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Ri=yt;class Et extends me{constructor(){super(...arguments);c(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}c(Et,"z$__type__Props"),c(Et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Je(e),method:"uniform4fv",type:"vec4"}}),c(Et,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),c(Et,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),c(Et,"onColorize",`
    return color;
  `);class Pt extends me{constructor(){super(...arguments);c(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:e.radius??0}}}c(Pt,"z$__type__Props"),c(Pt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let i=e;return Array.isArray(i)?i.length===2?i=[i[0],i[1],i[0],i[1]]:i.length===3?i=[i[0],i[1],i[2],i[0]]:i.length!==4&&(i=[i[0],i[0],i[0],i[0]]):typeof i=="number"&&(i=[i,i,i,i]),i}}}),c(Pt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),c(Pt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),c(Pt,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const fn="RoundedRectangle";class pn extends Mo{constructor(e){super();c(this,"shType");this.shType=e,e!==fn&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class ea{constructor(){c(this,"shCache",new Map);c(this,"shConstructors",{});c(this,"attachedShader",null);c(this,"effectConstructors",{});c(this,"renderer");this.registerShaderType("DefaultShader",dn),this.registerShaderType("DefaultShaderBatched",un),this.registerShaderType("RoundedRectangle",bi),this.registerShaderType("DynamicShader",kt),this.registerShaderType("SdfShader",Ti),this.registerEffectType("border",Gt),this.registerEffectType("borderBottom",Lt),this.registerEffectType("borderLeft",Ft),this.registerEffectType("borderRight",It),this.registerEffectType("borderTop",Mt),this.registerEffectType("fadeOut",Bs),this.registerEffectType("linearGradient",Si),this.registerEffectType("radialGradient",Ri),this.registerEffectType("grayscale",Ci),this.registerEffectType("glitch",qt),this.registerEffectType("radius",Rt),this.registerEffectType("radialProgress",Et),this.registerEffectType("holePunch",Pt)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const i=this.shConstructors[t];if(!i)throw new Error(`Shader type "${t}" is not registered`);if(this.renderer.mode==="canvas"&&i.prototype instanceof Yt)return{shader:new pn(t),props:e};if(t==="DynamicShader")return this.loadDynamicShader(e);const r=i.resolveDefaults(e),n=i.makeCacheKey(r)||i.name;if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:r};const o=new i(this.renderer,e);return n&&this.shCache.set(n,o),{shader:o,props:r}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=kt.resolveDefaults(t,this.effectConstructors),i=kt.makeCacheKey(e,this.effectConstructors);if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:e};const r=new kt(this.renderer,t,this.effectConstructors);return i&&this.shCache.set(i,r),{shader:r,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}function ta(s){return/\.(ktx|pvr)$/.test(s)}const sa=async s=>{const e=await(await fetch(s)).arrayBuffer();return s.indexOf(".ktx")!==-1?ia(e):ra(e)},ia=async s=>{const t=new DataView(s),e=t.getUint32(12)===16909060,i=[],r={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let n=64;n+=r.bytesOfKeyValueData;for(let o=0;o<r.numberOfMipmapLevels;o++){const a=t.getUint32(n);n+=4,i.push(t.buffer.slice(n,a)),n+=a}return{data:{glInternalFormat:r.glInternalFormat,mipmaps:i,width:r.pixelWidth||0,height:r.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},ra=async s=>{const a=s,l=new Int32Array(a,0,13),d=l[12]+52,h=new Uint8Array(a,d),f=[],m={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let g=0,v=m.pixelWidth||0,y=m.pixelHeight||0;for(let _=0;_<m.numberOfMipmapLevels;_++){const S=(v+3>>2)*(y+3>>2)*8,P=new Uint8Array(a,h.byteOffset+g,S);f.push(P),g+=S,v=v>>1,y=y>>1}return{data:{glInternalFormat:36196,mipmaps:f,width:m.pixelWidth||0,height:m.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},as=class as extends rn{constructor(e,i){super(e);c(this,"props");this.props=as.resolveDefaults(i)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:i}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:i};if(ta(e))return sa(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(e,i);if(this.txManager.hasCreateImageBitmap){const n=await(await fetch(e)).blob(),o=i??this.hasAlphaChannel(n.type);return{data:await createImageBitmap(n,{premultiplyAlpha:o?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:o}}else{const r=new Image;return e.substr(0,5)!=="data:"&&(r.crossOrigin="Anonymous"),r.src=e,await new Promise((n,o)=>{r.onload=()=>n(),r.onerror=()=>o(new Error("Failed to load image"))}).catch(n=>{console.error(n)}),{data:r,premultiplyAlpha:i??!0}}}static makeCacheKey(e){const i=as.resolveDefaults(e);return i.src instanceof ImageData?!1:`ImageTexture,${i.src},${i.premultiplyAlpha}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0}}};c(as,"z$__type__Props");let Ii=as;const na=24;function oa(s,t,e,i,r,n,o,a,l){const d=Math.min(Math.max(o.firstLineIdx,0),a.length),h=0;let f=0;i==="middle"?f=(t-s)/2:i==="bottom"&&(f=t-s);const g=r/n+d*t+f;if(!(l&&g>=l/n))return{sdfX:h,sdfY:g,lineIndex:d}}class Qt{constructor(t,e=0){c(this,"iterator");c(this,"peekBuffer",[]);c(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*Zt(s,t=0){let e=t;for(;e<s.length;){const i=s.codePointAt(e);if(i===void 0)throw new Error("Invalid Unicode code point");yield i,e+=i<=65535?1:2}}function aa(s,t,e){const i=e.shapeText(t,new Qt(Zt(s,0),0));let r=0;for(const n of i)n.mapped&&(r+=n.xAdvance);return r}function la(s,t,e,i,r,n,o,a,l,d,h,f,m,g,v,y,_,S,P){B(v,"Font face must be loaded"),B(v.loaded,"Font face must be loaded"),B(v.data,"Font face must be loaded"),B(v.shaper,"Font face must be loaded");const T=a/v.data.info.size,R=l/T,N=n/T,k=d/T,O=m[s],D=(O==null?void 0:O.codepointIndex)||0,$=(O==null?void 0:O.maxX)||0,V=(O==null?void 0:O.maxY)||0;let W=$,ee=V,re=t,ce=e,q=0;const X={codepointIndex:-1,bufferOffset:-1,xStart:-1},j=v.shaper,Q={letterSpacing:k};let we=j.shapeText(Q,new Qt(Zt(i,D),D)),Re,Ee=-1;const ye=[],xs=o/T,oi=aa(S,Q,j);let St=!0;for(;St;){const pe=(P===0||s+1<P)&&(f!=="both"||_||ce+R+v.maxCharHeight<=xs),Ie=pe?N:N-oi;let fe=0;const it=ce+R>=g.y1,De=ce<=g.y2,Ae=it&&De;for(;(Re=we.next())&&!Re.done;){const oe=Re.value;if(s===m.length)m.push({codepointIndex:oe.cluster,maxY:ee,maxX:W});else if(s>m.length)throw new Error("Unexpected lineCache length");if(oe.codepoint===32||oe.codepoint===10?X.codepointIndex!==-1&&(X.codepointIndex=-1,fe=re):X.codepointIndex===-1&&(X.codepointIndex=oe.cluster,X.bufferOffset=q,X.xStart=fe),oe.mapped){const u=re+oe.xOffset+oe.width;if(f!=="none"&&u>=Ie&&X.codepointIndex!==-1&&X.xStart>0)if(pe){we=j.shapeText(Q,new Qt(Zt(i,X.codepointIndex),X.codepointIndex)),q=X.bufferOffset;break}else we=j.shapeText(Q,new Qt(Zt(S,0),0)),re=X.xStart,q=X.bufferOffset,f="none";else{const p=re+oe.xOffset,x=ce+oe.yOffset;if(Ae){Ee===-1&&(Ee=q);const w=v.getAtlasEntry(oe.glyphId),b=w.x/v.data.common.scaleW,I=w.y/v.data.common.scaleH,F=w.width/v.data.common.scaleW,M=w.height/v.data.common.scaleH;h[q++]=p,h[q++]=x,h[q++]=b,h[q++]=I,h[q++]=p+oe.width,h[q++]=x,h[q++]=b+F,h[q++]=I,h[q++]=p,h[q++]=x+oe.height,h[q++]=b,h[q++]=I+M,h[q++]=p+oe.width,h[q++]=x+oe.height,h[q++]=b+F,h[q++]=I+M}ee=Math.max(ee,x+oe.height),W=Math.max(W,p+oe.width),re+=oe.xAdvance}}else if(oe.codepoint===10){if(pe)break;we=j.shapeText(Q,new Qt(Zt(S,0),0)),f="none"}}Ee!==-1&&(ye.push({bufferStart:Ee,bufferEnd:q}),Ee=-1),re=0,ce+=R,s++,X.codepointIndex=-1,fe=0,!y&&f==="both"&&ce>g.y2||Re&&Re.done?St=!1:pe||(St=!1)}if(r==="center"){const pe=f==="none"?W:N;for(let Ie=0;Ie<ye.length;Ie++){const fe=ye[Ie],it=h[fe.bufferEnd-4]-h[fe.bufferStart],De=(pe-it)/2;for(let Ae=fe.bufferStart;Ae<fe.bufferEnd;Ae+=4)h[Ae]+=De}}else if(r==="right"){const pe=f==="none"?W:N;for(let Ie=0;Ie<ye.length;Ie++){const fe=ye[Ie],it=fe.bufferEnd===fe.bufferStart?0:h[fe.bufferEnd-4]-h[fe.bufferStart],De=pe-it;for(let Ae=fe.bufferStart;Ae<fe.bufferEnd;Ae+=4)h[Ae]+=De}}return B(Re),{bufferNumFloats:q,bufferNumQuads:q/16,layoutNumCharacters:Re.done?i.length-D:Re.value.cluster-D+1,fullyProcessed:!!Re.done,maxX:W,maxY:ee}}function ca(s,t){return Math.ceil(s/t)*t}function ha(s,t){return Math.floor(s/t)*t}function da(s,t,e,i,r,n,o,a){const{screen:l,sdf:d}=s;if(!Lo(o))l.x1=0,l.y1=0,l.x2=0,l.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,s.numLines=0,s.firstLineIdx=0;else{const h=o.x1-t,f=h+(o.x2-o.x1),m=o.y1-e+i,g=ha(m-n,r||1),v=ca(m+(o.y2-o.y1)+n,r||1);l.x1=h,l.y1=g,l.x2=f,l.y2=v,d.x1=h/a,d.y1=g/a,d.x2=f/a,d.y2=v/a,s.numLines=Math.ceil((v-g)/r),s.firstLineIdx=r?Math.floor(g/r):0}s.valid=!0}const ua={normal:400,bold:700,bolder:900,lighter:100},Cr=s=>typeof s=="number"?s:ua[s]||400;function fa(s,t,e,i,r){let n=Cr(e);for(const o of s){const a=o[t];if(!a)continue;if(a.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),a.values().next().value;const l=new Map;for(const h of a){const f=Cr(h.descriptors.weight);if(f===n&&h.descriptors.style===i&&h.descriptors.stretch===r)return h;l.set(f,h)}const d=`TrFontManager: No exact match: '${t} Weight: ${n} Style: ${i} Stretch: ${r}'`;if(console.error(d),n===400&&l.has(500))return l.get(500);if(n===500&&l.has(400))return l.get(400);if(n<400){for(;n>0;){if(l.has(n))return l.get(n);n-=100}n=600}for(;n<1e3;){if(l.has(n))return l.get(n);n+=100}for(n=500;n>0;){if(l.has(n))return l.get(n);n-=100}}}const pa=sn(fa);class gn{constructor(t){c(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const i=this.textRenderers[e];i&&i.isFontFaceSupported(t)&&i.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:i,fontWeight:r,fontStyle:n,fontStretch:o}=e;return pa(t,i,r,n,o)}}const ga={x:0,y:0,width:0,height:0};class ma extends hn{constructor(e){super(e);c(this,"ssdfFontFamilies",{});c(this,"msdfFontFamilies",{});c(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);c(this,"sdfShader");c(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,i)=>{e.props.fontFamily=i,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,i)=>{e.props.fontWeight=i,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,i)=>{e.props.fontStyle=i,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,i)=>{e.props.fontStretch=i,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,i)=>{e.props.fontSize=i,this.invalidateLayoutCache(e)},text:(e,i)=>{e.props.text=i,this.invalidateLayoutCache(e)},textAlign:(e,i)=>{e.props.textAlign=i,this.invalidateLayoutCache(e)},color:(e,i)=>{e.props.color=i},x:(e,i)=>{e.props.x=i,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&li(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,i)=>{e.props.y=i,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&li(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,i)=>{e.props.contain=i,this.invalidateLayoutCache(e)},width:(e,i)=>{e.props.width=i,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,i)=>{e.props.height=i,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,i)=>{e.props.offsetY=i,this.invalidateLayoutCache(e)},scrollable:(e,i)=>{e.props.scrollable=i,this.invalidateLayoutCache(e)},scrollY:(e,i)=>{e.props.scrollY=i,this.scheduleUpdateState(e)},letterSpacing:(e,i)=>{e.props.letterSpacing=i,this.invalidateLayoutCache(e)},lineHeight:(e,i)=>{e.props.lineHeight=i,this.invalidateLayoutCache(e)},maxLines:(e,i)=>{e.props.maxLines=i,this.invalidateLayoutCache(e)},textBaseline:(e,i)=>{e.props.textBaseline=i,this.invalidateLayoutCache(e)},verticalAlign:(e,i)=>{e.props.verticalAlign=i,this.invalidateLayoutCache(e)},overflowSuffix:(e,i)=>{e.props.overflowSuffix=i,this.invalidateLayoutCache(e)},debug:(e,i)=>{e.props.debug=i}}}canRenderFont(e){const{fontFamily:i}=e;return i in this.ssdfFontFamilies||i in this.msdfFontFamilies||i==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof gr}addFontFace(e){B(e instanceof gr);const i=e.fontFamily,r=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!r){console.warn(`Invalid font face type: ${e.type}`);return}let n=r[i];n||(n=new Set,r[i]=n),n.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new bt,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:i}=e;const{textH:r,lineCache:n,debugData:o,forceFullLayoutCalc:a}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!i){if(i=this.resolveFontFace(e.props),e.trFontFace=i,!i){const j=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(j),this.setStatus(e,"failed",new Error(j));return}i.texture.setRenderableOwner(e,e.isRenderable)}if(!i.loaded){i.once("loaded",()=>{this.scheduleUpdateState(e)});return}B(i.data,"Font face data should be loaded");const{text:l,fontSize:d,x:h,y:f,contain:m,width:g,height:v,lineHeight:y,verticalAlign:_,scrollable:S,overflowSuffix:P,maxLines:T}=e.props,R=m==="both"&&S?e.props.scrollY:0,{renderWindow:N}=e,k=i.data.info.size,O=d/k,D=y/O;e.distanceRange=O*i.data.distanceField.distanceRange;const $=l.length*na;let V=e.vertexBuffer;(!V||V.length<$)&&(V=new Float32Array($*2));const W=e.elementBounds;if(W.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),W.valid=!0),!a&&N.valid){const j=N.screen;if(h+j.x1<=W.x1&&h+j.x2>=W.x2&&f-R+j.y1<=W.y1&&f-R+j.y2>=W.y2){this.setStatus(e,"loaded");return}N.valid=!1,this.setStatus(e,"loading")}const{offsetY:ee,textAlign:re}=e.props;if(!N.valid){if(!li(W,this.rendererBounds))return;da(N,h,f,R,y,m==="both"?W.y2-W.y1:0,W,O)}const ce=oa(k,D,y,_,ee,O,N,n,r);if(!ce){this.setStatus(e,"loaded");return}const{letterSpacing:q}=e.props,X=la(ce.lineIndex,ce.sdfX,ce.sdfY,l,re,g,v,d,y,q,V,m,n,N.sdf,i,a,S,P,T);e.bufferUploaded=!1,e.bufferNumFloats=X.bufferNumFloats,e.bufferNumQuads=X.bufferNumQuads,e.vertexBuffer=V,e.renderWindow=N,o.lastLayoutNumCharacters=X.layoutNumCharacters,o.bufferSize=V.byteLength,X.fullyProcessed&&(e.textW=X.maxX*O,e.textH=X.maxY*O),this.setStatus(e,"loaded")}renderQuads(e,i,r,n){var $,V;if(!e.vertexBuffer)return;const o=this.stage.renderer;B(o instanceof nn);const{fontSize:a,color:l,contain:d,scrollable:h,zIndex:f,debug:m}=e.props,g=d==="both"&&h?e.props.scrollY:0,{textW:v=0,textH:y=0,distanceRange:_,vertexBuffer:S,bufferUploaded:P,trFontFace:T,elementBounds:R}=e;let{webGlBuffers:N}=e;if(!N){const W=o.glw,ee=4*Float32Array.BYTES_PER_ELEMENT,re=W.createBuffer();B(re),e.webGlBuffers=new Fo([{buffer:re,attributes:{a_position:{name:"a_position",size:2,type:W.FLOAT,normalized:!1,stride:ee,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:W.FLOAT,normalized:!1,stride:ee,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,B(e.webGlBuffers),N=e.webGlBuffers}if(!P){const W=o.glw,ee=(N==null?void 0:N.getBuffer("a_textureCoordinate"))??null;W.arrayBufferData(ee,S,W.STATIC_DRAW),e.bufferUploaded=!0}if(B(T),h&&d==="both"){B(R.valid);const W=Eo(R,ga);r.valid?(e.clippingRect.valid=!0,r=Wi(r,W,e.clippingRect)):(e.clippingRect.valid=!0,r=on(W,e.clippingRect))}const k=new Po(o.glw,o.options,N,this.sdfShader,{transform:i.data,color:No(l,n),size:a/((($=T.data)==null?void 0:$.info.size)||0),scrollY:g,distanceRange:_,debug:m.sdfShaderDebug},n,r,{height:y,width:v},0,f),O=(V=e.trFontFace)==null?void 0:V.texture;B(O);const D=this.stage.txManager.getCtxTexture(O);k.addTexture(D),k.length=e.bufferNumFloats,k.numQuads=e.bufferNumQuads,o.addRenderOp(k)}setIsRenderable(e,i){var r;super.setIsRenderable(e,i),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,i)}destroyState(e){var i;super.destroyState(e),(i=e.trFontFace)==null||i.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return gn.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:i,contain:r,width:n}=e.props,{elementBounds:o}=e;o.x1=i,o.x2=r!=="none"?i+n:1/0}setElementBoundsY(e){const{y:i,contain:r,height:n}=e.props,{elementBounds:o}=e;o.y1=i,o.y2=r==="both"?i+n:1/0}}function xa(s){return s.prototype instanceof Ao}async function ya(s,t){let e;try{console.log("Loading core extension",s),e=await Vo(()=>import(s),[])}catch(r){console.error(`The core extension module at '${s}' could not be loaded.`),console.error(r);return}if(!e.default){console.error(`The core extension module at '${s}' does not have a default export.`);return}const i=e.default;if(xa(i)){const r=new i;try{await r.run(t)}catch(n){console.error(`The core extension at '${s}' threw an error.`),console.error(n)}}else console.error(`The core extension at '${s}' does not extend CoreExtension.`)}function mn(s){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(s);for(let i=0;i<e.length;i++){const r=e[i];if(!r)continue;const n=s[r],o=typeof n;o==="string"&&n.length>2048&&(console.warn(`Custom Data value for ${r} is too long, it will be truncated to 2048 characters`),s[r]=n.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${r} is not a boolean, string, or number, it will be ignored`),delete s[r])}return s}class va extends bt{constructor(e,i,r){super();c(this,"root",null);c(this,"driver");c(this,"canvas");c(this,"settings");c(this,"inspector",null);c(this,"nodes",new Map);c(this,"nextTextureId",1);c(this,"textureTracker");const n={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1,renderMode:e.renderMode??"webgl"};this.settings=n;const{appWidth:o,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:d,enableInspector:h}=n,f=S=>{this.driver.releaseTexture(S)},m=n.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=m?new Wo(f):new Uo(f,this.settings.textureCleanupOptions);const g=o*l,v=a*l;this.driver=r;const y=document.createElement("canvas");this.canvas=y,y.width=g*d,y.height=v*d,y.style.width=`${g}px`,y.style.height=`${v}px`;let _;if(typeof i=="string"?_=document.getElementById(i):_=i,!_)throw new Error("Could not find target element");r.onCreateNode=S=>{this.nodes.set(S.id,S)},r.onBeforeDestroyNode=S=>{this.nodes.delete(S.id)},r.onFpsUpdate=S=>{this.emit("fpsUpdate",S)},r.onFrameTick=S=>{this.emit("frameTick",S)},r.onIdle=()=>{this.emit("idle")},_.appendChild(y),h&&!tn()&&(this.inspector=new Ho(y,n))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const i=e.fontSize??16,r={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:i,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight??i,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"top",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.inspector?this.inspector.createTextNode(this.driver,r):this.driver.createTextNode(r)}resolveNodeDefaults(e){const i=e.color??4294967295,r=e.colorTl??e.colorTop??e.colorLeft??i,n=e.colorTr??e.colorTop??e.colorRight??i,o=e.colorBl??e.colorBottom??e.colorLeft??i,a=e.colorBr??e.colorBottom??e.colorRight??i,l=mn(e.data??{});return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,autosize:e.autosize??!1,clipping:e.clipping??!1,color:i,colorTop:e.colorTop??i,colorBottom:e.colorBottom??i,colorLeft:e.colorLeft??i,colorRight:e.colorRight??i,colorBl:o,colorBr:a,colorTl:r,colorTr:n,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0,data:l}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,i,r){const n=this.nextTextureId++,o={descType:"texture",txType:e,props:i,options:{...r,id:n}};return this.textureTracker.registerTexture(o),o}createShader(e,i){return{descType:"shader",shType:e,props:i}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class _a extends bt{constructor(e,i,r){super();c(this,"node");c(this,"props");c(this,"settings");c(this,"propStartValues",{});c(this,"restoreValues",{});c(this,"progress",0);c(this,"delayFor",0);c(this,"timingFunction");c(this,"propsList");this.node=e,this.props=i,this.settings=r,this.propStartValues={},this.propsList=Object.keys(i),this.propsList.forEach(n=>{this.propStartValues[n]=e[n]}),this.timingFunction=n=>n,r.easing&&typeof r.easing=="string"&&(this.timingFunction=Oo(r.easing)),this.delayFor=r.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const i=this.props[e],r=this.propStartValues[e];this.props[e]=r,this.propStartValues[e]=i}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,i,r){return(this.timingFunction(e)||e)*(r-i)+i}update(e){const{duration:i,loop:r,easing:n,stopMethod:o}=this.settings;if(!i){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=e/i,this.progress>1&&(this.progress=r?0:1,o)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const l=this.propsList[a],d=this.props[l],h=this.propStartValues[l],f=d;if(l.indexOf("color")!==-1){if(h===f){this.node[l]=h;continue}if(n){const m=this.timingFunction(this.progress)||this.progress,g=mr(h,f,m);this.node[l]=g;continue}this.node[l]=mr(h,f,this.progress);continue}if(n){this.node[l]=this.applyEasing(this.progress,h,f);continue}this.node[l]=h+(f-h)*this.progress}this.progress===1&&this.emit("finished",{})}}class wa{constructor(t,e){c(this,"manager");c(this,"animation");c(this,"startedPromise",null);c(this,"startedResolve",null);c(this,"stoppedPromise",null);c(this,"stoppedResolve",null);c(this,"state");this.manager=t,this.animation=e,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();const t=this.startedPromise;return B(t),t}waitUntilStopped(){this.makeStoppedPromise();const t=this.stoppedPromise;return B(t),t}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(t=>{this.startedResolve=t}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(t=>{this.stoppedResolve=t}))}started(){B(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){B(this.stoppedResolve);const{loop:t,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!t&&this.manager.unregisterAnimation(this.animation)}}const he=0,de=3,ve=6,ae=1,ue=4,be=7,Oe=2,ke=5,Be=8;class ze{constructor(t){c(this,"data");t?(this.data=new Float32Array(9),this.data[he]=t[0],this.data[de]=t[3],this.data[ve]=t[6],this.data[ae]=t[1],this.data[ue]=t[4],this.data[be]=t[7],this.data[Oe]=t[2],this.data[ke]=t[5],this.data[Be]=t[8]):this.data=new Float32Array(9)}static get temp(){return ba}static multiply(t,e,i){const r=t.data[he]*e.data[he]+t.data[de]*e.data[ae]+t.data[ve]*e.data[Oe],n=t.data[he]*e.data[de]+t.data[de]*e.data[ue]+t.data[ve]*e.data[ke],o=t.data[he]*e.data[ve]+t.data[de]*e.data[be]+t.data[ve]*e.data[Be],a=t.data[ae]*e.data[he]+t.data[ue]*e.data[ae]+t.data[be]*e.data[Oe],l=t.data[ae]*e.data[de]+t.data[ue]*e.data[ue]+t.data[be]*e.data[ke],d=t.data[ae]*e.data[ve]+t.data[ue]*e.data[be]+t.data[be]*e.data[Be],h=t.data[Oe]*e.data[he]+t.data[ke]*e.data[ae]+t.data[Be]*e.data[Oe],f=t.data[Oe]*e.data[de]+t.data[ke]*e.data[ue]+t.data[Be]*e.data[ke],m=t.data[Oe]*e.data[ve]+t.data[ke]*e.data[be]+t.data[Be]*e.data[Be];return i||(i=new ze),i.data[he]=r,i.data[de]=n,i.data[ve]=o,i.data[ae]=a,i.data[ue]=l,i.data[be]=d,i.data[Oe]=h,i.data[ke]=f,i.data[Be]=m,i}static identity(t){return t||(t=new ze),t.data[he]=1,t.data[de]=0,t.data[ve]=0,t.data[ae]=0,t.data[ue]=1,t.data[be]=0,t.data[Oe]=0,t.data[ke]=0,t.data[Be]=1,t}static translate(t,e,i){return i||(i=new ze),i.data[he]=1,i.data[de]=0,i.data[ve]=t,i.data[ae]=0,i.data[ue]=1,i.data[be]=e,i.data[Oe]=0,i.data[ke]=0,i.data[Be]=1,i}static scale(t,e,i){return i||(i=new ze),i.data[he]=t,i.data[de]=0,i.data[ve]=0,i.data[ae]=0,i.data[ue]=e,i.data[be]=0,i.data[Oe]=0,i.data[ke]=0,i.data[Be]=1,i}static rotate(t,e){const i=Math.cos(t),r=Math.sin(t);return e||(e=new ze),e.data[he]=i,e.data[de]=-r,e.data[ve]=0,e.data[ae]=r,e.data[ue]=i,e.data[be]=0,e.data[Oe]=0,e.data[ke]=0,e.data[Be]=1,e}static copy(t,e,i){return e||(e=new ze),e.data[0]=t.data[0],e.data[1]=t.data[1],e.data[2]=t.data[2],e.data[3]=t.data[3],e.data[4]=t.data[4],e.data[5]=t.data[5],e.data[6]=t.data[6],e.data[7]=t.data[7],e.data[8]=t.data[8],e}translate(t,e){return this.data[ve]=this.data[he]*t+this.data[de]*e+this.data[ve],this.data[be]=this.data[ae]*t+this.data[ue]*e+this.data[be],this}scale(t,e){return this.data[he]=this.data[he]*t,this.data[de]=this.data[de]*e,this.data[ae]=this.data[ae]*t,this.data[ue]=this.data[ue]*e,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),i=Math.sin(t),r=this.data[he]*e+this.data[de]*i,n=this.data[de]*e-this.data[he]*i,o=this.data[ae]*e+this.data[ue]*i,a=this.data[ue]*e-this.data[ae]*i;return this.data[he]=r,this.data[de]=n,this.data[ae]=o,this.data[ue]=a,this}multiply(t){return ze.multiply(this,t,this)}get tx(){return this.data[ve]}get ty(){return this.data[be]}get ta(){return this.data[he]}get tb(){return this.data[de]}get tc(){return this.data[ae]}get td(){return this.data[ue]}transformPoint(t,e){return[this.data[he]*t+this.data[de]*e+this.data[ve],this.data[ae]*t+this.data[ue]*e+this.data[ae]]}}const ba=new ze,ys=0,vs=2,_s=4,ws=6,bs=1,Ts=3,Ss=5,Cs=7;class Hs{constructor(t){c(this,"data");this.data=new Float32Array(8),t&&(this.data[ys]=t[ys],this.data[vs]=t[vs],this.data[_s]=t[_s],this.data[ws]=t[ws],this.data[bs]=t[bs],this.data[Ts]=t[Ts],this.data[Ss]=t[Ss],this.data[Cs]=t[Cs])}static translate(t,e,i,r,n,o,a,l,d){return d||(d=new Hs),d.data[ys]=t,d.data[vs]=i,d.data[_s]=n,d.data[ws]=a,d.data[bs]=e,d.data[Ts]=r,d.data[Ss]=o,d.data[Cs]=l,d}get x1(){return this.data[ys]}get x2(){return this.data[vs]}get x3(){return this.data[_s]}get x4(){return this.data[ws]}get y1(){return this.data[bs]}get y2(){return this.data[Ts]}get y3(){return this.data[Ss]}get y4(){return this.data[Cs]}}var le;(function(s){s[s.Init=0]="Init",s[s.OutOfBounds=2]="OutOfBounds",s[s.InBounds=4]="InBounds",s[s.InViewport=8]="InViewport"})(le||(le={}));const vt=new Map;vt.set(le.Init,"init");vt.set(le.OutOfBounds,"outOfBounds");vt.set(le.InBounds,"inBounds");vt.set(le.InViewport,"inViewport");var E;(function(s){s[s.Children=1]="Children",s[s.ScaleRotate=2]="ScaleRotate",s[s.Local=4]="Local",s[s.Global=8]="Global",s[s.Clipping=16]="Clipping",s[s.CalculatedZIndex=32]="CalculatedZIndex",s[s.ZIndexSortedChildren=64]="ZIndexSortedChildren",s[s.PremultipliedColors=128]="PremultipliedColors",s[s.WorldAlpha=256]="WorldAlpha",s[s.RenderState=512]="RenderState",s[s.IsRenderable=1024]="IsRenderable",s[s.None=0]="None",s[s.All=2047]="All"})(E||(E={}));class Yi extends bt{constructor(e,i){super();c(this,"stage");c(this,"children",[]);c(this,"props");c(this,"updateType",E.All);c(this,"globalTransform");c(this,"scaleRotateTransform");c(this,"localTransform");c(this,"renderCoords");c(this,"renderBound");c(this,"strictBound");c(this,"preloadBound");c(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});c(this,"isRenderable",!1);c(this,"renderState",le.Init);c(this,"worldAlpha",1);c(this,"premultipliedColorTl",0);c(this,"premultipliedColorTr",0);c(this,"premultipliedColorBl",0);c(this,"premultipliedColorBr",0);c(this,"calcZIndex",0);c(this,"onTextureLoaded",(e,i)=>{this.autosizeNode(i),this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:i})});c(this,"onTextureFailed",(e,i)=>{this.emit("failed",{type:"texture",error:i})});c(this,"onTextureFreed",e=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...i,parent:null},this.parent=i.parent,this.updateScaleRotateTransform()}loadTexture(e,i,r=null){this.props.texture&&this.unloadTexture();const{txManager:n}=this.stage,o=n.loadTexture(e,i,r);this.props.texture=o,this.props.textureOptions=r,this.setUpdateType(E.IsRenderable),queueMicrotask(()=>{o.state==="loaded"?this.onTextureLoaded(o,o.dimensions):o.state==="failed"?this.onTextureFailed(o,o.error):o.state==="freed"&&this.onTextureFreed(o),o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed),o.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:e}=this.props;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(E.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,i){const r=this.stage.renderer.getShaderManager();B(r);const{shader:n,props:o}=r.loadShader(e,i);this.props.shader=n,this.props.shaderProps=o,this.setUpdateType(E.IsRenderable)}setUpdateType(e){this.updateType|=e;const i=this.props.parent;i&&!(i.updateType&E.Children)&&i.setUpdateType(E.Children)}sortChildren(){this.children.sort((e,i)=>e.calcZIndex-i.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ze.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){B(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,i=this.props.pivotY*this.props.height,r=this.props.mountX*this.props.width,n=this.props.mountY*this.props.height;this.localTransform=ze.translate(e-r+this.props.x,i-n+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-i),this.setUpdateType(E.Global)}update(e,i){this.updateType&E.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(E.Local)),this.updateType&E.Local&&(this.updateLocalTransform(),this.setUpdateType(E.Global));const r=this.props.parent;let n=E.None;this.updateType&E.Global&&(B(this.localTransform),this.globalTransform=ze.copy((r==null?void 0:r.globalTransform)||this.localTransform,this.globalTransform),r&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(E.Clipping|E.RenderState|E.Children),n|=E.Global),this.updateType&E.Clipping&&(this.calculateClippingRect(i),this.setUpdateType(E.Children),n|=E.Clipping),this.updateType&E.WorldAlpha&&(r?this.worldAlpha=r.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(E.Children|E.PremultipliedColors|E.IsRenderable),n|=E.WorldAlpha),this.updateType&E.PremultipliedColors&&(this.premultipliedColorTl=Kt(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Kt(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Kt(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Kt(this.props.colorBr,this.worldAlpha,!0))),this.updateType&E.RenderState&&(this.updateRenderState(i),this.setUpdateType(E.IsRenderable)),this.updateType&E.IsRenderable&&this.updateIsRenderable(),r&&this.updateType&E.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType(E.ZIndexSortedChildren)),this.updateType&E.Children&&this.children.length&&this.children.forEach(o=>{o.setUpdateType(n),o.updateType!==0&&o.update(e,this.clippingRect)}),this.updateType&E.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){B(this.renderBound);const i=e.width||this.stage.root.width,r=e.height||this.stage.root.height;this.strictBound=Ot(e.x,e.y,e.x+i,e.y+r,this.strictBound);const n=this.stage.boundsMargin;return this.preloadBound=Ot(e.x-n[3],e.y-n[0],e.x+i+n[1],e.y+r+n[2],this.preloadBound),xr(this.renderBound,this.strictBound)?le.InViewport:xr(this.renderBound,this.preloadBound)?le.InBounds:le.OutOfBounds}updateRenderState(e){const i=this.checkRenderBounds(e);if(i!==this.renderState){let r=this.renderState;this.renderState=i,r===le.InViewport&&this.emit("outOfViewport",{previous:r,current:i}),r<le.InBounds&&i===le.InViewport?(this.emit(vt.get(le.InBounds),{previous:r,current:i}),r=le.InBounds):r>le.InBounds&&i===le.OutOfBounds&&(this.emit(vt.get(le.InBounds),{previous:r,current:i}),r=le.InBounds);const n=vt.get(i);B(n),this.emit(n,{previous:r,current:i})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(le[e]))}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>le.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var i;(i=this.props.texture)==null||i.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:i,globalTransform:r}=this;B(r);const{tx:n,ty:o,ta:a,tb:l,tc:d,td:h}=r;if(l===0&&d===0){const f=n,m=n+e*a,g=o,v=o+i*h;this.renderCoords=Hs.translate(f,g,m,g,m,v,f,v,this.renderCoords)}else this.renderCoords=Hs.translate(n,o,n+e*a,o+e*d,n+e*a+i*l,o+e*d+i*h,n+i*l,o+i*h,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:i}=this;B(i),B(e);const{tb:r,tc:n}=i,{x1:o,y1:a,x3:l,y3:d}=e;if(r===0||n===0)this.renderBound=Ot(o,a,l,d,this.renderBound);else{const{x2:h,x4:f,y2:m,y4:g}=e;this.renderBound=Ot(Math.min(o,h,l,f),Math.min(a,m,d,g),Math.max(o,h,l,f),Math.max(a,m,d,g),this.renderBound)}}calculateClippingRect(e){B(this.globalTransform);const{clippingRect:i,props:r,globalTransform:n}=this,{clipping:o}=r,a=n.tb!==0||n.tc!==0;o&&!a?(i.x=n.tx,i.y=n.ty,i.width=this.width*n.ta,i.height=this.height*n.td,i.valid=!0):i.valid=!1,e.valid&&i.valid?Wi(e,i,i):e.valid&&(on(e,i),i.valid=!0)}calculateZIndex(){var o,a;const e=this.props,i=e.zIndex||0,r=((o=e.parent)==null?void 0:o.zIndex)||0;let n=i;(a=e.parent)!=null&&a.zIndexLocked&&(n=i<r?i:r),this.calcZIndex=n}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:i,height:r,texture:n,textureOptions:o,shader:a,shaderProps:l}=this.props,{premultipliedColorTl:d,premultipliedColorTr:h,premultipliedColorBl:f,premultipliedColorBr:m}=this,{zIndex:g,worldAlpha:v,globalTransform:y,clippingRect:_}=this;B(y),e.addQuad({width:i,height:r,colorTl:d,colorTr:h,colorBl:f,colorBr:m,texture:n,textureOptions:o,zIndex:g,shader:a,shaderProps:l,alpha:v,clippingRect:_,tx:y.tx,ty:y.ty,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(E.Local))}get absX(){var e,i,r;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((r=(i=this.props.parent)==null?void 0:i.globalTransform)==null?void 0:r.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(E.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(E.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(E.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(E.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(E.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(E.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(E.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(E.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(E.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(E.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(E.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(E.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(E.PremultipliedColors|E.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(E.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(E.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(E.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(E.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(E.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(E.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(E.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(E.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(E.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(E.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(E.CalculatedZIndex|E.Children),this.children.forEach(i=>{i.setUpdateType(E.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(E.CalculatedZIndex|E.Children),this.children.forEach(i=>{i.setUpdateType(E.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const i=this.props.parent;if(i!==e){if(this.props.parent=e,i){const r=i.children.indexOf(this);B(r!==-1,"CoreNode.parent: Node not found in old parent's children!"),i.children.splice(r,1),i.setUpdateType(E.Children|E.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(E.All),e.setUpdateType(E.Children|E.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let Ta=1;function Hi(){return Ta++}class Mi extends bt{constructor(e,i,r,n){super();c(this,"rendererMain");c(this,"stage");c(this,"id");c(this,"coreNode");c(this,"_children",[]);c(this,"_src","");c(this,"_parent",null);c(this,"_texture",null);c(this,"_shader",null);c(this,"_data",{});c(this,"onTextureLoaded",(e,i)=>{this.emit("loaded",i)});c(this,"onTextureFailed",(e,i)=>{this.emit("failed",i)});c(this,"onTextureFreed",(e,i)=>{this.emit("freed",i)});c(this,"onOutOfBounds",(e,i)=>{this.emit("outOfBounds",i)});c(this,"onInBounds",(e,i)=>{this.emit("inBounds",i)});c(this,"onOutOfViewport",(e,i)=>{this.emit("outOfViewport",i)});c(this,"onInViewport",(e,i)=>{this.emit("inViewport",i)});this.rendererMain=i,this.stage=r,this.id=(n==null?void 0:n.id)??Hi(),this.coreNode=n||new Yi(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const i=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,i){const r=i.children.indexOf(this);B(r!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),i.children.splice(r,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=mn(e)}destroy(){this.emit("beforeDestroy",{});let e=this.children[0];for(;e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,i){const r=new _a(this.coreNode,e,i);return new wa(this.stage.animationManager,r)}}const Sa=s=>{let t=!1;const e=()=>{if(s.updateAnimations(),!s.hasSceneUpdates()){s.calculateFps(),setTimeout(e,16.666666666666668),t||(s.emit("idle"),t=!0);return}t=!1,s.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)},Ca=()=>performance?performance.now():Date.now();class Ra{constructor(){c(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}class Ia{constructor(t){c(this,"imageWorkersEnabled",!0);c(this,"messageManager",{});c(this,"workers",[]);c(this,"workerIndex",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{src:e,data:i,error:r}=t.data,n=this.messageManager[e];if(n){const[o,a]=n;delete this.messageManager[e],r?a(new Error(r)):o(i)}}createWorkers(t=1){const e=`
      function hasAlphaChannel(mimeType) {
          return (mimeType.indexOf("image/png") !== -1);
      }

      function getImage(src, premultiplyAlpha) {
        return new Promise(function(resolve, reject) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', src, true);
          xhr.responseType = 'blob';

          xhr.onload = function() {
            if (xhr.status === 200) {
              var blob = xhr.response;
              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);

              createImageBitmap(blob, {
                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',
                colorSpaceConversion: 'none',
                imageOrientation: 'none'
              }).then(function(data) {
                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });
              }).catch(function(error) {
                reject(error);
              });
            } else {
              reject(new Error('Failed to load image: ' + xhr.statusText));
            }
          };

          xhr.onerror = function() {
            reject(new Error('Network error occurred while trying to fetch the image.'));
          };

          xhr.send();
        });
      }

      self.onmessage = (event) => {
        var src = event.data.src;
        var premultiplyAlpha = event.data.premultiplyAlpha;

        getImage(src, premultiplyAlpha)
          .then(function(data) {
              self.postMessage({ src: src, data: data }, [data.data]);
          })
          .catch(function(error) {
              self.postMessage({ src: src, error: error.message });
          });
      };
    `,i=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),r=(self.URL?URL:webkitURL).createObjectURL(i),n=[];for(let o=0;o<t;o++)n.push(new Worker(r));return n}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}convertUrlToAbsolute(t){return new URL(t,self.location.href).href}getImage(t,e){return new Promise((i,r)=>{try{if(this.workers){const n=this.convertUrlToAbsolute(t);this.messageManager[n]=[i,r],this.getNextWorker().postMessage({src:n,premultiplyAlpha:e})}}catch(n){r(n)}})}}const ls=class ls extends rn{constructor(e,i){super(e);c(this,"props");this.props=ls.resolveDefaults(i)}async getTextureData(){const{width:e,height:i}=this.props,r=e*i*4,n=new Uint8ClampedArray(r);for(let o=0;o<r;o+=4){const a=Math.floor(Math.random()*256);n[o]=a,n[o+1]=a,n[o+2]=a,n[o+3]=255}return{data:new ImageData(n,e,i)}}static makeCacheKey(e){const i=ls.resolveDefaults(e);return`NoiseTexture,${i.width},${i.height},${i.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};c(ls,"z$__type__Props");let Li=ls;class Ma{constructor(t){c(this,"usedMemory",0);c(this,"txConstructors",{});c(this,"textureKeyCache",new Map);c(this,"textureIdCache",new Map);c(this,"ctxTextureCache",new WeakMap);c(this,"textureRefCountMap",new WeakMap);c(this,"imageWorkerManager",null);c(this,"hasCreateImageBitmap",!!self.createImageBitmap);c(this,"hasWorker",!!self.Worker);c(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new Ia(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Ii),this.registerTextureType("ColorTexture",ko),this.registerTextureType("NoiseTexture",Li),this.registerTextureType("SubTexture",an)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,i=null){const r=this.txConstructors[t];if(!r)throw new Error(`Texture type "${t}" is not registered`);let n;if((i==null?void 0:i.id)!==void 0&&this.textureIdCache.has(i.id)&&(n=this.textureIdCache.get(i.id)),!n){const o=i==null?void 0:i.id,a=(i==null?void 0:i.cacheKey)??r.makeCacheKey(e);a&&this.textureKeyCache.has(a)?n=this.textureKeyCache.get(a):n=new r(this,e),o&&this.addTextureIdToCache(o,a,n)}return i!=null&&i.preload&&this.getCtxTexture(n).load(),n}addTextureIdToCache(t,e,i){const{textureIdCache:r,textureRefCountMap:n}=this;r.set(t,i),n.has(i)?n.get(i).count++:(n.set(i,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,i))}removeTextureIdFromCache(t){var n;const{textureIdCache:e,textureRefCountMap:i}=this,r=e.get(t);if(r){if(e.delete(t),i.has(r)){const o=i.get(r);B(o),o.count--,o.count===0&&(i.delete(r),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}(n=this.ctxTextureCache.get(r))==null||n.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class La{constructor(){c(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class Fa{constructor(t){c(this,"memUsed",0);c(this,"textures",new Map);c(this,"threshold");this.threshold=t,t===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.textures.has(t)&&(this.memUsed-=this.textures.get(t)),e===0){this.textures.delete(t);return}else this.memUsed+=e,this.textures.set(t,e);this.memUsed>this.threshold&&this.gc()}gc(){this.textures.forEach((t,e)=>{e.renderable||e.free()})}}const Ea={isWhite:!0,a:1,r:255,g:255,b:255};function hi(s){if(s===4294967295)return Ea;const t=(s>>>24&255)/255,e=s>>>16&255&255,i=s>>>8&255&255,r=s&255&255;return{isWhite:!1,a:t,r,g:i,b:e}}function zs({a:s,r:t,g:e,b:i}){return`rgba(${t},${e},${i},${s})`}class Pa extends Bo{constructor(){super(...arguments);c(this,"image");c(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:i,height:r}=this.textureSource.dimensions;this.memManager.setTextureMemUse(this,i*r*e)}}hasImage(){return this.image!==void 0}getImage(e){var o;const i=this.image;if(B(i,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),i;const r=zs(e);if(((o=this.tintCache)==null?void 0:o.key)===r)return this.tintCache.image;const n=this.tintTexture(i,r);return this.tintCache={key:r,image:n},this.updateMemSize(),n}tintTexture(e,i){const{width:r,height:n}=e,o=document.createElement("canvas");o.width=r,o.height=n;const a=o.getContext("2d");return a&&(a.fillStyle=i,a.globalCompositeOperation="copy",a.fillRect(0,0,r,n),a.globalCompositeOperation="multiply",a.drawImage(e,0,0,r,n,0,0,r,n),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,r,n,0,0,r,n)),o}get renderable(){return this.textureSource.renderable}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const i=document.createElement("canvas");i.width=e.width,i.height=e.height;const r=i.getContext("2d");return r&&r.putImageData(e,0,0),this.image=i,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function Na(s){var t;return s.shader instanceof pn&&s.shader.shType===fn?((t=s.shaderProps)==null?void 0:t.radius)??0:0}class Aa extends zo{constructor(e){super(e);c(this,"context");c(this,"canvas");c(this,"pixelRatio");c(this,"clearColor");this.mode="canvas",this.shManager.renderer=this;const{canvas:i,pixelRatio:r,clearColor:n}=e;this.canvas=i,this.context=i.getContext("2d"),this.pixelRatio=r,this.clearColor=n?$o(n):void 0}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[i,r,n,o]=this.clearColor;e.fillStyle=`rgba(${i}, ${r}, ${n}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const i=this.context,{tx:r,ty:n,width:o,height:a,alpha:l,colorTl:d,colorTr:h,colorBr:f,ta:m,tb:g,tc:v,td:y,clippingRect:_}=e;let S=e.texture,P,T;if(S){if(S instanceof an&&(T=S.props,S=S.parentTexture),P=this.txManager.getCtxTexture(S),S.state==="freed"){P.load();return}if(S.state!=="loaded"||!P.hasImage())return}const R=hi(d),N=m!==1,k=_.width!==0&&_.height!==0,O=d!==h||d!==f,D=e.shader?Na(e):0;if((N||k||D)&&i.save(),k){const $=new Path2D,{x:V,y:W,width:ee,height:re}=_;$.rect(V,W,ee,re),i.clip($)}if(N){const $=this.pixelRatio;i.setTransform(m,v,g,y,r*$,n*$),i.scale($,$),i.translate(-r,-n)}if(D){const $=new Path2D;$.roundRect(r,n,o,a,D),i.clip($)}if(P){const $=P.getImage(R);i.globalAlpha=l,T?i.drawImage($,T.x,T.y,T.width,T.height,r,n,o,a):i.drawImage($,r,n,o,a),i.globalAlpha=1}else if(O){let $=r,V=n,W;d===h?($=r,V=n+a,W=hi(f)):($=r+o,V=n,W=hi(h));const ee=i.createLinearGradient(r,n,$,V);ee.addColorStop(0,zs(R)),ee.addColorStop(1,zs(W)),i.fillStyle=ee,i.fillRect(r,n,o,a)}else i.fillStyle=zs(R),i.fillRect(r,n,o,a);(N||k||D)&&i.restore()}createCtxTexture(e){return new Pa(this.txMemManager,e)}getShaderManager(){return this.shManager}}const Oa=2e6;class ka extends bt{constructor(e){super();c(this,"options");c(this,"animationManager");c(this,"txManager");c(this,"txMemManager");c(this,"fontManager");c(this,"textRenderers");c(this,"shManager");c(this,"renderer");c(this,"root");c(this,"boundsMargin");c(this,"deltaTime",0);c(this,"lastFrameTime",0);c(this,"currentFrameTime",0);c(this,"fpsNumFrames",0);c(this,"fpsElapsedTime",0);c(this,"renderRequested",!1);c(this,"contextSpy",null);this.options=e;const{canvas:i,clearColor:r,rootId:n,debug:o,appWidth:a,appHeight:l,boundsMargin:d,enableContextSpy:h,numImageWorkers:f,txMemByteThreshold:m,renderMode:g}=e;this.txManager=new Ma(f),this.txMemManager=new Fa(m),this.shManager=new ea,this.animationManager=new Ra,this.contextSpy=h?new La:null;let v=[0,0,0,0];d&&(v=Array.isArray(d)?d:[d,d,d,d]),this.boundsMargin=v,o!=null&&o.monitorTextureCache&&setInterval(()=>{B(this.txManager);const S=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",S.idCacheSize),console.log("Texture Key Cache Size: ",S.keyCacheSize)},1e3);const y={stage:this,canvas:i,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:r??4278190080,bufferMemory:Oa,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};g==="canvas"?this.renderer=new Aa(y):this.renderer=new nn(y),Do(g),this.txManager.renderer=this.renderer,this.textRenderers=g==="webgl"?{canvas:new Sr(this),sdf:new ma(this)}:{canvas:new Sr(this)},this.fontManager=new gn(this.textRenderers);const _=new Yi(this,{id:n,x:0,y:0,width:a,height:l,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=_,Sa(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=Ca(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:i}=this;this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),this.calculateFps(),i&&(this.renderRequested=!1)}calculateFps(){var i,r;const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){const n=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:n,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(e){B(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let i=0;i<e.children.length;i++){const r=e.children[i];r&&(r==null?void 0:r.worldAlpha)!==0&&this.addQuads(r)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,i=null){let r=i,n=!1;if(r){const a=this.textRenderers[r];a?a.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${r}' for font`,e),r=null,n=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,n=!0)}if(!r){for(const[a,l]of Object.entries(this.textRenderers))if(a!=="canvas"&&l.canRenderFont(e)){r=a;break}r||(r="canvas")}n&&console.warn(`Falling back to text renderer ${String(r)}`);const o=this.textRenderers[r];return B(o,"resolvedTextRenderer undefined"),o}}class Ba extends Yi{constructor(e,i){super(e,i);c(this,"textRenderer");c(this,"trState");c(this,"_textRendererOverride",null);c(this,"onTextLoaded",()=>{const{contain:e}=this,i=this.trState.props.width,r=this.trState.props.height,n=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=i,this.props.height=r):e==="width"?(this.props.width=i,this.props.height=o):e==="none"&&(this.props.width=n,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});c(this,"onTextFailed",(e,i)=>{this.emit("failed",{type:"text",error:i})});this._textRendererOverride=i.textRendererOverride;const{resolvedTextRenderer:r,textRendererState:n}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:i.width,height:i.height,textAlign:i.textAlign,color:i.color,zIndex:i.zIndex,contain:i.contain,scrollable:i.scrollable,scrollY:i.scrollY,offsetY:i.offsetY,letterSpacing:i.letterSpacing,debug:i.debug,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStretch:i.fontStretch,fontStyle:i.fontStyle,fontWeight:i.fontWeight,text:i.text,lineHeight:i.lineHeight,maxLines:i.maxLines,textBaseline:i.textBaseline,verticalAlign:i.verticalAlign,overflowSuffix:i.overflowSuffix});this.textRenderer=r,this.trState=n}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(E.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(E.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:i,textRendererState:r}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=i,this.trState=r}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,i){super.update(e,i),B(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){B(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const i=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=i.createState(e);return r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),i.scheduleUpdateState(r),{resolvedTextRenderer:i,textRendererState:r}}}class za extends Mi{constructor(t,e,i){super(t,e,i,new Ba(i,{id:Hi(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,autosize:t.autosize,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(t){t&&(this.coreNode.lineHeight=t)}get maxLines(){return this.coreNode.maxLines}set maxLines(t){t&&(this.coreNode.maxLines=t)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(t){t&&(this.coreNode.textBaseline=t)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(t){t&&(this.coreNode.verticalAlign=t)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(t){t&&(this.coreNode.overflowSuffix=t)}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}class $a{constructor(){c(this,"root",null);c(this,"stage",null);c(this,"rendererMain",null)}async init(t,e,i){this.stage=new ka({rootId:Hi(),appWidth:e.appWidth,appHeight:e.appHeight,txMemByteThreshold:e.txMemByteThreshold,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:i,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,renderMode:e.renderMode,debug:{monitorTextureCache:!1}}),this.rendererMain=t,B(this.stage.root);const r=new Mi(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=r,r.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,r)),this.onCreateNode(r),e.coreExtensionModule&&await ya(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(n,o)=>{this.onFpsUpdate(o)}),this.stage.on("frameTick",(n,o)=>{this.onFrameTick(o)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(t){B(this.rendererMain),B(this.stage);const e=new Mi(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){B(this.rendererMain),B(this.stage);const e=new za(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;B(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return B(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}onFrameTick(t){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let Bt,ji;function Da(s={},t="app"){const e=new $a;return Bt=new va(s,t,e),ji=Bt.createShader.bind(Bt),Bt}class Ua extends Array{constructor(e){super();c(this,"_parent");this._parent=e}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(e,i){if(i){const r=this.indexOf(i);this.splice(r,0,e)}else this.push(e);e.parent=this._parent}remove(e){const i=this.indexOf(e);i>=0&&this.splice(i,1)}}var Wa={BASE_URL:"/vue-lightning-demo/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function Ya(){return Wa&&!1}const Ha=Ya()||!1,Ne={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Rr(s){return ja(s)&&s.debug}function lt(s,t,...e){Ha&&(Ne.debug||Rr(t)||Rr(e[0]))&&console.log(s,t,...e)}function Rs(s){return typeof s=="function"}function ja(s){return typeof s=="object"}function js(s){return Array.isArray(s)}function Xa(s){return typeof s=="string"}function Va(s){return typeof s=="number"}function Ka(s,t){for(const e of t)if(e in s)return!0;return!1}function xn(s,t={}){if(js(s))s.forEach(e=>{xn(e,t)});else if(s)for(const e in s)t[e]===void 0&&(t[e]=s[e]);return t}class Ir extends Array{constructor(e,i={}){var t=(...Sh)=>(super(...Sh),c(this,"onChange"),this);return js(i)?t(...i):Xa(i)?t(i):t(...Object.entries(i).filter(([r,n])=>n).map(([r])=>r)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e){this.has(e)?this.remove(e):this.add(e)}remove(e){const i=this.indexOf(e);i>=0&&(this.splice(i,1),this.onChange())}}function Ga(s){const t=[];let e=!1;for(let T=0;T<s.children.length;T++){const R=s.children[T];if(R.name!=="TextNode"&&R.flexItem!==!1){if(R.name==="text"&&R.text!==""&&!(R.width||R.height))return!1;R.flexOrder!==void 0&&(e=!0),t.push(R)}}e&&t.sort((T,R)=>(T.flexOrder||0)-(R.flexOrder||0));const i=t.length,n=(s.flexDirection||"row")==="row",o=n?"width":"height",a=n?"height":"width",l=n?"marginLeft":"marginTop",d=n?"marginRight":"marginBottom",h=n?"x":"y",f=n?"y":"x",m=s[o]||0,g=s[a]||0,v=s.gap||0,y=s.justifyContent||"flexStart",_=s.alignItems;let S=0;["center","spaceBetween","spaceEvenly"].includes(y)&&(S=t.reduce((T,R)=>T+(R[o]||0),0));const P=g&&_?T=>{_==="flexStart"?T[f]=0:_==="center"?T[f]=(g-(T[a]||0))/2:_==="flexEnd"&&(T[f]=g-(T[a]||0))}:T=>T;if(y==="flexStart"){let T=0;if(t.forEach(R=>{R[h]=T+(R[l]||0),T+=(R[o]||0)+v+(R[l]||0)+(R[d]||0),P(R)}),s.flexBoundary!=="fixed"){const R=T-v;if(R!==s[o])return s[o]=R,!0}}else if(y==="flexEnd"){let T=m;for(let R=i-1;R>=0;R--){const N=t[R];B(N),N[h]=T-(N[o]||0)-(N[d]||0),T-=(N[o]||0)+v+(N[l]||0)+(N[d]||0),P(N)}}else if(y==="center"){let T=(m-(S+v*(i-1)))/2;t.forEach(R=>{R[h]=T,T+=(R[o]||0)+v,P(R)})}else if(y==="spaceBetween"){const T=(m-S)/(i-1);let R=0;t.forEach(N=>{N[h]=R,R+=(N[o]||0)+T,P(N)})}else if(y==="spaceEvenly"){const T=(m-S)/(i+1);let R=T;t.forEach(N=>{N[h]=R,R+=(N[o]||0)+T,P(N)})}return!1}/**
* @vue/shared v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yn(s,t){const e=new Set(s.split(","));return i=>e.has(i)}const ie={},$t=[],$e=()=>{},qa=()=>!1,Xi=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),vn=s=>s.startsWith("onUpdate:"),xe=Object.assign,Vi=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},Qa=Object.prototype.hasOwnProperty,Z=(s,t)=>Qa.call(s,t),H=Array.isArray,Dt=s=>Qs(s)==="[object Map]",_n=s=>Qs(s)==="[object Set]",K=s=>typeof s=="function",Ce=s=>typeof s=="string",Tt=s=>typeof s=="symbol",ne=s=>s!==null&&typeof s=="object",wn=s=>(ne(s)||K(s))&&K(s.then)&&K(s.catch),bn=Object.prototype.toString,Qs=s=>bn.call(s),Za=s=>Qs(s).slice(8,-1),Tn=s=>Qs(s)==="[object Object]",Ki=s=>Ce(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ts=yn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zs=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},Ja=/-(\w)/g,cs=Zs(s=>s.replace(Ja,(t,e)=>e?e.toUpperCase():"")),el=/\B([A-Z])/g,Js=Zs(s=>s.replace(el,"-$1").toLowerCase()),tl=Zs(s=>s.charAt(0).toUpperCase()+s.slice(1)),di=Zs(s=>s?`on${tl(s)}`:""),ut=(s,t)=>!Object.is(s,t),ui=(s,t)=>{for(let e=0;e<s.length;e++)s[e](t)},Sn=(s,t,e,i=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:i,value:e})},sl=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Mr;const Cn=()=>Mr||(Mr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gi(s){if(H(s)){const t={};for(let e=0;e<s.length;e++){const i=s[e],r=Ce(i)?ol(i):Gi(i);if(r)for(const n in r)t[n]=r[n]}return t}else if(Ce(s)||ne(s))return s}const il=/;(?![^(]*\))/g,rl=/:([^]+)/,nl=/\/\*[^]*?\*\//g;function ol(s){const t={};return s.replace(nl,"").split(il).forEach(e=>{if(e){const i=e.split(rl);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function qi(s){let t="";if(Ce(s))t=s;else if(H(s))for(let e=0;e<s.length;e++){const i=qi(s[e]);i&&(t+=i+" ")}else if(ne(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const Lr=s=>Ce(s)?s:s==null?"":H(s)||ne(s)&&(s.toString===bn||!K(s.toString))?JSON.stringify(s,Rn,2):String(s),Rn=(s,t)=>t&&t.__v_isRef?Rn(s,t.value):Dt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,r],n)=>(e[fi(i,n)+" =>"]=r,e),{})}:_n(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>fi(e))}:Tt(t)?fi(t):ne(t)&&!H(t)&&!Tn(t)?String(t):t,fi=(s,t="")=>{var e;return Tt(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let We;class al{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=We,!t&&We&&(this.index=(We.scopes||(We.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=We;try{return We=this,t()}finally{We=e}}}on(){We=this}off(){We=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function ll(s,t=We){t&&t.active&&t.effects.push(s)}function cl(){return We}let _t;class Qi{constructor(t,e,i,r){this.fn=t,this.trigger=e,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ll(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ft();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(hl(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),pt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ct,e=_t;try{return ct=!0,_t=this,this._runnings++,Fr(this),this.fn()}finally{Er(this),this._runnings--,_t=e,ct=t}}stop(){this.active&&(Fr(this),Er(this),this.onStop&&this.onStop(),this.active=!1)}}function hl(s){return s.value}function Fr(s){s._trackId++,s._depsLength=0}function Er(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)In(s.deps[t],s);s.deps.length=s._depsLength}}function In(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let ct=!0,Fi=0;const Mn=[];function ft(){Mn.push(ct),ct=!1}function pt(){const s=Mn.pop();ct=s===void 0?!0:s}function Zi(){Fi++}function Ji(){for(Fi--;!Fi&&Ei.length;)Ei.shift()()}function Ln(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const i=s.deps[s._depsLength];i!==t?(i&&In(i,s),s.deps[s._depsLength++]=t):s._depsLength++}}const Ei=[];function Fn(s,t,e){Zi();for(const i of s.keys()){let r;i._dirtyLevel<t&&(r??(r=s.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=t),i._shouldSchedule&&(r??(r=s.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Ei.push(i.scheduler)))}Ji()}const En=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},Pi=new WeakMap,wt=Symbol(""),Ni=Symbol("");function Le(s,t,e){if(ct&&_t){let i=Pi.get(s);i||Pi.set(s,i=new Map);let r=i.get(e);r||i.set(e,r=En(()=>i.delete(e))),Ln(_t,r)}}function tt(s,t,e,i,r,n){const o=Pi.get(s);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&H(s)){const l=Number(i);o.forEach((d,h)=>{(h==="length"||!Tt(h)&&h>=l)&&a.push(d)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":H(s)?Ki(e)&&a.push(o.get("length")):(a.push(o.get(wt)),Dt(s)&&a.push(o.get(Ni)));break;case"delete":H(s)||(a.push(o.get(wt)),Dt(s)&&a.push(o.get(Ni)));break;case"set":Dt(s)&&a.push(o.get(wt));break}Zi();for(const l of a)l&&Fn(l,4);Ji()}const dl=yn("__proto__,__v_isRef,__isVue"),Pn=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Tt)),Pr=ul();function ul(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const i=J(this);for(let n=0,o=this.length;n<o;n++)Le(i,"get",n+"");const r=i[t](...e);return r===-1||r===!1?i[t](...e.map(J)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){ft(),Zi();const i=J(this)[t].apply(this,e);return Ji(),pt(),i}}),s}function fl(s){Tt(s)||(s=String(s));const t=J(this);return Le(t,"has",s),t.hasOwnProperty(s)}class Nn{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const r=this._isReadonly,n=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return n;if(e==="__v_raw")return i===(r?n?Rl:Bn:n?kn:On).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=H(t);if(!r){if(o&&Z(Pr,e))return Reflect.get(Pr,e,i);if(e==="hasOwnProperty")return fl}const a=Reflect.get(t,e,i);return(Tt(e)?Pn.has(e):dl(e))||(r||Le(t,"get",e),n)?a:Fe(a)?o&&Ki(e)?a:a.value:ne(a)?r?zn(a):sr(a):a}}class An extends Nn{constructor(t=!1){super(!1,t)}set(t,e,i,r){let n=t[e];if(!this._isShallow){const l=hs(n);if(!Xs(i)&&!hs(i)&&(n=J(n),i=J(i)),!H(t)&&Fe(n)&&!Fe(i))return l?!1:(n.value=i,!0)}const o=H(t)&&Ki(e)?Number(e)<t.length:Z(t,e),a=Reflect.set(t,e,i,r);return t===J(r)&&(o?ut(i,n)&&tt(t,"set",e,i):tt(t,"add",e,i)),a}deleteProperty(t,e){const i=Z(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&tt(t,"delete",e,void 0),r}has(t,e){const i=Reflect.has(t,e);return(!Tt(e)||!Pn.has(e))&&Le(t,"has",e),i}ownKeys(t){return Le(t,"iterate",H(t)?"length":wt),Reflect.ownKeys(t)}}class pl extends Nn{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const gl=new An,ml=new pl,xl=new An(!0);const er=s=>s,ei=s=>Reflect.getPrototypeOf(s);function Is(s,t,e=!1,i=!1){s=s.__v_raw;const r=J(s),n=J(t);e||(ut(t,n)&&Le(r,"get",t),Le(r,"get",n));const{has:o}=ei(r),a=i?er:e?rr:ds;if(o.call(r,t))return a(s.get(t));if(o.call(r,n))return a(s.get(n));s!==r&&s.get(t)}function Ms(s,t=!1){const e=this.__v_raw,i=J(e),r=J(s);return t||(ut(s,r)&&Le(i,"has",s),Le(i,"has",r)),s===r?e.has(s):e.has(s)||e.has(r)}function Ls(s,t=!1){return s=s.__v_raw,!t&&Le(J(s),"iterate",wt),Reflect.get(s,"size",s)}function Nr(s){s=J(s);const t=J(this);return ei(t).has.call(t,s)||(t.add(s),tt(t,"add",s,s)),this}function Ar(s,t){t=J(t);const e=J(this),{has:i,get:r}=ei(e);let n=i.call(e,s);n||(s=J(s),n=i.call(e,s));const o=r.call(e,s);return e.set(s,t),n?ut(t,o)&&tt(e,"set",s,t):tt(e,"add",s,t),this}function Or(s){const t=J(this),{has:e,get:i}=ei(t);let r=e.call(t,s);r||(s=J(s),r=e.call(t,s)),i&&i.call(t,s);const n=t.delete(s);return r&&tt(t,"delete",s,void 0),n}function kr(){const s=J(this),t=s.size!==0,e=s.clear();return t&&tt(s,"clear",void 0,void 0),e}function Fs(s,t){return function(i,r){const n=this,o=n.__v_raw,a=J(o),l=t?er:s?rr:ds;return!s&&Le(a,"iterate",wt),o.forEach((d,h)=>i.call(r,l(d),l(h),n))}}function Es(s,t,e){return function(...i){const r=this.__v_raw,n=J(r),o=Dt(n),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,d=r[s](...i),h=e?er:t?rr:ds;return!t&&Le(n,"iterate",l?Ni:wt),{next(){const{value:f,done:m}=d.next();return m?{value:f,done:m}:{value:a?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function rt(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function yl(){const s={get(n){return Is(this,n)},get size(){return Ls(this)},has:Ms,add:Nr,set:Ar,delete:Or,clear:kr,forEach:Fs(!1,!1)},t={get(n){return Is(this,n,!1,!0)},get size(){return Ls(this)},has:Ms,add:Nr,set:Ar,delete:Or,clear:kr,forEach:Fs(!1,!0)},e={get(n){return Is(this,n,!0)},get size(){return Ls(this,!0)},has(n){return Ms.call(this,n,!0)},add:rt("add"),set:rt("set"),delete:rt("delete"),clear:rt("clear"),forEach:Fs(!0,!1)},i={get(n){return Is(this,n,!0,!0)},get size(){return Ls(this,!0)},has(n){return Ms.call(this,n,!0)},add:rt("add"),set:rt("set"),delete:rt("delete"),clear:rt("clear"),forEach:Fs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Es(n,!1,!1),e[n]=Es(n,!0,!1),t[n]=Es(n,!1,!0),i[n]=Es(n,!0,!0)}),[s,e,t,i]}const[vl,_l,wl,bl]=yl();function tr(s,t){const e=t?s?bl:wl:s?_l:vl;return(i,r,n)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?i:Reflect.get(Z(e,r)&&r in i?e:i,r,n)}const Tl={get:tr(!1,!1)},Sl={get:tr(!1,!0)},Cl={get:tr(!0,!1)};const On=new WeakMap,kn=new WeakMap,Bn=new WeakMap,Rl=new WeakMap;function Il(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ml(s){return s.__v_skip||!Object.isExtensible(s)?0:Il(Za(s))}function sr(s){return hs(s)?s:ir(s,!1,gl,Tl,On)}function Ll(s){return ir(s,!1,xl,Sl,kn)}function zn(s){return ir(s,!0,ml,Cl,Bn)}function ir(s,t,e,i,r){if(!ne(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const n=r.get(s);if(n)return n;const o=Ml(s);if(o===0)return s;const a=new Proxy(s,o===2?i:e);return r.set(s,a),a}function ss(s){return hs(s)?ss(s.__v_raw):!!(s&&s.__v_isReactive)}function hs(s){return!!(s&&s.__v_isReadonly)}function Xs(s){return!!(s&&s.__v_isShallow)}function $n(s){return s?!!s.__v_raw:!1}function J(s){const t=s&&s.__v_raw;return t?J(t):s}function Dn(s){return Object.isExtensible(s)&&Sn(s,"__v_skip",!0),s}const ds=s=>ne(s)?sr(s):s,rr=s=>ne(s)?zn(s):s;class Un{constructor(t,e,i,r){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Qi(()=>t(this._value),()=>$s(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=J(this);return(!t._cacheable||t.effect.dirty)&&ut(t._value,t._value=t.effect.run())&&$s(t,4),Wn(t),t.effect._dirtyLevel>=2&&$s(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Fl(s,t,e=!1){let i,r;const n=K(s);return n?(i=s,r=$e):(i=s.get,r=s.set),new Un(i,r,n||!r,e)}function Wn(s){var t;ct&&_t&&(s=J(s),Ln(_t,(t=s.dep)!=null?t:s.dep=En(()=>s.dep=void 0,s instanceof Un?s:void 0)))}function $s(s,t=4,e){s=J(s);const i=s.dep;i&&Fn(i,t)}function Fe(s){return!!(s&&s.__v_isRef===!0)}function is(s){return El(s,!1)}function El(s,t){return Fe(s)?s:new Pl(s,t)}class Pl{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:J(t),this._value=e?t:ds(t)}get value(){return Wn(this),this._value}set value(t){const e=this.__v_isShallow||Xs(t)||hs(t);t=e?t:J(t),ut(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:ds(t),$s(this,4))}}function Jt(s){return Fe(s)?s.value:s}const Nl={get:(s,t,e)=>Jt(Reflect.get(s,t,e)),set:(s,t,e,i)=>{const r=s[t];return Fe(r)&&!Fe(e)?(r.value=e,!0):Reflect.set(s,t,e,i)}};function Yn(s){return ss(s)?s:new Proxy(s,Nl)}const Hn=is(void 0),Al=s=>Hn.value=s,{animationSettings:Ol}=Ne,Ps=[];let pi=!0;function Br(s){const t=[];for(const[e,i]of Object.entries(s))t.push({type:e,props:i});return ji("DynamicShader",{effects:t})}function Xt(s=""){return{set(t){Va(t)&&(t={width:t,color:255}),this.effects={...this.effects||{},[`border${s}`]:t},this[`_border${s}`]=t},get(){return this[`_border${s}`]}}}const kl=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Bl=["autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class Qe extends Object{constructor(e){super();c(this,"id");c(this,"debug");c(this,"name");c(this,"lng");c(this,"renderer");c(this,"selected");c(this,"autofocus");c(this,"flexItem");c(this,"flexOrder");c(this,"flexBoundary");c(this,"_queueDelete");c(this,"forwardFocus");c(this,"_undoStyles");c(this,"_renderProps");c(this,"_effects");c(this,"_parent");c(this,"_shader");c(this,"_style");c(this,"_states");c(this,"_events");c(this,"_animationSettings");c(this,"_borderRadius");c(this,"_border");c(this,"_borderLeft");c(this,"_borderRight");c(this,"_borderTop");c(this,"_borderBottom");c(this,"_animationQueue",[]);c(this,"_animationQueueSettings");c(this,"_animationRunning",!1);c(this,"children");this.name=e,this._renderProps={},this.children=new Ua(this)}get effects(){return this._effects}set effects(e){this._effects=e,this.lng&&(this.shader=Br(e))}get parent(){return this._parent}set parent(e){this._parent=e,this.lng&&(this.lng.parent=(e==null?void 0:e.lng)??null)}get shader(){return this._shader}set shader(e){js(e)?this._shader=ji(...e):this._shader=e,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(e,i){if(this.lng){if(Ne.animationsEnabled&&this.transition&&(this.transition===!0||this.transition[e])){const r=this.transition===!0||this.transition[e]===!0?void 0:this.transition[e];return this.animate({[e]:i},r).start()}this.lng[e]=i}else this._renderProps[e]=i}_sendToLightning(e,i){this.lng?this.lng[e]=i:this._renderProps[e]=i}animate(e,i){return B(this.lng,"Node must be rendered before animating"),this.lng.animate(e,i||this.animationSettings)}chain(e,i){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),i?this._animationQueueSettings=i:this._animationQueueSettings||(this._animationQueueSettings=i||this.animationSettings),i=i||this._animationQueueSettings,this._animationQueue.push({props:e,animationSettings:i}),this}async start(){let e=this._animationQueue.shift();for(;e;)this._animationRunning=!0,await this.animate(e.props,e.animationSettings).start().waitUntilStopped(),e=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.lng){if(this.forwardFocus!==void 0)if(Rs(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const e=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(e!==null&&e<this.children.length){const i=this.children[e];i instanceof Qe&&i.setFocus();return}}queueMicrotask(()=>Al(this))}else this.autofocus=!0}isTextNode(){return this.name==="text"}_layoutOnLoad(){this.lng.on("loaded",(e,i)=>{const{dimensions:r}=i;this.parent.updateLayout(this,r)})}getText(){return this.children.map(e=>e.text).join("")}destroy(){var e;this._queueDelete&&((e=this.lng)==null||e.destroy())}set onEvents(e){this._events=e}get onEvents(){return this._events||[]}set style(e){js(e)?this._style=xn(e):this._style=e;for(const i in this._style)this[i]===void 0&&(this[i]=this._style[i])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(e){return this.children.find(i=>i.id===e)}searchChildrenById(e){for(let i=0;i<this.children.length;i++){const r=this.children[i];if(r instanceof Qe){if(r.id===e)return r;const n=r.searchChildrenById(e);if(n)return n}}}set states(e){this._states=new Ir(this._stateChanged.bind(this),e),this.lng&&this._stateChanged()}get states(){return this._states=this._states||new Ir(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Ol}set animationSettings(e){this._animationSettings=e}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(e,i){var r,n;if(this.hasChildren){lt("Layout: ",this);let o=!1;Rs(this.onBeforeLayout)&&(o=this.onBeforeLayout.call(this,this,e,i)),this.display==="flex"?(Ga(this)||o)&&((r=this.parent)==null||r.updateLayout()):o&&((n=this.parent)==null||n.updateLayout()),Rs(this.onLayout)&&this.onLayout.call(this,this,e,i)}}_stateChanged(){if(lt("State Changed: ",this,this.states),this.forwardStates){const i=this.states.slice();this.children.forEach(r=>r.states=i)}const e=this.states;if(this._undoStyles||this.style&&Ka(this.style,e)){this._undoStyles=this._undoStyles||[];const i={};this._undoStyles.forEach(n=>{i[n]=this.style[n]});const r=e.reduce((n,o)=>{const a=this.style[o];return a&&(n={...n,...a}),n},{});this._undoStyles=Object.keys(r),r.transition!==void 0&&(this.transition=r.transition),Object.assign(this,i,r)}}render(){const e=this,i=this.parent;if(!i){console.warn("Parent not set - no node created for: ",this);return}if(!i.lng){console.warn("Parent not rendered yet: ",this);return}if(this.lng){console.warn("Node already rendered: ",this);return}i.requiresLayout()&&Ps.indexOf(i)===-1&&(Ps.push(i),pi&&(pi=!1,queueMicrotask(()=>{for(pi=!0;Ps.length;)Ps.pop().updateLayout()}))),this.states.length&&this._stateChanged();const r=e._renderProps;if(r.x=r.x||0,r.y=r.y||0,i.lng&&(r.parent=i.lng),e._effects&&(this.shader=Br(e._effects)),e.isTextNode()){if(Ne.fontSettings)for(const n in Ne.fontSettings)r[n]===void 0&&(r[n]=Ne.fontSettings[n]);r.text=e.getText(),r.contain&&(r.width||(r.width=(i.width||0)-r.x-(r.marginRight||0)),r.contain==="both"&&!r.height&&!r.maxLines?r.height=(i.height||0)-r.y-(r.marginBottom||0):r.maxLines===1&&(r.height=r.height||r.lineHeight||r.fontSize)),lt("Rendering: ",this,r),e.lng=Bt.createTextNode(r),i.requiresLayout()&&(!r.width||!r.height)&&e._layoutOnLoad()}else r.texture||(isNaN(r.width)&&(r.width=(i.width||0)-r.x),isNaN(r.height)&&(r.height=(i.height||0)-r.y),!r.color&&!r.src&&(r.color=0)),lt("Rendering: ",this,r),e.lng=Bt.createNode(r);r.autosize&&i.requiresLayout()&&e._layoutOnLoad(),e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),Rs(this.onCreate)&&this.onCreate.call(this,e),e.onEvents.forEach(([n,o])=>{var a;(a=e.lng)==null||a.on(n,(l,d)=>o(e,d))}),e.lng.div&&(e.lng.div.solid=e),e.name!=="text"&&e.children.forEach(n=>{n.render?n.render():n.text!==""&&console.warn("TextNode outside of <Text>: ",n)}),e.autofocus&&e.setFocus(),this._renderProps={}}}for(const s of kl)Object.defineProperty(Qe.prototype,s,{get(){return this.lng?this.lng[s]:this._renderProps[s]},set(t){this._sendToLightningAnimatable(s,t)}});for(const s of Bl)Object.defineProperty(Qe.prototype,s,{get(){return this.lng?this.lng[s]:this._renderProps[s]},set(t){this._sendToLightning(s,t)}});Object.defineProperties(Qe.prototype,{borderRadius:{set(s){this._borderRadius=s,this.effects={...this.effects||{},radius:{radius:s}}},get(){return this._borderRadius}},border:Xt(),borderLeft:Xt("Left"),borderRight:Xt("Right"),borderTop:Xt("Top"),borderBottom:Xt("Bottom")});Object.defineProperties(Qe.prototype,{linearGradient:{set(s={}){this._linearGradient=s,this.effects={...this.effects||{},linearGradient:s}},get(){return this._linearGradient}}});/**
* @vue/runtime-core v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ht(s,t,e,i){try{return i?s(...i):s()}catch(r){ti(r,t,e)}}function Ze(s,t,e,i){if(K(s)){const r=ht(s,t,e,i);return r&&wn(r)&&r.catch(n=>{ti(n,t,e)}),r}if(H(s)){const r=[];for(let n=0;n<s.length;n++)r.push(Ze(s[n],t,e,i));return r}}function ti(s,t,e,i=!0){const r=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;n;){const d=n.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](s,o,a)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){ft(),ht(l,null,10,[s,o,a]),pt();return}}zl(s,e,r,i)}function zl(s,t,e,i=!0){console.error(s)}let us=!1,Ai=!1;const _e=[];let Ke=0;const Ut=[];let nt=null,xt=0;const jn=Promise.resolve();let nr=null;function $l(s){const t=nr||jn;return s?t.then(this?s.bind(this):s):t}function Dl(s){let t=Ke+1,e=_e.length;for(;t<e;){const i=t+e>>>1,r=_e[i],n=fs(r);n<s||n===s&&r.pre?t=i+1:e=i}return t}function or(s){(!_e.length||!_e.includes(s,us&&s.allowRecurse?Ke+1:Ke))&&(s.id==null?_e.push(s):_e.splice(Dl(s.id),0,s),Xn())}function Xn(){!us&&!Ai&&(Ai=!0,nr=jn.then(Kn))}function Ul(s){const t=_e.indexOf(s);t>Ke&&_e.splice(t,1)}function Wl(s){H(s)?Ut.push(...s):(!nt||!nt.includes(s,s.allowRecurse?xt+1:xt))&&Ut.push(s),Xn()}function zr(s,t,e=us?Ke+1:0){for(;e<_e.length;e++){const i=_e[e];if(i&&i.pre){if(s&&i.id!==s.uid)continue;_e.splice(e,1),e--,i()}}}function Vn(s){if(Ut.length){const t=[...new Set(Ut)].sort((e,i)=>fs(e)-fs(i));if(Ut.length=0,nt){nt.push(...t);return}for(nt=t,xt=0;xt<nt.length;xt++)nt[xt]();nt=null,xt=0}}const fs=s=>s.id==null?1/0:s.id,Yl=(s,t)=>{const e=fs(s)-fs(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function Kn(s){Ai=!1,us=!0,_e.sort(Yl);try{for(Ke=0;Ke<_e.length;Ke++){const t=_e[Ke];t&&t.active!==!1&&ht(t,null,14)}}finally{Ke=0,_e.length=0,Vn(),us=!1,nr=null,(_e.length||Ut.length)&&Kn()}}function Hl(s,t,...e){if(s.isUnmounted)return;const i=s.vnode.props||ie;let r=e;const n=t.startsWith("update:"),o=n&&t.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:m}=i[h]||ie;m&&(r=e.map(g=>Ce(g)?g.trim():g)),f&&(r=e.map(sl))}let a,l=i[a=di(t)]||i[a=di(cs(t))];!l&&n&&(l=i[a=di(Js(t))]),l&&Ze(l,s,6,r);const d=i[a+"Once"];if(d){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,Ze(d,s,6,r)}}function Gn(s,t,e=!1){const i=t.emitsCache,r=i.get(s);if(r!==void 0)return r;const n=s.emits;let o={},a=!1;if(!K(s)){const l=d=>{const h=Gn(d,t,!0);h&&(a=!0,xe(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!n&&!a?(ne(s)&&i.set(s,null),null):(H(n)?n.forEach(l=>o[l]=null):xe(o,n),ne(s)&&i.set(s,o),o)}function si(s,t){return!s||!Xi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Z(s,t[0].toLowerCase()+t.slice(1))||Z(s,Js(t))||Z(s,t))}let Ge=null,qn=null;function Vs(s){const t=Ge;return Ge=s,qn=s&&s.type.__scopeId||null,t}function jl(s,t=Ge,e){if(!t||s._n)return s;const i=(...r)=>{i._d&&Gr(-1);const n=Vs(t);let o;try{o=s(...r)}finally{Vs(n),i._d&&Gr(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function gi(s){const{type:t,vnode:e,proxy:i,withProxy:r,propsOptions:[n],slots:o,attrs:a,emit:l,render:d,renderCache:h,props:f,data:m,setupState:g,ctx:v,inheritAttrs:y}=s,_=Vs(s);let S,P;try{if(e.shapeFlag&4){const R=r||i,N=R;S=Ve(d.call(N,R,h,f,g,m,v)),P=a}else{const R=t;S=Ve(R.length>1?R(f,{attrs:a,slots:o,emit:l}):R(f,null)),P=t.props?a:Xl(a)}}catch(R){os.length=0,ti(R,s,1),S=dt(ps)}let T=S;if(P&&y!==!1){const R=Object.keys(P),{shapeFlag:N}=T;R.length&&N&7&&(n&&R.some(vn)&&(P=Vl(P,n)),T=Wt(T,P,!1,!0))}return e.dirs&&(T=Wt(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&(T.transition=e.transition),S=T,Vs(_),S}const Xl=s=>{let t;for(const e in s)(e==="class"||e==="style"||Xi(e))&&((t||(t={}))[e]=s[e]);return t},Vl=(s,t)=>{const e={};for(const i in s)(!vn(i)||!(i.slice(9)in t))&&(e[i]=s[i]);return e};function Kl(s,t,e){const{props:i,children:r,component:n}=s,{props:o,children:a,patchFlag:l}=t,d=n.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?$r(i,o,d):!!o;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==i[m]&&!si(d,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?$r(i,o,d):!0:!!o;return!1}function $r(s,t,e){const i=Object.keys(t);if(i.length!==Object.keys(s).length)return!0;for(let r=0;r<i.length;r++){const n=i[r];if(t[n]!==s[n]&&!si(e,n))return!0}return!1}function Gl({vnode:s,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=t.vnode).el=e,t=t.parent;else break}}const ql=Symbol.for("v-ndc"),Ql=s=>s.__isSuspense;function Zl(s,t){t&&t.pendingBranch?H(s)?t.effects.push(...s):t.effects.push(s):Wl(s)}const Jl=Symbol.for("v-scx"),ec=()=>Ws(Jl),Ns={};function Ds(s,t,e){return Qn(s,t,e)}function Qn(s,t,{immediate:e,deep:i,flush:r,once:n,onTrack:o,onTrigger:a}=ie){if(t&&n){const k=t;t=(...O)=>{k(...O),N()}}const l=Se,d=k=>i===!0?k:zt(k,i===!1?1:void 0);let h,f=!1,m=!1;if(Fe(s)?(h=()=>s.value,f=Xs(s)):ss(s)?(h=()=>d(s),f=!0):H(s)?(m=!0,f=s.some(k=>ss(k)||Xs(k)),h=()=>s.map(k=>{if(Fe(k))return k.value;if(ss(k))return d(k);if(K(k))return ht(k,l,2)})):K(s)?t?h=()=>ht(s,l,2):h=()=>(g&&g(),Ze(s,l,3,[v])):h=$e,t&&i){const k=h;h=()=>zt(k())}let g,v=k=>{g=T.onStop=()=>{ht(k,l,4),g=T.onStop=void 0}},y;if(ni)if(v=$e,t?e&&Ze(t,l,3,[h(),m?[]:void 0,v]):h(),r==="sync"){const k=ec();y=k.__watcherHandles||(k.__watcherHandles=[])}else return $e;let _=m?new Array(s.length).fill(Ns):Ns;const S=()=>{if(!(!T.active||!T.dirty))if(t){const k=T.run();(i||f||(m?k.some((O,D)=>ut(O,_[D])):ut(k,_)))&&(g&&g(),Ze(t,l,3,[k,_===Ns?void 0:m&&_[0]===Ns?[]:_,v]),_=k)}else T.run()};S.allowRecurse=!!t;let P;r==="sync"?P=S:r==="post"?P=()=>Me(S,l&&l.suspense):(S.pre=!0,l&&(S.id=l.uid),P=()=>or(S));const T=new Qi(h,$e,P),R=cl(),N=()=>{T.stop(),R&&Vi(R.effects,T)};return t?e?S():_=T.run():r==="post"?Me(T.run.bind(T),l&&l.suspense):T.run(),y&&y.push(N),N}function tc(s,t,e){const i=this.proxy,r=Ce(s)?s.includes(".")?Zn(i,s):()=>i[s]:s.bind(i,i);let n;K(t)?n=t:(n=t.handler,e=t);const o=ms(this),a=Qn(r,n.bind(i),e);return o(),a}function Zn(s,t){const e=t.split(".");return()=>{let i=s;for(let r=0;r<e.length&&i;r++)i=i[e[r]];return i}}function zt(s,t=1/0,e){if(t<=0||!ne(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,Fe(s))zt(s.value,t,e);else if(H(s))for(let i=0;i<s.length;i++)zt(s[i],t,e);else if(_n(s)||Dt(s))s.forEach(i=>{zt(i,t,e)});else if(Tn(s))for(const i in s)zt(s[i],t,e);return s}function gt(s,t,e,i){const r=s.dirs,n=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(ft(),Ze(l,e,8,[s.el,a,s,t]),pt())}}const Us=s=>!!s.type.__asyncLoader,Jn=s=>s.type.__isKeepAlive;function sc(s,t){eo(s,"a",t)}function ic(s,t){eo(s,"da",t)}function eo(s,t,e=Se){const i=s.__wdc||(s.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(ii(t,i,e),e){let r=e.parent;for(;r&&r.parent;)Jn(r.parent.vnode)&&rc(i,t,e,r),r=r.parent}}function rc(s,t,e,i){const r=ii(t,s,i,!0);so(()=>{Vi(i[t],r)},e)}function ii(s,t,e=Se,i=!1){if(e){const r=e[s]||(e[s]=[]),n=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;ft();const a=ms(e),l=Ze(t,e,s,o);return a(),pt(),l});return i?r.unshift(n):r.push(n),n}}const st=s=>(t,e=Se)=>(!ni||s==="sp")&&ii(s,(...i)=>t(...i),e),nc=st("bm"),to=st("m"),oc=st("bu"),ac=st("u"),lc=st("bum"),so=st("um"),cc=st("sp"),hc=st("rtg"),dc=st("rtc");function uc(s,t=Se){ii("ec",s,t)}function Dr(s,t,e,i){let r;const n=e;if(H(s)||Ce(s)){r=new Array(s.length);for(let o=0,a=s.length;o<a;o++)r[o]=t(s[o],o,void 0,n)}else if(typeof s=="number"){r=new Array(s);for(let o=0;o<s;o++)r[o]=t(o+1,o,void 0,n)}else if(ne(s))if(s[Symbol.iterator])r=Array.from(s,(o,a)=>t(o,a,void 0,n));else{const o=Object.keys(s);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const d=o[a];r[a]=t(s[d],d,a,n)}}else r=[];return r}const Oi=s=>s?xo(s)?hr(s)||s.proxy:Oi(s.parent):null,rs=xe(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Oi(s.parent),$root:s=>Oi(s.root),$emit:s=>s.emit,$options:s=>ar(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,or(s.update)}),$nextTick:s=>s.n||(s.n=$l.bind(s.proxy)),$watch:s=>tc.bind(s)}),mi=(s,t)=>s!==ie&&!s.__isScriptSetup&&Z(s,t),fc={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:r,props:n,accessCache:o,type:a,appContext:l}=s;let d;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return i[t];case 2:return r[t];case 4:return e[t];case 3:return n[t]}else{if(mi(i,t))return o[t]=1,i[t];if(r!==ie&&Z(r,t))return o[t]=2,r[t];if((d=s.propsOptions[0])&&Z(d,t))return o[t]=3,n[t];if(e!==ie&&Z(e,t))return o[t]=4,e[t];ki&&(o[t]=0)}}const h=rs[t];let f,m;if(h)return t==="$attrs"&&Le(s.attrs,"get",""),h(s);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==ie&&Z(e,t))return o[t]=4,e[t];if(m=l.config.globalProperties,Z(m,t))return m[t]},set({_:s},t,e){const{data:i,setupState:r,ctx:n}=s;return mi(r,t)?(r[t]=e,!0):i!==ie&&Z(i,t)?(i[t]=e,!0):Z(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(n[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:i,appContext:r,propsOptions:n}},o){let a;return!!e[o]||s!==ie&&Z(s,o)||mi(t,o)||(a=n[0])&&Z(a,o)||Z(i,o)||Z(rs,o)||Z(r.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:Z(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Ur(s){return H(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let ki=!0;function pc(s){const t=ar(s),e=s.proxy,i=s.ctx;ki=!1,t.beforeCreate&&Wr(t.beforeCreate,s,"bc");const{data:r,computed:n,methods:o,watch:a,provide:l,inject:d,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:v,activated:y,deactivated:_,beforeDestroy:S,beforeUnmount:P,destroyed:T,unmounted:R,render:N,renderTracked:k,renderTriggered:O,errorCaptured:D,serverPrefetch:$,expose:V,inheritAttrs:W,components:ee,directives:re,filters:ce}=t;if(d&&gc(d,i,null),o)for(const j in o){const Q=o[j];K(Q)&&(i[j]=Q.bind(e))}if(r){const j=r.call(e,e);ne(j)&&(s.data=sr(j))}if(ki=!0,n)for(const j in n){const Q=n[j],we=K(Q)?Q.bind(e,e):K(Q.get)?Q.get.bind(e,e):$e,Re=!K(Q)&&K(Q.set)?Q.set.bind(e):$e,Ee=Vc({get:we,set:Re});Object.defineProperty(i,j,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:ye=>Ee.value=ye})}if(a)for(const j in a)io(a[j],i,e,j);if(l){const j=K(l)?l.call(e):l;Reflect.ownKeys(j).forEach(Q=>{wc(Q,j[Q])})}h&&Wr(h,s,"c");function X(j,Q){H(Q)?Q.forEach(we=>j(we.bind(e))):Q&&j(Q.bind(e))}if(X(nc,f),X(to,m),X(oc,g),X(ac,v),X(sc,y),X(ic,_),X(uc,D),X(dc,k),X(hc,O),X(lc,P),X(so,R),X(cc,$),H(V))if(V.length){const j=s.exposed||(s.exposed={});V.forEach(Q=>{Object.defineProperty(j,Q,{get:()=>e[Q],set:we=>e[Q]=we})})}else s.exposed||(s.exposed={});N&&s.render===$e&&(s.render=N),W!=null&&(s.inheritAttrs=W),ee&&(s.components=ee),re&&(s.directives=re)}function gc(s,t,e=$e){H(s)&&(s=Bi(s));for(const i in s){const r=s[i];let n;ne(r)?"default"in r?n=Ws(r.from||i,r.default,!0):n=Ws(r.from||i):n=Ws(r),Fe(n)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[i]=n}}function Wr(s,t,e){Ze(H(s)?s.map(i=>i.bind(t.proxy)):s.bind(t.proxy),t,e)}function io(s,t,e,i){const r=i.includes(".")?Zn(e,i):()=>e[i];if(Ce(s)){const n=t[s];K(n)&&Ds(r,n)}else if(K(s))Ds(r,s.bind(e));else if(ne(s))if(H(s))s.forEach(n=>io(n,t,e,i));else{const n=K(s.handler)?s.handler.bind(e):t[s.handler];K(n)&&Ds(r,n,s)}}function ar(s){const t=s.type,{mixins:e,extends:i}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:o}}=s.appContext,a=n.get(t);let l;return a?l=a:!r.length&&!e&&!i?l=t:(l={},r.length&&r.forEach(d=>Ks(l,d,o,!0)),Ks(l,t,o)),ne(t)&&n.set(t,l),l}function Ks(s,t,e,i=!1){const{mixins:r,extends:n}=t;n&&Ks(s,n,e,!0),r&&r.forEach(o=>Ks(s,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=mc[o]||e&&e[o];s[o]=a?a(s[o],t[o]):t[o]}return s}const mc={data:Yr,props:Hr,emits:Hr,methods:es,computed:es,beforeCreate:Te,created:Te,beforeMount:Te,mounted:Te,beforeUpdate:Te,updated:Te,beforeDestroy:Te,beforeUnmount:Te,destroyed:Te,unmounted:Te,activated:Te,deactivated:Te,errorCaptured:Te,serverPrefetch:Te,components:es,directives:es,watch:yc,provide:Yr,inject:xc};function Yr(s,t){return t?s?function(){return xe(K(s)?s.call(this,this):s,K(t)?t.call(this,this):t)}:t:s}function xc(s,t){return es(Bi(s),Bi(t))}function Bi(s){if(H(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Te(s,t){return s?[...new Set([].concat(s,t))]:t}function es(s,t){return s?xe(Object.create(null),s,t):t}function Hr(s,t){return s?H(s)&&H(t)?[...new Set([...s,...t])]:xe(Object.create(null),Ur(s),Ur(t??{})):t}function yc(s,t){if(!s)return t;if(!t)return s;const e=xe(Object.create(null),s);for(const i in t)e[i]=Te(s[i],t[i]);return e}function ro(){return{app:null,config:{isNativeTag:qa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vc=0;function _c(s,t){return function(i,r=null){K(i)||(i=xe({},i)),r!=null&&!ne(r)&&(r=null);const n=ro(),o=new WeakSet;let a=!1;const l=n.app={_uid:vc++,_component:i,_props:r,_container:null,_context:n,_instance:null,version:Kc,get config(){return n.config},set config(d){},use(d,...h){return o.has(d)||(d&&K(d.install)?(o.add(d),d.install(l,...h)):K(d)&&(o.add(d),d(l,...h))),l},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),l},component(d,h){return h?(n.components[d]=h,l):n.components[d]},directive(d,h){return h?(n.directives[d]=h,l):n.directives[d]},mount(d,h,f){if(!a){const m=dt(i,r);return m.appContext=n,f===!0?f="svg":f===!1&&(f=void 0),h&&t?t(m,d):s(m,d,f),a=!0,l._container=d,d.__vue_app__=l,hr(m.component)||m.component.proxy}},unmount(){a&&(s(null,l._container),delete l._container.__vue_app__)},provide(d,h){return n.provides[d]=h,l},runWithContext(d){const h=ns;ns=l;try{return d()}finally{ns=h}}};return l}}let ns=null;function wc(s,t){if(Se){let e=Se.provides;const i=Se.parent&&Se.parent.provides;i===e&&(e=Se.provides=Object.create(i)),e[s]=t}}function Ws(s,t,e=!1){const i=Se||Ge;if(i||ns){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ns._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return e&&K(t)?t.call(i&&i.proxy):t}}const no={},oo=()=>Object.create(no),ao=s=>Object.getPrototypeOf(s)===no;function bc(s,t,e,i=!1){const r={},n=oo();s.propsDefaults=Object.create(null),lo(s,t,r,n);for(const o in s.propsOptions[0])o in r||(r[o]=void 0);e?s.props=i?r:Ll(r):s.type.props?s.props=r:s.props=n,s.attrs=n}function Tc(s,t,e,i){const{props:r,attrs:n,vnode:{patchFlag:o}}=s,a=J(r),[l]=s.propsOptions;let d=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=s.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(si(s.emitsOptions,m))continue;const g=t[m];if(l)if(Z(n,m))g!==n[m]&&(n[m]=g,d=!0);else{const v=cs(m);r[v]=zi(l,a,v,g,s,!1)}else g!==n[m]&&(n[m]=g,d=!0)}}}else{lo(s,t,r,n)&&(d=!0);let h;for(const f in a)(!t||!Z(t,f)&&((h=Js(f))===f||!Z(t,h)))&&(l?e&&(e[f]!==void 0||e[h]!==void 0)&&(r[f]=zi(l,a,f,void 0,s,!0)):delete r[f]);if(n!==a)for(const f in n)(!t||!Z(t,f))&&(delete n[f],d=!0)}d&&tt(s.attrs,"set","")}function lo(s,t,e,i){const[r,n]=s.propsOptions;let o=!1,a;if(t)for(let l in t){if(ts(l))continue;const d=t[l];let h;r&&Z(r,h=cs(l))?!n||!n.includes(h)?e[h]=d:(a||(a={}))[h]=d:si(s.emitsOptions,l)||(!(l in i)||d!==i[l])&&(i[l]=d,o=!0)}if(n){const l=J(e),d=a||ie;for(let h=0;h<n.length;h++){const f=n[h];e[f]=zi(r,l,f,d[f],s,!Z(d,f))}}return o}function zi(s,t,e,i,r,n){const o=s[e];if(o!=null){const a=Z(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&K(l)){const{propsDefaults:d}=r;if(e in d)i=d[e];else{const h=ms(r);i=d[e]=l.call(null,t),h()}}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===Js(e))&&(i=!0))}return i}function co(s,t,e=!1){const i=t.propsCache,r=i.get(s);if(r)return r;const n=s.props,o={},a=[];let l=!1;if(!K(s)){const h=f=>{l=!0;const[m,g]=co(f,t,!0);xe(o,m),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(h),s.extends&&h(s.extends),s.mixins&&s.mixins.forEach(h)}if(!n&&!l)return ne(s)&&i.set(s,$t),$t;if(H(n))for(let h=0;h<n.length;h++){const f=cs(n[h]);jr(f)&&(o[f]=ie)}else if(n)for(const h in n){const f=cs(h);if(jr(f)){const m=n[h],g=o[f]=H(m)||K(m)?{type:m}:xe({},m);if(g){const v=Kr(Boolean,g.type),y=Kr(String,g.type);g[0]=v>-1,g[1]=y<0||v<y,(v>-1||Z(g,"default"))&&a.push(f)}}}const d=[o,a];return ne(s)&&i.set(s,d),d}function jr(s){return s[0]!=="$"&&!ts(s)}function Xr(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Vr(s,t){return Xr(s)===Xr(t)}function Kr(s,t){return H(t)?t.findIndex(e=>Vr(e,s)):K(t)&&Vr(t,s)?0:-1}const ho=s=>s[0]==="_"||s==="$stable",lr=s=>H(s)?s.map(Ve):[Ve(s)],Sc=(s,t,e)=>{if(t._n)return t;const i=jl((...r)=>lr(t(...r)),e);return i._c=!1,i},uo=(s,t,e)=>{const i=s._ctx;for(const r in s){if(ho(r))continue;const n=s[r];if(K(n))t[r]=Sc(r,n,i);else if(n!=null){const o=lr(n);t[r]=()=>o}}},fo=(s,t)=>{const e=lr(t);s.slots.default=()=>e},Cc=(s,t)=>{const e=s.slots=oo();if(s.vnode.shapeFlag&32){const i=t._;i?(xe(e,t),Sn(e,"_",i,!0)):uo(t,e)}else t&&fo(s,t)},Rc=(s,t,e)=>{const{vnode:i,slots:r}=s;let n=!0,o=ie;if(i.shapeFlag&32){const a=t._;a?e&&a===1?n=!1:(xe(r,t),!e&&a===1&&delete r._):(n=!t.$stable,uo(t,r)),o=t}else t&&(fo(s,t),o={default:1});if(n)for(const a in r)!ho(a)&&o[a]==null&&delete r[a]};function $i(s,t,e,i,r=!1){if(H(s)){s.forEach((m,g)=>$i(m,t&&(H(t)?t[g]:t),e,i,r));return}if(Us(i)&&!r)return;const n=i.shapeFlag&4?hr(i.component)||i.component.proxy:i.el,o=r?null:n,{i:a,r:l}=s,d=t&&t.r,h=a.refs===ie?a.refs={}:a.refs,f=a.setupState;if(d!=null&&d!==l&&(Ce(d)?(h[d]=null,Z(f,d)&&(f[d]=null)):Fe(d)&&(d.value=null)),K(l))ht(l,a,12,[o,h]);else{const m=Ce(l),g=Fe(l);if(m||g){const v=()=>{if(s.f){const y=m?Z(f,l)?f[l]:h[l]:l.value;r?H(y)&&Vi(y,n):H(y)?y.includes(n)||y.push(n):m?(h[l]=[n],Z(f,l)&&(f[l]=h[l])):(l.value=[n],s.k&&(h[s.k]=l.value))}else m?(h[l]=o,Z(f,l)&&(f[l]=o)):g&&(l.value=o,s.k&&(h[s.k]=o))};o?(v.id=-1,Me(v,e)):v()}}}const Me=Zl;function Ic(s){return Mc(s)}function Mc(s,t){const e=Cn();e.__VUE__=!0;const{insert:i,remove:r,patchProp:n,createElement:o,createText:a,createComment:l,setText:d,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=$e,insertStaticContent:v}=s,y=(u,p,x,w=null,b=null,I=null,F=void 0,M=null,L=!!p.dynamicChildren)=>{if(u===p)return;u&&!Vt(u,p)&&(w=Ie(u),ye(u,b,I,!0),u=null),p.patchFlag===-2&&(L=!1,p.dynamicChildren=null);const{type:C,ref:A,shapeFlag:U}=p;switch(C){case ri:_(u,p,x,w);break;case ps:S(u,p,x,w);break;case yi:u==null&&P(p,x,w,F);break;case Ye:ee(u,p,x,w,b,I,F,M,L);break;default:U&1?N(u,p,x,w,b,I,F,M,L):U&6?re(u,p,x,w,b,I,F,M,L):(U&64||U&128)&&C.process(u,p,x,w,b,I,F,M,L,De)}A!=null&&b&&$i(A,u&&u.ref,I,p||u,!p)},_=(u,p,x,w)=>{if(u==null)i(p.el=a(p.children),x,w);else{const b=p.el=u.el;p.children!==u.children&&d(b,p.children)}},S=(u,p,x,w)=>{u==null?i(p.el=l(p.children||""),x,w):p.el=u.el},P=(u,p,x,w)=>{[u.el,u.anchor]=v(u.children,p,x,w,u.el,u.anchor)},T=({el:u,anchor:p},x,w)=>{let b;for(;u&&u!==p;)b=m(u),i(u,x,w),u=b;i(p,x,w)},R=({el:u,anchor:p})=>{let x;for(;u&&u!==p;)x=m(u),r(u),u=x;r(p)},N=(u,p,x,w,b,I,F,M,L)=>{p.type==="svg"?F="svg":p.type==="math"&&(F="mathml"),u==null?k(p,x,w,b,I,F,M,L):$(u,p,b,I,F,M,L)},k=(u,p,x,w,b,I,F,M)=>{let L,C;const{props:A,shapeFlag:U,transition:z,dirs:Y}=u;if(L=u.el=o(u.type,I,A&&A.is,A),U&8?h(L,u.children):U&16&&D(u.children,L,null,w,b,xi(u,I),F,M),Y&&gt(u,null,w,"created"),O(L,u,u.scopeId,F,w),A){for(const te in A)te!=="value"&&!ts(te)&&n(L,te,null,A[te],I,u.children,w,b,pe);"value"in A&&n(L,"value",null,A.value,I),(C=A.onVnodeBeforeMount)&&Xe(C,w,u)}Y&&gt(u,null,w,"beforeMount");const G=Lc(b,z);G&&z.beforeEnter(L),i(L,p,x),((C=A&&A.onVnodeMounted)||G||Y)&&Me(()=>{C&&Xe(C,w,u),G&&z.enter(L),Y&&gt(u,null,w,"mounted")},b)},O=(u,p,x,w,b)=>{if(x&&g(u,x),w)for(let I=0;I<w.length;I++)g(u,w[I]);if(b){let I=b.subTree;if(p===I){const F=b.vnode;O(u,F,F.scopeId,F.slotScopeIds,b.parent)}}},D=(u,p,x,w,b,I,F,M,L=0)=>{for(let C=L;C<u.length;C++){const A=u[C]=M?ot(u[C]):Ve(u[C]);y(null,A,p,x,w,b,I,F,M)}},$=(u,p,x,w,b,I,F)=>{const M=p.el=u.el;let{patchFlag:L,dynamicChildren:C,dirs:A}=p;L|=u.patchFlag&16;const U=u.props||ie,z=p.props||ie;let Y;if(x&&mt(x,!1),(Y=z.onVnodeBeforeUpdate)&&Xe(Y,x,p,u),A&&gt(p,u,x,"beforeUpdate"),x&&mt(x,!0),C?V(u.dynamicChildren,C,M,x,w,xi(p,b),I):F||Q(u,p,M,null,x,w,xi(p,b),I,!1),L>0){if(L&16)W(M,p,U,z,x,w,b);else if(L&2&&U.class!==z.class&&n(M,"class",null,z.class,b),L&4&&n(M,"style",U.style,z.style,b),L&8){const G=p.dynamicProps;for(let te=0;te<G.length;te++){const se=G[te],ge=U[se],Ue=z[se];(Ue!==ge||se==="value")&&n(M,se,ge,Ue,b,u.children,x,w,pe)}}L&1&&u.children!==p.children&&h(M,p.children)}else!F&&C==null&&W(M,p,U,z,x,w,b);((Y=z.onVnodeUpdated)||A)&&Me(()=>{Y&&Xe(Y,x,p,u),A&&gt(p,u,x,"updated")},w)},V=(u,p,x,w,b,I,F)=>{for(let M=0;M<p.length;M++){const L=u[M],C=p[M],A=L.el&&(L.type===Ye||!Vt(L,C)||L.shapeFlag&70)?f(L.el):x;y(L,C,A,null,w,b,I,F,!0)}},W=(u,p,x,w,b,I,F)=>{if(x!==w){if(x!==ie)for(const M in x)!ts(M)&&!(M in w)&&n(u,M,x[M],null,F,p.children,b,I,pe);for(const M in w){if(ts(M))continue;const L=w[M],C=x[M];L!==C&&M!=="value"&&n(u,M,C,L,F,p.children,b,I,pe)}"value"in w&&n(u,"value",x.value,w.value,F)}},ee=(u,p,x,w,b,I,F,M,L)=>{const C=p.el=u?u.el:a(""),A=p.anchor=u?u.anchor:a("");let{patchFlag:U,dynamicChildren:z,slotScopeIds:Y}=p;Y&&(M=M?M.concat(Y):Y),u==null?(i(C,x,w),i(A,x,w),D(p.children||[],x,A,b,I,F,M,L)):U>0&&U&64&&z&&u.dynamicChildren?(V(u.dynamicChildren,z,x,b,I,F,M),(p.key!=null||b&&p===b.subTree)&&po(u,p,!0)):Q(u,p,x,A,b,I,F,M,L)},re=(u,p,x,w,b,I,F,M,L)=>{p.slotScopeIds=M,u==null?p.shapeFlag&512?b.ctx.activate(p,x,w,F,L):ce(p,x,w,b,I,F,L):q(u,p,L)},ce=(u,p,x,w,b,I,F)=>{const M=u.component=Uc(u,w,b);if(Jn(u)&&(M.ctx.renderer=De),Wc(M),M.asyncDep){if(b&&b.registerDep(M,X),!u.el){const L=M.subTree=dt(ps);S(null,L,p,x)}}else X(M,u,p,x,b,I,F)},q=(u,p,x)=>{const w=p.component=u.component;if(Kl(u,p,x))if(w.asyncDep&&!w.asyncResolved){j(w,p,x);return}else w.next=p,Ul(w.update),w.effect.dirty=!0,w.update();else p.el=u.el,w.vnode=p},X=(u,p,x,w,b,I,F)=>{const M=()=>{if(u.isMounted){let{next:A,bu:U,u:z,parent:Y,vnode:G}=u;{const Ct=go(u);if(Ct){A&&(A.el=G.el,j(u,A,F)),Ct.asyncDep.then(()=>{u.isUnmounted||M()});return}}let te=A,se;mt(u,!1),A?(A.el=G.el,j(u,A,F)):A=G,U&&ui(U),(se=A.props&&A.props.onVnodeBeforeUpdate)&&Xe(se,Y,A,G),mt(u,!0);const ge=gi(u),Ue=u.subTree;u.subTree=ge,y(Ue,ge,f(Ue.el),Ie(Ue),u,b,I),A.el=ge.el,te===null&&Gl(u,ge.el),z&&Me(z,b),(se=A.props&&A.props.onVnodeUpdated)&&Me(()=>Xe(se,Y,A,G),b)}else{let A;const{el:U,props:z}=p,{bm:Y,m:G,parent:te}=u,se=Us(p);if(mt(u,!1),Y&&ui(Y),!se&&(A=z&&z.onVnodeBeforeMount)&&Xe(A,te,p),mt(u,!0),U&&oe){const ge=()=>{u.subTree=gi(u),oe(U,u.subTree,u,b,null)};se?p.type.__asyncLoader().then(()=>!u.isUnmounted&&ge()):ge()}else{const ge=u.subTree=gi(u);y(null,ge,x,w,u,b,I),p.el=ge.el}if(G&&Me(G,b),!se&&(A=z&&z.onVnodeMounted)){const ge=p;Me(()=>Xe(A,te,ge),b)}(p.shapeFlag&256||te&&Us(te.vnode)&&te.vnode.shapeFlag&256)&&u.a&&Me(u.a,b),u.isMounted=!0,p=x=w=null}},L=u.effect=new Qi(M,$e,()=>or(C),u.scope),C=u.update=()=>{L.dirty&&L.run()};C.id=u.uid,mt(u,!0),C()},j=(u,p,x)=>{p.component=u;const w=u.vnode.props;u.vnode=p,u.next=null,Tc(u,p.props,w,x),Rc(u,p.children,x),ft(),zr(u),pt()},Q=(u,p,x,w,b,I,F,M,L=!1)=>{const C=u&&u.children,A=u?u.shapeFlag:0,U=p.children,{patchFlag:z,shapeFlag:Y}=p;if(z>0){if(z&128){Re(C,U,x,w,b,I,F,M,L);return}else if(z&256){we(C,U,x,w,b,I,F,M,L);return}}Y&8?(A&16&&pe(C,b,I),U!==C&&h(x,U)):A&16?Y&16?Re(C,U,x,w,b,I,F,M,L):pe(C,b,I,!0):(A&8&&h(x,""),Y&16&&D(U,x,w,b,I,F,M,L))},we=(u,p,x,w,b,I,F,M,L)=>{u=u||$t,p=p||$t;const C=u.length,A=p.length,U=Math.min(C,A);let z;for(z=0;z<U;z++){const Y=p[z]=L?ot(p[z]):Ve(p[z]);y(u[z],Y,x,null,b,I,F,M,L)}C>A?pe(u,b,I,!0,!1,U):D(p,x,w,b,I,F,M,L,U)},Re=(u,p,x,w,b,I,F,M,L)=>{let C=0;const A=p.length;let U=u.length-1,z=A-1;for(;C<=U&&C<=z;){const Y=u[C],G=p[C]=L?ot(p[C]):Ve(p[C]);if(Vt(Y,G))y(Y,G,x,null,b,I,F,M,L);else break;C++}for(;C<=U&&C<=z;){const Y=u[U],G=p[z]=L?ot(p[z]):Ve(p[z]);if(Vt(Y,G))y(Y,G,x,null,b,I,F,M,L);else break;U--,z--}if(C>U){if(C<=z){const Y=z+1,G=Y<A?p[Y].el:w;for(;C<=z;)y(null,p[C]=L?ot(p[C]):Ve(p[C]),x,G,b,I,F,M,L),C++}}else if(C>z)for(;C<=U;)ye(u[C],b,I,!0),C++;else{const Y=C,G=C,te=new Map;for(C=G;C<=z;C++){const Pe=p[C]=L?ot(p[C]):Ve(p[C]);Pe.key!=null&&te.set(Pe.key,C)}let se,ge=0;const Ue=z-G+1;let Ct=!1,ur=0;const Ht=new Array(Ue);for(C=0;C<Ue;C++)Ht[C]=0;for(C=Y;C<=U;C++){const Pe=u[C];if(ge>=Ue){ye(Pe,b,I,!0);continue}let je;if(Pe.key!=null)je=te.get(Pe.key);else for(se=G;se<=z;se++)if(Ht[se-G]===0&&Vt(Pe,p[se])){je=se;break}je===void 0?ye(Pe,b,I,!0):(Ht[je-G]=C+1,je>=ur?ur=je:Ct=!0,y(Pe,p[je],x,null,b,I,F,M,L),ge++)}const fr=Ct?Fc(Ht):$t;for(se=fr.length-1,C=Ue-1;C>=0;C--){const Pe=G+C,je=p[Pe],pr=Pe+1<A?p[Pe+1].el:w;Ht[C]===0?y(null,je,x,pr,b,I,F,M,L):Ct&&(se<0||C!==fr[se]?Ee(je,x,pr,2):se--)}}},Ee=(u,p,x,w,b=null)=>{const{el:I,type:F,transition:M,children:L,shapeFlag:C}=u;if(C&6){Ee(u.component.subTree,p,x,w);return}if(C&128){u.suspense.move(p,x,w);return}if(C&64){F.move(u,p,x,De);return}if(F===Ye){i(I,p,x);for(let U=0;U<L.length;U++)Ee(L[U],p,x,w);i(u.anchor,p,x);return}if(F===yi){T(u,p,x);return}if(w!==2&&C&1&&M)if(w===0)M.beforeEnter(I),i(I,p,x),Me(()=>M.enter(I),b);else{const{leave:U,delayLeave:z,afterLeave:Y}=M,G=()=>i(I,p,x),te=()=>{U(I,()=>{G(),Y&&Y()})};z?z(I,G,te):te()}else i(I,p,x)},ye=(u,p,x,w=!1,b=!1)=>{const{type:I,props:F,ref:M,children:L,dynamicChildren:C,shapeFlag:A,patchFlag:U,dirs:z}=u;if(M!=null&&$i(M,null,x,u,!0),A&256){p.ctx.deactivate(u);return}const Y=A&1&&z,G=!Us(u);let te;if(G&&(te=F&&F.onVnodeBeforeUnmount)&&Xe(te,p,u),A&6)St(u.component,x,w);else{if(A&128){u.suspense.unmount(x,w);return}Y&&gt(u,null,p,"beforeUnmount"),A&64?u.type.remove(u,p,x,b,De,w):C&&(I!==Ye||U>0&&U&64)?pe(C,p,x,!1,!0):(I===Ye&&U&384||!b&&A&16)&&pe(L,p,x),w&&xs(u)}(G&&(te=F&&F.onVnodeUnmounted)||Y)&&Me(()=>{te&&Xe(te,p,u),Y&&gt(u,null,p,"unmounted")},x)},xs=u=>{const{type:p,el:x,anchor:w,transition:b}=u;if(p===Ye){oi(x,w);return}if(p===yi){R(u);return}const I=()=>{r(x),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(u.shapeFlag&1&&b&&!b.persisted){const{leave:F,delayLeave:M}=b,L=()=>F(x,I);M?M(u.el,I,L):L()}else I()},oi=(u,p)=>{let x;for(;u!==p;)x=m(u),r(u),u=x;r(p)},St=(u,p,x)=>{const{bum:w,scope:b,update:I,subTree:F,um:M}=u;w&&ui(w),b.stop(),I&&(I.active=!1,ye(F,u,p,x)),M&&Me(M,p),Me(()=>{u.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},pe=(u,p,x,w=!1,b=!1,I=0)=>{for(let F=I;F<u.length;F++)ye(u[F],p,x,w,b)},Ie=u=>u.shapeFlag&6?Ie(u.component.subTree):u.shapeFlag&128?u.suspense.next():m(u.anchor||u.el);let fe=!1;const it=(u,p,x)=>{u==null?p._vnode&&ye(p._vnode,null,null,!0):y(p._vnode||null,u,p,null,null,null,x),fe||(fe=!0,zr(),Vn(),fe=!1),p._vnode=u},De={p:y,um:ye,m:Ee,r:xs,mt:ce,mc:D,pc:Q,pbc:V,n:Ie,o:s};let Ae,oe;return{render:it,hydrate:Ae,createApp:_c(it,Ae)}}function xi({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function mt({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function Lc(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function po(s,t,e=!1){const i=s.children,r=t.children;if(H(i)&&H(r))for(let n=0;n<i.length;n++){const o=i[n];let a=r[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[n]=ot(r[n]),a.el=o.el),e||po(o,a)),a.type===ri&&(a.el=o.el)}}function Fc(s){const t=s.slice(),e=[0];let i,r,n,o,a;const l=s.length;for(i=0;i<l;i++){const d=s[i];if(d!==0){if(r=e[e.length-1],s[r]<d){t[i]=r,e.push(i);continue}for(n=0,o=e.length-1;n<o;)a=n+o>>1,s[e[a]]<d?n=a+1:o=a;d<s[e[n]]&&(n>0&&(t[i]=e[n-1]),e[n]=i)}}for(n=e.length,o=e[n-1];n-- >0;)e[n]=o,o=t[o];return e}function go(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:go(t)}const Ec=s=>s.__isTeleport,Ye=Symbol.for("v-fgt"),ri=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),yi=Symbol.for("v-stc"),os=[];let He=null;function Nt(s=!1){os.push(He=s?null:[])}function Pc(){os.pop(),He=os[os.length-1]||null}let gs=1;function Gr(s){gs+=s}function Nc(s){return s.dynamicChildren=gs>0?He||$t:null,Pc(),gs>0&&He&&He.push(s),s}function At(s,t,e,i,r,n){return Nc(qe(s,t,e,i,r,n,!0))}function Ac(s){return s?s.__v_isVNode===!0:!1}function Vt(s,t){return s.type===t.type&&s.key===t.key}const mo=({key:s})=>s??null,Ys=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Ce(s)||Fe(s)||K(s)?{i:Ge,r:s,k:t,f:!!e}:s:null);function qe(s,t=null,e=null,i=0,r=null,n=s===Ye?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&mo(t),ref:t&&Ys(t),scopeId:qn,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ge};return a?(cr(l,e),n&128&&s.normalize(l)):e&&(l.shapeFlag|=Ce(e)?8:16),gs>0&&!o&&He&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&He.push(l),l}const dt=Oc;function Oc(s,t=null,e=null,i=0,r=null,n=!1){if((!s||s===ql)&&(s=ps),Ac(s)){const a=Wt(s,t,!0);return e&&cr(a,e),gs>0&&!n&&He&&(a.shapeFlag&6?He[He.indexOf(s)]=a:He.push(a)),a.patchFlag|=-2,a}if(Xc(s)&&(s=s.__vccOpts),t){t=kc(t);let{class:a,style:l}=t;a&&!Ce(a)&&(t.class=qi(a)),ne(l)&&($n(l)&&!H(l)&&(l=xe({},l)),t.style=Gi(l))}const o=Ce(s)?1:Ql(s)?128:Ec(s)?64:ne(s)?4:K(s)?2:0;return qe(s,t,e,i,r,o,n,!0)}function kc(s){return s?$n(s)||ao(s)?xe({},s):s:null}function Wt(s,t,e=!1,i=!1){const{props:r,ref:n,patchFlag:o,children:a,transition:l}=s,d=t?zc(r||{},t):r,h={__v_isVNode:!0,__v_skip:!0,type:s.type,props:d,key:d&&mo(d),ref:t&&t.ref?e&&n?H(n)?n.concat(Ys(t)):[n,Ys(t)]:Ys(t):n,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==Ye?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Wt(s.ssContent),ssFallback:s.ssFallback&&Wt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&i&&(h.transition=l.clone(h)),h}function Bc(s=" ",t=0){return dt(ri,null,s,t)}function Ve(s){return s==null||typeof s=="boolean"?dt(ps):H(s)?dt(Ye,null,s.slice()):typeof s=="object"?ot(s):dt(ri,null,String(s))}function ot(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Wt(s)}function cr(s,t){let e=0;const{shapeFlag:i}=s;if(t==null)t=null;else if(H(t))e=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),cr(s,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!ao(t)?t._ctx=Ge:r===3&&Ge&&(Ge.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else K(t)?(t={default:t,_ctx:Ge},e=32):(t=String(t),i&64?(e=16,t=[Bc(t)]):e=8);s.children=t,s.shapeFlag|=e}function zc(...s){const t={};for(let e=0;e<s.length;e++){const i=s[e];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=qi([t.class,i.class]));else if(r==="style")t.style=Gi([t.style,i.style]);else if(Xi(r)){const n=t[r],o=i[r];o&&n!==o&&!(H(n)&&n.includes(o))&&(t[r]=n?[].concat(n,o):o)}else r!==""&&(t[r]=i[r])}return t}function Xe(s,t,e,i=null){Ze(s,t,7,[e,i])}const $c=ro();let Dc=0;function Uc(s,t,e){const i=s.type,r=(t?t.appContext:s.appContext)||$c,n={uid:Dc++,vnode:s,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new al(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:co(i,r),emitsOptions:Gn(i,r),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:i.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Hl.bind(null,n),s.ce&&s.ce(n),n}let Se=null,Gs,Di;{const s=Cn(),t=(e,i)=>{let r;return(r=s[e])||(r=s[e]=[]),r.push(i),n=>{r.length>1?r.forEach(o=>o(n)):r[0](n)}};Gs=t("__VUE_INSTANCE_SETTERS__",e=>Se=e),Di=t("__VUE_SSR_SETTERS__",e=>ni=e)}const ms=s=>{const t=Se;return Gs(s),s.scope.on(),()=>{s.scope.off(),Gs(t)}},qr=()=>{Se&&Se.scope.off(),Gs(null)};function xo(s){return s.vnode.shapeFlag&4}let ni=!1;function Wc(s,t=!1){t&&Di(t);const{props:e,children:i}=s.vnode,r=xo(s);bc(s,e,r,t),Cc(s,i);const n=r?Yc(s,t):void 0;return t&&Di(!1),n}function Yc(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,fc);const{setup:i}=e;if(i){const r=s.setupContext=i.length>1?jc(s):null,n=ms(s);ft();const o=ht(i,s,0,[s.props,r]);if(pt(),n(),wn(o)){if(o.then(qr,qr),t)return o.then(a=>{Qr(s,a,t)}).catch(a=>{ti(a,s,0)});s.asyncDep=o}else Qr(s,o,t)}else yo(s,t)}function Qr(s,t,e){K(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:ne(t)&&(s.setupState=Yn(t)),yo(s,e)}let Zr;function yo(s,t,e){const i=s.type;if(!s.render){if(!t&&Zr&&!i.render){const r=i.template||ar(s).template;if(r){const{isCustomElement:n,compilerOptions:o}=s.appContext.config,{delimiters:a,compilerOptions:l}=i,d=xe(xe({isCustomElement:n,delimiters:a},o),l);i.render=Zr(r,d)}}s.render=i.render||$e}{const r=ms(s);ft();try{pc(s)}finally{pt(),r()}}}const Hc={get(s,t){return Le(s,"get",""),s[t]}};function jc(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Hc),slots:s.slots,emit:s.emit,expose:t}}function hr(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(Yn(Dn(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in rs)return rs[e](s)},has(t,e){return e in t||e in rs}}))}function Xc(s){return K(s)&&"__vccOpts"in s}const Vc=(s,t)=>Fl(s,t,ni),Kc="3.4.26",dr={createElement(s){const t=new Qe(s);return Dn(t),t},createText(s){return{name:"TextNode",text:s,parent:void 0}},createComment(s){},setText(s,t){lt("Replace Text: ",s,t),s.text=t;const e=s.parent;B(e),e.text=e.getText()},setElementText(s,t){lt("SetElementText: ",s,t);const e={name:"TextNode",text:t,parent:void 0};s.children.insert(e),s.text=s.getText()},setProperty(s,t,e=!0,i=!0){s[t]=i},insert(s,t,e){lt("INSERT: ",t,s,e),t.children.insert(s,e),s._queueDelete=!1,s instanceof Qe?t.lng&&s.render():t.isTextNode()&&(t.text=t.getText())},isTextNode(s){return s.isTextNode()},remove(s){lt("REMOVE: ",s),s.parent.children.remove(s),s._queueDelete=!0,s instanceof Qe&&queueMicrotask(()=>s.destroy())},querySelector(s){},setScopeId(s,t){return s.id=t},parentNode(s){return s.parent},nextSibling(s){const t=s.parent.children||[],e=t.indexOf(s)+1;if(e<t.length)return t[e]}},Gc=dr.setProperty,qc=async function(s,t){const e=Da(Ne.rendererOptions,t);await e.init();const i=dr.createElement("App");return i.lng=e.root,Qc(s).mount(i),{rootNode:i,renderer:e}},{render:Th,createApp:Qc}=Ic(xe({patchProp:Gc},dr)),Zc="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",Jc="https://api.themoviedb.org/3";let vo,_o;const eh="w185",th={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Zc}};function vi(s,t=eh){return _o+t+s}function sh(s,t={}){return vo?Ui(s,t):wo().then(()=>Ui(s,t))}function Ui(s,t={}){return fetch(Jc+s,{...th,...t}).then(e=>e.json())}function wo(){return Ui("/configuration").then(s=>{var t;return vo=s,_o=(t=s.images)==null?void 0:t.secure_base_url,s})}const ih={get:sh,loadConfig:wo};function rh(s,t){return s.length>t?s.substring(0,t-3)+"...":s}function nh(s,t=7){const e=[];for(let i=0,r=s.length;i<r;i+=t)e.push(s.slice(i,i+t));return e}function oh(s=[]){return s.map(t=>({src:vi(t.poster_path||t.profile_path),tileSrc:vi(t.backdrop_path||t.profile_path,"w300"),backdrop:vi(t.backdrop_path,"w1280"),href:`/entity/${t.media_type||"people"}/${t.id}`,shortTitle:rh(t.title||t.name,30),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}}))}const _i=new Map,As=new Map;function ah(s){return t=>{const e=`/trending/${s}/week?page=${t}`;if(_i.has(e))return _i.get(e);const i=ih.get(e).then(r=>{const n=r.results.filter(l=>!l.adult),o=(As.has(s)?As.get(s):[]).concat(oh(n)),a=nh(o);return a[a.length-1].length<7?As.set(s,a.pop()):As.delete(s),a});return _i.set(e,i),i}}const wi=1200,lh={__name:"ContentBlock",props:{title:String,description:String},setup(s){const t={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:wi,height:220,gap:16},e={fontSize:50,fontFamily:"Ubuntu",fontWeight:700,maxLines:1,width:wi,contain:"width"},i={fontSize:28,fontFamily:"Ubuntu",fontWeight:400,lineHeight:32,width:wi,maxLines:3,contain:"width"};return(r,n)=>(Nt(),At("node",{id:"contentBlock",style:t},[qe("text",{style:e},Lr(s.title),1),qe("text",{style:i},Lr(s.description),1)]))}};function Os(s){return typeof s=="function"}const Jr={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},bo=is([]),ch=s=>{bo.value=s},hh=s=>{let t=[];Ds(()=>Hn.value,(i,r)=>{let n=i;const o=[];for(;n;)n.states.has("focus")||(n.states.add("focus"),Os(n.onFocus)&&n.onFocus.call(n,i,r)),o.push(n),n=n.parent;t.forEach(a=>{o.includes(a)||(a.states.remove("focus"),Os(a.onBlur)&&a.onBlur.call(a,i,r))}),t=o,ch(o)});const e=i=>{if(i){const r=Jr[i.key]||Jr[i.keyCode],n=bo.value;let o;for(const a of n){if(o=o||a,r){const l=a[`on${r}`];if(Os(l)&&l.call(a,i,a,o)===!0)break}else console.log(`Unhandled key event: ${i.key||i.keyCode}`);if(Os(a.onKeyPress)&&a.onKeyPress.call(a,i,r,a,o)===!0)break}return!1}};document.addEventListener("keydown",e)};function ks(s){return function(){var n,o,a;const t=this.children.length,e=this.wrap,i=this.selected||0;if(t===0)return!1;if(s==="right"||s==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((n=this.children[this.selected])!=null&&n.skipFocus);else if(s==="left"||s==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===void 0&&(this.selected=i,(a=this.children[this.selected])!=null&&a.states.has("focus")))return!1;const r=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,r,this.selected,i),this.plinko&&i!==void 0){const d=this.children[i].selected||0;r.selected=d<r.children.length?d:r.children.length-1}return r.setFocus(),!0}}const dh={style:{width:1920,height:1080}},uh=qe("node",{src:"./assets/vue.png",width:200,height:200,x:30,y:20},null,-1),fh=["onUp","onDown"],ph=["onRight","onLeft"],gh=["src"],mh={width:1920,height:1080,zIndex:-5},xh=qe("node",{src:"./assets/hero-mask-inverted.png",color:255,width:1920,height:1080},null,-1),yh="Follow the mythic journey of Paul Atreides as he unites with Chani and the Fremen while on a path of revenge against the conspirators who destroyed his family. Facing a choice between the love of his life and the fate of the known universe, Paul endeavors to prevent a terrible future only he can foresee.",vh={__name:"App",setup(s){hh();const t=is(1),e=is([]),i=is(null),r={alpha:t.value,color:4294967295},n=ks("right"),o=ks("left"),a=ks("up"),l=ks("down"),d={borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}};return to(()=>{ah("all")(1).then(h=>{e.value=h,setTimeout(()=>i.value.children[1].children[1].setFocus(),100)})}),(h,f)=>(Nt(),At("node",dh,[uh,dt(lh,{y:250,x:150,title:"Dune: Part 2",description:yh}),qe("node",{ref_key:"column",ref:i,onUp:Jt(a),onDown:Jt(l),x:150,y:450,width:1920,height:1080,display:"flex",flexDirection:"column"},[(Nt(!0),At(Ye,null,Dr(e.value,m=>(Nt(),At("node",{onRight:Jt(n),onLeft:Jt(o),display:"flex",justifyContent:"spaceBetween",width:1620,height:300},[(Nt(!0),At(Ye,null,Dr(m,g=>(Nt(),At("node",{style:d,src:g.src},null,8,gh))),256))],40,ph))),256))],40,fh),qe("node",mh,[qe("node",{ref:"bg1",src:"https://image.tmdb.org/t/p/w1280/87IVlclAfWL6mdicU1DDuxdwXwe.jpg",style:r},null,512),qe("node",{ref:"bg2",style:r,alpha:"0"},null,512),xh])]))}},_h=new URL("AppCoreExtensions-CxdzajE4.js",import.meta.url).href;Ne.debug=!1;Ne.animationsEnabled=!0;Ne.fontSettings.fontFamily="Ubuntu";Ne.fontSettings.color=4143380223;Ne.fontSettings.fontSize=32;Ne.rendererOptions={coreExtensionModule:_h,fpsUpdateInterval:200,enableInspector:!0};qc(vh);
//# sourceMappingURL=main-CfmMWNP4.js.map
